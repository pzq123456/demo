function U4(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const A=Object.getOwnPropertyDescriptor(i,s);A&&Object.defineProperty(n,s,A.get?A:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const h of A.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function i(s){if(s.ep)return;s.ep=!0;const A=t(s);fetch(s.href,A)}})();function ep(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function k4(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var ag={exports:{}},Bu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function z4(){if(d_)return Bu;d_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,A){var h=null;if(A!==void 0&&(h=""+A),s.key!==void 0&&(h=""+s.key),"key"in s){A={};for(var m in s)m!=="key"&&(A[m]=s[m])}else A=s;return s=A.ref,{$$typeof:n,type:i,key:h,ref:s!==void 0?s:null,props:A}}return Bu.Fragment=e,Bu.jsx=t,Bu.jsxs=t,Bu}var g_;function G4(){return g_||(g_=1,ag.exports=z4()),ag.exports}var Ti=G4(),Ag={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function V4(){if(m_)return Rt;m_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.iterator;function C(te){return te===null||typeof te!="object"?null:(te=S&&te[S]||te["@@iterator"],typeof te=="function"?te:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,G={};function j(te,De,Je){this.props=te,this.context=De,this.refs=G,this.updater=Je||L}j.prototype.isReactComponent={},j.prototype.setState=function(te,De){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,De,"setState")},j.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function H(){}H.prototype=j.prototype;function Y(te,De,Je){this.props=te,this.context=De,this.refs=G,this.updater=Je||L}var K=Y.prototype=new H;K.constructor=Y,B(K,j.prototype),K.isPureReactComponent=!0;var ee=Array.isArray,Z={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function be(te,De,Je,nt,Ve,Lt){return Je=Lt.ref,{$$typeof:n,type:te,key:De,ref:Je!==void 0?Je:null,props:Lt}}function he(te,De){return be(te.type,De,void 0,void 0,void 0,te.props)}function Ae(te){return typeof te=="object"&&te!==null&&te.$$typeof===n}function ye(te){var De={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(Je){return De[Je]})}var me=/\/+/g;function Ne(te,De){return typeof te=="object"&&te!==null&&te.key!=null?ye(""+te.key):De.toString(36)}function Be(){}function He(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(Be,Be):(te.status="pending",te.then(function(De){te.status==="pending"&&(te.status="fulfilled",te.value=De)},function(De){te.status==="pending"&&(te.status="rejected",te.reason=De)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function je(te,De,Je,nt,Ve){var Lt=typeof te;(Lt==="undefined"||Lt==="boolean")&&(te=null);var _t=!1;if(te===null)_t=!0;else switch(Lt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(te.$$typeof){case n:case e:_t=!0;break;case x:return _t=te._init,je(_t(te._payload),De,Je,nt,Ve)}}if(_t)return Ve=Ve(te),_t=nt===""?"."+Ne(te,0):nt,ee(Ve)?(Je="",_t!=null&&(Je=_t.replace(me,"$&/")+"/"),je(Ve,De,Je,"",function(Me){return Me})):Ve!=null&&(Ae(Ve)&&(Ve=he(Ve,Je+(Ve.key==null||te&&te.key===Ve.key?"":(""+Ve.key).replace(me,"$&/")+"/")+_t)),De.push(Ve)),1;_t=0;var kt=nt===""?".":nt+":";if(ee(te))for(var St=0;St<te.length;St++)nt=te[St],Lt=kt+Ne(nt,St),_t+=je(nt,De,Je,Lt,Ve);else if(St=C(te),typeof St=="function")for(te=St.call(te),St=0;!(nt=te.next()).done;)nt=nt.value,Lt=kt+Ne(nt,St++),_t+=je(nt,De,Je,Lt,Ve);else if(Lt==="object"){if(typeof te.then=="function")return je(He(te),De,Je,nt,Ve);throw De=String(te),Error("Objects are not valid as a React child (found: "+(De==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":De)+"). If you meant to render a collection of children, use an array instead.")}return _t}function Te(te,De,Je){if(te==null)return te;var nt=[],Ve=0;return je(te,nt,"","",function(Lt){return De.call(Je,Lt,Ve++)}),nt}function We(te){if(te._status===-1){var De=te._result;De=De(),De.then(function(Je){(te._status===0||te._status===-1)&&(te._status=1,te._result=Je)},function(Je){(te._status===0||te._status===-1)&&(te._status=2,te._result=Je)}),te._status===-1&&(te._status=0,te._result=De)}if(te._status===1)return te._result.default;throw te._result}var $e=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var De=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(De))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)};function Et(){}return Rt.Children={map:Te,forEach:function(te,De,Je){Te(te,function(){De.apply(this,arguments)},Je)},count:function(te){var De=0;return Te(te,function(){De++}),De},toArray:function(te){return Te(te,function(De){return De})||[]},only:function(te){if(!Ae(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},Rt.Component=j,Rt.Fragment=t,Rt.Profiler=s,Rt.PureComponent=Y,Rt.StrictMode=i,Rt.Suspense=_,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,Rt.act=function(){throw Error("act(...) is not supported in production builds of React.")},Rt.cache=function(te){return function(){return te.apply(null,arguments)}},Rt.cloneElement=function(te,De,Je){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var nt=B({},te.props),Ve=te.key,Lt=void 0;if(De!=null)for(_t in De.ref!==void 0&&(Lt=void 0),De.key!==void 0&&(Ve=""+De.key),De)!se.call(De,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&De.ref===void 0||(nt[_t]=De[_t]);var _t=arguments.length-2;if(_t===1)nt.children=Je;else if(1<_t){for(var kt=Array(_t),St=0;St<_t;St++)kt[St]=arguments[St+2];nt.children=kt}return be(te.type,Ve,void 0,void 0,Lt,nt)},Rt.createContext=function(te){return te={$$typeof:h,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:A,_context:te},te},Rt.createElement=function(te,De,Je){var nt,Ve={},Lt=null;if(De!=null)for(nt in De.key!==void 0&&(Lt=""+De.key),De)se.call(De,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(Ve[nt]=De[nt]);var _t=arguments.length-2;if(_t===1)Ve.children=Je;else if(1<_t){for(var kt=Array(_t),St=0;St<_t;St++)kt[St]=arguments[St+2];Ve.children=kt}if(te&&te.defaultProps)for(nt in _t=te.defaultProps,_t)Ve[nt]===void 0&&(Ve[nt]=_t[nt]);return be(te,Lt,void 0,void 0,null,Ve)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(te){return{$$typeof:m,render:te}},Rt.isValidElement=Ae,Rt.lazy=function(te){return{$$typeof:x,_payload:{_status:-1,_result:te},_init:We}},Rt.memo=function(te,De){return{$$typeof:E,type:te,compare:De===void 0?null:De}},Rt.startTransition=function(te){var De=Z.T,Je={};Z.T=Je;try{var nt=te(),Ve=Z.S;Ve!==null&&Ve(Je,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(Et,$e)}catch(Lt){$e(Lt)}finally{Z.T=De}},Rt.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},Rt.use=function(te){return Z.H.use(te)},Rt.useActionState=function(te,De,Je){return Z.H.useActionState(te,De,Je)},Rt.useCallback=function(te,De){return Z.H.useCallback(te,De)},Rt.useContext=function(te){return Z.H.useContext(te)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(te,De){return Z.H.useDeferredValue(te,De)},Rt.useEffect=function(te,De){return Z.H.useEffect(te,De)},Rt.useId=function(){return Z.H.useId()},Rt.useImperativeHandle=function(te,De,Je){return Z.H.useImperativeHandle(te,De,Je)},Rt.useInsertionEffect=function(te,De){return Z.H.useInsertionEffect(te,De)},Rt.useLayoutEffect=function(te,De){return Z.H.useLayoutEffect(te,De)},Rt.useMemo=function(te,De){return Z.H.useMemo(te,De)},Rt.useOptimistic=function(te,De){return Z.H.useOptimistic(te,De)},Rt.useReducer=function(te,De,Je){return Z.H.useReducer(te,De,Je)},Rt.useRef=function(te){return Z.H.useRef(te)},Rt.useState=function(te){return Z.H.useState(te)},Rt.useSyncExternalStore=function(te,De,Je){return Z.H.useSyncExternalStore(te,De,Je)},Rt.useTransition=function(){return Z.H.useTransition()},Rt.version="19.0.0",Rt}var p_;function tp(){return p_||(p_=1,Ag.exports=V4()),Ag.exports}var ze=tp();const H4=ep(ze);var og={exports:{}},Pu={},lg={exports:{}},ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function j4(){return __||(__=1,function(n){function e(Te,We){var $e=Te.length;Te.push(We);e:for(;0<$e;){var Et=$e-1>>>1,te=Te[Et];if(0<s(te,We))Te[Et]=We,Te[$e]=te,$e=Et;else break e}}function t(Te){return Te.length===0?null:Te[0]}function i(Te){if(Te.length===0)return null;var We=Te[0],$e=Te.pop();if($e!==We){Te[0]=$e;e:for(var Et=0,te=Te.length,De=te>>>1;Et<De;){var Je=2*(Et+1)-1,nt=Te[Je],Ve=Je+1,Lt=Te[Ve];if(0>s(nt,$e))Ve<te&&0>s(Lt,nt)?(Te[Et]=Lt,Te[Ve]=$e,Et=Ve):(Te[Et]=nt,Te[Je]=$e,Et=Je);else if(Ve<te&&0>s(Lt,$e))Te[Et]=Lt,Te[Ve]=$e,Et=Ve;else break e}}return We}function s(Te,We){var $e=Te.sortIndex-We.sortIndex;return $e!==0?$e:Te.id-We.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var A=performance;n.unstable_now=function(){return A.now()}}else{var h=Date,m=h.now();n.unstable_now=function(){return h.now()-m}}var _=[],E=[],x=1,S=null,C=3,L=!1,B=!1,G=!1,j=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function K(Te){for(var We=t(E);We!==null;){if(We.callback===null)i(E);else if(We.startTime<=Te)i(E),We.sortIndex=We.expirationTime,e(_,We);else break;We=t(E)}}function ee(Te){if(G=!1,K(Te),!B)if(t(_)!==null)B=!0,He();else{var We=t(E);We!==null&&je(ee,We.startTime-Te)}}var Z=!1,se=-1,be=5,he=-1;function Ae(){return!(n.unstable_now()-he<be)}function ye(){if(Z){var Te=n.unstable_now();he=Te;var We=!0;try{e:{B=!1,G&&(G=!1,H(se),se=-1),L=!0;var $e=C;try{t:{for(K(Te),S=t(_);S!==null&&!(S.expirationTime>Te&&Ae());){var Et=S.callback;if(typeof Et=="function"){S.callback=null,C=S.priorityLevel;var te=Et(S.expirationTime<=Te);if(Te=n.unstable_now(),typeof te=="function"){S.callback=te,K(Te),We=!0;break t}S===t(_)&&i(_),K(Te)}else i(_);S=t(_)}if(S!==null)We=!0;else{var De=t(E);De!==null&&je(ee,De.startTime-Te),We=!1}}break e}finally{S=null,C=$e,L=!1}We=void 0}}finally{We?me():Z=!1}}}var me;if(typeof Y=="function")me=function(){Y(ye)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,Be=Ne.port2;Ne.port1.onmessage=ye,me=function(){Be.postMessage(null)}}else me=function(){j(ye,0)};function He(){Z||(Z=!0,me())}function je(Te,We){se=j(function(){Te(n.unstable_now())},We)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Te){Te.callback=null},n.unstable_continueExecution=function(){B||L||(B=!0,He())},n.unstable_forceFrameRate=function(Te){0>Te||125<Te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<Te?Math.floor(1e3/Te):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_getFirstCallbackNode=function(){return t(_)},n.unstable_next=function(Te){switch(C){case 1:case 2:case 3:var We=3;break;default:We=C}var $e=C;C=We;try{return Te()}finally{C=$e}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Te,We){switch(Te){case 1:case 2:case 3:case 4:case 5:break;default:Te=3}var $e=C;C=Te;try{return We()}finally{C=$e}},n.unstable_scheduleCallback=function(Te,We,$e){var Et=n.unstable_now();switch(typeof $e=="object"&&$e!==null?($e=$e.delay,$e=typeof $e=="number"&&0<$e?Et+$e:Et):$e=Et,Te){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=$e+te,Te={id:x++,callback:We,priorityLevel:Te,startTime:$e,expirationTime:te,sortIndex:-1},$e>Et?(Te.sortIndex=$e,e(E,Te),t(_)===null&&Te===t(E)&&(G?(H(se),se=-1):G=!0,je(ee,$e-Et))):(Te.sortIndex=te,e(_,Te),B||L||(B=!0,He())),Te},n.unstable_shouldYield=Ae,n.unstable_wrapCallback=function(Te){var We=C;return function(){var $e=C;C=We;try{return Te.apply(this,arguments)}finally{C=$e}}}}(ug)),ug}var b_;function Y4(){return b_||(b_=1,lg.exports=j4()),lg.exports}var cg={exports:{}},Ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function Q4(){if(E_)return Ei;E_=1;var n=tp();function e(_){var E="https://react.dev/errors/"+_;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)E+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+_+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function A(_,E,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:S==null?null:""+S,children:_,containerInfo:E,implementation:x}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(_,E){if(_==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return Ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ei.createPortal=function(_,E){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(e(299));return A(_,E,null,x)},Ei.flushSync=function(_){var E=h.T,x=i.p;try{if(h.T=null,i.p=2,_)return _()}finally{h.T=E,i.p=x,i.d.f()}},Ei.preconnect=function(_,E){typeof _=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,i.d.C(_,E))},Ei.prefetchDNS=function(_){typeof _=="string"&&i.d.D(_)},Ei.preinit=function(_,E){if(typeof _=="string"&&E&&typeof E.as=="string"){var x=E.as,S=m(x,E.crossOrigin),C=typeof E.integrity=="string"?E.integrity:void 0,L=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;x==="style"?i.d.S(_,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:S,integrity:C,fetchPriority:L}):x==="script"&&i.d.X(_,{crossOrigin:S,integrity:C,fetchPriority:L,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},Ei.preinitModule=function(_,E){if(typeof _=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var x=m(E.as,E.crossOrigin);i.d.M(_,{crossOrigin:x,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&i.d.M(_)},Ei.preload=function(_,E){if(typeof _=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var x=E.as,S=m(x,E.crossOrigin);i.d.L(_,x,{crossOrigin:S,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},Ei.preloadModule=function(_,E){if(typeof _=="string")if(E){var x=m(E.as,E.crossOrigin);i.d.m(_,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:x,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else i.d.m(_)},Ei.requestFormReset=function(_){i.d.r(_)},Ei.unstable_batchedUpdates=function(_,E){return _(E)},Ei.useFormState=function(_,E,x){return h.H.useFormState(_,E,x)},Ei.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ei.version="19.0.0",Ei}var y_;function Ky(){if(y_)return cg.exports;y_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cg.exports=Q4(),cg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function X4(){if(v_)return Pu;v_=1;var n=Y4(),e=tp(),t=Ky();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)a+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var A=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),L=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),ee=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function se(r){return r===null||typeof r!="object"?null:(r=Z&&r[Z]||r["@@iterator"],typeof r=="function"?r:null)}var be=Symbol.for("react.client.reference");function he(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===be?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case _:return"Fragment";case m:return"Portal";case x:return"Profiler";case E:return"StrictMode";case G:return"Suspense";case j:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Provider";case C:return(r._context.displayName||"Context")+".Consumer";case B:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return a=r.displayName||null,a!==null?a:he(r.type)||"Memo";case Y:a=r._payload,r=r._init;try{return he(r(a))}catch{}}return null}var Ae=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye=Object.assign,me,Ne;function Be(r){if(me===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\n( *(at )?)/);me=a&&a[1]||"",Ne=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+r+Ne}var He=!1;function je(r,a){if(!r||He)return"";He=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(a){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(_e){var de=_e}Reflect.construct(r,[],Oe)}else{try{Oe.call()}catch(_e){de=_e}r.call(Oe.prototype)}}else{try{throw Error()}catch(_e){de=_e}(Oe=r())&&typeof Oe.catch=="function"&&Oe.catch(function(){})}}catch(_e){if(_e&&de&&typeof _e.stack=="string")return[_e.stack,de.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),O=w[0],F=w[1];if(O&&F){var W=O.split(`
`),re=F.split(`
`);for(v=g=0;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;for(;v<re.length&&!re[v].includes("DetermineComponentFrameRoot");)v++;if(g===W.length||v===re.length)for(g=W.length-1,v=re.length-1;1<=g&&0<=v&&W[g]!==re[v];)v--;for(;1<=g&&0<=v;g--,v--)if(W[g]!==re[v]){if(g!==1||v!==1)do if(g--,v--,0>v||W[g]!==re[v]){var Ee=`
`+W[g].replace(" at new "," at ");return r.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",r.displayName)),Ee}while(1<=g&&0<=v);break}}}finally{He=!1,Error.prepareStackTrace=f}return(f=r?r.displayName||r.name:"")?Be(f):""}function Te(r){switch(r.tag){case 26:case 27:case 5:return Be(r.type);case 16:return Be("Lazy");case 13:return Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return r=je(r.type,!1),r;case 11:return r=je(r.type.render,!1),r;case 1:return r=je(r.type,!0),r;default:return""}}function We(r){try{var a="";do a+=Te(r),r=r.return;while(r);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function $e(r){var a=r,f=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,a.flags&4098&&(f=a.return),r=a.return;while(r)}return a.tag===3?f:null}function Et(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function te(r){if($e(r)!==r)throw Error(i(188))}function De(r){var a=r.alternate;if(!a){if(a=$e(r),a===null)throw Error(i(188));return a!==r?null:r}for(var f=r,g=a;;){var v=f.return;if(v===null)break;var w=v.alternate;if(w===null){if(g=v.return,g!==null){f=g;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===f)return te(v),r;if(w===g)return te(v),a;w=w.sibling}throw Error(i(188))}if(f.return!==g.return)f=v,g=w;else{for(var O=!1,F=v.child;F;){if(F===f){O=!0,f=v,g=w;break}if(F===g){O=!0,g=v,f=w;break}F=F.sibling}if(!O){for(F=w.child;F;){if(F===f){O=!0,f=w,g=v;break}if(F===g){O=!0,g=w,f=v;break}F=F.sibling}if(!O)throw Error(i(189))}}if(f.alternate!==g)throw Error(i(190))}if(f.tag!==3)throw Error(i(188));return f.stateNode.current===f?r:a}function Je(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=Je(r),a!==null)return a;r=r.sibling}return null}var nt=Array.isArray,Ve=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Lt={pending:!1,data:null,method:null,action:null},_t=[],kt=-1;function St(r){return{current:r}}function Me(r){0>kt||(r.current=_t[kt],_t[kt]=null,kt--)}function Ge(r,a){kt++,_t[kt]=r.current,r.current=a}var lt=St(null),Ce=St(null),qt=St(null),Nt=St(null);function An(r,a){switch(Ge(qt,a),Ge(Ce,r),Ge(lt,null),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?H1(a):0;break;default:if(r=r===8?a.parentNode:a,a=r.tagName,r=r.namespaceURI)r=H1(r),a=j1(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Me(lt),Ge(lt,a)}function jt(){Me(lt),Me(Ce),Me(qt)}function nn(r){r.memoizedState!==null&&Ge(Nt,r);var a=lt.current,f=j1(a,r.type);a!==f&&(Ge(Ce,r),Ge(lt,f))}function hi(r){Ce.current===r&&(Me(lt),Me(Ce)),Nt.current===r&&(Me(Nt),Ru._currentValue=Lt)}var ta=Object.prototype.hasOwnProperty,Ur=n.unstable_scheduleCallback,on=n.unstable_cancelCallback,nA=n.unstable_shouldYield,no=n.unstable_requestPaint,Fn=n.unstable_now,iA=n.unstable_getCurrentPriorityLevel,io=n.unstable_ImmediatePriority,rA=n.unstable_UserBlockingPriority,kr=n.unstable_NormalPriority,sA=n.unstable_LowPriority,aA=n.unstable_IdlePriority,na=n.log,ia=n.unstable_setDisableYieldValue,fs=null,ii=null;function kl(r){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(fs,r,void 0,(r.current.flags&128)===128)}catch{}}function Qi(r){if(typeof na=="function"&&ia(r),ii&&typeof ii.setStrictMode=="function")try{ii.setStrictMode(fs,r)}catch{}}var ri=Math.clz32?Math.clz32:AA,ra=Math.log,zl=Math.LN2;function AA(r){return r>>>=0,r===0?32:31-(ra(r)/zl|0)|0}var hs=128,ds=4194304;function Se(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function sa(r,a){var f=r.pendingLanes;if(f===0)return 0;var g=0,v=r.suspendedLanes,w=r.pingedLanes,O=r.warmLanes;r=r.finishedLanes!==0;var F=f&134217727;return F!==0?(f=F&~v,f!==0?g=Se(f):(w&=F,w!==0?g=Se(w):r||(O=F&~O,O!==0&&(g=Se(O))))):(F=f&~v,F!==0?g=Se(F):w!==0?g=Se(w):r||(O=f&~O,O!==0&&(g=Se(O)))),g===0?0:a!==0&&a!==g&&!(a&v)&&(v=g&-g,O=a&-a,v>=O||v===32&&(O&4194176)!==0)?a:g}function zr(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Gl(r,a){switch(r){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oA(){var r=hs;return hs<<=1,!(hs&4194176)&&(hs=128),r}function aa(){var r=ds;return ds<<=1,!(ds&62914560)&&(ds=4194304),r}function Aa(r){for(var a=[],f=0;31>f;f++)a.push(r);return a}function Gr(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function gs(r,a,f,g,v,w){var O=r.pendingLanes;r.pendingLanes=f,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=f,r.entangledLanes&=f,r.errorRecoveryDisabledLanes&=f,r.shellSuspendCounter=0;var F=r.entanglements,W=r.expirationTimes,re=r.hiddenUpdates;for(f=O&~f;0<f;){var Ee=31-ri(f),Oe=1<<Ee;F[Ee]=0,W[Ee]=-1;var de=re[Ee];if(de!==null)for(re[Ee]=null,Ee=0;Ee<de.length;Ee++){var _e=de[Ee];_e!==null&&(_e.lane&=-536870913)}f&=~Oe}g!==0&&ms(r,g,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(O&~a))}function ms(r,a,f){r.pendingLanes|=a,r.suspendedLanes&=~a;var g=31-ri(a);r.entangledLanes|=a,r.entanglements[g]=r.entanglements[g]|1073741824|f&4194218}function oa(r,a){var f=r.entangledLanes|=a;for(r=r.entanglements;f;){var g=31-ri(f),v=1<<g;v&a|r[g]&a&&(r[g]|=a),f&=~v}}function Xi(r){return r&=-r,2<r?8<r?r&134217727?32:268435456:8:2}function oe(){var r=Ve.p;return r!==0?r:(r=window.event,r===void 0?32:o_(r.type))}function ve(r,a){var f=Ve.p;try{return Ve.p=r,a()}finally{Ve.p=f}}var Pe=Math.random().toString(36).slice(2),Xe="__reactFiber$"+Pe,u="__reactProps$"+Pe,U="__reactContainer$"+Pe,Mt="__reactEvents$"+Pe,zt="__reactListeners$"+Pe,dn="__reactHandles$"+Pe,At="__reactResources$"+Pe,bt="__reactMarker$"+Pe;function Yn(r){delete r[Xe],delete r[u],delete r[Mt],delete r[zt],delete r[dn]}function wt(r){var a=r[Xe];if(a)return a;for(var f=r.parentNode;f;){if(a=f[U]||f[Xe]){if(f=a.alternate,a.child!==null||f!==null&&f.child!==null)for(r=X1(r);r!==null;){if(f=r[Xe])return f;r=X1(r)}return a}r=f,f=r.parentNode}return null}function at(r){if(r=r[Xe]||r[U]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function On(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Wi(r){var a=r[At];return a||(a=r[At]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function fn(r){r[bt]=!0}var Un=new Set,En={};function mn(r,a){rn(r,a),rn(r+"Capture",a)}function rn(r,a){for(En[r]=a,r=0;r<a.length;r++)Un.add(a[r])}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ii=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dn={},ht={};function V(r){return ta.call(ht,r)?!0:ta.call(Dn,r)?!1:Ii.test(r)?ht[r]=!0:(Dn[r]=!0,!1)}function et(r,a,f){if(V(a))if(f===null)r.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var g=a.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+f)}}function zn(r,a,f){if(f===null)r.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+f)}}function di(r,a,f,g){if(g===null)r.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(f);return}r.setAttributeNS(a,f,""+g)}}function Qn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function la(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function lA(r){var a=la(r)?"checked":"value",f=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),g=""+r[a];if(!r.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,w=f.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return v.call(this)},set:function(O){g=""+O,w.call(this,O)}}),Object.defineProperty(r,a,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function I(r){r._valueTracker||(r._valueTracker=lA(r))}function ps(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var f=a.getValue(),g="";return r&&(g=la(r)?r.checked?"true":"false":r.value),r=g,r!==f?(a.setValue(r),!0):!1}function Si(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Vl=/[\n"\\]/g;function si(r){return r.replace(Vl,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function _s(r,a,f,g,v,w,O,F){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),a!=null?O==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Qn(a)):r.value!==""+Qn(a)&&(r.value=""+Qn(a)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),a!=null?ua(r,O,Qn(a)):f!=null?ua(r,O,Qn(f)):g!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?r.name=""+Qn(F):r.removeAttribute("name")}function uA(r,a,f,g,v,w,O,F){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),a!=null||f!=null){if(!(w!=="submit"&&w!=="reset"||a!=null))return;f=f!=null?""+Qn(f):"",a=a!=null?""+Qn(a):f,F||a===r.value||(r.value=a),r.defaultValue=a}g=g??v,g=typeof g!="function"&&typeof g!="symbol"&&!!g,r.checked=F?r.checked:!!g,r.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O)}function ua(r,a,f){a==="number"&&Si(r.ownerDocument)===r||r.defaultValue===""+f||(r.defaultValue=""+f)}function Tr(r,a,f,g){if(r=r.options,a){a={};for(var v=0;v<f.length;v++)a["$"+f[v]]=!0;for(f=0;f<r.length;f++)v=a.hasOwnProperty("$"+r[f].value),r[f].selected!==v&&(r[f].selected=v),v&&g&&(r[f].defaultSelected=!0)}else{for(f=""+Qn(f),a=null,v=0;v<r.length;v++){if(r[v].value===f){r[v].selected=!0,g&&(r[v].defaultSelected=!0);return}a!==null||r[v].disabled||(a=r[v])}a!==null&&(a.selected=!0)}}function P(r,a,f){if(a!=null&&(a=""+Qn(a),a!==r.value&&(r.value=a),f==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=f!=null?""+Qn(f):""}function k(r,a,f,g){if(a==null){if(g!=null){if(f!=null)throw Error(i(92));if(nt(g)){if(1<g.length)throw Error(i(93));g=g[0]}f=g}f==null&&(f=""),a=f}f=Qn(a),r.defaultValue=f,g=r.textContent,g===f&&g!==""&&g!==null&&(r.value=g)}function X(r,a){if(a){var f=r.firstChild;if(f&&f===r.lastChild&&f.nodeType===3){f.nodeValue=a;return}}r.textContent=a}var fe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Le(r,a,f){var g=a.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":g?r.setProperty(a,f):typeof f!="number"||f===0||fe.has(a)?a==="float"?r.cssFloat=f:r[a]=(""+f).trim():r[a]=f+"px"}function Ye(r,a,f){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||a!=null&&a.hasOwnProperty(g)||(g.indexOf("--")===0?r.setProperty(g,""):g==="float"?r.cssFloat="":r[g]="");for(var v in a)g=a[v],a.hasOwnProperty(v)&&f[v]!==g&&Le(r,v,g)}else for(var w in a)a.hasOwnProperty(w)&&Le(r,w,a[w])}function yt(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ln=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vn(r){return Ln.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ct=null;function cA(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var bs=null,ca=null;function Pc(r){var a=at(r);if(a&&(r=a.stateNode)){var f=r[u]||null;e:switch(r=a.stateNode,a.type){case"input":if(_s(r,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),a=f.name,f.type==="radio"&&a!=null){for(f=r;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+si(""+a)+'"][type="radio"]'),a=0;a<f.length;a++){var g=f[a];if(g!==r&&g.form===r.form){var v=g[u]||null;if(!v)throw Error(i(90));_s(g,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<f.length;a++)g=f[a],g.form===r.form&&ps(g)}break e;case"textarea":P(r,f.value,f.defaultValue);break e;case"select":a=f.value,a!=null&&Tr(r,!!f.multiple,a,!1)}}}var Hl=!1;function jl(r,a,f){if(Hl)return r(a,f);Hl=!0;try{var g=r(a);return g}finally{if(Hl=!1,(bs!==null||ca!==null)&&(Rf(),bs&&(a=bs,r=ca,ca=bs=null,Pc(a),r)))for(a=0;a<r.length;a++)Pc(r[a])}}function Es(r,a){var f=r.stateNode;if(f===null)return null;var g=f[u]||null;if(g===null)return null;f=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(f&&typeof f!="function")throw Error(i(231,a,typeof f));return f}var fA=!1;if(kn)try{var hA={};Object.defineProperty(hA,"passive",{get:function(){fA=!0}}),window.addEventListener("test",hA,hA),window.removeEventListener("test",hA,hA)}catch{fA=!1}var Vr=null,ro=null,dA=null;function Yl(){if(dA)return dA;var r,a=ro,f=a.length,g,v="value"in Vr?Vr.value:Vr.textContent,w=v.length;for(r=0;r<f&&a[r]===v[r];r++);var O=f-r;for(g=1;g<=O&&a[f-g]===v[w-g];g++);return dA=v.slice(r,1<g?1-g:void 0)}function so(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function ao(){return!0}function Ic(){return!1}function Zt(r){function a(f,g,v,w,O){this._reactName=f,this._targetInst=v,this.type=g,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var F in r)r.hasOwnProperty(F)&&(f=r[F],this[F]=f?f(w):w[F]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ao:Ic,this.isPropagationStopped=Ic,this}return ye(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),a}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nn=Zt(Mi),ys=ye({},Mi,{view:0,detail:0}),Fc=Zt(ys),fa,Ql,gA,Ao=ye({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wl,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==gA&&(gA&&r.type==="mousemove"?(fa=r.screenX-gA.screenX,Ql=r.screenY-gA.screenY):Ql=fa=0,gA=r),fa)},movementY:function(r){return"movementY"in r?r.movementY:Ql}}),Xl=Zt(Ao),oo=ye({},Ao,{dataTransfer:0}),vs=Zt(oo),Uc=ye({},ys,{relatedTarget:0}),lo=Zt(Uc),uo=ye({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ts=Zt(uo),Hr=ye({},Mi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),kc=Zt(Hr),zc=ye({},Mi,{data:0}),co=Zt(zc),_h={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Gc[r])?!!a[r]:!1}function Wl(){return Eh}var yh=ye({},ys,{key:function(r){if(r.key){var a=_h[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=so(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?bh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wl,charCode:function(r){return r.type==="keypress"?so(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?so(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),vh=Zt(yh),Th=ye({},Ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vc=Zt(Th),wh=ye({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wl}),xh=Zt(wh),fo=ye({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sh=Zt(fo),Mh=ye({},Ao,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ch=Zt(Mh),mA=ye({},Mi,{newState:0,oldState:0}),Rh=Zt(mA),ql=[9,13,27,32],ho=kn&&"CompositionEvent"in window,hr=null;kn&&"documentMode"in document&&(hr=document.documentMode);var Lh=kn&&"TextEvent"in window&&!hr,go=kn&&(!ho||hr&&8<hr&&11>=hr),Zl=" ",Hc=!1;function Kl(r,a){switch(r){case"keyup":return ql.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var jr=!1;function po(r,a){switch(r){case"compositionend":return mo(a);case"keypress":return a.which!==32?null:(Hc=!0,Zl);case"textInput":return r=a.data,r===Zl&&Hc?null:r;default:return null}}function Jt(r,a){if(jr)return r==="compositionend"||!ho&&Kl(r,a)?(r=Yl(),dA=ro=Vr=null,jr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return go&&a.locale!=="ko"?null:a.data;default:return null}}var Oh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jc(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Oh[r.type]:a==="textarea"}function Yc(r,a,f,g){bs?ca?ca.push(g):ca=[g]:bs=g,a=Bf(a,"onChange"),0<a.length&&(f=new Nn("onChange","change",null,f,g),r.push({event:f,listeners:a}))}var pA=null,_A=null;function Dh(r){U1(r,0)}function _o(r){var a=On(r);if(ps(a))return r}function ai(r,a){if(r==="change")return a}var bo=!1;if(kn){var wr;if(kn){var $l="oninput"in document;if(!$l){var Eo=document.createElement("div");Eo.setAttribute("oninput","return;"),$l=typeof Eo.oninput=="function"}wr=$l}else wr=!1;bo=wr&&(!document.documentMode||9<document.documentMode)}function Qc(){pA&&(pA.detachEvent("onpropertychange",Ci),_A=pA=null)}function Ci(r){if(r.propertyName==="value"&&_o(_A)){var a=[];Yc(a,_A,r,cA(r)),jl(Dh,a)}}function Xc(r,a,f){r==="focusin"?(Qc(),pA=a,_A=f,pA.attachEvent("onpropertychange",Ci)):r==="focusout"&&Qc()}function Jl(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return _o(_A)}function ha(r,a){if(r==="click")return _o(a)}function bA(r,a){if(r==="input"||r==="change")return _o(a)}function EA(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Ri=typeof Object.is=="function"?Object.is:EA;function da(r,a){if(Ri(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var f=Object.keys(r),g=Object.keys(a);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var v=f[g];if(!ta.call(a,v)||!Ri(r[v],a[v]))return!1}return!0}function Wc(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function yo(r,a){var f=Wc(r);r=0;for(var g;f;){if(f.nodeType===3){if(g=r+f.textContent.length,r<=a&&g>=a)return{node:f,offset:a-r};r=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Wc(f)}}function qc(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?qc(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Zc(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Si(r.document);a instanceof r.HTMLIFrameElement;){try{var f=typeof a.contentWindow.location.href=="string"}catch{f=!1}if(f)r=a.contentWindow;else break;a=Si(r.document)}return a}function vo(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function Kc(r,a){var f=Zc(a);a=r.focusedElem;var g=r.selectionRange;if(f!==a&&a&&a.ownerDocument&&qc(a.ownerDocument.documentElement,a)){if(g!==null&&vo(a)){if(r=g.start,f=g.end,f===void 0&&(f=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(f,a.value.length);else if(f=(r=a.ownerDocument||document)&&r.defaultView||window,f.getSelection){f=f.getSelection();var v=a.textContent.length,w=Math.min(g.start,v);g=g.end===void 0?w:Math.min(g.end,v),!f.extend&&w>g&&(v=g,g=w,w=v),v=yo(a,w);var O=yo(a,g);v&&O&&(f.rangeCount!==1||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==O.node||f.focusOffset!==O.offset)&&(r=r.createRange(),r.setStart(v.node,v.offset),f.removeAllRanges(),w>g?(f.addRange(r),f.extend(O.node,O.offset)):(r.setEnd(O.node,O.offset),f.addRange(r)))}}for(r=[],f=a;f=f.parentNode;)f.nodeType===1&&r.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)f=r[a],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var yA=kn&&"documentMode"in document&&11>=document.documentMode,qi=null,eu=null,xr=null,tu=!1;function $c(r,a,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;tu||qi==null||qi!==Si(g)||(g=qi,"selectionStart"in g&&vo(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),xr&&da(xr,g)||(xr=g,g=Bf(eu,"onSelect"),0<g.length&&(a=new Nn("onSelect","select",null,a,f),r.push({event:a,listeners:g}),a.target=qi)))}function ws(r,a){var f={};return f[r.toLowerCase()]=a.toLowerCase(),f["Webkit"+r]="webkit"+a,f["Moz"+r]="moz"+a,f}var ga={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},nu={},Jc={};kn&&(Jc=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function xs(r){if(nu[r])return nu[r];if(!ga[r])return r;var a=ga[r],f;for(f in a)if(a.hasOwnProperty(f)&&f in Jc)return nu[r]=a[f];return r}var To=xs("animationend"),iu=xs("animationiteration"),wo=xs("animationstart"),Nh=xs("transitionrun"),Bh=xs("transitionstart"),Ph=xs("transitioncancel"),ef=xs("transitionend"),tf=new Map,nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Zi(r,a){tf.set(r,a),mn(a,[r])}var Li=[],ma=0,xo=0;function Fi(){for(var r=ma,a=xo=ma=0;a<r;){var f=Li[a];Li[a++]=null;var g=Li[a];Li[a++]=null;var v=Li[a];Li[a++]=null;var w=Li[a];if(Li[a++]=null,g!==null&&v!==null){var O=g.pending;O===null?v.next=v:(v.next=O.next,O.next=v),g.pending=v}w!==0&&rf(f,v,w)}}function vA(r,a,f,g){Li[ma++]=r,Li[ma++]=a,Li[ma++]=f,Li[ma++]=g,xo|=g,r.lanes|=g,r=r.alternate,r!==null&&(r.lanes|=g)}function ru(r,a,f,g){return vA(r,a,f,g),So(r)}function Yr(r,a){return vA(r,null,null,a),So(r)}function rf(r,a,f){r.lanes|=f;var g=r.alternate;g!==null&&(g.lanes|=f);for(var v=!1,w=r.return;w!==null;)w.childLanes|=f,g=w.alternate,g!==null&&(g.childLanes|=f),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;v&&a!==null&&r.tag===3&&(w=r.stateNode,v=31-ri(f),w=w.hiddenUpdates,r=w[v],r===null?w[v]=[a]:r.push(a),a.lane=f|536870912)}function So(r){if(50<vu)throw vu=0,Ld=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var pa={},Sr=new WeakMap;function Oi(r,a){if(typeof r=="object"&&r!==null){var f=Sr.get(r);return f!==void 0?f:(a={value:r,source:a,stack:We(a)},Sr.set(r,a),a)}return{value:r,source:a,stack:We(a)}}var Ss=[],_a=0,Mo=null,Co=0,Ui=[],ki=0,Ms=null,Mr=1,Cr="";function Cs(r,a){Ss[_a++]=Co,Ss[_a++]=Mo,Mo=r,Co=a}function sf(r,a,f){Ui[ki++]=Mr,Ui[ki++]=Cr,Ui[ki++]=Ms,Ms=r;var g=Mr;r=Cr;var v=32-ri(g)-1;g&=~(1<<v),f+=1;var w=32-ri(a)+v;if(30<w){var O=v-v%5;w=(g&(1<<O)-1).toString(32),g>>=O,v-=O,Mr=1<<32-ri(a)+v|f<<v|g,Cr=w+r}else Mr=1<<w|f<<v|g,Cr=r}function su(r){r.return!==null&&(Cs(r,1),sf(r,1,0))}function Ro(r){for(;r===Mo;)Mo=Ss[--_a],Ss[_a]=null,Co=Ss[--_a],Ss[_a]=null;for(;r===Ms;)Ms=Ui[--ki],Ui[ki]=null,Cr=Ui[--ki],Ui[ki]=null,Mr=Ui[--ki],Ui[ki]=null}var Xn=null,Pt=null,Vt=!1,Ki=null,gi=!1,mi=Error(i(519));function Rs(r){var a=Error(i(418,""));throw ya(Oi(a,r)),mi}function af(r){var a=r.stateNode,f=r.type,g=r.memoizedProps;switch(a[Xe]=r,a[u]=g,f){case"dialog":Gt("cancel",a),Gt("close",a);break;case"iframe":case"object":case"embed":Gt("load",a);break;case"video":case"audio":for(f=0;f<wu.length;f++)Gt(wu[f],a);break;case"source":Gt("error",a);break;case"img":case"image":case"link":Gt("error",a),Gt("load",a);break;case"details":Gt("toggle",a);break;case"input":Gt("invalid",a),uA(a,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),I(a);break;case"select":Gt("invalid",a);break;case"textarea":Gt("invalid",a),k(a,g.value,g.defaultValue,g.children),I(a)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||a.textContent===""+f||g.suppressHydrationWarning===!0||V1(a.textContent,f)?(g.popover!=null&&(Gt("beforetoggle",a),Gt("toggle",a)),g.onScroll!=null&&Gt("scroll",a),g.onScrollEnd!=null&&Gt("scrollend",a),g.onClick!=null&&(a.onclick=Pf),a=!0):a=!1,a||Rs(r)}function Af(r){for(Xn=r.return;Xn;)switch(Xn.tag){case 3:case 27:gi=!0;return;case 5:case 13:gi=!1;return;default:Xn=Xn.return}}function ba(r){if(r!==Xn)return!1;if(!Vt)return Af(r),Vt=!0,!1;var a=!1,f;if((f=r.tag!==3&&r.tag!==27)&&((f=r.tag===5)&&(f=r.type,f=!(f!=="form"&&f!=="button")||Xd(r.type,r.memoizedProps)),f=!f),f&&(a=!0),a&&Pt&&Rs(r),Af(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(f=r.data,f==="/$"){if(a===0){Pt=Dr(r.nextSibling);break e}a--}else f!=="$"&&f!=="$!"&&f!=="$?"||a++;r=r.nextSibling}Pt=null}}else Pt=Xn?Dr(r.stateNode.nextSibling):null;return!0}function Ea(){Pt=Xn=null,Vt=!1}function ya(r){Ki===null?Ki=[r]:Ki.push(r)}var va=Error(i(460)),of=Error(i(474)),au={then:function(){}};function lf(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Lo(){}function uf(r,a,f){switch(f=r[f],f===void 0?r.push(a):f!==a&&(a.then(Lo,Lo),a=f),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,r===va?Error(i(483)):r;default:if(typeof a.status=="string")a.then(Lo,Lo);else{if(r=ln,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(g){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=g}},function(g){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=g}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,r===va?Error(i(483)):r}throw zi=a,va}}var zi=null;function $i(){if(zi===null)throw Error(i(459));var r=zi;return zi=null,r}var st=null,pi=0;function vt(r){var a=pi;return pi+=1,st===null&&(st=[]),uf(st,r,a)}function Tn(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function TA(r,a){throw a.$$typeof===A?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Oo(r){var a=r._init;return a(r._payload)}function Qr(r){function a(ae,ne){if(r){var ce=ae.deletions;ce===null?(ae.deletions=[ne],ae.flags|=16):ce.push(ne)}}function f(ae,ne){if(!r)return null;for(;ne!==null;)a(ae,ne),ne=ne.sibling;return null}function g(ae){for(var ne=new Map;ae!==null;)ae.key!==null?ne.set(ae.key,ae):ne.set(ae.index,ae),ae=ae.sibling;return ne}function v(ae,ne){return ae=Oa(ae,ne),ae.index=0,ae.sibling=null,ae}function w(ae,ne,ce){return ae.index=ce,r?(ce=ae.alternate,ce!==null?(ce=ce.index,ce<ne?(ae.flags|=33554434,ne):ce):(ae.flags|=33554434,ne)):(ae.flags|=1048576,ne)}function O(ae){return r&&ae.alternate===null&&(ae.flags|=33554434),ae}function F(ae,ne,ce,we){return ne===null||ne.tag!==6?(ne=vd(ce,ae.mode,we),ne.return=ae,ne):(ne=v(ne,ce),ne.return=ae,ne)}function W(ae,ne,ce,we){var Ze=ce.type;return Ze===_?Ee(ae,ne,ce.props.children,we,ce.key):ne!==null&&(ne.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===Y&&Oo(Ze)===ne.type)?(ne=v(ne,ce.props),Tn(ne,ce),ne.return=ae,ne):(ne=wf(ce.type,ce.key,ce.props,null,ae.mode,we),Tn(ne,ce),ne.return=ae,ne)}function re(ae,ne,ce,we){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ce.containerInfo||ne.stateNode.implementation!==ce.implementation?(ne=Td(ce,ae.mode,we),ne.return=ae,ne):(ne=v(ne,ce.children||[]),ne.return=ae,ne)}function Ee(ae,ne,ce,we,Ze){return ne===null||ne.tag!==7?(ne=OA(ce,ae.mode,we,Ze),ne.return=ae,ne):(ne=v(ne,ce),ne.return=ae,ne)}function Oe(ae,ne,ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=vd(""+ne,ae.mode,ce),ne.return=ae,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case h:return ce=wf(ne.type,ne.key,ne.props,null,ae.mode,ce),Tn(ce,ne),ce.return=ae,ce;case m:return ne=Td(ne,ae.mode,ce),ne.return=ae,ne;case Y:var we=ne._init;return ne=we(ne._payload),Oe(ae,ne,ce)}if(nt(ne)||se(ne))return ne=OA(ne,ae.mode,ce,null),ne.return=ae,ne;if(typeof ne.then=="function")return Oe(ae,vt(ne),ce);if(ne.$$typeof===L)return Oe(ae,yf(ae,ne),ce);TA(ae,ne)}return null}function de(ae,ne,ce,we){var Ze=ne!==null?ne.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Ze!==null?null:F(ae,ne,""+ce,we);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case h:return ce.key===Ze?W(ae,ne,ce,we):null;case m:return ce.key===Ze?re(ae,ne,ce,we):null;case Y:return Ze=ce._init,ce=Ze(ce._payload),de(ae,ne,ce,we)}if(nt(ce)||se(ce))return Ze!==null?null:Ee(ae,ne,ce,we,null);if(typeof ce.then=="function")return de(ae,ne,vt(ce),we);if(ce.$$typeof===L)return de(ae,ne,yf(ae,ce),we);TA(ae,ce)}return null}function _e(ae,ne,ce,we,Ze){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return ae=ae.get(ce)||null,F(ne,ae,""+we,Ze);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case h:return ae=ae.get(we.key===null?ce:we.key)||null,W(ne,ae,we,Ze);case m:return ae=ae.get(we.key===null?ce:we.key)||null,re(ne,ae,we,Ze);case Y:var It=we._init;return we=It(we._payload),_e(ae,ne,ce,we,Ze)}if(nt(we)||se(we))return ae=ae.get(ce)||null,Ee(ne,ae,we,Ze,null);if(typeof we.then=="function")return _e(ae,ne,ce,vt(we),Ze);if(we.$$typeof===L)return _e(ae,ne,ce,yf(ne,we),Ze);TA(ne,we)}return null}function tt(ae,ne,ce,we){for(var Ze=null,It=null,rt=ne,ct=ne=0,Kn=null;rt!==null&&ct<ce.length;ct++){rt.index>ct?(Kn=rt,rt=null):Kn=rt.sibling;var Qt=de(ae,rt,ce[ct],we);if(Qt===null){rt===null&&(rt=Kn);break}r&&rt&&Qt.alternate===null&&a(ae,rt),ne=w(Qt,ne,ct),It===null?Ze=Qt:It.sibling=Qt,It=Qt,rt=Kn}if(ct===ce.length)return f(ae,rt),Vt&&Cs(ae,ct),Ze;if(rt===null){for(;ct<ce.length;ct++)rt=Oe(ae,ce[ct],we),rt!==null&&(ne=w(rt,ne,ct),It===null?Ze=rt:It.sibling=rt,It=rt);return Vt&&Cs(ae,ct),Ze}for(rt=g(rt);ct<ce.length;ct++)Kn=_e(rt,ae,ct,ce[ct],we),Kn!==null&&(r&&Kn.alternate!==null&&rt.delete(Kn.key===null?ct:Kn.key),ne=w(Kn,ne,ct),It===null?Ze=Kn:It.sibling=Kn,It=Kn);return r&&rt.forEach(function(Ua){return a(ae,Ua)}),Vt&&Cs(ae,ct),Ze}function Tt(ae,ne,ce,we){if(ce==null)throw Error(i(151));for(var Ze=null,It=null,rt=ne,ct=ne=0,Kn=null,Qt=ce.next();rt!==null&&!Qt.done;ct++,Qt=ce.next()){rt.index>ct?(Kn=rt,rt=null):Kn=rt.sibling;var Ua=de(ae,rt,Qt.value,we);if(Ua===null){rt===null&&(rt=Kn);break}r&&rt&&Ua.alternate===null&&a(ae,rt),ne=w(Ua,ne,ct),It===null?Ze=Ua:It.sibling=Ua,It=Ua,rt=Kn}if(Qt.done)return f(ae,rt),Vt&&Cs(ae,ct),Ze;if(rt===null){for(;!Qt.done;ct++,Qt=ce.next())Qt=Oe(ae,Qt.value,we),Qt!==null&&(ne=w(Qt,ne,ct),It===null?Ze=Qt:It.sibling=Qt,It=Qt);return Vt&&Cs(ae,ct),Ze}for(rt=g(rt);!Qt.done;ct++,Qt=ce.next())Qt=_e(rt,ae,ct,Qt.value,we),Qt!==null&&(r&&Qt.alternate!==null&&rt.delete(Qt.key===null?ct:Qt.key),ne=w(Qt,ne,ct),It===null?Ze=Qt:It.sibling=Qt,It=Qt);return r&&rt.forEach(function(F4){return a(ae,F4)}),Vt&&Cs(ae,ct),Ze}function Sn(ae,ne,ce,we){if(typeof ce=="object"&&ce!==null&&ce.type===_&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case h:e:{for(var Ze=ce.key;ne!==null;){if(ne.key===Ze){if(Ze=ce.type,Ze===_){if(ne.tag===7){f(ae,ne.sibling),we=v(ne,ce.props.children),we.return=ae,ae=we;break e}}else if(ne.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===Y&&Oo(Ze)===ne.type){f(ae,ne.sibling),we=v(ne,ce.props),Tn(we,ce),we.return=ae,ae=we;break e}f(ae,ne);break}else a(ae,ne);ne=ne.sibling}ce.type===_?(we=OA(ce.props.children,ae.mode,we,ce.key),we.return=ae,ae=we):(we=wf(ce.type,ce.key,ce.props,null,ae.mode,we),Tn(we,ce),we.return=ae,ae=we)}return O(ae);case m:e:{for(Ze=ce.key;ne!==null;){if(ne.key===Ze)if(ne.tag===4&&ne.stateNode.containerInfo===ce.containerInfo&&ne.stateNode.implementation===ce.implementation){f(ae,ne.sibling),we=v(ne,ce.children||[]),we.return=ae,ae=we;break e}else{f(ae,ne);break}else a(ae,ne);ne=ne.sibling}we=Td(ce,ae.mode,we),we.return=ae,ae=we}return O(ae);case Y:return Ze=ce._init,ce=Ze(ce._payload),Sn(ae,ne,ce,we)}if(nt(ce))return tt(ae,ne,ce,we);if(se(ce)){if(Ze=se(ce),typeof Ze!="function")throw Error(i(150));return ce=Ze.call(ce),Tt(ae,ne,ce,we)}if(typeof ce.then=="function")return Sn(ae,ne,vt(ce),we);if(ce.$$typeof===L)return Sn(ae,ne,yf(ae,ce),we);TA(ae,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,ne!==null&&ne.tag===6?(f(ae,ne.sibling),we=v(ne,ce),we.return=ae,ae=we):(f(ae,ne),we=vd(ce,ae.mode,we),we.return=ae,ae=we),O(ae)):f(ae,ne)}return function(ae,ne,ce,we){try{pi=0;var Ze=Sn(ae,ne,ce,we);return st=null,Ze}catch(rt){if(rt===va)throw rt;var It=pr(29,rt,null,ae.mode);return It.lanes=we,It.return=ae,It}finally{}}}var Ls=Qr(!0),Gn=Qr(!1),Rr=St(null),Lr=St(0);function Au(r,a){r=zs,Ge(Lr,r),Ge(Rr,a),zs=r|a.baseLanes}function Re(){Ge(Lr,zs),Ge(Rr,Rr.current)}function Ue(){zs=Lr.current,Me(Rr),Me(Lr)}var Di=St(null),Gi=null;function Ji(r){var a=r.alternate;Ge(en,en.current&1),Ge(Di,r),Gi===null&&(a===null||Rr.current!==null||a.memoizedState!==null)&&(Gi=r)}function wA(r){if(r.tag===22){if(Ge(en,en.current),Ge(Di,r),Gi===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(Gi=r)}}else _i()}function _i(){Ge(en,en.current),Ge(Di,Di.current)}function dr(r){Me(Di),Gi===r&&(Gi=null),Me(en)}var en=St(0);function o(r){for(var a=r;a!==null;){if(a.tag===13){var f=a.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var l=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(f,g){r.push(g)}};this.abort=function(){a.aborted=!0,r.forEach(function(f){return f()})}},c=n.unstable_scheduleCallback,d=n.unstable_NormalPriority,p={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function b(){return{controller:new l,data:new Map,refCount:0}}function y(r){r.refCount--,r.refCount===0&&c(d,function(){r.controller.abort()})}var T=null,M=0,R=0,D=null;function z(r,a){if(T===null){var f=T=[];M=0,R=Ud(),D={status:"pending",value:void 0,then:function(g){f.push(g)}}}return M++,a.then(q,q),a}function q(){if(--M===0&&T!==null){D!==null&&(D.status="fulfilled");var r=T;T=null,R=0,D=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function J(r,a){var f=[],g={status:"pending",value:null,reason:null,then:function(v){f.push(v)}};return r.then(function(){g.status="fulfilled",g.value=a;for(var v=0;v<f.length;v++)(0,f[v])(a)},function(v){for(g.status="rejected",g.reason=v,v=0;v<f.length;v++)(0,f[v])(void 0)}),g}var Q=Ae.S;Ae.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&z(r,a),Q!==null&&Q(r,a)};var ie=St(null);function pe(){var r=ie.current;return r!==null?r:ln.pooledCache}function ge(r,a){a===null?Ge(ie,ie.current):Ge(ie,a.pool)}function ue(){var r=pe();return r===null?null:{parent:p._currentValue,pool:r}}var le=0,$=null,xe=null,Ie=null,Fe=!1,ke=!1,Bt=!1,Ot=0,Dt=0,ut=null,dt=0;function qe(){throw Error(i(321))}function Yt(r,a){if(a===null)return!1;for(var f=0;f<a.length&&f<r.length;f++)if(!Ri(r[f],a[f]))return!1;return!0}function ot(r,a,f,g,v,w){return le=w,$=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ae.H=r===null||r.memoizedState===null?xA:Ta,Bt=!1,w=f(g,v),Bt=!1,ke&&(w=Wn(a,f,g,v)),Kt(r),w}function Kt(r){Ae.H=Xr;var a=xe!==null&&xe.next!==null;if(le=0,Ie=xe=$=null,Fe=!1,Dt=0,ut=null,a)throw Error(i(300));r===null||qn||(r=r.dependencies,r!==null&&Ef(r)&&(qn=!0))}function Wn(r,a,f,g){$=r;var v=0;do{if(ke&&(ut=null),Dt=0,ke=!1,25<=v)throw Error(i(301));if(v+=1,Ie=xe=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Ae.H=SA,w=a(f,g)}while(ke);return w}function cf(){var r=Ae.H,a=r.useState()[0];return a=typeof a.then=="function"?ou(a):a,r=r.useState()[0],(xe!==null?xe.memoizedState:null)!==r&&($.flags|=1024),a}function Ih(){var r=Ot!==0;return Ot=0,r}function Fh(r,a,f){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~f}function Uh(r){if(Fe){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Fe=!1}le=0,Ie=xe=$=null,ke=!1,Dt=Ot=0,ut=null}function Vi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?$.memoizedState=Ie=r:Ie=Ie.next=r,Ie}function Bn(){if(xe===null){var r=$.alternate;r=r!==null?r.memoizedState:null}else r=xe.next;var a=Ie===null?$.memoizedState:Ie.next;if(a!==null)Ie=a,xe=r;else{if(r===null)throw $.alternate===null?Error(i(467)):Error(i(310));xe=r,r={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},Ie===null?$.memoizedState=Ie=r:Ie=Ie.next=r}return Ie}var ff;ff=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ou(r){var a=Dt;return Dt+=1,ut===null&&(ut=[]),r=uf(ut,r,a),a=$,(Ie===null?a.memoizedState:Ie.next)===null&&(a=a.alternate,Ae.H=a===null||a.memoizedState===null?xA:Ta),r}function hf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ou(r);if(r.$$typeof===L)return bi(r)}throw Error(i(438,String(r)))}function kh(r){var a=null,f=$.updateQueue;if(f!==null&&(a=f.memoCache),a==null){var g=$.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(a={data:g.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),f===null&&(f=ff(),$.updateQueue=f),f.memoCache=a,f=a.data[a.index],f===void 0)for(f=a.data[a.index]=Array(r),g=0;g<r;g++)f[g]=ee;return a.index++,f}function Os(r,a){return typeof a=="function"?a(r):a}function df(r){var a=Bn();return zh(a,xe,r)}function zh(r,a,f){var g=r.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=f;var v=r.baseQueue,w=g.pending;if(w!==null){if(v!==null){var O=v.next;v.next=w.next,w.next=O}a.baseQueue=v=w,g.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{a=v.next;var F=O=null,W=null,re=a,Ee=!1;do{var Oe=re.lane&-536870913;if(Oe!==re.lane?(Ht&Oe)===Oe:(le&Oe)===Oe){var de=re.revertLane;if(de===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),Oe===R&&(Ee=!0);else if((le&de)===de){re=re.next,de===R&&(Ee=!0);continue}else Oe={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},W===null?(F=W=Oe,O=w):W=W.next=Oe,$.lanes|=de,Da|=de;Oe=re.action,Bt&&f(w,Oe),w=re.hasEagerState?re.eagerState:f(w,Oe)}else de={lane:Oe,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},W===null?(F=W=de,O=w):W=W.next=de,$.lanes|=Oe,Da|=Oe;re=re.next}while(re!==null&&re!==a);if(W===null?O=w:W.next=F,!Ri(w,r.memoizedState)&&(qn=!0,Ee&&(f=D,f!==null)))throw f;r.memoizedState=w,r.baseState=O,r.baseQueue=W,g.lastRenderedState=w}return v===null&&(g.lanes=0),[r.memoizedState,g.dispatch]}function Gh(r){var a=Bn(),f=a.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=r;var g=f.dispatch,v=f.pending,w=a.memoizedState;if(v!==null){f.pending=null;var O=v=v.next;do w=r(w,O.action),O=O.next;while(O!==v);Ri(w,a.memoizedState)||(qn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),f.lastRenderedState=w}return[w,g]}function qp(r,a,f){var g=$,v=Bn(),w=Vt;if(w){if(f===void 0)throw Error(i(407));f=f()}else f=a();var O=!Ri((xe||v).memoizedState,f);if(O&&(v.memoizedState=f,qn=!0),v=v.queue,jh($p.bind(null,g,v,r),[r]),v.getSnapshot!==a||O||Ie!==null&&Ie.memoizedState.tag&1){if(g.flags|=2048,Do(9,Kp.bind(null,g,v,f,a),{destroy:void 0},null),ln===null)throw Error(i(349));w||le&60||Zp(g,a,f)}return f}function Zp(r,a,f){r.flags|=16384,r={getSnapshot:a,value:f},a=$.updateQueue,a===null?(a=ff(),$.updateQueue=a,a.stores=[r]):(f=a.stores,f===null?a.stores=[r]:f.push(r))}function Kp(r,a,f,g){a.value=f,a.getSnapshot=g,Jp(a)&&e2(r)}function $p(r,a,f){return f(function(){Jp(a)&&e2(r)})}function Jp(r){var a=r.getSnapshot;r=r.value;try{var f=a();return!Ri(r,f)}catch{return!0}}function e2(r){var a=Yr(r,2);a!==null&&Ni(a,r,2)}function Vh(r){var a=Vi();if(typeof r=="function"){var f=r;if(r=f(),Bt){Qi(!0);try{f()}finally{Qi(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:r},a}function t2(r,a,f,g){return r.baseState=f,zh(r,xe,typeof g=="function"?g:Os)}function Ow(r,a,f,g,v){if(pf(r))throw Error(i(485));if(r=a.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};Ae.T!==null?f(!0):w.isTransition=!1,g(w),f=a.pending,f===null?(w.next=a.pending=w,n2(a,w)):(w.next=f.next,a.pending=f.next=w)}}function n2(r,a){var f=a.action,g=a.payload,v=r.state;if(a.isTransition){var w=Ae.T,O={};Ae.T=O;try{var F=f(v,g),W=Ae.S;W!==null&&W(O,F),i2(r,a,F)}catch(re){Hh(r,a,re)}finally{Ae.T=w}}else try{w=f(v,g),i2(r,a,w)}catch(re){Hh(r,a,re)}}function i2(r,a,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){r2(r,a,g)},function(g){return Hh(r,a,g)}):r2(r,a,f)}function r2(r,a,f){a.status="fulfilled",a.value=f,s2(a),r.state=f,a=r.pending,a!==null&&(f=a.next,f===a?r.pending=null:(f=f.next,a.next=f,n2(r,f)))}function Hh(r,a,f){var g=r.pending;if(r.pending=null,g!==null){g=g.next;do a.status="rejected",a.reason=f,s2(a),a=a.next;while(a!==g)}r.action=null}function s2(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function a2(r,a){return a}function A2(r,a){if(Vt){var f=ln.formState;if(f!==null){e:{var g=$;if(Vt){if(Pt){t:{for(var v=Pt,w=gi;v.nodeType!==8;){if(!w){v=null;break t}if(v=Dr(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Pt=Dr(v.nextSibling),g=v.data==="F!";break e}}Rs(g)}g=!1}g&&(a=f[0])}}return f=Vi(),f.memoizedState=f.baseState=a,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a2,lastRenderedState:a},f.queue=g,f=x2.bind(null,$,g),g.dispatch=f,g=Vh(!1),w=qh.bind(null,$,!1,g.queue),g=Vi(),v={state:a,dispatch:null,action:r,pending:null},g.queue=v,f=Ow.bind(null,$,v,w,f),v.dispatch=f,g.memoizedState=r,[a,f,!1]}function o2(r){var a=Bn();return l2(a,xe,r)}function l2(r,a,f){a=zh(r,a,a2)[0],r=df(Os)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?ou(a):a;var g=Bn(),v=g.queue,w=v.dispatch;return f!==g.memoizedState&&($.flags|=2048,Do(9,Dw.bind(null,v,f),{destroy:void 0},null)),[a,w,r]}function Dw(r,a){r.action=a}function u2(r){var a=Bn(),f=xe;if(f!==null)return l2(a,f,r);Bn(),a=a.memoizedState,f=Bn();var g=f.queue.dispatch;return f.memoizedState=r,[a,g,!1]}function Do(r,a,f,g){return r={tag:r,create:a,inst:f,deps:g,next:null},a=$.updateQueue,a===null&&(a=ff(),$.updateQueue=a),f=a.lastEffect,f===null?a.lastEffect=r.next=r:(g=f.next,f.next=r,r.next=g,a.lastEffect=r),r}function c2(){return Bn().memoizedState}function gf(r,a,f,g){var v=Vi();$.flags|=r,v.memoizedState=Do(1|a,f,{destroy:void 0},g===void 0?null:g)}function mf(r,a,f,g){var v=Bn();g=g===void 0?null:g;var w=v.memoizedState.inst;xe!==null&&g!==null&&Yt(g,xe.memoizedState.deps)?v.memoizedState=Do(a,f,w,g):($.flags|=r,v.memoizedState=Do(1|a,f,w,g))}function f2(r,a){gf(8390656,8,r,a)}function jh(r,a){mf(2048,8,r,a)}function h2(r,a){return mf(4,2,r,a)}function d2(r,a){return mf(4,4,r,a)}function g2(r,a){if(typeof a=="function"){r=r();var f=a(r);return function(){typeof f=="function"?f():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function m2(r,a,f){f=f!=null?f.concat([r]):null,mf(4,4,g2.bind(null,a,r),f)}function Yh(){}function p2(r,a){var f=Bn();a=a===void 0?null:a;var g=f.memoizedState;return a!==null&&Yt(a,g[1])?g[0]:(f.memoizedState=[r,a],r)}function _2(r,a){var f=Bn();a=a===void 0?null:a;var g=f.memoizedState;if(a!==null&&Yt(a,g[1]))return g[0];if(g=r(),Bt){Qi(!0);try{r()}finally{Qi(!1)}}return f.memoizedState=[g,a],g}function Qh(r,a,f){return f===void 0||le&1073741824?r.memoizedState=a:(r.memoizedState=f,r=E1(),$.lanes|=r,Da|=r,f)}function b2(r,a,f,g){return Ri(f,a)?f:Rr.current!==null?(r=Qh(r,f,g),Ri(r,a)||(qn=!0),r):le&42?(r=E1(),$.lanes|=r,Da|=r,a):(qn=!0,r.memoizedState=f)}function E2(r,a,f,g,v){var w=Ve.p;Ve.p=w!==0&&8>w?w:8;var O=Ae.T,F={};Ae.T=F,qh(r,!1,a,f);try{var W=v(),re=Ae.S;if(re!==null&&re(F,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var Ee=J(W,g);lu(r,a,Ee,ir(r))}else lu(r,a,g,ir(r))}catch(Oe){lu(r,a,{then:function(){},status:"rejected",reason:Oe},ir())}finally{Ve.p=w,Ae.T=O}}function Nw(){}function Xh(r,a,f,g){if(r.tag!==5)throw Error(i(476));var v=y2(r).queue;E2(r,v,a,Lt,f===null?Nw:function(){return v2(r),f(g)})}function y2(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:Lt,baseState:Lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:Lt},next:null};var f={};return a.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:f},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function v2(r){var a=y2(r).next.queue;lu(r,a,{},ir())}function Wh(){return bi(Ru)}function T2(){return Bn().memoizedState}function w2(){return Bn().memoizedState}function Bw(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var f=ir();r=Sa(f);var g=Ma(a,r,f);g!==null&&(Ni(g,a,f),fu(g,a,f)),a={cache:b()},r.payload=a;return}a=a.return}}function Pw(r,a,f){var g=ir();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},pf(r)?S2(a,f):(f=ru(r,a,f,g),f!==null&&(Ni(f,r,g),M2(f,a,g)))}function x2(r,a,f){var g=ir();lu(r,a,f,g)}function lu(r,a,f,g){var v={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(pf(r))S2(a,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var O=a.lastRenderedState,F=w(O,f);if(v.hasEagerState=!0,v.eagerState=F,Ri(F,O))return vA(r,a,v,0),ln===null&&Fi(),!1}catch{}finally{}if(f=ru(r,a,v,g),f!==null)return Ni(f,r,g),M2(f,a,g),!0}return!1}function qh(r,a,f,g){if(g={lane:2,revertLane:Ud(),action:g,hasEagerState:!1,eagerState:null,next:null},pf(r)){if(a)throw Error(i(479))}else a=ru(r,f,g,2),a!==null&&Ni(a,r,2)}function pf(r){var a=r.alternate;return r===$||a!==null&&a===$}function S2(r,a){ke=Fe=!0;var f=r.pending;f===null?a.next=a:(a.next=f.next,f.next=a),r.pending=a}function M2(r,a,f){if(f&4194176){var g=a.lanes;g&=r.pendingLanes,f|=g,a.lanes=f,oa(r,f)}}var Xr={readContext:bi,use:hf,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useLayoutEffect:qe,useInsertionEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useSyncExternalStore:qe,useId:qe};Xr.useCacheRefresh=qe,Xr.useMemoCache=qe,Xr.useHostTransitionStatus=qe,Xr.useFormState=qe,Xr.useActionState=qe,Xr.useOptimistic=qe;var xA={readContext:bi,use:hf,useCallback:function(r,a){return Vi().memoizedState=[r,a===void 0?null:a],r},useContext:bi,useEffect:f2,useImperativeHandle:function(r,a,f){f=f!=null?f.concat([r]):null,gf(4194308,4,g2.bind(null,a,r),f)},useLayoutEffect:function(r,a){return gf(4194308,4,r,a)},useInsertionEffect:function(r,a){gf(4,2,r,a)},useMemo:function(r,a){var f=Vi();a=a===void 0?null:a;var g=r();if(Bt){Qi(!0);try{r()}finally{Qi(!1)}}return f.memoizedState=[g,a],g},useReducer:function(r,a,f){var g=Vi();if(f!==void 0){var v=f(a);if(Bt){Qi(!0);try{f(a)}finally{Qi(!1)}}}else v=a;return g.memoizedState=g.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},g.queue=r,r=r.dispatch=Pw.bind(null,$,r),[g.memoizedState,r]},useRef:function(r){var a=Vi();return r={current:r},a.memoizedState=r},useState:function(r){r=Vh(r);var a=r.queue,f=x2.bind(null,$,a);return a.dispatch=f,[r.memoizedState,f]},useDebugValue:Yh,useDeferredValue:function(r,a){var f=Vi();return Qh(f,r,a)},useTransition:function(){var r=Vh(!1);return r=E2.bind(null,$,r.queue,!0,!1),Vi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,f){var g=$,v=Vi();if(Vt){if(f===void 0)throw Error(i(407));f=f()}else{if(f=a(),ln===null)throw Error(i(349));Ht&60||Zp(g,a,f)}v.memoizedState=f;var w={value:f,getSnapshot:a};return v.queue=w,f2($p.bind(null,g,w,r),[r]),g.flags|=2048,Do(9,Kp.bind(null,g,w,f,a),{destroy:void 0},null),f},useId:function(){var r=Vi(),a=ln.identifierPrefix;if(Vt){var f=Cr,g=Mr;f=(g&~(1<<32-ri(g)-1)).toString(32)+f,a=":"+a+"R"+f,f=Ot++,0<f&&(a+="H"+f.toString(32)),a+=":"}else f=dt++,a=":"+a+"r"+f.toString(32)+":";return r.memoizedState=a},useCacheRefresh:function(){return Vi().memoizedState=Bw.bind(null,$)}};xA.useMemoCache=kh,xA.useHostTransitionStatus=Wh,xA.useFormState=A2,xA.useActionState=A2,xA.useOptimistic=function(r){var a=Vi();a.memoizedState=a.baseState=r;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=f,a=qh.bind(null,$,!0,f),f.dispatch=a,[r,a]};var Ta={readContext:bi,use:hf,useCallback:p2,useContext:bi,useEffect:jh,useImperativeHandle:m2,useInsertionEffect:h2,useLayoutEffect:d2,useMemo:_2,useReducer:df,useRef:c2,useState:function(){return df(Os)},useDebugValue:Yh,useDeferredValue:function(r,a){var f=Bn();return b2(f,xe.memoizedState,r,a)},useTransition:function(){var r=df(Os)[0],a=Bn().memoizedState;return[typeof r=="boolean"?r:ou(r),a]},useSyncExternalStore:qp,useId:T2};Ta.useCacheRefresh=w2,Ta.useMemoCache=kh,Ta.useHostTransitionStatus=Wh,Ta.useFormState=o2,Ta.useActionState=o2,Ta.useOptimistic=function(r,a){var f=Bn();return t2(f,xe,r,a)};var SA={readContext:bi,use:hf,useCallback:p2,useContext:bi,useEffect:jh,useImperativeHandle:m2,useInsertionEffect:h2,useLayoutEffect:d2,useMemo:_2,useReducer:Gh,useRef:c2,useState:function(){return Gh(Os)},useDebugValue:Yh,useDeferredValue:function(r,a){var f=Bn();return xe===null?Qh(f,r,a):b2(f,xe.memoizedState,r,a)},useTransition:function(){var r=Gh(Os)[0],a=Bn().memoizedState;return[typeof r=="boolean"?r:ou(r),a]},useSyncExternalStore:qp,useId:T2};SA.useCacheRefresh=w2,SA.useMemoCache=kh,SA.useHostTransitionStatus=Wh,SA.useFormState=u2,SA.useActionState=u2,SA.useOptimistic=function(r,a){var f=Bn();return xe!==null?t2(f,xe,r,a):(f.baseState=r,[r,f.queue.dispatch])};function Zh(r,a,f,g){a=r.memoizedState,f=f(g,a),f=f==null?a:ye({},a,f),r.memoizedState=f,r.lanes===0&&(r.updateQueue.baseState=f)}var Kh={isMounted:function(r){return(r=r._reactInternals)?$e(r)===r:!1},enqueueSetState:function(r,a,f){r=r._reactInternals;var g=ir(),v=Sa(g);v.payload=a,f!=null&&(v.callback=f),a=Ma(r,v,g),a!==null&&(Ni(a,r,g),fu(a,r,g))},enqueueReplaceState:function(r,a,f){r=r._reactInternals;var g=ir(),v=Sa(g);v.tag=1,v.payload=a,f!=null&&(v.callback=f),a=Ma(r,v,g),a!==null&&(Ni(a,r,g),fu(a,r,g))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var f=ir(),g=Sa(f);g.tag=2,a!=null&&(g.callback=a),a=Ma(r,g,f),a!==null&&(Ni(a,r,f),fu(a,r,f))}};function C2(r,a,f,g,v,w,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,w,O):a.prototype&&a.prototype.isPureReactComponent?!da(f,g)||!da(v,w):!0}function R2(r,a,f,g){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(f,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(f,g),a.state!==r&&Kh.enqueueReplaceState(a,a.state,null)}function MA(r,a){var f=a;if("ref"in a){f={};for(var g in a)g!=="ref"&&(f[g]=a[g])}if(r=r.defaultProps){f===a&&(f=ye({},f));for(var v in r)f[v]===void 0&&(f[v]=r[v])}return f}var _f=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function L2(r){_f(r)}function O2(r){console.error(r)}function D2(r){_f(r)}function bf(r,a){try{var f=r.onUncaughtError;f(a.value,{componentStack:a.stack})}catch(g){setTimeout(function(){throw g})}}function N2(r,a,f){try{var g=r.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function $h(r,a,f){return f=Sa(f),f.tag=3,f.payload={element:null},f.callback=function(){bf(r,a)},f}function B2(r){return r=Sa(r),r.tag=3,r}function P2(r,a,f,g){var v=f.type.getDerivedStateFromError;if(typeof v=="function"){var w=g.value;r.payload=function(){return v(w)},r.callback=function(){N2(a,f,g)}}var O=f.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){N2(a,f,g),typeof v!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var F=g.stack;this.componentDidCatch(g.value,{componentStack:F!==null?F:""})})}function Iw(r,a,f,g,v){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(a=f.alternate,a!==null&&cu(a,f,v,!0),f=Di.current,f!==null){switch(f.tag){case 13:return Gi===null?Nd():f.alternate===null&&xn===0&&(xn=3),f.flags&=-257,f.flags|=65536,f.lanes=v,g===au?f.flags|=16384:(a=f.updateQueue,a===null?f.updateQueue=new Set([g]):a.add(g),Pd(r,g,v)),!1;case 22:return f.flags|=65536,g===au?f.flags|=16384:(a=f.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=a):(f=a.retryQueue,f===null?a.retryQueue=new Set([g]):f.add(g)),Pd(r,g,v)),!1}throw Error(i(435,f.tag))}return Pd(r,g,v),Nd(),!1}if(Vt)return a=Di.current,a!==null?(!(a.flags&65536)&&(a.flags|=256),a.flags|=65536,a.lanes=v,g!==mi&&(r=Error(i(422),{cause:g}),ya(Oi(r,f)))):(g!==mi&&(a=Error(i(423),{cause:g}),ya(Oi(a,f))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,g=Oi(g,f),v=$h(r.stateNode,g,v),hd(r,v),xn!==4&&(xn=2)),!1;var w=Error(i(520),{cause:g});if(w=Oi(w,f),Eu===null?Eu=[w]:Eu.push(w),xn!==4&&(xn=2),a===null)return!0;g=Oi(g,f),f=a;do{switch(f.tag){case 3:return f.flags|=65536,r=v&-v,f.lanes|=r,r=$h(f.stateNode,g,r),hd(f,r),!1;case 1:if(a=f.type,w=f.stateNode,(f.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Na===null||!Na.has(w))))return f.flags|=65536,v&=-v,f.lanes|=v,v=B2(v),P2(v,r,f,g),hd(f,v),!1}f=f.return}while(f!==null);return!1}var I2=Error(i(461)),qn=!1;function Ai(r,a,f,g){a.child=r===null?Gn(a,null,f,g):Ls(a,r.child,f,g)}function F2(r,a,f,g,v){f=f.render;var w=a.ref;if("ref"in g){var O={};for(var F in g)F!=="ref"&&(O[F]=g[F])}else O=g;return RA(a),g=ot(r,a,f,O,w,v),F=Ih(),r!==null&&!qn?(Fh(r,a,v),Ds(r,a,v)):(Vt&&F&&su(a),a.flags|=1,Ai(r,a,g,v),a.child)}function U2(r,a,f,g,v){if(r===null){var w=f.type;return typeof w=="function"&&!yd(w)&&w.defaultProps===void 0&&f.compare===null?(a.tag=15,a.type=w,k2(r,a,w,g,v)):(r=wf(f.type,null,g,a,a.mode,v),r.ref=a.ref,r.return=a,a.child=r)}if(w=r.child,!Ad(r,v)){var O=w.memoizedProps;if(f=f.compare,f=f!==null?f:da,f(O,g)&&r.ref===a.ref)return Ds(r,a,v)}return a.flags|=1,r=Oa(w,g),r.ref=a.ref,r.return=a,a.child=r}function k2(r,a,f,g,v){if(r!==null){var w=r.memoizedProps;if(da(w,g)&&r.ref===a.ref)if(qn=!1,a.pendingProps=g=w,Ad(r,v))r.flags&131072&&(qn=!0);else return a.lanes=r.lanes,Ds(r,a,v)}return Jh(r,a,f,g,v)}function z2(r,a,f){var g=a.pendingProps,v=g.children,w=(a.stateNode._pendingVisibility&2)!==0,O=r!==null?r.memoizedState:null;if(uu(r,a),g.mode==="hidden"||w){if(a.flags&128){if(g=O!==null?O.baseLanes|f:f,r!==null){for(v=a.child=r.child,w=0;v!==null;)w=w|v.lanes|v.childLanes,v=v.sibling;a.childLanes=w&~g}else a.childLanes=0,a.child=null;return G2(r,a,g,f)}if(f&536870912)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&ge(a,O!==null?O.cachePool:null),O!==null?Au(a,O):Re(),wA(a);else return a.lanes=a.childLanes=536870912,G2(r,a,O!==null?O.baseLanes|f:f,f)}else O!==null?(ge(a,O.cachePool),Au(a,O),_i(),a.memoizedState=null):(r!==null&&ge(a,null),Re(),_i());return Ai(r,a,v,f),a.child}function G2(r,a,f,g){var v=pe();return v=v===null?null:{parent:p._currentValue,pool:v},a.memoizedState={baseLanes:f,cachePool:v},r!==null&&ge(a,null),Re(),wA(a),r!==null&&cu(r,a,g,!0),null}function uu(r,a){var f=a.ref;if(f===null)r!==null&&r.ref!==null&&(a.flags|=2097664);else{if(typeof f!="function"&&typeof f!="object")throw Error(i(284));(r===null||r.ref!==f)&&(a.flags|=2097664)}}function Jh(r,a,f,g,v){return RA(a),f=ot(r,a,f,g,void 0,v),g=Ih(),r!==null&&!qn?(Fh(r,a,v),Ds(r,a,v)):(Vt&&g&&su(a),a.flags|=1,Ai(r,a,f,v),a.child)}function V2(r,a,f,g,v,w){return RA(a),a.updateQueue=null,f=Wn(a,g,f,v),Kt(r),g=Ih(),r!==null&&!qn?(Fh(r,a,w),Ds(r,a,w)):(Vt&&g&&su(a),a.flags|=1,Ai(r,a,f,w),a.child)}function H2(r,a,f,g,v){if(RA(a),a.stateNode===null){var w=pa,O=f.contextType;typeof O=="object"&&O!==null&&(w=bi(O)),w=new f(g,w),a.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Kh,a.stateNode=w,w._reactInternals=a,w=a.stateNode,w.props=g,w.state=a.memoizedState,w.refs={},cd(a),O=f.contextType,w.context=typeof O=="object"&&O!==null?bi(O):pa,w.state=a.memoizedState,O=f.getDerivedStateFromProps,typeof O=="function"&&(Zh(a,f,O,g),w.state=a.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&Kh.enqueueReplaceState(w,w.state,null),du(a,g,w,v),hu(),w.state=a.memoizedState),typeof w.componentDidMount=="function"&&(a.flags|=4194308),g=!0}else if(r===null){w=a.stateNode;var F=a.memoizedProps,W=MA(f,F);w.props=W;var re=w.context,Ee=f.contextType;O=pa,typeof Ee=="object"&&Ee!==null&&(O=bi(Ee));var Oe=f.getDerivedStateFromProps;Ee=typeof Oe=="function"||typeof w.getSnapshotBeforeUpdate=="function",F=a.pendingProps!==F,Ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(F||re!==O)&&R2(a,w,g,O),xa=!1;var de=a.memoizedState;w.state=de,du(a,g,w,v),hu(),re=a.memoizedState,F||de!==re||xa?(typeof Oe=="function"&&(Zh(a,f,Oe,g),re=a.memoizedState),(W=xa||C2(a,f,W,g,de,re,O))?(Ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(a.flags|=4194308)):(typeof w.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=re),w.props=g,w.state=re,w.context=O,g=W):(typeof w.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{w=a.stateNode,fd(r,a),O=a.memoizedProps,Ee=MA(f,O),w.props=Ee,Oe=a.pendingProps,de=w.context,re=f.contextType,W=pa,typeof re=="object"&&re!==null&&(W=bi(re)),F=f.getDerivedStateFromProps,(re=typeof F=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==Oe||de!==W)&&R2(a,w,g,W),xa=!1,de=a.memoizedState,w.state=de,du(a,g,w,v),hu();var _e=a.memoizedState;O!==Oe||de!==_e||xa||r!==null&&r.dependencies!==null&&Ef(r.dependencies)?(typeof F=="function"&&(Zh(a,f,F,g),_e=a.memoizedState),(Ee=xa||C2(a,f,Ee,g,de,_e,W)||r!==null&&r.dependencies!==null&&Ef(r.dependencies))?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,_e,W),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,_e,W)),typeof w.componentDidUpdate=="function"&&(a.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&de===r.memoizedState||(a.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&de===r.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=_e),w.props=g,w.state=_e,w.context=W,g=Ee):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&de===r.memoizedState||(a.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&de===r.memoizedState||(a.flags|=1024),g=!1)}return w=g,uu(r,a),g=(a.flags&128)!==0,w||g?(w=a.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:w.render(),a.flags|=1,r!==null&&g?(a.child=Ls(a,r.child,null,v),a.child=Ls(a,null,f,v)):Ai(r,a,f,v),a.memoizedState=w.state,r=a.child):r=Ds(r,a,v),r}function j2(r,a,f,g){return Ea(),a.flags|=256,Ai(r,a,f,g),a.child}var ed={dehydrated:null,treeContext:null,retryLane:0};function td(r){return{baseLanes:r,cachePool:ue()}}function nd(r,a,f){return r=r!==null?r.childLanes&~f:0,a&&(r|=_r),r}function Y2(r,a,f){var g=a.pendingProps,v=!1,w=(a.flags&128)!==0,O;if((O=w)||(O=r!==null&&r.memoizedState===null?!1:(en.current&2)!==0),O&&(v=!0,a.flags&=-129),O=(a.flags&32)!==0,a.flags&=-33,r===null){if(Vt){if(v?Ji(a):_i(),Vt){var F=Pt,W;if(W=F){e:{for(W=F,F=gi;W.nodeType!==8;){if(!F){F=null;break e}if(W=Dr(W.nextSibling),W===null){F=null;break e}}F=W}F!==null?(a.memoizedState={dehydrated:F,treeContext:Ms!==null?{id:Mr,overflow:Cr}:null,retryLane:536870912},W=pr(18,null,null,0),W.stateNode=F,W.return=a,a.child=W,Xn=a,Pt=null,W=!0):W=!1}W||Rs(a)}if(F=a.memoizedState,F!==null&&(F=F.dehydrated,F!==null))return F.data==="$!"?a.lanes=16:a.lanes=536870912,null;dr(a)}return F=g.children,g=g.fallback,v?(_i(),v=a.mode,F=rd({mode:"hidden",children:F},v),g=OA(g,v,f,null),F.return=a,g.return=a,F.sibling=g,a.child=F,v=a.child,v.memoizedState=td(f),v.childLanes=nd(r,O,f),a.memoizedState=ed,g):(Ji(a),id(a,F))}if(W=r.memoizedState,W!==null&&(F=W.dehydrated,F!==null)){if(w)a.flags&256?(Ji(a),a.flags&=-257,a=sd(r,a,f)):a.memoizedState!==null?(_i(),a.child=r.child,a.flags|=128,a=null):(_i(),v=g.fallback,F=a.mode,g=rd({mode:"visible",children:g.children},F),v=OA(v,F,f,null),v.flags|=2,g.return=a,v.return=a,g.sibling=v,a.child=g,Ls(a,r.child,null,f),g=a.child,g.memoizedState=td(f),g.childLanes=nd(r,O,f),a.memoizedState=ed,a=v);else if(Ji(a),F.data==="$!"){if(O=F.nextSibling&&F.nextSibling.dataset,O)var re=O.dgst;O=re,g=Error(i(419)),g.stack="",g.digest=O,ya({value:g,source:null,stack:null}),a=sd(r,a,f)}else if(qn||cu(r,a,f,!1),O=(f&r.childLanes)!==0,qn||O){if(O=ln,O!==null){if(g=f&-f,g&42)g=1;else switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=64;break;case 268435456:g=134217728;break;default:g=0}if(g=g&(O.suspendedLanes|f)?0:g,g!==0&&g!==W.retryLane)throw W.retryLane=g,Yr(r,g),Ni(O,r,g),I2}F.data==="$?"||Nd(),a=sd(r,a,f)}else F.data==="$?"?(a.flags|=128,a.child=r.child,a=Kw.bind(null,r),F._reactRetry=a,a=null):(r=W.treeContext,Pt=Dr(F.nextSibling),Xn=a,Vt=!0,Ki=null,gi=!1,r!==null&&(Ui[ki++]=Mr,Ui[ki++]=Cr,Ui[ki++]=Ms,Mr=r.id,Cr=r.overflow,Ms=a),a=id(a,g.children),a.flags|=4096);return a}return v?(_i(),v=g.fallback,F=a.mode,W=r.child,re=W.sibling,g=Oa(W,{mode:"hidden",children:g.children}),g.subtreeFlags=W.subtreeFlags&31457280,re!==null?v=Oa(re,v):(v=OA(v,F,f,null),v.flags|=2),v.return=a,g.return=a,g.sibling=v,a.child=g,g=v,v=a.child,F=r.child.memoizedState,F===null?F=td(f):(W=F.cachePool,W!==null?(re=p._currentValue,W=W.parent!==re?{parent:re,pool:re}:W):W=ue(),F={baseLanes:F.baseLanes|f,cachePool:W}),v.memoizedState=F,v.childLanes=nd(r,O,f),a.memoizedState=ed,g):(Ji(a),f=r.child,r=f.sibling,f=Oa(f,{mode:"visible",children:g.children}),f.return=a,f.sibling=null,r!==null&&(O=a.deletions,O===null?(a.deletions=[r],a.flags|=16):O.push(r)),a.child=f,a.memoizedState=null,f)}function id(r,a){return a=rd({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function rd(r,a){return p1(r,a,0,null)}function sd(r,a,f){return Ls(a,r.child,null,f),r=id(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function Q2(r,a,f){r.lanes|=a;var g=r.alternate;g!==null&&(g.lanes|=a),ld(r.return,a,f)}function ad(r,a,f,g,v){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:v}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=f,w.tailMode=v)}function X2(r,a,f){var g=a.pendingProps,v=g.revealOrder,w=g.tail;if(Ai(r,a,g.children,f),g=en.current,g&2)g=g&1|2,a.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Q2(r,f,a);else if(r.tag===19)Q2(r,f,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}g&=1}switch(Ge(en,g),v){case"forwards":for(f=a.child,v=null;f!==null;)r=f.alternate,r!==null&&o(r)===null&&(v=f),f=f.sibling;f=v,f===null?(v=a.child,a.child=null):(v=f.sibling,f.sibling=null),ad(a,!1,v,f,w);break;case"backwards":for(f=null,v=a.child,a.child=null;v!==null;){if(r=v.alternate,r!==null&&o(r)===null){a.child=v;break}r=v.sibling,v.sibling=f,f=v,v=r}ad(a,!0,f,null,w);break;case"together":ad(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ds(r,a,f){if(r!==null&&(a.dependencies=r.dependencies),Da|=a.lanes,!(f&a.childLanes))if(r!==null){if(cu(r,a,f,!1),(f&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,f=Oa(r,r.pendingProps),a.child=f,f.return=a;r.sibling!==null;)r=r.sibling,f=f.sibling=Oa(r,r.pendingProps),f.return=a;f.sibling=null}return a.child}function Ad(r,a){return r.lanes&a?!0:(r=r.dependencies,!!(r!==null&&Ef(r)))}function Fw(r,a,f){switch(a.tag){case 3:An(a,a.stateNode.containerInfo),wa(a,p,r.memoizedState.cache),Ea();break;case 27:case 5:nn(a);break;case 4:An(a,a.stateNode.containerInfo);break;case 10:wa(a,a.type,a.memoizedProps.value);break;case 13:var g=a.memoizedState;if(g!==null)return g.dehydrated!==null?(Ji(a),a.flags|=128,null):f&a.child.childLanes?Y2(r,a,f):(Ji(a),r=Ds(r,a,f),r!==null?r.sibling:null);Ji(a);break;case 19:var v=(r.flags&128)!==0;if(g=(f&a.childLanes)!==0,g||(cu(r,a,f,!1),g=(f&a.childLanes)!==0),v){if(g)return X2(r,a,f);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ge(en,en.current),g)break;return null;case 22:case 23:return a.lanes=0,z2(r,a,f);case 24:wa(a,p,r.memoizedState.cache)}return Ds(r,a,f)}function W2(r,a,f){if(r!==null)if(r.memoizedProps!==a.pendingProps)qn=!0;else{if(!Ad(r,f)&&!(a.flags&128))return qn=!1,Fw(r,a,f);qn=!!(r.flags&131072)}else qn=!1,Vt&&a.flags&1048576&&sf(a,Co,a.index);switch(a.lanes=0,a.tag){case 16:e:{r=a.pendingProps;var g=a.elementType,v=g._init;if(g=v(g._payload),a.type=g,typeof g=="function")yd(g)?(r=MA(g,r),a.tag=1,a=H2(null,a,g,r,f)):(a.tag=0,a=Jh(null,a,g,r,f));else{if(g!=null){if(v=g.$$typeof,v===B){a.tag=11,a=F2(null,a,g,r,f);break e}else if(v===H){a.tag=14,a=U2(null,a,g,r,f);break e}}throw a=he(g)||g,Error(i(306,a,""))}}return a;case 0:return Jh(r,a,a.type,a.pendingProps,f);case 1:return g=a.type,v=MA(g,a.pendingProps),H2(r,a,g,v,f);case 3:e:{if(An(a,a.stateNode.containerInfo),r===null)throw Error(i(387));var w=a.pendingProps;v=a.memoizedState,g=v.element,fd(r,a),du(a,w,null,f);var O=a.memoizedState;if(w=O.cache,wa(a,p,w),w!==v.cache&&ud(a,[p],f,!0),hu(),w=O.element,v.isDehydrated)if(v={element:w,isDehydrated:!1,cache:O.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=j2(r,a,w,f);break e}else if(w!==g){g=Oi(Error(i(424)),a),ya(g),a=j2(r,a,w,f);break e}else for(Pt=Dr(a.stateNode.containerInfo.firstChild),Xn=a,Vt=!0,Ki=null,gi=!0,f=Gn(a,null,w,f),a.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Ea(),w===g){a=Ds(r,a,f);break e}Ai(r,a,w,f)}a=a.child}return a;case 26:return uu(r,a),r===null?(f=K1(a.type,null,a.pendingProps,null))?a.memoizedState=f:Vt||(f=a.type,r=a.pendingProps,g=If(qt.current).createElement(f),g[Xe]=a,g[u]=r,oi(g,f,r),fn(g),a.stateNode=g):a.memoizedState=K1(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return nn(a),r===null&&Vt&&(g=a.stateNode=W1(a.type,a.pendingProps,qt.current),Xn=a,gi=!0,Pt=Dr(g.firstChild)),g=a.pendingProps.children,r!==null||Vt?Ai(r,a,g,f):a.child=Ls(a,null,g,f),uu(r,a),a.child;case 5:return r===null&&Vt&&((v=g=Pt)&&(g=h4(g,a.type,a.pendingProps,gi),g!==null?(a.stateNode=g,Xn=a,Pt=Dr(g.firstChild),gi=!1,v=!0):v=!1),v||Rs(a)),nn(a),v=a.type,w=a.pendingProps,O=r!==null?r.memoizedProps:null,g=w.children,Xd(v,w)?g=null:O!==null&&Xd(v,O)&&(a.flags|=32),a.memoizedState!==null&&(v=ot(r,a,cf,null,null,f),Ru._currentValue=v),uu(r,a),Ai(r,a,g,f),a.child;case 6:return r===null&&Vt&&((r=f=Pt)&&(f=d4(f,a.pendingProps,gi),f!==null?(a.stateNode=f,Xn=a,Pt=null,r=!0):r=!1),r||Rs(a)),null;case 13:return Y2(r,a,f);case 4:return An(a,a.stateNode.containerInfo),g=a.pendingProps,r===null?a.child=Ls(a,null,g,f):Ai(r,a,g,f),a.child;case 11:return F2(r,a,a.type,a.pendingProps,f);case 7:return Ai(r,a,a.pendingProps,f),a.child;case 8:return Ai(r,a,a.pendingProps.children,f),a.child;case 12:return Ai(r,a,a.pendingProps.children,f),a.child;case 10:return g=a.pendingProps,wa(a,a.type,g.value),Ai(r,a,g.children,f),a.child;case 9:return v=a.type._context,g=a.pendingProps.children,RA(a),v=bi(v),g=g(v),a.flags|=1,Ai(r,a,g,f),a.child;case 14:return U2(r,a,a.type,a.pendingProps,f);case 15:return k2(r,a,a.type,a.pendingProps,f);case 19:return X2(r,a,f);case 22:return z2(r,a,f);case 24:return RA(a),g=bi(p),r===null?(v=pe(),v===null&&(v=ln,w=b(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=f),v=w),a.memoizedState={parent:g,cache:v},cd(a),wa(a,p,v)):(r.lanes&f&&(fd(r,a),du(a,null,null,f),hu()),v=r.memoizedState,w=a.memoizedState,v.parent!==g?(v={parent:g,cache:g},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),wa(a,p,g)):(g=w.cache,wa(a,p,g),g!==v.cache&&ud(a,[p],f,!0))),Ai(r,a,a.pendingProps.children,f),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}var od=St(null),CA=null,Ns=null;function wa(r,a,f){Ge(od,a._currentValue),a._currentValue=f}function Bs(r){r._currentValue=od.current,Me(od)}function ld(r,a,f){for(;r!==null;){var g=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),r===f)break;r=r.return}}function ud(r,a,f,g){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var O=v.child;w=w.firstContext;e:for(;w!==null;){var F=w;w=v;for(var W=0;W<a.length;W++)if(F.context===a[W]){w.lanes|=f,F=w.alternate,F!==null&&(F.lanes|=f),ld(w.return,f,r),g||(O=null);break e}w=F.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(i(341));O.lanes|=f,w=O.alternate,w!==null&&(w.lanes|=f),ld(O,f,r),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===r){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function cu(r,a,f,g){r=null;for(var v=a,w=!1;v!==null;){if(!w){if(v.flags&524288)w=!0;else if(v.flags&262144)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(i(387));if(O=O.memoizedProps,O!==null){var F=v.type;Ri(v.pendingProps.value,O.value)||(r!==null?r.push(F):r=[F])}}else if(v===Nt.current){if(O=v.alternate,O===null)throw Error(i(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Ru):r=[Ru])}v=v.return}r!==null&&ud(a,r,f,g),a.flags|=262144}function Ef(r){for(r=r.firstContext;r!==null;){if(!Ri(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function RA(r){CA=r,Ns=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function bi(r){return q2(CA,r)}function yf(r,a){return CA===null&&RA(r),q2(r,a)}function q2(r,a){var f=a._currentValue;if(a={context:a,memoizedValue:f,next:null},Ns===null){if(r===null)throw Error(i(308));Ns=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Ns=Ns.next=a;return f}var xa=!1;function cd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fd(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Sa(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ma(r,a,f){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,_n&2){var v=g.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),g.pending=a,a=So(r),rf(r,null,f),a}return vA(r,g,a,f),So(r)}function fu(r,a,f){if(a=a.updateQueue,a!==null&&(a=a.shared,(f&4194176)!==0)){var g=a.lanes;g&=r.pendingLanes,f|=g,a.lanes=f,oa(r,f)}}function hd(r,a){var f=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var v=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var O={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};w===null?v=w=O:w=w.next=O,f=f.next}while(f!==null);w===null?v=w=a:w=w.next=a}else v=w=a;f={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=a:r.next=a,f.lastBaseUpdate=a}var dd=!1;function hu(){if(dd){var r=D;if(r!==null)throw r}}function du(r,a,f,g){dd=!1;var v=r.updateQueue;xa=!1;var w=v.firstBaseUpdate,O=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var W=F,re=W.next;W.next=null,O===null?w=re:O.next=re,O=W;var Ee=r.alternate;Ee!==null&&(Ee=Ee.updateQueue,F=Ee.lastBaseUpdate,F!==O&&(F===null?Ee.firstBaseUpdate=re:F.next=re,Ee.lastBaseUpdate=W))}if(w!==null){var Oe=v.baseState;O=0,Ee=re=W=null,F=w;do{var de=F.lane&-536870913,_e=de!==F.lane;if(_e?(Ht&de)===de:(g&de)===de){de!==0&&de===R&&(dd=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var tt=r,Tt=F;de=a;var Sn=f;switch(Tt.tag){case 1:if(tt=Tt.payload,typeof tt=="function"){Oe=tt.call(Sn,Oe,de);break e}Oe=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=Tt.payload,de=typeof tt=="function"?tt.call(Sn,Oe,de):tt,de==null)break e;Oe=ye({},Oe,de);break e;case 2:xa=!0}}de=F.callback,de!==null&&(r.flags|=64,_e&&(r.flags|=8192),_e=v.callbacks,_e===null?v.callbacks=[de]:_e.push(de))}else _e={lane:de,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Ee===null?(re=Ee=_e,W=Oe):Ee=Ee.next=_e,O|=de;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;_e=F,F=_e.next,_e.next=null,v.lastBaseUpdate=_e,v.shared.pending=null}}while(!0);Ee===null&&(W=Oe),v.baseState=W,v.firstBaseUpdate=re,v.lastBaseUpdate=Ee,w===null&&(v.shared.lanes=0),Da|=O,r.lanes=O,r.memoizedState=Oe}}function Z2(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function K2(r,a){var f=r.callbacks;if(f!==null)for(r.callbacks=null,r=0;r<f.length;r++)Z2(f[r],a)}function gu(r,a){try{var f=a.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var v=g.next;f=v;do{if((f.tag&r)===r){g=void 0;var w=f.create,O=f.inst;g=w(),O.destroy=g}f=f.next}while(f!==v)}}catch(F){sn(a,a.return,F)}}function Ca(r,a,f){try{var g=a.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var w=v.next;g=w;do{if((g.tag&r)===r){var O=g.inst,F=O.destroy;if(F!==void 0){O.destroy=void 0,v=a;var W=f;try{F()}catch(re){sn(v,W,re)}}}g=g.next}while(g!==w)}}catch(re){sn(a,a.return,re)}}function $2(r){var a=r.updateQueue;if(a!==null){var f=r.stateNode;try{K2(a,f)}catch(g){sn(r,r.return,g)}}}function J2(r,a,f){f.props=MA(r.type,r.memoizedProps),f.state=r.memoizedState;try{f.componentWillUnmount()}catch(g){sn(r,a,g)}}function LA(r,a){try{var f=r.ref;if(f!==null){var g=r.stateNode;switch(r.tag){case 26:case 27:case 5:var v=g;break;default:v=g}typeof f=="function"?r.refCleanup=f(v):f.current=v}}catch(w){sn(r,a,w)}}function er(r,a){var f=r.ref,g=r.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(v){sn(r,a,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(v){sn(r,a,v)}else f.current=null}function e1(r){var a=r.type,f=r.memoizedProps,g=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(v){sn(r,r.return,v)}}function t1(r,a,f){try{var g=r.stateNode;o4(g,r.type,f,a),g[u]=a}catch(v){sn(r,r.return,v)}}function n1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function gd(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||n1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function md(r,a,f){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?f.nodeType===8?f.parentNode.insertBefore(r,a):f.insertBefore(r,a):(f.nodeType===8?(a=f.parentNode,a.insertBefore(r,f)):(a=f,a.appendChild(r)),f=f._reactRootContainer,f!=null||a.onclick!==null||(a.onclick=Pf));else if(g!==4&&g!==27&&(r=r.child,r!==null))for(md(r,a,f),r=r.sibling;r!==null;)md(r,a,f),r=r.sibling}function vf(r,a,f){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?f.insertBefore(r,a):f.appendChild(r);else if(g!==4&&g!==27&&(r=r.child,r!==null))for(vf(r,a,f),r=r.sibling;r!==null;)vf(r,a,f),r=r.sibling}var Ps=!1,wn=!1,pd=!1,i1=typeof WeakSet=="function"?WeakSet:Set,Zn=null,r1=!1;function Uw(r,a){if(r=r.containerInfo,Yd=Vf,r=Zc(r),vo(r)){if("selectionStart"in r)var f={start:r.selectionStart,end:r.selectionEnd};else e:{f=(f=r.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var v=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var O=0,F=-1,W=-1,re=0,Ee=0,Oe=r,de=null;t:for(;;){for(var _e;Oe!==f||v!==0&&Oe.nodeType!==3||(F=O+v),Oe!==w||g!==0&&Oe.nodeType!==3||(W=O+g),Oe.nodeType===3&&(O+=Oe.nodeValue.length),(_e=Oe.firstChild)!==null;)de=Oe,Oe=_e;for(;;){if(Oe===r)break t;if(de===f&&++re===v&&(F=O),de===w&&++Ee===g&&(W=O),(_e=Oe.nextSibling)!==null)break;Oe=de,de=Oe.parentNode}Oe=_e}f=F===-1||W===-1?null:{start:F,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(Qd={focusedElem:r,selectionRange:f},Vf=!1,Zn=a;Zn!==null;)if(a=Zn,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Zn=r;else for(;Zn!==null;){switch(a=Zn,w=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if(r&1024&&w!==null){r=void 0,f=a,v=w.memoizedProps,w=w.memoizedState,g=f.stateNode;try{var tt=MA(f.type,v,f.elementType===f.type);r=g.getSnapshotBeforeUpdate(tt,w),g.__reactInternalSnapshotBeforeUpdate=r}catch(Tt){sn(f,f.return,Tt)}}break;case 3:if(r&1024){if(r=a.stateNode.containerInfo,f=r.nodeType,f===9)Zd(r);else if(f===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Zd(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(r&1024)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,Zn=r;break}Zn=a.return}return tt=r1,r1=!1,tt}function s1(r,a,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Fs(r,f),g&4&&gu(5,f);break;case 1:if(Fs(r,f),g&4)if(r=f.stateNode,a===null)try{r.componentDidMount()}catch(F){sn(f,f.return,F)}else{var v=MA(f.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(v,a,r.__reactInternalSnapshotBeforeUpdate)}catch(F){sn(f,f.return,F)}}g&64&&$2(f),g&512&&LA(f,f.return);break;case 3:if(Fs(r,f),g&64&&(g=f.updateQueue,g!==null)){if(r=null,f.child!==null)switch(f.child.tag){case 27:case 5:r=f.child.stateNode;break;case 1:r=f.child.stateNode}try{K2(g,r)}catch(F){sn(f,f.return,F)}}break;case 26:Fs(r,f),g&512&&LA(f,f.return);break;case 27:case 5:Fs(r,f),a===null&&g&4&&e1(f),g&512&&LA(f,f.return);break;case 12:Fs(r,f);break;case 13:Fs(r,f),g&4&&o1(r,f);break;case 22:if(v=f.memoizedState!==null||Ps,!v){a=a!==null&&a.memoizedState!==null||wn;var w=Ps,O=wn;Ps=v,(wn=a)&&!O?Ra(r,f,(f.subtreeFlags&8772)!==0):Fs(r,f),Ps=w,wn=O}g&512&&(f.memoizedProps.mode==="manual"?LA(f,f.return):er(f,f.return));break;default:Fs(r,f)}}function a1(r){var a=r.alternate;a!==null&&(r.alternate=null,a1(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Yn(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Pn=null,tr=!1;function Is(r,a,f){for(f=f.child;f!==null;)A1(r,a,f),f=f.sibling}function A1(r,a,f){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(fs,f)}catch{}switch(f.tag){case 26:wn||er(f,a),Is(r,a,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:wn||er(f,a);var g=Pn,v=tr;for(Pn=f.stateNode,Is(r,a,f),f=f.stateNode,a=f.attributes;a.length;)f.removeAttributeNode(a[0]);Yn(f),Pn=g,tr=v;break;case 5:wn||er(f,a);case 6:v=Pn;var w=tr;if(Pn=null,Is(r,a,f),Pn=v,tr=w,Pn!==null)if(tr)try{r=Pn,g=f.stateNode,r.nodeType===8?r.parentNode.removeChild(g):r.removeChild(g)}catch(O){sn(f,a,O)}else try{Pn.removeChild(f.stateNode)}catch(O){sn(f,a,O)}break;case 18:Pn!==null&&(tr?(a=Pn,f=f.stateNode,a.nodeType===8?qd(a.parentNode,f):a.nodeType===1&&qd(a,f),Nu(a)):qd(Pn,f.stateNode));break;case 4:g=Pn,v=tr,Pn=f.stateNode.containerInfo,tr=!0,Is(r,a,f),Pn=g,tr=v;break;case 0:case 11:case 14:case 15:wn||Ca(2,f,a),wn||Ca(4,f,a),Is(r,a,f);break;case 1:wn||(er(f,a),g=f.stateNode,typeof g.componentWillUnmount=="function"&&J2(f,a,g)),Is(r,a,f);break;case 21:Is(r,a,f);break;case 22:wn||er(f,a),wn=(g=wn)||f.memoizedState!==null,Is(r,a,f),wn=g;break;default:Is(r,a,f)}}function o1(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Nu(r)}catch(f){sn(a,a.return,f)}}function kw(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new i1),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new i1),a;default:throw Error(i(435,r.tag))}}function _d(r,a){var f=kw(r);a.forEach(function(g){var v=$w.bind(null,r,g);f.has(g)||(f.add(g),g.then(v,v))})}function gr(r,a){var f=a.deletions;if(f!==null)for(var g=0;g<f.length;g++){var v=f[g],w=r,O=a,F=O;e:for(;F!==null;){switch(F.tag){case 27:case 5:Pn=F.stateNode,tr=!1;break e;case 3:Pn=F.stateNode.containerInfo,tr=!0;break e;case 4:Pn=F.stateNode.containerInfo,tr=!0;break e}F=F.return}if(Pn===null)throw Error(i(160));A1(w,O,v),Pn=null,tr=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)l1(a,r),a=a.sibling}var Or=null;function l1(r,a){var f=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:gr(a,r),mr(r),g&4&&(Ca(3,r,r.return),gu(3,r),Ca(5,r,r.return));break;case 1:gr(a,r),mr(r),g&512&&(wn||f===null||er(f,f.return)),g&64&&Ps&&(r=r.updateQueue,r!==null&&(g=r.callbacks,g!==null&&(f=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var v=Or;if(gr(a,r),mr(r),g&512&&(wn||f===null||er(f,f.return)),g&4){var w=f!==null?f.memoizedState:null;if(g=r.memoizedState,f===null)if(g===null)if(r.stateNode===null){e:{g=r.type,f=r.memoizedProps,v=v.ownerDocument||v;t:switch(g){case"title":w=v.getElementsByTagName("title")[0],(!w||w[bt]||w[Xe]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(g),v.head.insertBefore(w,v.querySelector("head > title"))),oi(w,g,f),w[Xe]=r,fn(w),g=w;break e;case"link":var O=e_("link","href",v).get(g+(f.href||""));if(O){for(var F=0;F<O.length;F++)if(w=O[F],w.getAttribute("href")===(f.href==null?null:f.href)&&w.getAttribute("rel")===(f.rel==null?null:f.rel)&&w.getAttribute("title")===(f.title==null?null:f.title)&&w.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){O.splice(F,1);break t}}w=v.createElement(g),oi(w,g,f),v.head.appendChild(w);break;case"meta":if(O=e_("meta","content",v).get(g+(f.content||""))){for(F=0;F<O.length;F++)if(w=O[F],w.getAttribute("content")===(f.content==null?null:""+f.content)&&w.getAttribute("name")===(f.name==null?null:f.name)&&w.getAttribute("property")===(f.property==null?null:f.property)&&w.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&w.getAttribute("charset")===(f.charSet==null?null:f.charSet)){O.splice(F,1);break t}}w=v.createElement(g),oi(w,g,f),v.head.appendChild(w);break;default:throw Error(i(468,g))}w[Xe]=r,fn(w),g=w}r.stateNode=g}else t_(v,r.type,r.stateNode);else r.stateNode=J1(v,g,r.memoizedProps);else w!==g?(w===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):w.count--,g===null?t_(v,r.type,r.stateNode):J1(v,g,r.memoizedProps)):g===null&&r.stateNode!==null&&t1(r,r.memoizedProps,f.memoizedProps)}break;case 27:if(g&4&&r.alternate===null){v=r.stateNode,w=r.memoizedProps;try{for(var W=v.firstChild;W;){var re=W.nextSibling,Ee=W.nodeName;W[bt]||Ee==="HEAD"||Ee==="BODY"||Ee==="SCRIPT"||Ee==="STYLE"||Ee==="LINK"&&W.rel.toLowerCase()==="stylesheet"||v.removeChild(W),W=re}for(var Oe=r.type,de=v.attributes;de.length;)v.removeAttributeNode(de[0]);oi(v,Oe,w),v[Xe]=r,v[u]=w}catch(tt){sn(r,r.return,tt)}}case 5:if(gr(a,r),mr(r),g&512&&(wn||f===null||er(f,f.return)),r.flags&32){v=r.stateNode;try{X(v,"")}catch(tt){sn(r,r.return,tt)}}g&4&&r.stateNode!=null&&(v=r.memoizedProps,t1(r,v,f!==null?f.memoizedProps:v)),g&1024&&(pd=!0);break;case 6:if(gr(a,r),mr(r),g&4){if(r.stateNode===null)throw Error(i(162));g=r.memoizedProps,f=r.stateNode;try{f.nodeValue=g}catch(tt){sn(r,r.return,tt)}}break;case 3:if(kf=null,v=Or,Or=Ff(a.containerInfo),gr(a,r),Or=v,mr(r),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Nu(a.containerInfo)}catch(tt){sn(r,r.return,tt)}pd&&(pd=!1,u1(r));break;case 4:g=Or,Or=Ff(r.stateNode.containerInfo),gr(a,r),mr(r),Or=g;break;case 12:gr(a,r),mr(r);break;case 13:gr(a,r),mr(r),r.child.flags&8192&&r.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Md=Fn()),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,_d(r,g)));break;case 22:if(g&512&&(wn||f===null||er(f,f.return)),W=r.memoizedState!==null,re=f!==null&&f.memoizedState!==null,Ee=Ps,Oe=wn,Ps=Ee||W,wn=Oe||re,gr(a,r),wn=Oe,Ps=Ee,mr(r),a=r.stateNode,a._current=r,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,g&8192&&(a._visibility=W?a._visibility&-2:a._visibility|1,W&&(a=Ps||wn,f===null||re||a||No(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))e:for(f=null,a=r;;){if(a.tag===5||a.tag===26||a.tag===27){if(f===null){re=f=a;try{if(v=re.stateNode,W)w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{O=re.stateNode,F=re.memoizedProps.style;var _e=F!=null&&F.hasOwnProperty("display")?F.display:null;O.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(tt){sn(re,re.return,tt)}}}else if(a.tag===6){if(f===null){re=a;try{re.stateNode.nodeValue=W?"":re.memoizedProps}catch(tt){sn(re,re.return,tt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;f===a&&(f=null),a=a.return}f===a&&(f=null),a.sibling.return=a.return,a=a.sibling}g&4&&(g=r.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,_d(r,f))));break;case 19:gr(a,r),mr(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,_d(r,g)));break;case 21:break;default:gr(a,r),mr(r)}}function mr(r){var a=r.flags;if(a&2){try{if(r.tag!==27){e:{for(var f=r.return;f!==null;){if(n1(f)){var g=f;break e}f=f.return}throw Error(i(160))}switch(g.tag){case 27:var v=g.stateNode,w=gd(r);vf(r,w,v);break;case 5:var O=g.stateNode;g.flags&32&&(X(O,""),g.flags&=-33);var F=gd(r);vf(r,F,O);break;case 3:case 4:var W=g.stateNode.containerInfo,re=gd(r);md(r,re,W);break;default:throw Error(i(161))}}}catch(Ee){sn(r,r.return,Ee)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function u1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;u1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Fs(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)s1(r,a.alternate,a),a=a.sibling}function No(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Ca(4,a,a.return),No(a);break;case 1:er(a,a.return);var f=a.stateNode;typeof f.componentWillUnmount=="function"&&J2(a,a.return,f),No(a);break;case 26:case 27:case 5:er(a,a.return),No(a);break;case 22:er(a,a.return),a.memoizedState===null&&No(a);break;default:No(a)}r=r.sibling}}function Ra(r,a,f){for(f=f&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var g=a.alternate,v=r,w=a,O=w.flags;switch(w.tag){case 0:case 11:case 15:Ra(v,w,f),gu(4,w);break;case 1:if(Ra(v,w,f),g=w,v=g.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(re){sn(g,g.return,re)}if(g=w,v=g.updateQueue,v!==null){var F=g.stateNode;try{var W=v.shared.hiddenCallbacks;if(W!==null)for(v.shared.hiddenCallbacks=null,v=0;v<W.length;v++)Z2(W[v],F)}catch(re){sn(g,g.return,re)}}f&&O&64&&$2(w),LA(w,w.return);break;case 26:case 27:case 5:Ra(v,w,f),f&&g===null&&O&4&&e1(w),LA(w,w.return);break;case 12:Ra(v,w,f);break;case 13:Ra(v,w,f),f&&O&4&&o1(v,w);break;case 22:w.memoizedState===null&&Ra(v,w,f),LA(w,w.return);break;default:Ra(v,w,f)}a=a.sibling}}function bd(r,a){var f=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==f&&(r!=null&&r.refCount++,f!=null&&y(f))}function Ed(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&y(r))}function La(r,a,f,g){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)c1(r,a,f,g),a=a.sibling}function c1(r,a,f,g){var v=a.flags;switch(a.tag){case 0:case 11:case 15:La(r,a,f,g),v&2048&&gu(9,a);break;case 3:La(r,a,f,g),v&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&y(r)));break;case 12:if(v&2048){La(r,a,f,g),r=a.stateNode;try{var w=a.memoizedProps,O=w.id,F=w.onPostCommit;typeof F=="function"&&F(O,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(W){sn(a,a.return,W)}}else La(r,a,f,g);break;case 23:break;case 22:w=a.stateNode,a.memoizedState!==null?w._visibility&4?La(r,a,f,g):mu(r,a):w._visibility&4?La(r,a,f,g):(w._visibility|=4,Bo(r,a,f,g,(a.subtreeFlags&10256)!==0)),v&2048&&bd(a.alternate,a);break;case 24:La(r,a,f,g),v&2048&&Ed(a.alternate,a);break;default:La(r,a,f,g)}}function Bo(r,a,f,g,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var w=r,O=a,F=f,W=g,re=O.flags;switch(O.tag){case 0:case 11:case 15:Bo(w,O,F,W,v),gu(8,O);break;case 23:break;case 22:var Ee=O.stateNode;O.memoizedState!==null?Ee._visibility&4?Bo(w,O,F,W,v):mu(w,O):(Ee._visibility|=4,Bo(w,O,F,W,v)),v&&re&2048&&bd(O.alternate,O);break;case 24:Bo(w,O,F,W,v),v&&re&2048&&Ed(O.alternate,O);break;default:Bo(w,O,F,W,v)}a=a.sibling}}function mu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var f=r,g=a,v=g.flags;switch(g.tag){case 22:mu(f,g),v&2048&&bd(g.alternate,g);break;case 24:mu(f,g),v&2048&&Ed(g.alternate,g);break;default:mu(f,g)}a=a.sibling}}var pu=8192;function Po(r){if(r.subtreeFlags&pu)for(r=r.child;r!==null;)f1(r),r=r.sibling}function f1(r){switch(r.tag){case 26:Po(r),r.flags&pu&&r.memoizedState!==null&&M4(Or,r.memoizedState,r.memoizedProps);break;case 5:Po(r);break;case 3:case 4:var a=Or;Or=Ff(r.stateNode.containerInfo),Po(r),Or=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=pu,pu=16777216,Po(r),pu=a):Po(r));break;default:Po(r)}}function h1(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function _u(r){var a=r.deletions;if(r.flags&16){if(a!==null)for(var f=0;f<a.length;f++){var g=a[f];Zn=g,g1(g,r)}h1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)d1(r),r=r.sibling}function d1(r){switch(r.tag){case 0:case 11:case 15:_u(r),r.flags&2048&&Ca(9,r,r.return);break;case 3:_u(r);break;case 12:_u(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&4&&(r.return===null||r.return.tag!==13)?(a._visibility&=-5,Tf(r)):_u(r);break;default:_u(r)}}function Tf(r){var a=r.deletions;if(r.flags&16){if(a!==null)for(var f=0;f<a.length;f++){var g=a[f];Zn=g,g1(g,r)}h1(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Ca(8,a,a.return),Tf(a);break;case 22:f=a.stateNode,f._visibility&4&&(f._visibility&=-5,Tf(a));break;default:Tf(a)}r=r.sibling}}function g1(r,a){for(;Zn!==null;){var f=Zn;switch(f.tag){case 0:case 11:case 15:Ca(8,f,a);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:y(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Zn=g;else e:for(f=r;Zn!==null;){g=Zn;var v=g.sibling,w=g.return;if(a1(g),g===f){Zn=null;break e}if(v!==null){v.return=w,Zn=v;break e}Zn=w}}}function zw(r,a,f,g){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(r,a,f,g){return new zw(r,a,f,g)}function yd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Oa(r,a){var f=r.alternate;return f===null?(f=pr(r.tag,a,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=a,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&31457280,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,a=r.dependencies,f.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f.refCleanup=r.refCleanup,f}function m1(r,a){r.flags&=31457282;var f=r.alternate;return f===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=f.childLanes,r.lanes=f.lanes,r.child=f.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=f.memoizedProps,r.memoizedState=f.memoizedState,r.updateQueue=f.updateQueue,r.type=f.type,a=f.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function wf(r,a,f,g,v,w){var O=0;if(g=r,typeof r=="function")yd(r)&&(O=1);else if(typeof r=="string")O=x4(r,f,lt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case _:return OA(f.children,v,w,a);case E:O=8,v|=24;break;case x:return r=pr(12,f,a,v|2),r.elementType=x,r.lanes=w,r;case G:return r=pr(13,f,a,v),r.elementType=G,r.lanes=w,r;case j:return r=pr(19,f,a,v),r.elementType=j,r.lanes=w,r;case K:return p1(f,v,w,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case S:case L:O=10;break e;case C:O=9;break e;case B:O=11;break e;case H:O=14;break e;case Y:O=16,g=null;break e}O=29,f=Error(i(130,r===null?"null":typeof r,"")),g=null}return a=pr(O,f,a,v),a.elementType=r,a.type=g,a.lanes=w,a}function OA(r,a,f,g){return r=pr(7,r,g,a),r.lanes=f,r}function p1(r,a,f,g){r=pr(22,r,g,a),r.elementType=K,r.lanes=f;var v={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var w=v._current;if(w===null)throw Error(i(456));if(!(v._pendingVisibility&2)){var O=Yr(w,2);O!==null&&(v._pendingVisibility|=2,Ni(O,w,2))}},attach:function(){var w=v._current;if(w===null)throw Error(i(456));if(v._pendingVisibility&2){var O=Yr(w,2);O!==null&&(v._pendingVisibility&=-3,Ni(O,w,2))}}};return r.stateNode=v,r}function vd(r,a,f){return r=pr(6,r,null,a),r.lanes=f,r}function Td(r,a,f){return a=pr(4,r.children!==null?r.children:[],r.key,a),a.lanes=f,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function Us(r){r.flags|=4}function _1(r,a){if(a.type!=="stylesheet"||a.state.loading&4)r.flags&=-16777217;else if(r.flags|=16777216,!n_(a)){if(a=Di.current,a!==null&&((Ht&4194176)===Ht?Gi!==null:(Ht&62914560)!==Ht&&!(Ht&536870912)||a!==Gi))throw zi=au,of;r.flags|=8192}}function xf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?aa():536870912,r.lanes|=a,Fo|=a)}function bu(r,a){if(!Vt)switch(r.tailMode){case"hidden":a=r.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?r.tail=null:f.sibling=null;break;case"collapsed":f=r.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function pn(r){var a=r.alternate!==null&&r.alternate.child===r.child,f=0,g=0;if(a)for(var v=r.child;v!==null;)f|=v.lanes|v.childLanes,g|=v.subtreeFlags&31457280,g|=v.flags&31457280,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)f|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=g,r.childLanes=f,a}function Gw(r,a,f){var g=a.pendingProps;switch(Ro(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(a),null;case 1:return pn(a),null;case 3:return f=a.stateNode,g=null,r!==null&&(g=r.memoizedState.cache),a.memoizedState.cache!==g&&(a.flags|=2048),Bs(p),jt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&&(ba(a)?Us(a):r===null||r.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Ki!==null&&(Od(Ki),Ki=null))),pn(a),null;case 26:return f=a.memoizedState,r===null?(Us(a),f!==null?(pn(a),_1(a,f)):(pn(a),a.flags&=-16777217)):f?f!==r.memoizedState?(Us(a),pn(a),_1(a,f)):(pn(a),a.flags&=-16777217):(r.memoizedProps!==g&&Us(a),pn(a),a.flags&=-16777217),null;case 27:hi(a),f=qt.current;var v=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==g&&Us(a);else{if(!g){if(a.stateNode===null)throw Error(i(166));return pn(a),null}r=lt.current,ba(a)?af(a):(r=W1(v,g,f),a.stateNode=r,Us(a))}return pn(a),null;case 5:if(hi(a),f=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==g&&Us(a);else{if(!g){if(a.stateNode===null)throw Error(i(166));return pn(a),null}if(r=lt.current,ba(a))af(a);else{switch(v=If(qt.current),r){case 1:r=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:r=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":r=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":r=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":r=v.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof g.is=="string"?v.createElement("select",{is:g.is}):v.createElement("select"),g.multiple?r.multiple=!0:g.size&&(r.size=g.size);break;default:r=typeof g.is=="string"?v.createElement(f,{is:g.is}):v.createElement(f)}}r[Xe]=a,r[u]=g;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)r.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=r;e:switch(oi(r,f,g),f){case"button":case"input":case"select":case"textarea":r=!!g.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Us(a)}}return pn(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==g&&Us(a);else{if(typeof g!="string"&&a.stateNode===null)throw Error(i(166));if(r=qt.current,ba(a)){if(r=a.stateNode,f=a.memoizedProps,g=null,v=Xn,v!==null)switch(v.tag){case 27:case 5:g=v.memoizedProps}r[Xe]=a,r=!!(r.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||V1(r.nodeValue,f)),r||Rs(a)}else r=If(r).createTextNode(g),r[Xe]=a,a.stateNode=r}return pn(a),null;case 13:if(g=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=ba(a),g!==null&&g.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Xe]=a}else Ea(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;pn(a),v=!1}else Ki!==null&&(Od(Ki),Ki=null),v=!0;if(!v)return a.flags&256?(dr(a),a):(dr(a),null)}if(dr(a),a.flags&128)return a.lanes=f,a;if(f=g!==null,r=r!==null&&r.memoizedState!==null,f){g=a.child,v=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(v=g.alternate.memoizedState.cachePool.pool);var w=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==v&&(g.flags|=2048)}return f!==r&&f&&(a.child.flags|=8192),xf(a,a.updateQueue),pn(a),null;case 4:return jt(),r===null&&Vd(a.stateNode.containerInfo),pn(a),null;case 10:return Bs(a.type),pn(a),null;case 19:if(Me(en),v=a.memoizedState,v===null)return pn(a),null;if(g=(a.flags&128)!==0,w=v.rendering,w===null)if(g)bu(v,!1);else{if(xn!==0||r!==null&&r.flags&128)for(r=a.child;r!==null;){if(w=o(r),w!==null){for(a.flags|=128,bu(v,!1),r=w.updateQueue,a.updateQueue=r,xf(a,r),a.subtreeFlags=0,r=f,f=a.child;f!==null;)m1(f,r),f=f.sibling;return Ge(en,en.current&1|2),a.child}r=r.sibling}v.tail!==null&&Fn()>Sf&&(a.flags|=128,g=!0,bu(v,!1),a.lanes=4194304)}else{if(!g)if(r=o(w),r!==null){if(a.flags|=128,g=!0,r=r.updateQueue,a.updateQueue=r,xf(a,r),bu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!w.alternate&&!Vt)return pn(a),null}else 2*Fn()-v.renderingStartTime>Sf&&f!==536870912&&(a.flags|=128,g=!0,bu(v,!1),a.lanes=4194304);v.isBackwards?(w.sibling=a.child,a.child=w):(r=v.last,r!==null?r.sibling=w:a.child=w,v.last=w)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=Fn(),a.sibling=null,r=en.current,Ge(en,g?r&1|2:r&1),a):(pn(a),null);case 22:case 23:return dr(a),Ue(),g=a.memoizedState!==null,r!==null?r.memoizedState!==null!==g&&(a.flags|=8192):g&&(a.flags|=8192),g?f&536870912&&!(a.flags&128)&&(pn(a),a.subtreeFlags&6&&(a.flags|=8192)):pn(a),f=a.updateQueue,f!==null&&xf(a,f.retryQueue),f=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==f&&(a.flags|=2048),r!==null&&Me(ie),null;case 24:return f=null,r!==null&&(f=r.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Bs(p),pn(a),null;case 25:return null}throw Error(i(156,a.tag))}function Vw(r,a){switch(Ro(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Bs(p),jt(),r=a.flags,r&65536&&!(r&128)?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return hi(a),null;case 13:if(dr(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ea()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return Me(en),null;case 4:return jt(),null;case 10:return Bs(a.type),null;case 22:case 23:return dr(a),Ue(),r!==null&&Me(ie),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Bs(p),null;case 25:return null;default:return null}}function b1(r,a){switch(Ro(a),a.tag){case 3:Bs(p),jt();break;case 26:case 27:case 5:hi(a);break;case 4:jt();break;case 13:dr(a);break;case 19:Me(en);break;case 10:Bs(a.type);break;case 22:case 23:dr(a),Ue(),r!==null&&Me(ie);break;case 24:Bs(p)}}var Hw={getCacheForType:function(r){var a=bi(p),f=a.data.get(r);return f===void 0&&(f=r(),a.data.set(r,f)),f}},jw=typeof WeakMap=="function"?WeakMap:Map,_n=0,ln=null,Ft=null,Ht=0,un=0,nr=null,ks=!1,Io=!1,wd=!1,zs=0,xn=0,Da=0,DA=0,xd=0,_r=0,Fo=0,Eu=null,Wr=null,Sd=!1,Md=0,Sf=1/0,Mf=null,Na=null,Cf=!1,NA=null,yu=0,Cd=0,Rd=null,vu=0,Ld=null;function ir(){if(_n&2&&Ht!==0)return Ht&-Ht;if(Ae.T!==null){var r=R;return r!==0?r:Ud()}return oe()}function E1(){_r===0&&(_r=!(Ht&536870912)||Vt?oA():536870912);var r=Di.current;return r!==null&&(r.flags|=32),_r}function Ni(r,a,f){(r===ln&&un===2||r.cancelPendingCommit!==null)&&(Uo(r,0),Gs(r,Ht,_r,!1)),Gr(r,f),(!(_n&2)||r!==ln)&&(r===ln&&(!(_n&2)&&(DA|=f),xn===4&&Gs(r,Ht,_r,!1)),qr(r))}function y1(r,a,f){if(_n&6)throw Error(i(327));var g=!f&&(a&60)===0&&(a&r.expiredLanes)===0||zr(r,a),v=g?Xw(r,a):Bd(r,a,!0),w=g;do{if(v===0){Io&&!g&&Gs(r,a,0,!1);break}else if(v===6)Gs(r,a,0,!ks);else{if(f=r.current.alternate,w&&!Yw(f)){v=Bd(r,a,!1),w=!1;continue}if(v===2){if(w=a,r.errorRecoveryDisabledLanes&w)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){a=O;e:{var F=r;v=Eu;var W=F.current.memoizedState.isDehydrated;if(W&&(Uo(F,O).flags|=256),O=Bd(F,O,!1),O!==2){if(wd&&!W){F.errorRecoveryDisabledLanes|=w,DA|=w,v=4;break e}w=Wr,Wr=v,w!==null&&Od(w)}v=O}if(w=!1,v!==2)continue}}if(v===1){Uo(r,0),Gs(r,a,0,!0);break}e:{switch(g=r,v){case 0:case 1:throw Error(i(345));case 4:if((a&4194176)===a){Gs(g,a,_r,!ks);break e}break;case 2:Wr=null;break;case 3:case 5:break;default:throw Error(i(329))}if(g.finishedWork=f,g.finishedLanes=a,(a&62914560)===a&&(w=Md+300-Fn(),10<w)){if(Gs(g,a,_r,!ks),sa(g,0)!==0)break e;g.timeoutHandle=Y1(v1.bind(null,g,f,Wr,Mf,Sd,a,_r,DA,Fo,ks,2,-0,0),w);break e}v1(g,f,Wr,Mf,Sd,a,_r,DA,Fo,ks,0,-0,0)}}break}while(!0);qr(r)}function Od(r){Wr===null?Wr=r:Wr.push.apply(Wr,r)}function v1(r,a,f,g,v,w,O,F,W,re,Ee,Oe,de){var _e=a.subtreeFlags;if((_e&8192||(_e&16785408)===16785408)&&(Cu={stylesheets:null,count:0,unsuspend:S4},f1(a),a=C4(),a!==null)){r.cancelPendingCommit=a(R1.bind(null,r,f,g,v,O,F,W,1,Oe,de)),Gs(r,w,O,!re);return}R1(r,f,g,v,O,F,W,Ee,Oe,de)}function Yw(r){for(var a=r;;){var f=a.tag;if((f===0||f===11||f===15)&&a.flags&16384&&(f=a.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var v=f[g],w=v.getSnapshot;v=v.value;try{if(!Ri(w(),v))return!1}catch{return!1}}if(f=a.child,a.subtreeFlags&16384&&f!==null)f.return=a,a=f;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Gs(r,a,f,g){a&=~xd,a&=~DA,r.suspendedLanes|=a,r.pingedLanes&=~a,g&&(r.warmLanes|=a),g=r.expirationTimes;for(var v=a;0<v;){var w=31-ri(v),O=1<<w;g[w]=-1,v&=~O}f!==0&&ms(r,f,a)}function Rf(){return _n&6?!0:(Tu(0),!1)}function Dd(){if(Ft!==null){if(un===0)var r=Ft.return;else r=Ft,Ns=CA=null,Uh(r),st=null,pi=0,r=Ft;for(;r!==null;)b1(r.alternate,r),r=r.return;Ft=null}}function Uo(r,a){r.finishedWork=null,r.finishedLanes=0;var f=r.timeoutHandle;f!==-1&&(r.timeoutHandle=-1,u4(f)),f=r.cancelPendingCommit,f!==null&&(r.cancelPendingCommit=null,f()),Dd(),ln=r,Ft=f=Oa(r.current,null),Ht=a,un=0,nr=null,ks=!1,Io=zr(r,a),wd=!1,Fo=_r=xd=DA=Da=xn=0,Wr=Eu=null,Sd=!1,a&8&&(a|=a&32);var g=r.entangledLanes;if(g!==0)for(r=r.entanglements,g&=a;0<g;){var v=31-ri(g),w=1<<v;a|=r[v],g&=~w}return zs=a,Fi(),f}function T1(r,a){$=null,Ae.H=Xr,a===va?(a=$i(),un=3):a===of?(a=$i(),un=4):un=a===I2?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,nr=a,Ft===null&&(xn=1,bf(r,Oi(a,r.current)))}function w1(){var r=Ae.H;return Ae.H=Xr,r===null?Xr:r}function x1(){var r=Ae.A;return Ae.A=Hw,r}function Nd(){xn=4,ks||(Ht&4194176)!==Ht&&Di.current!==null||(Io=!0),!(Da&134217727)&&!(DA&134217727)||ln===null||Gs(ln,Ht,_r,!1)}function Bd(r,a,f){var g=_n;_n|=2;var v=w1(),w=x1();(ln!==r||Ht!==a)&&(Mf=null,Uo(r,a)),a=!1;var O=xn;e:do try{if(un!==0&&Ft!==null){var F=Ft,W=nr;switch(un){case 8:Dd(),O=6;break e;case 3:case 2:case 6:Di.current===null&&(a=!0);var re=un;if(un=0,nr=null,ko(r,F,W,re),f&&Io){O=0;break e}break;default:re=un,un=0,nr=null,ko(r,F,W,re)}}Qw(),O=xn;break}catch(Ee){T1(r,Ee)}while(!0);return a&&r.shellSuspendCounter++,Ns=CA=null,_n=g,Ae.H=v,Ae.A=w,Ft===null&&(ln=null,Ht=0,Fi()),O}function Qw(){for(;Ft!==null;)S1(Ft)}function Xw(r,a){var f=_n;_n|=2;var g=w1(),v=x1();ln!==r||Ht!==a?(Mf=null,Sf=Fn()+500,Uo(r,a)):Io=zr(r,a);e:do try{if(un!==0&&Ft!==null){a=Ft;var w=nr;t:switch(un){case 1:un=0,nr=null,ko(r,a,w,1);break;case 2:if(lf(w)){un=0,nr=null,M1(a);break}a=function(){un===2&&ln===r&&(un=7),qr(r)},w.then(a,a);break e;case 3:un=7;break e;case 4:un=5;break e;case 7:lf(w)?(un=0,nr=null,M1(a)):(un=0,nr=null,ko(r,a,w,7));break;case 5:var O=null;switch(Ft.tag){case 26:O=Ft.memoizedState;case 5:case 27:var F=Ft;if(!O||n_(O)){un=0,nr=null;var W=F.sibling;if(W!==null)Ft=W;else{var re=F.return;re!==null?(Ft=re,Lf(re)):Ft=null}break t}}un=0,nr=null,ko(r,a,w,5);break;case 6:un=0,nr=null,ko(r,a,w,6);break;case 8:Dd(),xn=6;break e;default:throw Error(i(462))}}Ww();break}catch(Ee){T1(r,Ee)}while(!0);return Ns=CA=null,Ae.H=g,Ae.A=v,_n=f,Ft!==null?0:(ln=null,Ht=0,Fi(),xn)}function Ww(){for(;Ft!==null&&!nA();)S1(Ft)}function S1(r){var a=W2(r.alternate,r,zs);r.memoizedProps=r.pendingProps,a===null?Lf(r):Ft=a}function M1(r){var a=r,f=a.alternate;switch(a.tag){case 15:case 0:a=V2(f,a,a.pendingProps,a.type,void 0,Ht);break;case 11:a=V2(f,a,a.pendingProps,a.type.render,a.ref,Ht);break;case 5:Uh(a);default:b1(f,a),a=Ft=m1(a,zs),a=W2(f,a,zs)}r.memoizedProps=r.pendingProps,a===null?Lf(r):Ft=a}function ko(r,a,f,g){Ns=CA=null,Uh(a),st=null,pi=0;var v=a.return;try{if(Iw(r,v,a,f,Ht)){xn=1,bf(r,Oi(f,r.current)),Ft=null;return}}catch(w){if(v!==null)throw Ft=v,w;xn=1,bf(r,Oi(f,r.current)),Ft=null;return}a.flags&32768?(Vt||g===1?r=!0:Io||Ht&536870912?r=!1:(ks=r=!0,(g===2||g===3||g===6)&&(g=Di.current,g!==null&&g.tag===13&&(g.flags|=16384))),C1(a,r)):Lf(a)}function Lf(r){var a=r;do{if(a.flags&32768){C1(a,ks);return}r=a.return;var f=Gw(a.alternate,a,zs);if(f!==null){Ft=f;return}if(a=a.sibling,a!==null){Ft=a;return}Ft=a=r}while(a!==null);xn===0&&(xn=5)}function C1(r,a){do{var f=Vw(r.alternate,r);if(f!==null){f.flags&=32767,Ft=f;return}if(f=r.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!a&&(r=r.sibling,r!==null)){Ft=r;return}Ft=r=f}while(r!==null);xn=6,Ft=null}function R1(r,a,f,g,v,w,O,F,W,re){var Ee=Ae.T,Oe=Ve.p;try{Ve.p=2,Ae.T=null,qw(r,a,f,g,Oe,v,w,O,F,W,re)}finally{Ae.T=Ee,Ve.p=Oe}}function qw(r,a,f,g,v,w,O,F){do zo();while(NA!==null);if(_n&6)throw Error(i(327));var W=r.finishedWork;if(g=r.finishedLanes,W===null)return null;if(r.finishedWork=null,r.finishedLanes=0,W===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var re=W.lanes|W.childLanes;if(re|=xo,gs(r,g,re,w,O,F),r===ln&&(Ft=ln=null,Ht=0),!(W.subtreeFlags&10256)&&!(W.flags&10256)||Cf||(Cf=!0,Cd=re,Rd=f,Jw(kr,function(){return zo(),null})),f=(W.flags&15990)!==0,W.subtreeFlags&15990||f?(f=Ae.T,Ae.T=null,w=Ve.p,Ve.p=2,O=_n,_n|=4,Uw(r,W),l1(W,r),Kc(Qd,r.containerInfo),Vf=!!Yd,Qd=Yd=null,r.current=W,s1(r,W.alternate,W),no(),_n=O,Ve.p=w,Ae.T=f):r.current=W,Cf?(Cf=!1,NA=r,yu=g):L1(r,re),re=r.pendingLanes,re===0&&(Na=null),kl(W.stateNode),qr(r),a!==null)for(v=r.onRecoverableError,W=0;W<a.length;W++)re=a[W],v(re.value,{componentStack:re.stack});return yu&3&&zo(),re=r.pendingLanes,g&4194218&&re&42?r===Ld?vu++:(vu=0,Ld=r):vu=0,Tu(0),null}function L1(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,y(a)))}function zo(){if(NA!==null){var r=NA,a=Cd;Cd=0;var f=Xi(yu),g=Ae.T,v=Ve.p;try{if(Ve.p=32>f?32:f,Ae.T=null,NA===null)var w=!1;else{f=Rd,Rd=null;var O=NA,F=yu;if(NA=null,yu=0,_n&6)throw Error(i(331));var W=_n;if(_n|=4,d1(O.current),c1(O,O.current,F,f),_n=W,Tu(0,!1),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(fs,O)}catch{}w=!0}return w}finally{Ve.p=v,Ae.T=g,L1(r,a)}}return!1}function O1(r,a,f){a=Oi(f,a),a=$h(r.stateNode,a,2),r=Ma(r,a,2),r!==null&&(Gr(r,2),qr(r))}function sn(r,a,f){if(r.tag===3)O1(r,r,f);else for(;a!==null;){if(a.tag===3){O1(a,r,f);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Na===null||!Na.has(g))){r=Oi(f,r),f=B2(2),g=Ma(a,f,2),g!==null&&(P2(f,g,a,r),Gr(g,2),qr(g));break}}a=a.return}}function Pd(r,a,f){var g=r.pingCache;if(g===null){g=r.pingCache=new jw;var v=new Set;g.set(a,v)}else v=g.get(a),v===void 0&&(v=new Set,g.set(a,v));v.has(f)||(wd=!0,v.add(f),r=Zw.bind(null,r,a,f),a.then(r,r))}function Zw(r,a,f){var g=r.pingCache;g!==null&&g.delete(a),r.pingedLanes|=r.suspendedLanes&f,r.warmLanes&=~f,ln===r&&(Ht&f)===f&&(xn===4||xn===3&&(Ht&62914560)===Ht&&300>Fn()-Md?!(_n&2)&&Uo(r,0):xd|=f,Fo===Ht&&(Fo=0)),qr(r)}function D1(r,a){a===0&&(a=aa()),r=Yr(r,a),r!==null&&(Gr(r,a),qr(r))}function Kw(r){var a=r.memoizedState,f=0;a!==null&&(f=a.retryLane),D1(r,f)}function $w(r,a){var f=0;switch(r.tag){case 13:var g=r.stateNode,v=r.memoizedState;v!==null&&(f=v.retryLane);break;case 19:g=r.stateNode;break;case 22:g=r.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(a),D1(r,f)}function Jw(r,a){return Ur(r,a)}var Of=null,Go=null,Id=!1,Df=!1,Fd=!1,BA=0;function qr(r){r!==Go&&r.next===null&&(Go===null?Of=Go=r:Go=Go.next=r),Df=!0,Id||(Id=!0,t4(e4))}function Tu(r,a){if(!Fd&&Df){Fd=!0;do for(var f=!1,g=Of;g!==null;){if(r!==0){var v=g.pendingLanes;if(v===0)var w=0;else{var O=g.suspendedLanes,F=g.pingedLanes;w=(1<<31-ri(42|r)+1)-1,w&=v&~(O&~F),w=w&201326677?w&201326677|1:w?w|2:0}w!==0&&(f=!0,P1(g,w))}else w=Ht,w=sa(g,g===ln?w:0),!(w&3)||zr(g,w)||(f=!0,P1(g,w));g=g.next}while(f);Fd=!1}}function e4(){Df=Id=!1;var r=0;BA!==0&&(l4()&&(r=BA),BA=0);for(var a=Fn(),f=null,g=Of;g!==null;){var v=g.next,w=N1(g,a);w===0?(g.next=null,f===null?Of=v:f.next=v,v===null&&(Go=f)):(f=g,(r!==0||w&3)&&(Df=!0)),g=v}Tu(r)}function N1(r,a){for(var f=r.suspendedLanes,g=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var O=31-ri(w),F=1<<O,W=v[O];W===-1?(!(F&f)||F&g)&&(v[O]=Gl(F,a)):W<=a&&(r.expiredLanes|=F),w&=~F}if(a=ln,f=Ht,f=sa(r,r===a?f:0),g=r.callbackNode,f===0||r===a&&un===2||r.cancelPendingCommit!==null)return g!==null&&g!==null&&on(g),r.callbackNode=null,r.callbackPriority=0;if(!(f&3)||zr(r,f)){if(a=f&-f,a===r.callbackPriority)return a;switch(g!==null&&on(g),Xi(f)){case 2:case 8:f=rA;break;case 32:f=kr;break;case 268435456:f=aA;break;default:f=kr}return g=B1.bind(null,r),f=Ur(f,g),r.callbackPriority=a,r.callbackNode=f,a}return g!==null&&g!==null&&on(g),r.callbackPriority=2,r.callbackNode=null,2}function B1(r,a){var f=r.callbackNode;if(zo()&&r.callbackNode!==f)return null;var g=Ht;return g=sa(r,r===ln?g:0),g===0?null:(y1(r,g,a),N1(r,Fn()),r.callbackNode!=null&&r.callbackNode===f?B1.bind(null,r):null)}function P1(r,a){if(zo())return null;y1(r,a,!0)}function t4(r){c4(function(){_n&6?Ur(io,r):r()})}function Ud(){return BA===0&&(BA=oA()),BA}function I1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:vn(""+r)}function F1(r,a){var f=a.ownerDocument.createElement("input");return f.name=a.name,f.value=a.value,r.id&&f.setAttribute("form",r.id),a.parentNode.insertBefore(f,a),r=new FormData(r),f.parentNode.removeChild(f),r}function n4(r,a,f,g,v){if(a==="submit"&&f&&f.stateNode===v){var w=I1((v[u]||null).action),O=g.submitter;O&&(a=(a=O[u]||null)?I1(a.formAction):O.getAttribute("formAction"),a!==null&&(w=a,O=null));var F=new Nn("action","action",null,g,v);r.push({event:F,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(BA!==0){var W=O?F1(v,O):new FormData(v);Xh(f,{pending:!0,data:W,method:v.method,action:w},null,W)}}else typeof w=="function"&&(F.preventDefault(),W=O?F1(v,O):new FormData(v),Xh(f,{pending:!0,data:W,method:v.method,action:w},w,W))},currentTarget:v}]})}}for(var kd=0;kd<nf.length;kd++){var zd=nf[kd],i4=zd.toLowerCase(),r4=zd[0].toUpperCase()+zd.slice(1);Zi(i4,"on"+r4)}Zi(To,"onAnimationEnd"),Zi(iu,"onAnimationIteration"),Zi(wo,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(Nh,"onTransitionRun"),Zi(Bh,"onTransitionStart"),Zi(Ph,"onTransitionCancel"),Zi(ef,"onTransitionEnd"),rn("onMouseEnter",["mouseout","mouseover"]),rn("onMouseLeave",["mouseout","mouseover"]),rn("onPointerEnter",["pointerout","pointerover"]),rn("onPointerLeave",["pointerout","pointerover"]),mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wu));function U1(r,a){a=(a&4)!==0;for(var f=0;f<r.length;f++){var g=r[f],v=g.event;g=g.listeners;e:{var w=void 0;if(a)for(var O=g.length-1;0<=O;O--){var F=g[O],W=F.instance,re=F.currentTarget;if(F=F.listener,W!==w&&v.isPropagationStopped())break e;w=F,v.currentTarget=re;try{w(v)}catch(Ee){_f(Ee)}v.currentTarget=null,w=W}else for(O=0;O<g.length;O++){if(F=g[O],W=F.instance,re=F.currentTarget,F=F.listener,W!==w&&v.isPropagationStopped())break e;w=F,v.currentTarget=re;try{w(v)}catch(Ee){_f(Ee)}v.currentTarget=null,w=W}}}}function Gt(r,a){var f=a[Mt];f===void 0&&(f=a[Mt]=new Set);var g=r+"__bubble";f.has(g)||(k1(a,r,2,!1),f.add(g))}function Gd(r,a,f){var g=0;a&&(g|=4),k1(f,r,g,a)}var Nf="_reactListening"+Math.random().toString(36).slice(2);function Vd(r){if(!r[Nf]){r[Nf]=!0,Un.forEach(function(f){f!=="selectionchange"&&(s4.has(f)||Gd(f,!1,r),Gd(f,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Nf]||(a[Nf]=!0,Gd("selectionchange",!1,a))}}function k1(r,a,f,g){switch(o_(a)){case 2:var v=O4;break;case 8:v=D4;break;default:v=tg}f=v.bind(null,a,f,r),v=void 0,!fA||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),g?v!==void 0?r.addEventListener(a,f,{capture:!0,passive:v}):r.addEventListener(a,f,!0):v!==void 0?r.addEventListener(a,f,{passive:v}):r.addEventListener(a,f,!1)}function Hd(r,a,f,g,v){var w=g;if(!(a&1)&&!(a&2)&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var F=g.stateNode.containerInfo;if(F===v||F.nodeType===8&&F.parentNode===v)break;if(O===4)for(O=g.return;O!==null;){var W=O.tag;if((W===3||W===4)&&(W=O.stateNode.containerInfo,W===v||W.nodeType===8&&W.parentNode===v))return;O=O.return}for(;F!==null;){if(O=wt(F),O===null)return;if(W=O.tag,W===5||W===6||W===26||W===27){g=w=O;continue e}F=F.parentNode}}g=g.return}jl(function(){var re=w,Ee=cA(f),Oe=[];e:{var de=tf.get(r);if(de!==void 0){var _e=Nn,tt=r;switch(r){case"keypress":if(so(f)===0)break e;case"keydown":case"keyup":_e=vh;break;case"focusin":tt="focus",_e=lo;break;case"focusout":tt="blur",_e=lo;break;case"beforeblur":case"afterblur":_e=lo;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=vs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=xh;break;case To:case iu:case wo:_e=Ts;break;case ef:_e=Sh;break;case"scroll":case"scrollend":_e=Fc;break;case"wheel":_e=Ch;break;case"copy":case"cut":case"paste":_e=kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Vc;break;case"toggle":case"beforetoggle":_e=Rh}var Tt=(a&4)!==0,Sn=!Tt&&(r==="scroll"||r==="scrollend"),ae=Tt?de!==null?de+"Capture":null:de;Tt=[];for(var ne=re,ce;ne!==null;){var we=ne;if(ce=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ce===null||ae===null||(we=Es(ne,ae),we!=null&&Tt.push(xu(ne,we,ce))),Sn)break;ne=ne.return}0<Tt.length&&(de=new _e(de,tt,null,f,Ee),Oe.push({event:de,listeners:Tt}))}}if(!(a&7)){e:{if(de=r==="mouseover"||r==="pointerover",_e=r==="mouseout"||r==="pointerout",de&&f!==Ct&&(tt=f.relatedTarget||f.fromElement)&&(wt(tt)||tt[U]))break e;if((_e||de)&&(de=Ee.window===Ee?Ee:(de=Ee.ownerDocument)?de.defaultView||de.parentWindow:window,_e?(tt=f.relatedTarget||f.toElement,_e=re,tt=tt?wt(tt):null,tt!==null&&(Sn=$e(tt),Tt=tt.tag,tt!==Sn||Tt!==5&&Tt!==27&&Tt!==6)&&(tt=null)):(_e=null,tt=re),_e!==tt)){if(Tt=Xl,we="onMouseLeave",ae="onMouseEnter",ne="mouse",(r==="pointerout"||r==="pointerover")&&(Tt=Vc,we="onPointerLeave",ae="onPointerEnter",ne="pointer"),Sn=_e==null?de:On(_e),ce=tt==null?de:On(tt),de=new Tt(we,ne+"leave",_e,f,Ee),de.target=Sn,de.relatedTarget=ce,we=null,wt(Ee)===re&&(Tt=new Tt(ae,ne+"enter",tt,f,Ee),Tt.target=ce,Tt.relatedTarget=Sn,we=Tt),Sn=we,_e&&tt)t:{for(Tt=_e,ae=tt,ne=0,ce=Tt;ce;ce=Vo(ce))ne++;for(ce=0,we=ae;we;we=Vo(we))ce++;for(;0<ne-ce;)Tt=Vo(Tt),ne--;for(;0<ce-ne;)ae=Vo(ae),ce--;for(;ne--;){if(Tt===ae||ae!==null&&Tt===ae.alternate)break t;Tt=Vo(Tt),ae=Vo(ae)}Tt=null}else Tt=null;_e!==null&&z1(Oe,de,_e,Tt,!1),tt!==null&&Sn!==null&&z1(Oe,Sn,tt,Tt,!0)}}e:{if(de=re?On(re):window,_e=de.nodeName&&de.nodeName.toLowerCase(),_e==="select"||_e==="input"&&de.type==="file")var Ze=ai;else if(jc(de))if(bo)Ze=bA;else{Ze=Jl;var It=Xc}else _e=de.nodeName,!_e||_e.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?re&&yt(re.elementType)&&(Ze=ai):Ze=ha;if(Ze&&(Ze=Ze(r,re))){Yc(Oe,Ze,f,Ee);break e}It&&It(r,de,re),r==="focusout"&&re&&de.type==="number"&&re.memoizedProps.value!=null&&ua(de,"number",de.value)}switch(It=re?On(re):window,r){case"focusin":(jc(It)||It.contentEditable==="true")&&(qi=It,eu=re,xr=null);break;case"focusout":xr=eu=qi=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,$c(Oe,f,Ee);break;case"selectionchange":if(yA)break;case"keydown":case"keyup":$c(Oe,f,Ee)}var rt;if(ho)e:{switch(r){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else jr?Kl(r,f)&&(ct="onCompositionEnd"):r==="keydown"&&f.keyCode===229&&(ct="onCompositionStart");ct&&(go&&f.locale!=="ko"&&(jr||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&jr&&(rt=Yl()):(Vr=Ee,ro="value"in Vr?Vr.value:Vr.textContent,jr=!0)),It=Bf(re,ct),0<It.length&&(ct=new co(ct,r,null,f,Ee),Oe.push({event:ct,listeners:It}),rt?ct.data=rt:(rt=mo(f),rt!==null&&(ct.data=rt)))),(rt=Lh?po(r,f):Jt(r,f))&&(ct=Bf(re,"onBeforeInput"),0<ct.length&&(It=new co("onBeforeInput","beforeinput",null,f,Ee),Oe.push({event:It,listeners:ct}),It.data=rt)),n4(Oe,r,re,f,Ee)}U1(Oe,a)})}function xu(r,a,f){return{instance:r,listener:a,currentTarget:f}}function Bf(r,a){for(var f=a+"Capture",g=[];r!==null;){var v=r,w=v.stateNode;v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Es(r,f),v!=null&&g.unshift(xu(r,v,w)),v=Es(r,a),v!=null&&g.push(xu(r,v,w))),r=r.return}return g}function Vo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function z1(r,a,f,g,v){for(var w=a._reactName,O=[];f!==null&&f!==g;){var F=f,W=F.alternate,re=F.stateNode;if(F=F.tag,W!==null&&W===g)break;F!==5&&F!==26&&F!==27||re===null||(W=re,v?(re=Es(f,w),re!=null&&O.unshift(xu(f,re,W))):v||(re=Es(f,w),re!=null&&O.push(xu(f,re,W)))),f=f.return}O.length!==0&&r.push({event:a,listeners:O})}var a4=/\r\n?/g,A4=/\u0000|\uFFFD/g;function G1(r){return(typeof r=="string"?r:""+r).replace(a4,`
`).replace(A4,"")}function V1(r,a){return a=G1(a),G1(r)===a}function Pf(){}function tn(r,a,f,g,v,w){switch(f){case"children":typeof g=="string"?a==="body"||a==="textarea"&&g===""||X(r,g):(typeof g=="number"||typeof g=="bigint")&&a!=="body"&&X(r,""+g);break;case"className":zn(r,"class",g);break;case"tabIndex":zn(r,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(r,f,g);break;case"style":Ye(r,g,w);break;case"data":if(a!=="object"){zn(r,"data",g);break}case"src":case"href":if(g===""&&(a!=="a"||f!=="href")){r.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(f);break}g=vn(""+g),r.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){r.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(f==="formAction"?(a!=="input"&&tn(r,a,"name",v.name,v,null),tn(r,a,"formEncType",v.formEncType,v,null),tn(r,a,"formMethod",v.formMethod,v,null),tn(r,a,"formTarget",v.formTarget,v,null)):(tn(r,a,"encType",v.encType,v,null),tn(r,a,"method",v.method,v,null),tn(r,a,"target",v.target,v,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(f);break}g=vn(""+g),r.setAttribute(f,g);break;case"onClick":g!=null&&(r.onclick=Pf);break;case"onScroll":g!=null&&Gt("scroll",r);break;case"onScrollEnd":g!=null&&Gt("scrollend",r);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(f=g.__html,f!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=f}}break;case"multiple":r.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":r.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){r.removeAttribute("xlink:href");break}f=vn(""+g),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(f,""+g):r.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(f,""):r.removeAttribute(f);break;case"capture":case"download":g===!0?r.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(f,g):r.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?r.setAttribute(f,g):r.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?r.removeAttribute(f):r.setAttribute(f,g);break;case"popover":Gt("beforetoggle",r),Gt("toggle",r),et(r,"popover",g);break;case"xlinkActuate":di(r,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":di(r,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":di(r,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":di(r,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":di(r,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":di(r,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":di(r,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":di(r,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":di(r,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":et(r,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=yn.get(f)||f,et(r,f,g))}}function jd(r,a,f,g,v,w){switch(f){case"style":Ye(r,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(f=g.__html,f!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=f}}break;case"children":typeof g=="string"?X(r,g):(typeof g=="number"||typeof g=="bigint")&&X(r,""+g);break;case"onScroll":g!=null&&Gt("scroll",r);break;case"onScrollEnd":g!=null&&Gt("scrollend",r);break;case"onClick":g!=null&&(r.onclick=Pf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!En.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(v=f.endsWith("Capture"),a=f.slice(2,v?f.length-7:void 0),w=r[u]||null,w=w!=null?w[f]:null,typeof w=="function"&&r.removeEventListener(a,w,v),typeof g=="function")){typeof w!="function"&&w!==null&&(f in r?r[f]=null:r.hasAttribute(f)&&r.removeAttribute(f)),r.addEventListener(a,g,v);break e}f in r?r[f]=g:g===!0?r.setAttribute(f,""):et(r,f,g)}}}function oi(r,a,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",r),Gt("load",r);var g=!1,v=!1,w;for(w in f)if(f.hasOwnProperty(w)){var O=f[w];if(O!=null)switch(w){case"src":g=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:tn(r,a,w,O,f,null)}}v&&tn(r,a,"srcSet",f.srcSet,f,null),g&&tn(r,a,"src",f.src,f,null);return;case"input":Gt("invalid",r);var F=w=O=v=null,W=null,re=null;for(g in f)if(f.hasOwnProperty(g)){var Ee=f[g];if(Ee!=null)switch(g){case"name":v=Ee;break;case"type":O=Ee;break;case"checked":W=Ee;break;case"defaultChecked":re=Ee;break;case"value":w=Ee;break;case"defaultValue":F=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(i(137,a));break;default:tn(r,a,g,Ee,f,null)}}uA(r,w,F,W,re,O,v,!1),I(r);return;case"select":Gt("invalid",r),g=O=w=null;for(v in f)if(f.hasOwnProperty(v)&&(F=f[v],F!=null))switch(v){case"value":w=F;break;case"defaultValue":O=F;break;case"multiple":g=F;default:tn(r,a,v,F,f,null)}a=w,f=O,r.multiple=!!g,a!=null?Tr(r,!!g,a,!1):f!=null&&Tr(r,!!g,f,!0);return;case"textarea":Gt("invalid",r),w=v=g=null;for(O in f)if(f.hasOwnProperty(O)&&(F=f[O],F!=null))switch(O){case"value":g=F;break;case"defaultValue":v=F;break;case"children":w=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(91));break;default:tn(r,a,O,F,f,null)}k(r,g,v,w),I(r);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(g=f[W],g!=null))switch(W){case"selected":r.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:tn(r,a,W,g,f,null)}return;case"dialog":Gt("cancel",r),Gt("close",r);break;case"iframe":case"object":Gt("load",r);break;case"video":case"audio":for(g=0;g<wu.length;g++)Gt(wu[g],r);break;case"image":Gt("error",r),Gt("load",r);break;case"details":Gt("toggle",r);break;case"embed":case"source":case"link":Gt("error",r),Gt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in f)if(f.hasOwnProperty(re)&&(g=f[re],g!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:tn(r,a,re,g,f,null)}return;default:if(yt(a)){for(Ee in f)f.hasOwnProperty(Ee)&&(g=f[Ee],g!==void 0&&jd(r,a,Ee,g,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(g=f[F],g!=null&&tn(r,a,F,g,f,null))}function o4(r,a,f,g){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,O=null,F=null,W=null,re=null,Ee=null;for(_e in f){var Oe=f[_e];if(f.hasOwnProperty(_e)&&Oe!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":W=Oe;default:g.hasOwnProperty(_e)||tn(r,a,_e,null,g,Oe)}}for(var de in g){var _e=g[de];if(Oe=f[de],g.hasOwnProperty(de)&&(_e!=null||Oe!=null))switch(de){case"type":w=_e;break;case"name":v=_e;break;case"checked":re=_e;break;case"defaultChecked":Ee=_e;break;case"value":O=_e;break;case"defaultValue":F=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(i(137,a));break;default:_e!==Oe&&tn(r,a,de,_e,g,Oe)}}_s(r,O,F,W,re,Ee,w,v);return;case"select":_e=O=F=de=null;for(w in f)if(W=f[w],f.hasOwnProperty(w)&&W!=null)switch(w){case"value":break;case"multiple":_e=W;default:g.hasOwnProperty(w)||tn(r,a,w,null,g,W)}for(v in g)if(w=g[v],W=f[v],g.hasOwnProperty(v)&&(w!=null||W!=null))switch(v){case"value":de=w;break;case"defaultValue":F=w;break;case"multiple":O=w;default:w!==W&&tn(r,a,v,w,g,W)}a=F,f=O,g=_e,de!=null?Tr(r,!!f,de,!1):!!g!=!!f&&(a!=null?Tr(r,!!f,a,!0):Tr(r,!!f,f?[]:"",!1));return;case"textarea":_e=de=null;for(F in f)if(v=f[F],f.hasOwnProperty(F)&&v!=null&&!g.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:tn(r,a,F,null,g,v)}for(O in g)if(v=g[O],w=f[O],g.hasOwnProperty(O)&&(v!=null||w!=null))switch(O){case"value":de=v;break;case"defaultValue":_e=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==w&&tn(r,a,O,v,g,w)}P(r,de,_e);return;case"option":for(var tt in f)if(de=f[tt],f.hasOwnProperty(tt)&&de!=null&&!g.hasOwnProperty(tt))switch(tt){case"selected":r.selected=!1;break;default:tn(r,a,tt,null,g,de)}for(W in g)if(de=g[W],_e=f[W],g.hasOwnProperty(W)&&de!==_e&&(de!=null||_e!=null))switch(W){case"selected":r.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:tn(r,a,W,de,g,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in f)de=f[Tt],f.hasOwnProperty(Tt)&&de!=null&&!g.hasOwnProperty(Tt)&&tn(r,a,Tt,null,g,de);for(re in g)if(de=g[re],_e=f[re],g.hasOwnProperty(re)&&de!==_e&&(de!=null||_e!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,a));break;default:tn(r,a,re,de,g,_e)}return;default:if(yt(a)){for(var Sn in f)de=f[Sn],f.hasOwnProperty(Sn)&&de!==void 0&&!g.hasOwnProperty(Sn)&&jd(r,a,Sn,void 0,g,de);for(Ee in g)de=g[Ee],_e=f[Ee],!g.hasOwnProperty(Ee)||de===_e||de===void 0&&_e===void 0||jd(r,a,Ee,de,g,_e);return}}for(var ae in f)de=f[ae],f.hasOwnProperty(ae)&&de!=null&&!g.hasOwnProperty(ae)&&tn(r,a,ae,null,g,de);for(Oe in g)de=g[Oe],_e=f[Oe],!g.hasOwnProperty(Oe)||de===_e||de==null&&_e==null||tn(r,a,Oe,de,g,_e)}var Yd=null,Qd=null;function If(r){return r.nodeType===9?r:r.ownerDocument}function H1(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j1(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Xd(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Wd=null;function l4(){var r=window.event;return r&&r.type==="popstate"?r===Wd?!1:(Wd=r,!0):(Wd=null,!1)}var Y1=typeof setTimeout=="function"?setTimeout:void 0,u4=typeof clearTimeout=="function"?clearTimeout:void 0,Q1=typeof Promise=="function"?Promise:void 0,c4=typeof queueMicrotask=="function"?queueMicrotask:typeof Q1<"u"?function(r){return Q1.resolve(null).then(r).catch(f4)}:Y1;function f4(r){setTimeout(function(){throw r})}function qd(r,a){var f=a,g=0;do{var v=f.nextSibling;if(r.removeChild(f),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(g===0){r.removeChild(v),Nu(a);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=v}while(f);Nu(a)}function Zd(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var f=a;switch(a=a.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Zd(f),Yn(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}r.removeChild(f)}}function h4(r,a,f,g){for(;r.nodeType===1;){var v=f;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!g&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(g){if(!r[bt])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=Dr(r.nextSibling),r===null)break}return null}function d4(r,a,f){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!f||(r=Dr(r.nextSibling),r===null))return null;return r}function Dr(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}function X1(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var f=r.data;if(f==="$"||f==="$!"||f==="$?"){if(a===0)return r;a--}else f==="/$"&&a++}r=r.previousSibling}return null}function W1(r,a,f){switch(a=If(f),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var br=new Map,q1=new Set;function Ff(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Vs=Ve.d;Ve.d={f:g4,r:m4,D:p4,C:_4,L:b4,m:E4,X:v4,S:y4,M:T4};function g4(){var r=Vs.f(),a=Rf();return r||a}function m4(r){var a=at(r);a!==null&&a.tag===5&&a.type==="form"?v2(a):Vs.r(r)}var Ho=typeof document>"u"?null:document;function Z1(r,a,f){var g=Ho;if(g&&typeof a=="string"&&a){var v=si(a);v='link[rel="'+r+'"][href="'+v+'"]',typeof f=="string"&&(v+='[crossorigin="'+f+'"]'),q1.has(v)||(q1.add(v),r={rel:r,crossOrigin:f,href:a},g.querySelector(v)===null&&(a=g.createElement("link"),oi(a,"link",r),fn(a),g.head.appendChild(a)))}}function p4(r){Vs.D(r),Z1("dns-prefetch",r,null)}function _4(r,a){Vs.C(r,a),Z1("preconnect",r,a)}function b4(r,a,f){Vs.L(r,a,f);var g=Ho;if(g&&r&&a){var v='link[rel="preload"][as="'+si(a)+'"]';a==="image"&&f&&f.imageSrcSet?(v+='[imagesrcset="'+si(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(v+='[imagesizes="'+si(f.imageSizes)+'"]')):v+='[href="'+si(r)+'"]';var w=v;switch(a){case"style":w=jo(r);break;case"script":w=Yo(r)}br.has(w)||(r=ye({rel:"preload",href:a==="image"&&f&&f.imageSrcSet?void 0:r,as:a},f),br.set(w,r),g.querySelector(v)!==null||a==="style"&&g.querySelector(Su(w))||a==="script"&&g.querySelector(Mu(w))||(a=g.createElement("link"),oi(a,"link",r),fn(a),g.head.appendChild(a)))}}function E4(r,a){Vs.m(r,a);var f=Ho;if(f&&r){var g=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+si(g)+'"][href="'+si(r)+'"]',w=v;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Yo(r)}if(!br.has(w)&&(r=ye({rel:"modulepreload",href:r},a),br.set(w,r),f.querySelector(v)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Mu(w)))return}g=f.createElement("link"),oi(g,"link",r),fn(g),f.head.appendChild(g)}}}function y4(r,a,f){Vs.S(r,a,f);var g=Ho;if(g&&r){var v=Wi(g).hoistableStyles,w=jo(r);a=a||"default";var O=v.get(w);if(!O){var F={loading:0,preload:null};if(O=g.querySelector(Su(w)))F.loading=5;else{r=ye({rel:"stylesheet",href:r,"data-precedence":a},f),(f=br.get(w))&&Kd(r,f);var W=O=g.createElement("link");fn(W),oi(W,"link",r),W._p=new Promise(function(re,Ee){W.onload=re,W.onerror=Ee}),W.addEventListener("load",function(){F.loading|=1}),W.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Uf(O,a,g)}O={type:"stylesheet",instance:O,count:1,state:F},v.set(w,O)}}}function v4(r,a){Vs.X(r,a);var f=Ho;if(f&&r){var g=Wi(f).hoistableScripts,v=Yo(r),w=g.get(v);w||(w=f.querySelector(Mu(v)),w||(r=ye({src:r,async:!0},a),(a=br.get(v))&&$d(r,a),w=f.createElement("script"),fn(w),oi(w,"link",r),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(v,w))}}function T4(r,a){Vs.M(r,a);var f=Ho;if(f&&r){var g=Wi(f).hoistableScripts,v=Yo(r),w=g.get(v);w||(w=f.querySelector(Mu(v)),w||(r=ye({src:r,async:!0,type:"module"},a),(a=br.get(v))&&$d(r,a),w=f.createElement("script"),fn(w),oi(w,"link",r),f.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(v,w))}}function K1(r,a,f,g){var v=(v=qt.current)?Ff(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(a=jo(f.href),f=Wi(v).hoistableStyles,g=f.get(a),g||(g={type:"style",instance:null,count:0,state:null},f.set(a,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){r=jo(f.href);var w=Wi(v).hoistableStyles,O=w.get(r);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,O),(w=v.querySelector(Su(r)))&&!w._p&&(O.instance=w,O.state.loading=5),br.has(r)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},br.set(r,f),w||w4(v,r,f,O.state))),a&&g===null)throw Error(i(528,""));return O}if(a&&g!==null)throw Error(i(529,""));return null;case"script":return a=f.async,f=f.src,typeof f=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Yo(f),f=Wi(v).hoistableScripts,g=f.get(a),g||(g={type:"script",instance:null,count:0,state:null},f.set(a,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function jo(r){return'href="'+si(r)+'"'}function Su(r){return'link[rel="stylesheet"]['+r+"]"}function $1(r){return ye({},r,{"data-precedence":r.precedence,precedence:null})}function w4(r,a,f,g){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?g.loading=1:(a=r.createElement("link"),g.preload=a,a.addEventListener("load",function(){return g.loading|=1}),a.addEventListener("error",function(){return g.loading|=2}),oi(a,"link",f),fn(a),r.head.appendChild(a))}function Yo(r){return'[src="'+si(r)+'"]'}function Mu(r){return"script[async]"+r}function J1(r,a,f){if(a.count++,a.instance===null)switch(a.type){case"style":var g=r.querySelector('style[data-href~="'+si(f.href)+'"]');if(g)return a.instance=g,fn(g),g;var v=ye({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(r.ownerDocument||r).createElement("style"),fn(g),oi(g,"style",v),Uf(g,f.precedence,r),a.instance=g;case"stylesheet":v=jo(f.href);var w=r.querySelector(Su(v));if(w)return a.state.loading|=4,a.instance=w,fn(w),w;g=$1(f),(v=br.get(v))&&Kd(g,v),w=(r.ownerDocument||r).createElement("link"),fn(w);var O=w;return O._p=new Promise(function(F,W){O.onload=F,O.onerror=W}),oi(w,"link",g),a.state.loading|=4,Uf(w,f.precedence,r),a.instance=w;case"script":return w=Yo(f.src),(v=r.querySelector(Mu(w)))?(a.instance=v,fn(v),v):(g=f,(v=br.get(w))&&(g=ye({},f),$d(g,v)),r=r.ownerDocument||r,v=r.createElement("script"),fn(v),oi(v,"link",g),r.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&!(a.state.loading&4)&&(g=a.instance,a.state.loading|=4,Uf(g,f.precedence,r));return a.instance}function Uf(r,a,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=g.length?g[g.length-1]:null,w=v,O=0;O<g.length;O++){var F=g[O];if(F.dataset.precedence===a)w=F;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(a=f.nodeType===9?f.head:f,a.insertBefore(r,a.firstChild))}function Kd(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function $d(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var kf=null;function e_(r,a,f){if(kf===null){var g=new Map,v=kf=new Map;v.set(f,g)}else v=kf,g=v.get(f),g||(g=new Map,v.set(f,g));if(g.has(r))return g;for(g.set(r,null),f=f.getElementsByTagName(r),v=0;v<f.length;v++){var w=f[v];if(!(w[bt]||w[Xe]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(a)||"";O=r+O;var F=g.get(O);F?F.push(w):g.set(O,[w])}}return g}function t_(r,a,f){r=r.ownerDocument||r,r.head.insertBefore(f,a==="title"?r.querySelector("head > title"):null)}function x4(r,a,f){if(f===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function n_(r){return!(r.type==="stylesheet"&&!(r.state.loading&3))}var Cu=null;function S4(){}function M4(r,a,f){if(Cu===null)throw Error(i(475));var g=Cu;if(a.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&!(a.state.loading&4)){if(a.instance===null){var v=jo(f.href),w=r.querySelector(Su(v));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(g.count++,g=zf.bind(g),r.then(g,g)),a.state.loading|=4,a.instance=w,fn(w);return}w=r.ownerDocument||r,f=$1(f),(v=br.get(v))&&Kd(f,v),w=w.createElement("link"),fn(w);var O=w;O._p=new Promise(function(F,W){O.onload=F,O.onerror=W}),oi(w,"link",f),a.instance=w}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(a,r),(r=a.state.preload)&&!(a.state.loading&3)&&(g.count++,a=zf.bind(g),r.addEventListener("load",a),r.addEventListener("error",a))}}function C4(){if(Cu===null)throw Error(i(475));var r=Cu;return r.stylesheets&&r.count===0&&Jd(r,r.stylesheets),0<r.count?function(a){var f=setTimeout(function(){if(r.stylesheets&&Jd(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(f)}}:null}function zf(){if(this.count--,this.count===0){if(this.stylesheets)Jd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Gf=null;function Jd(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Gf=new Map,a.forEach(R4,r),Gf=null,zf.call(r))}function R4(r,a){if(!(a.state.loading&4)){var f=Gf.get(r);if(f)var g=f.get(null);else{f=new Map,Gf.set(r,f);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var O=v[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(f.set(O.dataset.precedence,O),g=O)}g&&f.set(null,g)}v=a.instance,O=v.getAttribute("data-precedence"),w=f.get(O)||g,w===g&&f.set(null,v),f.set(O,v),this.count++,g=zf.bind(this),v.addEventListener("load",g),v.addEventListener("error",g),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),a.state.loading|=4}}var Ru={$$typeof:L,Provider:null,Consumer:null,_currentValue:Lt,_currentValue2:Lt,_threadCount:0};function L4(r,a,f,g,v,w,O,F){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Aa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Aa(0),this.hiddenUpdates=Aa(null),this.identifierPrefix=g,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function i_(r,a,f,g,v,w,O,F,W,re,Ee,Oe){return r=new L4(r,a,f,O,F,W,re,Oe),a=1,w===!0&&(a|=24),w=pr(3,null,null,a),r.current=w,w.stateNode=r,a=b(),a.refCount++,r.pooledCache=a,a.refCount++,w.memoizedState={element:g,isDehydrated:f,cache:a},cd(w),r}function r_(r){return r?(r=pa,r):pa}function s_(r,a,f,g,v,w){v=r_(v),g.context===null?g.context=v:g.pendingContext=v,g=Sa(a),g.payload={element:f},w=w===void 0?null:w,w!==null&&(g.callback=w),f=Ma(r,g,a),f!==null&&(Ni(f,r,a),fu(f,r,a))}function a_(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&&f<a?f:a}}function eg(r,a){a_(r,a),(r=r.alternate)&&a_(r,a)}function A_(r){if(r.tag===13){var a=Yr(r,67108864);a!==null&&Ni(a,r,67108864),eg(r,67108864)}}var Vf=!0;function O4(r,a,f,g){var v=Ae.T;Ae.T=null;var w=Ve.p;try{Ve.p=2,tg(r,a,f,g)}finally{Ve.p=w,Ae.T=v}}function D4(r,a,f,g){var v=Ae.T;Ae.T=null;var w=Ve.p;try{Ve.p=8,tg(r,a,f,g)}finally{Ve.p=w,Ae.T=v}}function tg(r,a,f,g){if(Vf){var v=ng(g);if(v===null)Hd(r,a,g,Hf,f),l_(r,g);else if(B4(v,r,a,f,g))g.stopPropagation();else if(l_(r,g),a&4&&-1<N4.indexOf(r)){for(;v!==null;){var w=at(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=Se(w.pendingLanes);if(O!==0){var F=w;for(F.pendingLanes|=2,F.entangledLanes|=2;O;){var W=1<<31-ri(O);F.entanglements[1]|=W,O&=~W}qr(w),!(_n&6)&&(Sf=Fn()+500,Tu(0))}}break;case 13:F=Yr(w,2),F!==null&&Ni(F,w,2),Rf(),eg(w,2)}if(w=ng(g),w===null&&Hd(r,a,g,Hf,f),w===v)break;v=w}v!==null&&g.stopPropagation()}else Hd(r,a,g,null,f)}}function ng(r){return r=cA(r),ig(r)}var Hf=null;function ig(r){if(Hf=null,r=wt(r),r!==null){var a=$e(r);if(a===null)r=null;else{var f=a.tag;if(f===13){if(r=Et(a),r!==null)return r;r=null}else if(f===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Hf=r,null}function o_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(iA()){case io:return 2;case rA:return 8;case kr:case sA:return 32;case aA:return 268435456;default:return 32}default:return 32}}var rg=!1,Ba=null,Pa=null,Ia=null,Lu=new Map,Ou=new Map,Fa=[],N4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l_(r,a){switch(r){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Lu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(a.pointerId)}}function Du(r,a,f,g,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:a,domEventName:f,eventSystemFlags:g,nativeEvent:w,targetContainers:[v]},a!==null&&(a=at(a),a!==null&&A_(a)),r):(r.eventSystemFlags|=g,a=r.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),r)}function B4(r,a,f,g,v){switch(a){case"focusin":return Ba=Du(Ba,r,a,f,g,v),!0;case"dragenter":return Pa=Du(Pa,r,a,f,g,v),!0;case"mouseover":return Ia=Du(Ia,r,a,f,g,v),!0;case"pointerover":var w=v.pointerId;return Lu.set(w,Du(Lu.get(w)||null,r,a,f,g,v)),!0;case"gotpointercapture":return w=v.pointerId,Ou.set(w,Du(Ou.get(w)||null,r,a,f,g,v)),!0}return!1}function u_(r){var a=wt(r.target);if(a!==null){var f=$e(a);if(f!==null){if(a=f.tag,a===13){if(a=Et(f),a!==null){r.blockedOn=a,ve(r.priority,function(){if(f.tag===13){var g=ir(),v=Yr(f,g);v!==null&&Ni(v,f,g),eg(f,g)}});return}}else if(a===3&&f.stateNode.current.memoizedState.isDehydrated){r.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}r.blockedOn=null}function jf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var f=ng(r.nativeEvent);if(f===null){f=r.nativeEvent;var g=new f.constructor(f.type,f);Ct=g,f.target.dispatchEvent(g),Ct=null}else return a=at(f),a!==null&&A_(a),r.blockedOn=f,!1;a.shift()}return!0}function c_(r,a,f){jf(r)&&f.delete(a)}function P4(){rg=!1,Ba!==null&&jf(Ba)&&(Ba=null),Pa!==null&&jf(Pa)&&(Pa=null),Ia!==null&&jf(Ia)&&(Ia=null),Lu.forEach(c_),Ou.forEach(c_)}function Yf(r,a){r.blockedOn===a&&(r.blockedOn=null,rg||(rg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,P4)))}var Qf=null;function f_(r){Qf!==r&&(Qf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Qf===r&&(Qf=null);for(var a=0;a<r.length;a+=3){var f=r[a],g=r[a+1],v=r[a+2];if(typeof g!="function"){if(ig(g||f)===null)continue;break}var w=at(f);w!==null&&(r.splice(a,3),a-=3,Xh(w,{pending:!0,data:v,method:f.method,action:g},g,v))}}))}function Nu(r){function a(W){return Yf(W,r)}Ba!==null&&Yf(Ba,r),Pa!==null&&Yf(Pa,r),Ia!==null&&Yf(Ia,r),Lu.forEach(a),Ou.forEach(a);for(var f=0;f<Fa.length;f++){var g=Fa[f];g.blockedOn===r&&(g.blockedOn=null)}for(;0<Fa.length&&(f=Fa[0],f.blockedOn===null);)u_(f),f.blockedOn===null&&Fa.shift();if(f=(r.ownerDocument||r).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var v=f[g],w=f[g+1],O=v[u]||null;if(typeof w=="function")O||f_(f);else if(O){var F=null;if(w&&w.hasAttribute("formAction")){if(v=w,O=w[u]||null)F=O.formAction;else if(ig(v)!==null)continue}else F=O.action;typeof F=="function"?f[g+1]=F:(f.splice(g,3),g-=3),f_(f)}}}function sg(r){this._internalRoot=r}Xf.prototype.render=sg.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var f=a.current,g=ir();s_(f,g,r,a,null,null)},Xf.prototype.unmount=sg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;r.tag===0&&zo(),s_(r.current,2,null,r,null,null),Rf(),a[U]=null}};function Xf(r){this._internalRoot=r}Xf.prototype.unstable_scheduleHydration=function(r){if(r){var a=oe();r={blockedOn:null,target:r,priority:a};for(var f=0;f<Fa.length&&a!==0&&a<Fa[f].priority;f++);Fa.splice(f,0,r),f===0&&u_(r)}};var h_=e.version;if(h_!=="19.0.0")throw Error(i(527,h_,"19.0.0"));Ve.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=De(a),r=r!==null?Je(r):null,r=r===null?null:r.stateNode,r};var I4={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:Ae,findFiberByHostInstance:wt,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wf.isDisabled&&Wf.supportsFiber)try{fs=Wf.inject(I4),ii=Wf}catch{}}return Pu.createRoot=function(r,a){if(!s(r))throw Error(i(299));var f=!1,g="",v=L2,w=O2,O=D2,F=null;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(w=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(F=a.unstable_transitionCallbacks)),a=i_(r,1,!1,null,null,f,g,v,w,O,F,null),r[U]=a.current,Vd(r.nodeType===8?r.parentNode:r),new sg(a)},Pu.hydrateRoot=function(r,a,f){if(!s(r))throw Error(i(299));var g=!1,v="",w=L2,O=O2,F=D2,W=null,re=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(w=f.onUncaughtError),f.onCaughtError!==void 0&&(O=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(W=f.unstable_transitionCallbacks),f.formState!==void 0&&(re=f.formState)),a=i_(r,1,!0,a,f??null,g,v,w,O,F,W,re),a.context=r_(null),f=a.current,g=ir(),v=Sa(g),v.callback=null,Ma(f,v,g),a.current.lanes=g,Gr(a,g),qr(a),r[U]=a.current,Vd(r),new Xf(a)},Pu.version="19.0.0",Pu}var T_;function W4(){if(T_)return og.exports;T_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),og.exports=X4(),og.exports}var q4=W4();const Z4=ep(q4);function x0(n,e){if(!n)throw new Error(e||"loader assertion failed.")}const np=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),w_=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);w_&&parseFloat(w_[1]);const K4="3.4.15";function qs(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}const u0=typeof process!="object"||String(process)!=="[object process]"||process.browser,$4=typeof window<"u"&&typeof window.orientation<"u",x_=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);x_&&parseFloat(x_[1]);function rc(n){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(n)}function J4(n,e){if(rc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(rc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ex(n){var e=J4(n,"string");return rc(e)=="symbol"?e:e+""}function N(n,e,t){return(e=ex(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class tx{constructor(e,t){N(this,"name",void 0),N(this,"workerThread",void 0),N(this,"isRunning",!0),N(this,"result",void 0),N(this,"_resolve",()=>{}),N(this,"_reject",()=>{}),this.name=e,this.workerThread=t,this.result=new Promise((i,s)=>{this._resolve=i,this._reject=s})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){qs(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){qs(this.isRunning),this.isRunning=!1,this._reject(e)}}let fg=class{terminate(){}};const hg=new Map;function nx(n){qs(n.source&&!n.url||!n.source&&n.url);let e=hg.get(n.source||n.url);return e||(n.url&&(e=ix(n.url),hg.set(n.url,e)),n.source&&(e=$y(n.source),hg.set(n.source,e))),qs(e),e}function ix(n){if(!n.startsWith("http"))return n;const e=rx(n);return $y(e)}function $y(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function rx(n){return`try {
  importScripts('`.concat(n,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function Jy(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2?arguments[2]:void 0;const i=t||new Set;if(n){if(S_(n))i.add(n);else if(S_(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)){if(e&&typeof n=="object")for(const s in n)Jy(n[s],e,i)}}return t===void 0?Array.from(i):[]}function S_(n){return n?n instanceof ArrayBuffer||typeof MessagePort<"u"&&n instanceof MessagePort||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas:!1}const dg=()=>{};class fm{static isSupported(){return typeof Worker<"u"&&u0||typeof fg<"u"&&!u0}constructor(e){N(this,"name",void 0),N(this,"source",void 0),N(this,"url",void 0),N(this,"terminated",!1),N(this,"worker",void 0),N(this,"onMessage",void 0),N(this,"onError",void 0),N(this,"_loadableURL","");const{name:t,source:i,url:s}=e;qs(i||s),this.name=t,this.source=i,this.url=s,this.onMessage=dg,this.onError=A=>console.log(A),this.worker=u0?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=dg,this.onError=dg,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,t){t=t||Jy(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=nx({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new fg(i,{eval:!1})}else if(this.source)e=new fg(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",t=>{this.onMessage(t)}),e.on("error",t=>{this.onError(t)}),e.on("exit",t=>{}),e}}class sx{static isSupported(){return fm.isSupported()}constructor(e){N(this,"name","unnamed"),N(this,"source",void 0),N(this,"url",void 0),N(this,"maxConcurrency",1),N(this,"maxMobileConcurrency",1),N(this,"onDebug",()=>{}),N(this,"reuseWorkers",!0),N(this,"props",{}),N(this,"jobQueue",[]),N(this,"idleQueue",[]),N(this,"count",0),N(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(A,h,m)=>A.done(m),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(A,h)=>A.error(h);const s=new Promise(A=>(this.jobQueue.push({name:e,onMessage:t,onError:i,onStart:A}),this));return this._startQueuedJob(),await s}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const i=new tx(t.name,e);e.onMessage=s=>t.onMessage(i,s.type,s.payload),e.onError=s=>t.onError(i,s),t.onStart(i);try{await i.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new fm({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return $4?this.maxMobileConcurrency:this.maxConcurrency}}const ax={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Ys{static isSupported(){return fm.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ys._workerFarm=Ys._workerFarm||new Ys({}),Ys._workerFarm.setProps(e),Ys._workerFarm}constructor(e){N(this,"props",void 0),N(this,"workerPools",new Map),this.props={...ax},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:s}=e;let A=this.workerPools.get(t);return A||(A=new sx({name:t,source:i,url:s}),A.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,A)),A}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}N(Ys,"_workerFarm",void 0);const Ax="latest";function ox(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=e[n.id]||{},i="".concat(n.id,"-worker.js");let s=t.workerUrl;if(!s&&n.id==="compression"&&(s=e.workerUrl),e._workerType==="test"&&(s="modules/".concat(n.module,"/dist/").concat(i)),!s){let A=n.version;A==="latest"&&(A=Ax);const h=A?"@".concat(A):"";s="https://unpkg.com/@loaders.gl/".concat(n.module).concat(h,"/dist/").concat(i)}return qs(s),s}function lx(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K4;qs(n,"no worker provided");const t=n.version;return!(!e||!t)}const ux={},cx=Object.freeze(Object.defineProperty({__proto__:null,default:ux},Symbol.toStringTag,{value:"Module"}));function fx(n,e){return!Ys.isSupported()||!u0&&!(e!=null&&e._nodeWorkers)?!1:n.worker&&(e==null?void 0:e.worker)}async function hx(n,e,t,i,s){const A=n.id,h=ox(n,t),_=Ys.getWorkerFarm(t).getWorkerPool({name:A,url:h});t=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(i||{}));const E=await _.startJob("process-on-worker",dx.bind(null,s));return E.postMessage("process",{input:e,options:t,context:i}),await(await E.result).result}async function dx(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:s,input:A,options:h}=i;try{const m=await n(A,h);e.postMessage("done",{id:s,result:m})}catch(m){const _=m instanceof Error?m.message:"unknown error";e.postMessage("error",{id:s,error:_})}break;default:console.warn("parse-with-worker unknown message ".concat(t))}}function gx(n,e,t){if(t=t||n.byteLength,n.byteLength<t||e.byteLength<t)return!1;const i=new Uint8Array(n),s=new Uint8Array(e);for(let A=0;A<i.length;++A)if(i[A]!==s[A])return!1;return!0}function mx(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const i=e.map(m=>m instanceof ArrayBuffer?new Uint8Array(m):m),s=i.reduce((m,_)=>m+_.byteLength,0),A=new Uint8Array(s);let h=0;for(const m of i)A.set(m,h),h+=m.byteLength;return A.buffer}async function px(n){const e=[];for await(const t of n)e.push(t);return mx(...e)}function M_(){let n;if(typeof window<"u"&&window.performance)n=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();n=e[0]*1e3+e[1]/1e6}else n=Date.now();return n}class C_{constructor(e,t){N(this,"name",void 0),N(this,"type",void 0),N(this,"sampleSize",1),N(this,"time",void 0),N(this,"count",void 0),N(this,"samples",void 0),N(this,"lastTiming",void 0),N(this,"lastSampleTime",void 0),N(this,"lastSampleCount",void 0),N(this,"_count",0),N(this,"_time",0),N(this,"_samples",0),N(this,"_startTime",0),N(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=M_(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(M_()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class ip{constructor(e){N(this,"id",void 0),N(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(e instanceof C_?this.stats[t]=e:this.stats[t]=new C_(t,i)),this.stats[t]}}let _x="";const R_={};function bx(n){for(const e in R_)if(n.startsWith(e)){const t=R_[e];n=n.replace(e,t)}return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat(_x).concat(n)),n}function Ex(n){return n&&typeof n=="object"&&n.isBuffer}function ev(n){if(Ex(n))return n;if(n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return n.byteOffset===0&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if(typeof n=="string"){const e=n;return new TextEncoder().encode(e).buffer}if(n&&typeof n=="object"&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function tv(n){const e=n?n.lastIndexOf("/"):-1;return e>=0?n.substr(e+1):""}function yx(n){const e=n?n.lastIndexOf("/"):-1;return e>=0?n.substr(0,e):""}const vx=n=>typeof n=="boolean",$u=n=>typeof n=="function",vc=n=>n!==null&&typeof n=="object",L_=n=>vc(n)&&n.constructor==={}.constructor,Tx=n=>n&&typeof n[Symbol.iterator]=="function",wx=n=>n&&typeof n[Symbol.asyncIterator]=="function",qA=n=>typeof Response<"u"&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,ZA=n=>typeof Blob<"u"&&n instanceof Blob,xx=n=>n&&typeof n=="object"&&n.isBuffer,Sx=n=>typeof ReadableStream<"u"&&n instanceof ReadableStream||vc(n)&&$u(n.tee)&&$u(n.cancel)&&$u(n.getReader),Mx=n=>vc(n)&&$u(n.read)&&$u(n.pipe)&&vx(n.readable),nv=n=>Sx(n)||Mx(n),Cx=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Rx=/^([-\w.]+\/[-\w.+]+)/;function Lx(n){const e=Rx.exec(n);return e?e[1]:n}function O_(n){const e=Cx.exec(n);return e?e[1]:""}const iv=/\?.*/;function Ox(n){const e=n.match(iv);return e&&e[0]}function rp(n){return n.replace(iv,"")}function eh(n){return qA(n)?n.url:ZA(n)?n.name||"":typeof n=="string"?n:""}function sp(n){if(qA(n)){const e=n,t=e.headers.get("content-type")||"",i=rp(e.url);return Lx(t)||O_(i)}return ZA(n)?n.type||"":typeof n=="string"?O_(n):""}function Dx(n){return qA(n)?n.headers["content-length"]||-1:ZA(n)?n.size:typeof n=="string"?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}async function rv(n){if(qA(n))return n;const e={},t=Dx(n);t>=0&&(e["content-length"]=String(t));const i=eh(n),s=sp(n);s&&(e["content-type"]=s);const A=await Px(n);A&&(e["x-first-bytes"]=A),typeof n=="string"&&(n=new TextEncoder().encode(n));const h=new Response(n,{headers:e});return Object.defineProperty(h,"url",{value:i}),h}async function Nx(n){if(!n.ok){const e=await Bx(n);throw new Error(e)}}async function Bx(n){let e="Failed to fetch resource ".concat(n.url," (").concat(n.status,"): ");try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=" ".concat(await n.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function Px(n){if(typeof n=="string")return"data:,".concat(n.slice(0,5));if(n instanceof Blob){const t=n.slice(0,5);return await new Promise(i=>{const s=new FileReader;s.onload=A=>{var h;return i(A==null||(h=A.target)===null||h===void 0?void 0:h.result)},s.readAsDataURL(t)})}if(n instanceof ArrayBuffer){const t=n.slice(0,5),i=Ix(t);return"data:base64,".concat(i)}return null}function Ix(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}async function D_(n,e){if(typeof n=="string"){n=bx(n);let t=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(t=e.fetch),await fetch(n,t)}return await rv(n)}function sv(n){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent;return!!(t&&t.indexOf("Electron")>=0)}function Nl(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||sv()}const c0={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},qf=c0.window||c0.self||c0.global,Iu=c0.process||{},av=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Nl();const gg=globalThis;function Av(n){if(!Nl())return"Node";if(sv())return"Electron";const t=(typeof navigator<"u"?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=t.indexOf("MSIE ")!==-1,s=t.indexOf("Trident/")!==-1;return i||s?"IE":gg.chrome?"Chrome":gg.safari?"Safari":gg.mozInnerScreenX?"Firefox":"Unknown"}function Fx(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch{return null}}class Ux{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";N(this,"storage",void 0),N(this,"id",void 0),N(this,"config",void 0),this.storage=Fx(i),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function kx(n){let e;return n<10?e="".concat(n.toFixed(2),"ms"):n<100?e="".concat(n.toFixed(1),"ms"):n<1e3?e="".concat(n.toFixed(0),"ms"):e="".concat((n/1e3).toFixed(2),"s"),e}function zx(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const t=Math.max(e-n.length,0);return"".concat(" ".repeat(t)).concat(n)}function mg(n,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const s=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const A=n.width*t,h=n.height*t,m=["font-size:1px;","padding:".concat(Math.floor(h/2),"px ").concat(Math.floor(A/2),"px;"),"line-height:".concat(h,"px;"),"background:url(".concat(s,");"),"background-size:".concat(A,"px ").concat(h,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),m]}let S0;(function(n){n[n.BLACK=30]="BLACK",n[n.RED=31]="RED",n[n.GREEN=32]="GREEN",n[n.YELLOW=33]="YELLOW",n[n.BLUE=34]="BLUE",n[n.MAGENTA=35]="MAGENTA",n[n.CYAN=36]="CYAN",n[n.WHITE=37]="WHITE",n[n.BRIGHT_BLACK=90]="BRIGHT_BLACK",n[n.BRIGHT_RED=91]="BRIGHT_RED",n[n.BRIGHT_GREEN=92]="BRIGHT_GREEN",n[n.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",n[n.BRIGHT_BLUE=94]="BRIGHT_BLUE",n[n.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",n[n.BRIGHT_CYAN=96]="BRIGHT_CYAN",n[n.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(S0||(S0={}));function N_(n){return typeof n=="string"?S0[n.toUpperCase()]||S0.WHITE:n}function Gx(n,e,t){return!Nl&&typeof n=="string"&&(e&&(e=N_(e),n="\x1B[".concat(e,"m").concat(n,"\x1B[39m")),t&&(e=N_(t),n="\x1B[".concat(t+10,"m").concat(n,"\x1B[49m"))),n}function Vx(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const s of i)typeof n[s]=="function"&&(e.find(A=>s===A)||(n[s]=n[s].bind(n)))}function M0(n,e){if(!n)throw new Error(e||"Assertion failed")}function Qo(){let n;if("performance"in qf){var e,t;n=qf==null||(e=qf.performance)===null||e===void 0||(t=e.now)===null||t===void 0?void 0:t.call(e)}else if("hrtime"in Iu){var i;const s=Iu==null||(i=Iu.hrtime)===null||i===void 0?void 0:i.call(Iu);n=s[0]*1e3+s[1]/1e6}else n=Date.now();return n}const Xo={debug:console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Hx={enabled:!0,level:0};function Nr(){}const B_={},P_={once:!0};class Tc{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};N(this,"id",void 0),N(this,"VERSION",av),N(this,"_startTs",Qo()),N(this,"_deltaTs",Qo()),N(this,"_storage",void 0),N(this,"userData",{}),N(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new Ux("__probe-".concat(this.id,"__"),Hx),this.timeStamp("".concat(this.id," started")),Vx(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Qo()-this._startTs).toPrecision(10))}getDelta(){return Number((Qo()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){M0(e,t)}warn(e){return this._getLogFunction(0,e,Xo.warn,arguments,P_)}error(e){return this._getLogFunction(0,e,Xo.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,Xo.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,Xo.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var i=arguments.length,s=new Array(i>2?i-2:0),A=2;A<i;A++)s[A-2]=arguments[A];return this._getLogFunction(e,t,Xo.debug||Xo.info,arguments,P_)}table(e,t,i){return t?this._getLogFunction(e,t,console.table||Nr,i&&[i],{tag:Qx(t)}):Nr}image(e){let{logLevel:t,priority:i,image:s,message:A="",scale:h=1}=e;return this._shouldLog(t||i)?Yx({image:s,message:A,scale:h}):Nr}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||Nr)}group(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const s=I_({logLevel:e,message:t,opts:i}),{collapsed:A}=i;return s.method=(A?console.groupCollapsed:console.group)||console.info,this._getLogFunction(s)}groupCollapsed(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,t,Object.assign({},i,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Nr)}withGroup(e,t,i){this.group(e,t)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=ov(e)}_getLogFunction(e,t,i,s,A){if(this._shouldLog(e)){A=I_({logLevel:e,message:t,args:s,opts:A}),i=i||A.method,M0(i),A.total=this.getTotal(),A.delta=this.getDelta(),this._deltaTs=Qo();const h=A.tag||A.message;if(A.once)if(!B_[h])B_[h]=Qo();else return Nr;return t=jx(this.id,A.message,A),i.bind(console,t,...A.args)}return Nr}}N(Tc,"VERSION",av);function ov(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return M0(Number.isFinite(e)&&e>=0),e}function I_(n){const{logLevel:e,message:t}=n;n.logLevel=ov(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(typeof e){case"string":case"function":t!==void 0&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e);break}typeof n.message=="function"&&(n.message=n.message());const s=typeof n.message;return M0(s==="string"||s==="object"),Object.assign(n,{args:i},n.opts)}function jx(n,e,t){if(typeof e=="string"){const i=t.time?zx(kx(t.total)):"";e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),e=Gx(e,t.color,t.background)}return e}function Yx(n){let{image:e,message:t="",scale:i=1}=n;if(typeof e=="string"){const A=new Image;return A.onload=()=>{const h=mg(A,t,i);console.log(...h)},A.src=e,Nr}const s=e.nodeName||"";if(s.toLowerCase()==="img")return console.log(...mg(e,t,i)),Nr;if(s.toLowerCase()==="canvas"){const A=new Image;return A.onload=()=>console.log(...mg(A,t,i)),A.src=e.toDataURL(),Nr}return Nr}function Qx(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}const F_=new Tc({id:"loaders.gl"});class Xx{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class Wx{constructor(){N(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.console.log.bind(this.console,...t)}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.console.info.bind(this.console,...t)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.console.warn.bind(this.console,...t)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.console.error.bind(this.console,...t)}}const lv={fetch:null,mimeType:void 0,nothrow:!1,log:new Wx,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:np,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},qx={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function uv(){globalThis.loaders=globalThis.loaders||{};const{loaders:n}=globalThis;return n._state=n._state||{},n._state}const cv=()=>{const n=uv();return n.globalOptions=n.globalOptions||{...lv},n.globalOptions};function Zx(n,e,t,i){return t=t||[],t=Array.isArray(t)?t:[t],Kx(n,t),Jx(e,n,i)}function Kx(n,e){U_(n,null,lv,qx,e);for(const t of e){const i=n&&n[t.id]||{},s=t.options&&t.options[t.id]||{},A=t.deprecatedOptions&&t.deprecatedOptions[t.id]||{};U_(i,t.id,s,A,e)}}function U_(n,e,t,i,s){const A=e||"Top level",h=e?"".concat(e,"."):"";for(const m in n){const _=!e&&vc(n[m]),E=m==="baseUri"&&!e,x=m==="workerUrl"&&e;if(!(m in t)&&!E&&!x){if(m in i)F_.warn("".concat(A," loader option '").concat(h).concat(m,"' no longer supported, use '").concat(i[m],"'"))();else if(!_){const S=$x(m,s);F_.warn("".concat(A," loader option '").concat(h).concat(m,"' not recognized. ").concat(S))()}}}}function $x(n,e){const t=n.toLowerCase();let i="";for(const s of e)for(const A in s.options){if(n===A)return"Did you mean '".concat(s.id,".").concat(A,"'?");const h=A.toLowerCase();(t.startsWith(h)||h.startsWith(t))&&(i=i||"Did you mean '".concat(s.id,".").concat(A,"'?"))}return i}function Jx(n,e,t){const s={...n.options||{}};return e8(s,t),s.log===null&&(s.log=new Xx),k_(s,cv()),k_(s,e),s}function k_(n,e){for(const t in e)if(t in e){const i=e[t];L_(i)&&L_(n[t])?n[t]={...n[t],...e[t]}:n[t]=e[t]}}function e8(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}function ap(n){var e;return n?(Array.isArray(n)&&(n=n[0]),Array.isArray((e=n)===null||e===void 0?void 0:e.extensions)):!1}function Ap(n){var e,t;x0(n,"null loader"),x0(ap(n),"invalid loader");let i;return Array.isArray(n)&&(i=n[1],n=n[0],n={...n,options:{...n.options,...i}}),((e=n)!==null&&e!==void 0&&e.parseTextSync||(t=n)!==null&&t!==void 0&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}const fv=()=>{const n=uv();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function t8(n){const e=fv();n=Array.isArray(n)?n:[n];for(const t of n){const i=Ap(t);e.find(s=>i===s)||e.unshift(i)}}function n8(){return fv()}const i8=new Tc({id:"loaders.gl"}),r8=/\.([^.]+)$/;async function s8(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!hv(n))return null;let s=z_(n,e,{...t,nothrow:!0},i);if(s)return s;if(ZA(n)&&(n=await n.slice(0,10).arrayBuffer(),s=z_(n,e,t,i)),!s&&!(t!=null&&t.nothrow))throw new Error(dv(n));return s}function z_(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!hv(n))return null;if(e&&!Array.isArray(e))return Ap(e);let s=[];e&&(s=s.concat(e)),t!=null&&t.ignoreRegisteredLoaders||s.push(...n8()),A8(s);const A=a8(n,s,t,i);if(!A&&!(t!=null&&t.nothrow))throw new Error(dv(n));return A}function a8(n,e,t,i){const s=eh(n),A=sp(n),h=rp(s)||(i==null?void 0:i.url);let m=null,_="";if(t!=null&&t.mimeType&&(m=pg(e,t==null?void 0:t.mimeType),_="match forced by supplied MIME type ".concat(t==null?void 0:t.mimeType)),m=m||o8(e,h),_=_||(m?"matched url ".concat(h):""),m=m||pg(e,A),_=_||(m?"matched MIME type ".concat(A):""),m=m||u8(e,n),_=_||(m?"matched initial data ".concat(gv(n)):""),m=m||pg(e,t==null?void 0:t.fallbackMimeType),_=_||(m?"matched fallback MIME type ".concat(A):""),_){var E;i8.log(1,"selectLoader selected ".concat((E=m)===null||E===void 0?void 0:E.name,": ").concat(_,"."))}return m}function hv(n){return!(n instanceof Response&&n.status===204)}function dv(n){const e=eh(n),t=sp(n);let i="No valid loader found (";i+=e?"".concat(tv(e),", "):"no url provided, ",i+="MIME type: ".concat(t?'"'.concat(t,'"'):"not provided",", ");const s=n?gv(n):"";return i+=s?' first bytes: "'.concat(s,'"'):"first bytes: not available",i+=")",i}function A8(n){for(const e of n)Ap(e)}function o8(n,e){const t=e&&r8.exec(e),i=t&&t[1];return i?l8(n,i):null}function l8(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}function pg(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e==="application/x.".concat(t.id))return t;return null}function u8(n,e){if(!e)return null;for(const t of n)if(typeof e=="string"){if(c8(e,t))return t}else if(ArrayBuffer.isView(e)){if(G_(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&G_(e,0,t))return t;return null}function c8(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function G_(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(s=>f8(n,e,t,s))}function f8(n,e,t,i){if(i instanceof ArrayBuffer)return gx(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":const s=hm(n,e,i.length);return i===s;default:return!1}}function gv(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof n=="string"?n.slice(0,e):ArrayBuffer.isView(n)?hm(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?hm(n,0,e):""}function hm(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let s="";for(let A=0;A<t;A++)s+=String.fromCharCode(i.getUint8(e+A));return s}const h8=256*1024;function*d8(n,e){const t=(e==null?void 0:e.chunkSize)||h8;let i=0;const s=new TextEncoder;for(;i<n.length;){const A=Math.min(n.length-i,t),h=n.slice(i,i+A);i+=A,yield s.encode(h)}}const g8=256*1024;function m8(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:t=g8}=e;let i=0;for(;i<n.byteLength;){const s=Math.min(n.byteLength-i,t),A=new ArrayBuffer(s),h=new Uint8Array(n,i,s);new Uint8Array(A).set(h),i+=s,yield A}}()}const p8=1024*1024;async function*_8(n,e){const t=(e==null?void 0:e.chunkSize)||p8;let i=0;for(;i<n.size;){const s=i+t,A=await n.slice(i,s).arrayBuffer();i=s,yield A}}function V_(n,e){return np?b8(n,e):E8(n)}async function*b8(n,e){const t=n.getReader();let i;try{for(;;){const s=i||t.read();e!=null&&e._streamReadAhead&&(i=t.read());const{done:A,value:h}=await s;if(A)return;yield ev(h)}}catch{t.releaseLock()}}async function*E8(n,e){for await(const t of n)yield ev(t)}function y8(n,e){if(typeof n=="string")return d8(n,e);if(n instanceof ArrayBuffer)return m8(n,e);if(ZA(n))return _8(n,e);if(nv(n))return V_(n,e);if(qA(n))return V_(n.body,e);throw new Error("makeIterator")}const mv="Cannot convert supplied data type";function v8(n,e,t){if(e.text&&typeof n=="string")return n;if(xx(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const s=n.byteLength||n.length;return(n.byteOffset!==0||s!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+s)),i}throw new Error(mv)}async function T8(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if(typeof n=="string"||i)return v8(n,e);if(ZA(n)&&(n=await rv(n)),qA(n)){const s=n;return await Nx(s),e.binary?await s.arrayBuffer():await s.text()}if(nv(n)&&(n=y8(n,t)),Tx(n)||wx(n))return px(n);throw new Error(mv)}function pv(n,e){const t=cv(),i=n||t;return typeof i.fetch=="function"?i.fetch:vc(i.fetch)?s=>D_(s,i):e!=null&&e.fetch?e==null?void 0:e.fetch:D_}function w8(n,e,t){if(t)return t;const i={fetch:pv(e,n),...n};if(i.url){const s=rp(i.url);i.baseUrl=s,i.queryString=Ox(i.url),i.filename=tv(s),i.baseUrl=yx(s)}return Array.isArray(i.loaders)||(i.loaders=null),i}function x8(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}async function op(n,e,t,i){qs(!i||typeof i=="object"),e&&!Array.isArray(e)&&!ap(e)&&(i=void 0,t=e,e=void 0),n=await n,t=t||{};const s=eh(n),h=x8(e,i),m=await s8(n,h,t);return m?(t=Zx(t,m,h,s),i=w8({url:s,parse:op,loaders:h},t,i||null),await S8(m,n,t,i)):null}async function S8(n,e,t,i){if(lx(n),qA(e)){const s=e,{ok:A,redirected:h,status:m,statusText:_,type:E,url:x}=s,S=Object.fromEntries(s.headers.entries());i.response={headers:S,ok:A,redirected:h,status:m,statusText:_,type:E,url:x}}if(e=await T8(e,n,t),n.parseTextSync&&typeof e=="string")return t.dataType="text",n.parseTextSync(e,t,i,n);if(fx(n,t))return await hx(n,e,t,i,op);if(n.parseText&&typeof e=="string")return await n.parseText(e,t,i,n);if(n.parse)return await n.parse(e,t,i,n);throw qs(!n.parseSync),new Error("".concat(n.id," loader - no parser found and worker is disabled"))}async function C0(n,e,t,i){!Array.isArray(e)&&!ap(e)&&(t=e,e=void 0);const s=pv(t);let A=n;return typeof n=="string"&&(A=await s(n)),ZA(n)&&(A=await s(n)),await op(A,e,t)}const M8="3.4.15",{_parseImageNode:C8}=globalThis,dm=typeof Image<"u",gm=typeof ImageBitmap<"u",R8=!!C8,mm=np?!0:R8;function L8(n){switch(n){case"auto":return gm||dm||mm;case"imagebitmap":return gm;case"image":return dm;case"data":return mm;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}function O8(){if(gm)return"imagebitmap";if(dm)return"image";if(mm)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function D8(n){const e=B8(n);if(!e)throw new Error("Not an image");return e}function N8(n){switch(D8(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}function B8(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&typeof n=="object"&&n.data&&n.width&&n.height?"data":null}const P8=/^data:image\/svg\+xml/,I8=/\.svg((\?|#).*)?$/;function lp(n){return n&&(P8.test(n)||I8.test(n))}function F8(n,e){if(lp(e)){let i=new TextDecoder().decode(n);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(i=unescape(encodeURIComponent(i)))}catch(A){throw new Error(A.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return _v(n,e)}function _v(n,e){if(lp(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}async function bv(n,e,t){const i=F8(n,t),s=self.URL||self.webkitURL,A=typeof i!="string"&&s.createObjectURL(i);try{return await U8(A||i,e)}finally{A&&s.revokeObjectURL(A)}}async function U8(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(await t.decode(),t):await new Promise((i,s)=>{try{t.onload=()=>i(t),t.onerror=A=>s(new Error("Could not load image ".concat(n,": ").concat(A)))}catch(A){s(A)}})}const k8={};let H_=!0;async function z8(n,e,t){let i;lp(t)?i=await bv(n,e,t):i=_v(n,t);const s=e&&e.imagebitmap;return await G8(i,s)}async function G8(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((V8(e)||!H_)&&(e=null),e)try{return await createImageBitmap(n,e)}catch(t){console.warn(t),H_=!1}return await createImageBitmap(n)}function V8(n){for(const e in n||k8)return!1;return!0}function H8(n){return!X8(n,"ftyp",4)||!(n[8]&96)?null:j8(n)}function j8(n){switch(Y8(n,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function Y8(n,e,t){return String.fromCharCode(...n.slice(e,t))}function Q8(n){return[...n].map(e=>e.charCodeAt(0))}function X8(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const i=Q8(e);for(let s=0;s<i.length;++s)if(i[s]!==n[s+t])return!1;return!0}const es=!1,Ju=!0;function Ev(n){const e=wc(n);return q8(e)||$8(e)||Z8(e)||K8(e)||W8(e)}function W8(n){const e=new Uint8Array(n instanceof DataView?n.buffer:n),t=H8(e);return t?{mimeType:t.mimeType,width:0,height:0}:null}function q8(n){const e=wc(n);return e.byteLength>=24&&e.getUint32(0,es)===2303741511?{mimeType:"image/png",width:e.getUint32(16,es),height:e.getUint32(20,es)}:null}function Z8(n){const e=wc(n);return e.byteLength>=10&&e.getUint32(0,es)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Ju),height:e.getUint16(8,Ju)}:null}function K8(n){const e=wc(n);return e.byteLength>=14&&e.getUint16(0,es)===16973&&e.getUint32(2,Ju)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Ju),height:e.getUint32(22,Ju)}:null}function $8(n){const e=wc(n);if(!(e.byteLength>=3&&e.getUint16(0,es)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:i,sofMarkers:s}=J8();let A=2;for(;A+9<e.byteLength;){const h=e.getUint16(A,es);if(s.has(h))return{mimeType:"image/jpeg",height:e.getUint16(A+5,es),width:e.getUint16(A+7,es)};if(!i.has(h))return null;A+=2,A+=e.getUint16(A,es)}return null}function J8(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function wc(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}async function eS(n,e){const{mimeType:t}=Ev(n)||{},i=globalThis._parseImageNode;return x0(i),await i(n,t)}async function tS(n,e,t){e=e||{};const s=(e.image||{}).type||"auto",{url:A}=t||{},h=nS(s);let m;switch(h){case"imagebitmap":m=await z8(n,e,A);break;case"image":m=await bv(n,e,A);break;case"data":m=await eS(n);break;default:x0(!1)}return s==="data"&&(m=N8(m)),m}function nS(n){switch(n){case"auto":case"data":return O8();default:return L8(n),n}}const iS=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],rS=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],sS={image:{type:"auto",decode:!0}},aS={id:"image",module:"images",name:"Images",version:M8,mimeTypes:rS,extensions:iS,parse:tS,tests:[n=>!!Ev(new DataView(n))],options:sS},Xt=new Tc({id:"deck"});let pm={};function AS(n){pm=n}function wi(n,e,t,i){Xt.level>0&&pm[n]&&pm[n].call(null,e,t,i)}function oS(n){const e=n[0],t=n[n.length-1];return e==="{"&&t==="}"||e==="["&&t==="]"}const lS={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:oS,parseTextSync:JSON.parse};function uS(){const n="8.9.36",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==n)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(n));return e||(Xt.log(1,"deck.gl ".concat(n))(),globalThis.deck={...globalThis.deck,VERSION:n,version:n,log:Xt,_registerLoggers:AS},t8([lS,[aS,{imagebitmap:{premultiplyAlpha:"none"}}]])),n}const cS=uS(),$t={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty($t,"IDENTITY",{get:()=>(Xt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const ts={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},ml={common:0,meters:1,pixels:2},j_={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},it=new Tc({id:"luma.gl"});function Bi(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}const fS="Invalid WebGLRenderingContext",hS="Requires WebGL2";function th(n){return typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?!0:!!(n&&Number.isFinite(n._version))}function Ut(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?!0:!!(n&&n._version===2)}function dS(n){return Ut(n)?n:null}function nh(n){return Bi(th(n),fS),n}function xi(n){return Bi(Ut(n),hS),n}const qu={};function gS(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}function mS(n){globalThis.console&&globalThis.console.log&&globalThis.console.log(n)}function pS(n,e){qu[n]=!0,gS(e)}function _S(n){const e=n.getError;n.getError=function(){let i;do i=e.apply(n),i!==0&&(qu[i]=!0);while(i!==0);for(i in qu)if(qu[i])return delete qu[i],parseInt(i,10);return 0}}const xc=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const s=new n.VertexAttrib(t);this.attribs[i]=s}this.maxAttrib=0};xc.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};xc.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const KA=function(e){const t=this;this.gl=e,_S(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(A){return A===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(A){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,A);const m=h.attribs[A];return m.enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(A){const h=t.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,A);const m=h.attribs[A];return m.enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(A,h){switch(A){case 34962:t.currentArrayBuffer=h;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=h;break}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(A,h){const _=t.currentVertexArrayObject.attribs[A];switch(h){case 34975:return _.buffer;case 34338:return _.enabled;case 34339:return _.size;case 34340:return _.stride;case 34341:return _.type;case 34922:return _.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(A,h,m,_,E,x){const S=t.currentVertexArrayObject;S.maxAttrib=Math.max(S.maxAttrib,A);const C=S.attribs[A];return C.buffer=t.currentArrayBuffer,C.size=h,C.type=m,C.normalized=_,C.stride=E,C.offset=x,C.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{mS("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};KA.prototype.VERTEX_ARRAY_BINDING_OES=34229;KA.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;const t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new xc(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};KA.prototype.createVertexArrayOES=function(){const e=new xc(this);return this.vertexArrayObjects.push(e),e};KA.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};KA.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof xc&&e.hasBeenBound&&e.ext===this)};KA.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive){pS(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const i=this.original,s=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const A=this.currentVertexArrayObject;if(s===A)return;(!s||A.elementArrayBuffer!==s.elementArrayBuffer)&&i.bindBuffer.call(t,34963,A.elementArrayBuffer);let h=this.currentArrayBuffer;const m=Math.max(s?s.maxAttrib:0,A.maxAttrib);for(let _=0;_<=m;_++){const E=A.attribs[_],x=s?s.attribs[_]:null;if((!s||E.enabled!==x.enabled)&&(E.enabled?i.enableVertexAttribArray.call(t,_):i.disableVertexAttribArray.call(t,_)),E.enabled){let S=!1;(!s||E.buffer!==x.buffer)&&(h!==E.buffer&&(i.bindBuffer.call(t,34962,E.buffer),h=E.buffer),S=!0),(S||E.cached!==x.cached)&&i.vertexAttribPointer.call(t,_,E.size,E.type,E.normalized,E.stride,E.offset)}}this.currentArrayBuffer!==h&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};function bS(n){if(typeof n.createVertexArray=="function")return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const s=e.call(this)||[];return s.indexOf("OES_vertex_array_object")<0&&s.push("OES_vertex_array_object"),s};const t=n.getExtension;n.getExtension=function(s){const A=t.call(this,s);return A||(s!=="OES_vertex_array_object"?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new KA(this)),this.__OESVertexArrayObject))}}const Y_="OES_element_index",Q_="WEBGL_draw_buffers",ES="EXT_disjoint_timer_query",yS="EXT_disjoint_timer_query_webgl2",vS="EXT_texture_filter_anisotropic",X_="WEBGL_debug_renderer_info",TS=35723,wS=4352,xS=36795,SS=34047,MS=37445,CS=37446,cn=n=>Ut(n)?void 0:0,RS={3074:n=>Ut(n)?void 0:36064,[TS]:n=>Ut(n)?void 0:wS,35977:cn,32937:cn,[xS]:(n,e)=>{const t=Ut(n)?n.getExtension(yS):n.getExtension(ES);return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},[MS]:(n,e)=>{const t=n.getExtension(X_);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},[CS]:(n,e)=>{const t=n.getExtension(X_);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},[SS]:(n,e)=>{const t=n.luma.extensions[vS];return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:cn,35071:cn,37447:cn,36063:(n,e)=>{if(!Ut(n)){const t=n.getExtension(Q_);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:cn,35374:cn,35377:cn,34852:n=>{if(!Ut(n)){const e=n.getExtension(Q_);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(Y_)?2147483647:65535,33001:n=>n.getExtension(Y_)?16777216:65535,33e3:n=>16777216,37157:cn,35373:cn,35657:cn,36183:cn,37137:cn,34045:cn,35978:cn,35979:cn,35968:cn,35376:cn,35375:cn,35659:cn,37154:cn,35371:cn,35658:cn,35076:cn,35077:cn,35380:cn};function LS(n,e,t){const i=RS[t],s=typeof i=="function"?i(n,e,t):i;return s!==void 0?s:e(t)}const OS="OES_vertex_array_object",yv="ANGLE_instanced_arrays",DS="WEBGL_draw_buffers",NS="EXT_disjoint_timer_query",BS="EXT_texture_filter_anisotropic",PS="VertexArray requires WebGL2 or OES_vertex_array_object extension";function IS(n,e){return{webgl2:Ut(n),ext:n.getExtension(e)}}const vv={[OS]:{meta:{suffix:"OES"},createVertexArray:()=>{Bi(!1,PS)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[yv]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){Bi(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[DS]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Bi(!1)}},[NS]:{meta:{suffix:"EXT"},createQuery:()=>{Bi(!1)},deleteQuery:()=>{Bi(!1)},beginQuery:()=>{Bi(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},_g={readBuffer:(n,e,t)=>{Ut(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:s,ext:A}=IS(n,yv);let h;switch(i){case 35069:h=s?void 0:!1;break;case 35070:h=!s&&!A?0:void 0;break}return h!==void 0?h:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!Ut(n))switch(i){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,s)=>{if(!Ut(n))switch(s){case 32937:return new Int32Array([0])}return n.getInternalformatParameter(t,i,s)},getTexParameter(n,e,t,i){switch(i){case 34046:const{extensions:s}=n.luma,A=s[BS];i=A&&A.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(t,i)},getParameter:LS,hint(n,e,t,i){return e(t,i)}};function FS(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(bS(n),US(n),zS(n,vv),kS(n,{target:e,target2:n}),e.polyfilled=!0),n}globalThis.polyfillContext=FS;function US(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}function kS(n,e){let{target:t,target2:i}=e;Object.keys(_g).forEach(s=>{if(typeof _g[s]=="function"){const A=n[s]?n[s].bind(n):()=>{},h=_g[s].bind(null,n,A);t[s]=h,i[s]=h}})}function zS(n,e){for(const t of Object.getOwnPropertyNames(e))t!=="overrides"&&GS(n,{extension:t,target:n.luma,target2:n})}function GS(n,e){let{extension:t,target:i,target2:s}=e;const A=vv[t];Bi(A);const{meta:h={}}=A,{suffix:m=""}=h,_=n.getExtension(t);for(const E of Object.keys(A)){const x="".concat(E).concat(m);let S=null;E==="meta"||typeof n[E]=="function"||(_&&typeof _[x]=="function"?S=function(){return _[x](...arguments)}:typeof A[E]=="function"&&(S=A[E].bind(i))),S&&(i[E]=S,s[E]=S)}}const up={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},ka=(n,e,t)=>e?n.enable(t):n.disable(t),W_=(n,e,t)=>n.hint(t,e),rr=(n,e,t)=>n.pixelStorei(t,e),VS=(n,e)=>{const t=Ut(n)?36009:36160;return n.bindFramebuffer(t,e)},HS=(n,e)=>n.bindFramebuffer(36008,e);function Fu(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const jS={3042:ka,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:ka,2885:(n,e)=>n.cullFace(e),2929:ka,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:ka,35723:W_,36006:VS,2886:(n,e)=>n.frontFace(e),33170:W_,2849:(n,e)=>n.lineWidth(e),32823:ka,32824:"polygonOffset",10752:"polygonOffset",35977:ka,32938:"sampleCoverage",32939:"sampleCoverage",3089:ka,3088:(n,e)=>n.scissor(...e),2960:ka,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:rr,3317:rr,37440:rr,37441:rr,37443:rr,3330:rr,3332:rr,3331:rr,36010:HS,3314:rr,32878:rr,3316:rr,3315:rr,32877:rr,framebuffer:(n,e)=>{const t=e&&"handle"in e?e.handle:e;return n.bindFramebuffer(36160,t)},blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=Fu(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=Fu(e)&&e.length===2?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=Fu(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=Fu(e)&&e.length===3?[...e,...e]:e;const[t,i,s,A,h,m]=e;n.stencilFuncSeparate(1028,t,i,s),n.stencilFuncSeparate(1029,A,h,m)},stencilOp:(n,e)=>{e=Fu(e)&&e.length===3?[...e,...e]:e;const[t,i,s,A,h,m]=e;n.stencilOpSeparate(1028,t,i,s),n.stencilOpSeparate(1029,A,h,m)},viewport:(n,e)=>n.viewport(...e)};function Mn(n,e,t){return e[n]!==void 0?e[n]:t[n]}const YS={blendEquation:(n,e,t)=>n.blendEquationSeparate(Mn(32777,e,t),Mn(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(Mn(32969,e,t),Mn(32968,e,t),Mn(32971,e,t),Mn(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(Mn(32824,e,t),Mn(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(Mn(32938,e,t),Mn(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,Mn(2962,e,t),Mn(2967,e,t),Mn(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,Mn(34816,e,t),Mn(36003,e,t),Mn(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,Mn(2964,e,t),Mn(2965,e,t),Mn(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,Mn(34817,e,t),Mn(34818,e,t),Mn(34819,e,t))},q_={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,s)=>n({32773:new Float32Array([e,t,i,s])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,s)=>n({32969:e,32968:t,32971:i,32970:s}),clearColor:(n,e,t,i,s)=>n({3106:new Float32Array([e,t,i,s])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,s)=>n({3107:[e,t,i,s]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,s)=>n({3088:new Int32Array([e,t,i,s])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[e===1028?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,s)=>n({[e===1028?2962:34816]:t,[e===1028?2967:36003]:i,[e===1028?2963:36004]:s}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,s)=>n({[e===1028?2964:34817]:t,[e===1028?2965:34818]:i,[e===1028?2966:34819]:s}),viewport:(n,e,t,i,s)=>n({2978:[e,t,i,s]})},Zr=(n,e)=>n.isEnabled(e),Z_={3042:Zr,2884:Zr,2929:Zr,3024:Zr,32823:Zr,32926:Zr,32928:Zr,3089:Zr,2960:Zr,35977:Zr};function Tv(n){for(const e in n)return!1;return!0}function QS(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let s=0;s<n.length;++s)if(n[s]!==e[s])return!1;return!0}return!1}function K_(n,e){const t=n[e].bind(n);n[e]=function(){const s=arguments.length<=0?void 0:arguments[0];return s in n.state.cache?n.state.enable?n.state.cache[s]:t(...arguments):t(...arguments)},Object.defineProperty(n[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function XS(n,e,t){const i=n[e].bind(n);n[e]=function(){for(var A=arguments.length,h=new Array(A),m=0;m<A;m++)h[m]=arguments[m];const{valueChanged:_,oldValue:E}=t(n.state._updateCache,...h);return _&&i(...h),E},Object.defineProperty(n[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function WS(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}class qS{constructor(e){let{copyState:t=!1,log:i=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?KS(e):Object.assign({},up),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Bi(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Zs(this.gl,e),this.stateStack.pop()}_updateCache(e){let t=!1,i;const s=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const A in e){Bi(A!==void 0);const h=e[A],m=this.cache[A];QS(h,m)||(t=!0,i=m,s&&!(A in s)&&(s[A]=m),this.cache[A]=h)}return{valueChanged:t,oldValue:i}}}function wv(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:t=!0,copyState:i}=e;if(Bi(i!==void 0),!n.state){const{polyfillContext:s}=globalThis;s&&s(n),n.state=new qS(n,{copyState:i}),WS(n);for(const A in q_){const h=q_[A];XS(n,A,h)}K_(n,"getParameter"),K_(n,"isEnabled")}return n.state.enable=t,n}function ZS(n){n.state||wv(n,{copyState:!1}),n.state.push()}function $_(n){Bi(n.state),n.state.pop()}function Zs(n,e){if(Bi(th(n),"setParameters requires a WebGL context"),Tv(e))return;const t={};for(const s in e){const A=Number(s),h=jS[s];h&&(typeof h=="string"?t[h]=!0:h(n,e[s],A))}const i=n.state&&n.state.cache;if(i)for(const s in t){const A=YS[s];A(n,e,i)}}function KS(n,e){if(e=e||up,typeof e=="number"){const s=e,A=Z_[s];return A?A(n,s):n.getParameter(s)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const s of t){const A=Z_[s];i[s]=A?A(n,Number(s)):n.getParameter(Number(s))}return i}function $S(n){Zs(n,up)}function Fr(n,e,t){if(Tv(e))return t(n);const{nocatch:i=!0}=e;ZS(n),Zs(n,e);let s;if(i)s=t(n),$_(n);else try{s=t(n)}finally{$_(n)}return s}function pl(n){const{luma:e}=n;if(n.canvas&&e){const t=e.canvasSizeInfo,i="clientWidth"in t?t.clientWidth:n.canvas.clientWidth;return i?n.drawingBufferWidth/i:1}return 1}function bg(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=pl(n),s=n.drawingBufferWidth,A=n.drawingBufferHeight;return e6(e,i,s,A,t)}function JS(n){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}function e6(n,e,t,i,s){const A=J_(n[0],e,t);let h=eb(n[1],e,i,s),m=J_(n[0]+1,e,t);const _=m===t-1?m:m-1;m=eb(n[1]+1,e,i,s);let E;return s?(m=m===0?m:m+1,E=h,h=m):E=m===i-1?m:m-1,{x:A,y:h,width:Math.max(_-A+1,1),height:Math.max(E-h+1,1)}}function J_(n,e,t){return Math.min(Math.round(n*e),t-1)}function eb(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const cp=Nl(),t6=cp&&typeof document<"u",xv={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Sv(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Bi(cp,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),n=Object.assign({},xv,n);const{width:e,height:t}=n;function i(m){if(n.throwOnError)throw new Error(m);return console.error(m),null}n.onError=i;let s;const{canvas:A}=n,h=s6({canvas:A,width:e,height:t,onError:i});return s=r6(h,n),s?(s=fp(s,n),a6(s),s):null}function fp(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!n||n._instrumented)return n;n._version=n._version||A6(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},xv,e);const{manageState:t,debug:i}=e;return t&&wv(n,{copyState:!1,log:function(){for(var s=arguments.length,A=new Array(s),h=0;h<s;h++)A[h]=arguments[h];return it.log(1,...A)()}}),cp&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),it.level=Math.max(it.level,1)):it.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function n6(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info"),s=i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936),A=i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937);return{vendor:s||e,renderer:A||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}function i6(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n.canvas){const i=JS(e.useDevicePixels);o6(n,i,e);return}const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}function r6(n,e){const{onError:t}=e;let i=null;const s=_=>i=_.statusMessage||i;n.addEventListener("webglcontextcreationerror",s,!1);const{webgl1:A=!0,webgl2:h=!0}=e;let m=null;return h&&(m=m||n.getContext("webgl2",e),m=m||n.getContext("experimental-webgl2",e)),A&&(m=m||n.getContext("webgl",e),m=m||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",s,!1),m?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),m):t("Failed to create ".concat(h&&!A?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}function s6(n){let{canvas:e,width:t=800,height:i=600,onError:s}=n,A;return typeof e=="string"?(t6&&document.readyState==="complete"||s("createGLContext called on canvas '".concat(e,"' before page was loaded")),A=document.getElementById(e)):e?A=e:(A=document.createElement("canvas"),A.id="lumagl-canvas",A.style.width=Number.isFinite(t)?"".concat(t,"px"):"100%",A.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(A,document.body.firstChild)),A}function a6(n){const e=Ut(n)?"WebGL2":"WebGL1",t=n6(n),i="(".concat(t.vendor,",").concat(t.renderer,")"),s=n.debug?" debug":"";it.info(1,"".concat(e).concat(s," context ").concat(i))()}function A6(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?2:1}function o6(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,s="height"in t?t.height:n.canvas.clientHeight;(!i||!s)&&(it.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,s=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const A=n.luma.canvasSizeInfo;if(A.clientWidth!==i||A.clientHeight!==s||A.devicePixelRatio!==e){let h=e;const m=Math.floor(i*h),_=Math.floor(s*h);n.canvas.width=m,n.canvas.height=_,(n.drawingBufferWidth!==m||n.drawingBufferHeight!==_)&&(it.warn("Device pixel ratio clamped")(),h=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/s),n.canvas.width=Math.floor(i*h),n.canvas.height=Math.floor(s*h)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:s,devicePixelRatio:e})}}const ec="8.5.21",l6="set luma.log.level=1 (or higher) to trace rendering";class u6{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new ip({id:e})),this.stats.get(e)}}const zA=new u6;if(globalThis.luma&&globalThis.luma.VERSION!==ec)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(ec));globalThis.luma||(Nl()&&it.log(1,"luma.gl ".concat(ec," - ").concat(l6))(),globalThis.luma=globalThis.luma||{VERSION:ec,version:ec,log:it,stats:zA,globals:{modules:{},nodeIO:{}}});function c6(n){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}function f6(n){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}function Qe(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function Eg(n,e){if(typeof e!="string")return e;const t=Number(e);if(!isNaN(t))return t;e=e.replace(/^.*\./,"");const i=n[e];return Qe(i!==void 0,"Accessing undefined constant GL.".concat(e)),i}function qa(n,e){e=Number(e);for(const t in n)if(n[t]===e)return"GL.".concat(t);return String(e)}const yg={};function Ka(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";yg[n]=yg[n]||1;const e=yg[n]++;return"".concat(n,"-").concat(e)}function tb(n){return Qe(typeof n=="number","Input must be a number"),n&&(n&n-1)===0}function _l(n){let e=!0;for(const t in n){e=!1;break}return e}function Mv(n,e,t,i){const s="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),A=Object.getPrototypeOf(n);i.forEach(h=>{A.methodName||(A[h]=()=>{throw it.removed("Calling removed method ".concat(e,".").concat(h,": "),s)(),new Error(h)})})}const Wo="Resource subclass must define virtual methods";let ea=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};nh(e);const{id:i,userData:s={}}=t;this.gl=e,this.gl2=e,this.id=i||Ka(this[Symbol.toStringTag]),this.userData=s,this._bound=!1,this._handle=t.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let t;return this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=Eg(this.gl,e),Qe(e);const s=(this.constructor.PARAMETERS||{})[e];if(s){const A=Ut(this.gl);if(!((!("webgl2"in s)||A)&&(!("extension"in s)||this.gl.getExtension(s.extension)))){const m=s.webgl1,_="webgl2"in s?s.webgl2:s.webgl1;return A?_:m}}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:t,keys:i}=e,s=this.constructor.PARAMETERS||{},A=Ut(this.gl),h={},m=t||Object.keys(s);for(const _ of m){const E=s[_];if(E&&(!("webgl2"in E)||A)&&(!("extension"in E)||this.gl.getExtension(E.extension))){const S=i?qa(this.gl,_):_;h[S]=this.getParameter(_,e),i&&E.type==="GLenum"&&(h[S]=qa(this.gl,h[S]))}}return h}setParameter(e,t){e=Eg(this.gl,e),Qe(e);const s=(this.constructor.PARAMETERS||{})[e];if(s){const A=Ut(this.gl);if(!((!("webgl2"in s)||A)&&(!("extension"in s)||this.gl.getExtension(s.extension))))throw new Error("Parameter not available on this platform");s.type==="GLenum"&&(t=Eg(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return Mv(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(Wo)}_deleteHandle(){throw new Error(Wo)}_bindHandle(e){throw new Error(Wo)}_getOptsFromHandle(){throw new Error(Wo)}_getParameter(e,t){throw new Error(Wo)}_setParameter(e,t){throw new Error(Wo)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=zA.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];zA.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const s=zA.get("Memory Usage".concat(i));s.get("GPU Memory").addCount(e),s.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=zA.get("Memory Usage".concat(t));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const h6="Failed to deduce GL constant from typed array";function _m(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(h6)}}function sc(n){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function d6(n){let{data:e,width:t,height:i,bytesPerPixel:s=4,temp:A}=n;const h=t*s;A=A||new Uint8Array(h);for(let m=0;m<i/2;++m){const _=m*h,E=(i-m-1)*h;A.set(e.subarray(_,_+h)),e.copyWithin(_,E,E+h),e.set(A,E)}}function g6(n){let{data:e,width:t,height:i}=n;const s=Math.round(t/2),A=Math.round(i/2),h=new Uint8Array(s*A*4);for(let m=0;m<A;m++)for(let _=0;_<s;_++)for(let E=0;E<4;E++)h[(m*s+_)*4+E]=e[(m*2*t+_*2)*4+E];return{data:h,width:s,height:A}}function bm(n,e,t){const{removedProps:i={},deprecatedProps:s={},replacedProps:A={}}=t;for(const m in i)if(m in e){const E=i[m]?"".concat(n,".").concat(i[m]):"N/A";it.removed("".concat(n,".").concat(m),E)()}for(const m in s)if(m in e){const _=s[m];it.deprecated("".concat(n,".").concat(m),"".concat(n,".").concat(_))()}let h=null;for(const m in A)if(m in e){const _=A[m];it.deprecated("".concat(n,".").concat(m),"".concat(n,".").concat(_))(),h=h||Object.assign({},e),h[_]=e[m],delete h[m]}return h||e}const m6={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},p6={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class lr{static getBytesPerElement(e){return sc(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Qe(e.size),sc(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new lr(m6,...t)}constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(s=>this._assign(s)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return lr.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return lr.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=bm("Accessor",e,p6),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const nb=10,Cv={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},_6={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Cv},b6={removedProps:Cv};class an extends ea{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/lr.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/lr.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=bm("Buffer",e,_6),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=bm("Buffer",e,b6),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new lr(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:s=0}=e,A=e.byteLength||e.length;Qe(t);const h=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(h,this.handle),s!==0||A!==void 0?(xi(this.gl),this.gl.bufferSubData(this.target,i,t,s,A)):this.gl.bufferSubData(h,i,t),this.gl.bindBuffer(h,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:i=0,writeOffset:s=0,size:A}=e;const{gl:h}=this;return xi(h),h.bindBuffer(36662,t.handle),h.bindBuffer(36663,this.handle),h.copyBufferSubData(36662,36663,i,s,A),h.bindBuffer(36662,null),h.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:s=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xi(this.gl);const A=sc(this.accessor.type||5126,{clamped:!1}),h=this._getAvailableElementCount(t),m=i;let _,E;e?(E=e.length,_=E-m):(_=Math.min(h,s||h),E=m+_);const x=Math.min(h,_);return s=s||x,Qe(s<=x),e=e||new A(E),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,s),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?s!==void 0?this.gl.bindBufferRange(e,t,this.handle,i,s):(Qe(i===0),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(nb,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+t;Qe(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const s=this._getTarget();this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,i,this.usage),this.gl.bufferSubData(s,t,e),this.gl.bindBuffer(s,null),this.debugData=e.slice(0,nb),this.bytesUsed=i,this._trackAllocatedMemory(i);const A=_m(e);return Qe(A),this.setAccessor(new lr(this.accessor,{type:A})),this}_setByteLength(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;Qe(e>=0),this._trackDeallocatedMemory();let i=e;e===0&&(i=new Float32Array(0));const s=this._getTarget();return this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,i,t),this.gl.bindBuffer(s,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const t=sc(this.accessor.type||5126,{clamped:!1}),i=e/t.BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new lr(this.accessor,{type:_m(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return it.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return it.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return it.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return it.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new lr(this.accessor,e),this}}const hp={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Rv={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Lv={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function E6(n,e){const t=hp[e];if(!t)return!1;if(t.gl1===void 0&&t.gl2===void 0)return!0;const i=Ut(n)&&t.gl2||t.gl1;return typeof i=="string"?n.getExtension(i):i}function y6(n,e){const t=hp[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}const v6=[9729,9728],ib=globalThis.WebGLBuffer||function(){};class jA extends ea{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:i,linearFiltering:s}=t;let A=!0;return i&&(A=A&&E6(e,i),A=A&&(!s||y6(e,i))),A}constructor(e,t){const{id:i=Ka("texture"),handle:s,target:A}=t;super(e,{id:i,handle:s}),this.target=A,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then(Y=>this.initialize(Object.assign({},e,{pixels:Y,data:Y}))),this;const i=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:s=null,format:A=6408,border:h=0,recreate:m=!1,parameters:_={},pixelStore:E={},textureUnit:x=void 0}=e;t||(t=s);let{width:S,height:C,dataFormat:L,type:B,compressed:G=!1,mipmaps:j=!0}=e;const{depth:H=0}=e;return{width:S,height:C,compressed:G,dataFormat:L,type:B}=this._deduceParameters({format:A,type:B,dataFormat:L,compressed:G,data:t,width:S,height:C}),this.width=S,this.height=C,this.depth=H,this.format=A,this.type=B,this.dataFormat=L,this.border=h,this.textureUnit=x,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),j&&this._isNPOT()&&(it.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),j=!1,this._updateForNPOT(_)),this.mipmaps=j,this.setImageData({data:t,width:S,height:C,depth:H,format:A,type:B,dataFormat:L,border:h,mipmaps:j,parameters:E,compressed:G}),j&&this.generateMipmap(),this.setParameters(_),m&&(this.data=t),i&&(this._video={video:t,parameters:_,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:i,mipmaps:s=!1}=e;return i!==this.width||t!==this.height?this.initialize({width:i,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:s}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(it.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Fr(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:s=0,format:A=this.format,border:h=this.border,offset:m=0,parameters:_={}}=e;let{data:E=null,type:x=this.type,width:S=this.width,height:C=this.height,dataFormat:L=this.dataFormat,compressed:B=!1}=e;E||(E=i),{type:x,dataFormat:L,compressed:B,width:S,height:C}=this._deduceParameters({format:A,type:x,dataFormat:L,compressed:B,data:E,width:S,height:C});const{gl:G}=this;G.bindTexture(this.target,this.handle);let j=null;({data:E,dataType:j}=this._getDataType({data:E,compressed:B}));let H,Y=0;if(Fr(this.gl,_,()=>{switch(j){case"null":G.texImage2D(t,s,A,S,C,h,L,x,E);break;case"typed-array":G.texImage2D(t,s,A,S,C,h,L,x,E,m);break;case"buffer":H=xi(G),H.bindBuffer(35052,E.handle||E),H.texImage2D(t,s,A,S,C,h,L,x,m),H.bindBuffer(35052,null);break;case"browser-object":Ut(G)?G.texImage2D(t,s,A,S,C,h,L,x,E):G.texImage2D(t,s,A,L,x,E);break;case"compressed":for(const[K,ee]of E.entries())G.compressedTexImage2D(t,K,ee.format,ee.width,ee.height,h,ee.data),Y+=ee.levelSize;break;default:Qe(!1,"Unknown image data type")}}),j==="compressed")this._trackAllocatedMemory(Y,"Texture");else if(E&&E.byteLength)this._trackAllocatedMemory(E.byteLength,"Texture");else{const K=Rv[this.dataFormat]||4,ee=Lv[this.type]||1;this._trackAllocatedMemory(this.width*this.height*K*ee,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:i=null,data:s=null,x:A=0,y:h=0,width:m=this.width,height:_=this.height,level:E=0,format:x=this.format,type:S=this.type,dataFormat:C=this.dataFormat,compressed:L=!1,offset:B=0,border:G=this.border,parameters:j={}}=e;if({type:S,dataFormat:C,compressed:L,width:m,height:_}=this._deduceParameters({format:x,type:S,dataFormat:C,compressed:L,data:s,width:m,height:_}),Qe(this.depth===0,"texSubImage not supported for 3D textures"),s||(s=i),s&&s.data){const H=s;s=H.data,m=H.shape[0],_=H.shape[1]}s instanceof an&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Fr(this.gl,j,()=>{if(L)this.gl.compressedTexSubImage2D(t,E,A,h,m,_,x,s);else if(s===null)this.gl.texSubImage2D(t,E,A,h,m,_,C,S,null);else if(ArrayBuffer.isView(s))this.gl.texSubImage2D(t,E,A,h,m,_,C,S,s,B);else if(s instanceof ib){const H=xi(this.gl);H.bindBuffer(35052,s),H.texSubImage2D(t,E,A,h,m,_,C,S,B),H.bindBuffer(35052,null)}else Ut(this.gl)?xi(this.gl).texSubImage2D(t,E,A,h,m,_,C,S,s):this.gl.texSubImage2D(t,E,A,h,C,S,s)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return it.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:t}=this;return e!==void 0&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:t}=this;return e!==void 0&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:i=!1}=e;return i?{data:t,dataType:"compressed"}:t===null?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof an?{data:t.handle,dataType:"buffer"}:t instanceof ib?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:s,height:A,dataFormat:h,type:m,compressed:_}=e;const E=hp[t];return h=h||E&&E.dataFormat,m=m||E&&E.types[0],_=_||E&&E.compressed,{width:s,height:A}=this._deduceImageSize(i,s,A),{dataFormat:h,type:m,compressed:_,width:s,height:A,format:t,data:i}}_deduceImageSize(e,t,i){let s;return typeof ImageData<"u"&&e instanceof ImageData?s={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?s={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?s={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?s={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?s={width:e.videoWidth,height:e.videoHeight}:e?s={width:t,height:i}:s={width:t>=0?t:1,height:i>=0?i:1},Qe(s,"Could not deduced texture size"),Qe(t===void 0||s.width===t,"Deduced texture width does not match supplied width"),Qe(i===void 0||s.height===i,"Deduced texture height does not match supplied height"),s}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Qe(!1);break;default:this.gl.texParameteri(this.target,e,t);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Ut(this.gl)||!this.width||!this.height?!1:!tb(this.width)||!tb(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:v6.indexOf(t)===-1&&(t=9729);break;case 10242:case 10243:t!==33071&&(t=33071);break}return t}}let T6="";function w6(n,e){return Qe(typeof n=="string"),n=T6+n,new Promise((t,i)=>{try{const s=new Image;s.onload=()=>t(s),s.onerror=()=>i(new Error("Could not load image ".concat(n,"."))),s.crossOrigin=e&&e.crossOrigin||"anonymous",s.src=n}catch(s){i(s)}})}class fr extends jA{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return jA.isSupported(e,t)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};nh(e),(t instanceof Promise||typeof t=="string")&&(t={data:t}),typeof t.data=="string"&&(t=Object.assign({},t,{data:w6(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const Em=[34069,34070,34071,34072,34073,34074];class Ov extends jA{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};nh(e),super(e,Object.assign({},t,{target:34067})),this.initialize(t),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:t=!0,parameters:i={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,t&&this.generateMipmap(e),this.setParameters(i)}),this}subImage(e){let{face:t,data:i,x:s=0,y:A=0,mipmapLevel:h=0}=e;return this._subImage({target:t,data:i,x:s,y:A,mipmapLevel:h})}async setCubeMapImageData(e){let{width:t,height:i,pixels:s,data:A,border:h=0,format:m=6408,type:_=5121}=e;const{gl:E}=this,x=s||A,S=await Promise.all(Em.map(C=>{const L=x[C];return Promise.all(Array.isArray(L)?L:[L])}));this.bind(),Em.forEach((C,L)=>{S[L].length>1&&this.opts.mipmaps!==!1&&it.warn("".concat(this.id," has mipmap and multiple LODs."))(),S[L].forEach((B,G)=>{t&&i?E.texImage2D(C,G,m,t,i,h,m,_,B):E.texImage2D(C,G,m,m,_,B)})}),this.unbind()}setImageDataForFace(e){const{face:t,width:i,height:s,pixels:A,data:h,border:m=0,format:_=6408,type:E=5121}=e,{gl:x}=this,S=A||h;return this.bind(),S instanceof Promise?S.then(C=>this.setImageDataForFace(Object.assign({},e,{face:t,data:C,pixels:C}))):this.width||this.height?x.texImage2D(t,0,_,i,s,m,_,E,S):x.texImage2D(t,0,_,_,E,S),this}}Ov.FACES=Em;class x6 extends jA{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Ut(e)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xi(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:i=6408,width:s,height:A,depth:h=1,border:m=0,format:_,type:E=5121,offset:x=0,data:S,parameters:C={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Fr(this.gl,C,()=>{ArrayBuffer.isView(S)&&this.gl.texImage3D(this.target,t,i,s,A,h,m,_,E,S),S instanceof an&&(this.gl.bindBuffer(35052,S.handle),this.gl.texImage3D(this.target,t,i,s,A,h,m,_,E,x))}),S&&S.byteLength)this._trackAllocatedMemory(S.byteLength,"Texture");else{const L=Rv[this.dataFormat]||4,B=Lv[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*L*B,"Texture")}return this.loaded=!0,this}}const PA="EXT_color_buffer_float",rb={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:PA,bpp:2},33327:{gl2:PA,bpp:4},34842:{gl2:PA,bpp:8},33326:{gl2:PA,bpp:4},33328:{gl2:PA,bpp:8},34836:{gl2:PA,bpp:16},35898:{gl2:PA,bpp:4}};function S6(n,e,t){const i=t[e];if(!i)return!1;const s=Ut(n)&&i.gl2||i.gl1;return typeof s=="string"?n.getExtension(s):s}class nl extends ea{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!t||S6(e,t,rb)}static getSamplesForFormat(e,t){let{format:i}=t;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:i=1,height:s=1,samples:A=0}=e;return Qe(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),A!==0&&Ut(this.gl)?this.gl.renderbufferStorageMultisample(36161,A,t,i,s):this.gl.renderbufferStorage(36161,t,i,s),this.format=t,this.width=i,this.height=s,this.samples=A,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*rb[this.format].bpp),this}resize(e){let{width:t,height:i}=e;return t!==this.width||i!==this.height?this.initialize({width:t,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const M6=256,C6=1024,R6=16384,sb=6144,ab=6145,Ab=6146,ob=34041,Dv="clear: bad arguments";function dp(n){let{framebuffer:e=null,color:t=null,depth:i=null,stencil:s=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const A={};e&&(A.framebuffer=e);let h=0;t&&(h|=R6,t!==!0&&(A.clearColor=t)),i&&(h|=M6,i!==!0&&(A.clearDepth=i)),s&&(h|=C6,i!==!0&&(A.clearStencil=i)),Qe(h!==0,Dv),Fr(n,A,()=>{n.clear(h)})}function L6(n){let{framebuffer:e=null,buffer:t=sb,drawBuffer:i=0,value:s=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xi(n),Fr(n,{framebuffer:e},()=>{switch(t){case sb:switch(s.constructor){case Int32Array:n.clearBufferiv(t,i,s);break;case Uint32Array:n.clearBufferuiv(t,i,s);break;case Float32Array:default:n.clearBufferfv(t,i,s)}break;case ab:n.clearBufferfv(ab,0,[s]);break;case Ab:n.clearBufferiv(Ab,0,[s]);break;case ob:const[A,h]=s;n.clearBufferfi(ob,0,A,h);break;default:Qe(!1,Dv)}})}function O6(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Qe(!1),0}}function ih(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:t=0,sourceY:i=0,sourceFormat:s=6408}=e;let{sourceAttachment:A=36064,target:h=null,sourceWidth:m,sourceHeight:_,sourceType:E}=e;const{framebuffer:x,deleteFramebuffer:S}=Nv(n);Qe(x);const{gl:C,handle:L,attachments:B}=x;m=m||x.width,_=_||x.height,A===36064&&L===null&&(A=1028),Qe(B[A]),E=E||B[A].type,h=N6(h,E,s,m,_),E=E||_m(h);const G=C.bindFramebuffer(36160,L);return C.readPixels(t,i,m,_,s,E,h),C.bindFramebuffer(36160,G||null),S&&x.delete(),h}function lb(n){let{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=ih(n,{sourceAttachment:e}),{width:s,height:A}=n;for(;A>t;)({data:i,width:s,height:A}=g6({data:i,width:s,height:A}));d6({data:i,width:s,height:A});const h=document.createElement("canvas");h.width=s,h.height=A;const m=h.getContext("2d"),_=m.createImageData(s,A);return _.data.set(i),m.putImageData(_,0,0),h.toDataURL()}function D6(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:i=0,sourceY:s=0,targetMipmaplevel:A=0,targetInternalFormat:h=6408}=t;let{targetX:m,targetY:_,targetZ:E,width:x,height:S}=t;const{framebuffer:C,deleteFramebuffer:L}=Nv(n);Qe(C);const{gl:B,handle:G}=C,j=typeof m<"u"||typeof _<"u"||typeof E<"u";m=m||0,_=_||0,E=E||0;const H=B.bindFramebuffer(36160,G);Qe(e);let Y=null;if(e instanceof jA&&(Y=e,x=Number.isFinite(x)?x:Y.width,S=Number.isFinite(S)?S:Y.height,Y.bind(0),e=Y.target),!j)B.copyTexImage2D(e,A,h,i,s,x,S,0);else switch(e){case 3553:case 34067:B.copyTexSubImage2D(e,A,m,_,i,s,x,S);break;case 35866:case 32879:xi(B).copyTexSubImage3D(e,A,m,_,E,i,s,x,S);break}return Y&&Y.unbind(),B.bindFramebuffer(36160,H||null),L&&C.delete(),Y}function Nv(n){return n instanceof jn?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:H6(n),deleteFramebuffer:!0}}function N6(n,e,t,i,s){if(n)return n;e=e||5121;const A=sc(e,{clamped:!1}),h=O6(t);return new A(i*s*h)}const gn={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function B6(n){const e=new fr(n,{format:6408,type:5126,dataFormat:6408}),t=new jn(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),i===36053}const Bv={[gn.WEBGL2]:[!1,!0],[gn.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[gn.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[gn.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[gn.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[gn.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[gn.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[gn.FLOAT_BLEND]:["EXT_float_blend"],[gn.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[gn.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[gn.TEXTURE_FLOAT]:["OES_texture_float",!0],[gn.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[gn.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[gn.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[gn.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[gn.COLOR_ATTACHMENT_RGBA32F]:[B6,"EXT_color_buffer_float"],[gn.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[gn.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[gn.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[gn.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[gn.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[gn.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},P6=2;function I6(n,e){return Pv(n,e)}function Pv(n,e){return e=Array.isArray(e)?e:[e],e.every(t=>Iv(n,t))}function F6(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in Bv)n.luma.caps[e]===void 0&&(n.luma.caps[e]=Iv(n,e));return n.luma.caps}function Iv(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},n.luma.caps[e]===void 0&&(n.luma.caps[e]=U6(n,e)),n.luma.caps[e]||it.log(P6,"Feature: ".concat(e," not supported"))(),n.luma.caps[e]}function U6(n,e){const t=Bv[e];Qe(t,e);let i;const s=Ut(n)&&t[1]||t[0];if(typeof s=="function")i=s(n);else if(Array.isArray(s)){i=!0;for(const A of s)i=i&&!!n.getExtension(A)}else typeof s=="string"?i=!!n.getExtension(s):typeof s=="boolean"?i=s:Qe(!1);return i}const ub="Multiple render targets not supported";class jn extends ea{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:s}=t;let A=!0;return i&&(A=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),s&&(A=A&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),A}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new jn(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=xi(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=xi(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:i=1,attachments:s=null,color:A=!0,depth:h=!0,stencil:m=!1,check:_=!0,readBuffer:E=void 0,drawBuffers:x=void 0}=e;if(Qe(t>=0&&i>=0,"Width and height need to be integers"),this.width=t,this.height=i,s)for(const S in s){const C=s[S];(Array.isArray(C)?C[0]:C).resize({width:t,height:i})}else s=this._createDefaultAttachments(A,h,m,t,i);this.update({clearAttachments:!0,attachments:s,readBuffer:E,drawBuffers:x}),s&&_&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:i,drawBuffers:s,clearAttachments:A=!1,resizeAttachments:h=!0}=e;this.attach(t,{clearAttachments:A,resizeAttachments:h});const{gl:m}=this,_=m.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),s&&this._setDrawBuffers(s),m.bindFramebuffer(36160,_||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:t,height:i}=e;if(this.handle===null)return Qe(t===void 0&&i===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;t===void 0&&(t=this.gl.drawingBufferWidth),i===void 0&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&it.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(i))();for(const s in this.attachments)this.attachments[s].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:i=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};t&&Object.keys(this.attachments).forEach(h=>{s[h]=null}),Object.assign(s,e);const A=this.gl.bindFramebuffer(36160,this.handle);for(const h in s){Qe(h!==void 0,"Misspelled framebuffer binding point?");const m=Number(h),_=s[m];let E=_;if(!E)this._unattach(m);else if(E instanceof nl)this._attachRenderbuffer({attachment:m,renderbuffer:E});else if(Array.isArray(_)){const[x,S=0,C=0]=_;E=x,this._attachTexture({attachment:m,texture:x,layer:S,level:C})}else this._attachTexture({attachment:m,texture:E,layer:0,level:0});i&&E&&E.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,A||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(h=>!this.attachments[h]).forEach(h=>{delete this.attachments[h]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(z6(e));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:t,depth:i,stencil:s,drawBuffers:A=[]}=e,h=this.gl.bindFramebuffer(36160,this.handle);return(t||i||s)&&dp(this.gl,{color:t,depth:i,stencil:s}),A.forEach((m,_)=>{L6(this.gl,{drawBuffer:_,value:m})}),this.gl.bindFramebuffer(36160,h||null),this}readPixels(){return it.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return it.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return it.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return it.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return it.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return it.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:i=0,y:s=0,width:A,height:h}=e;const m=xi(this.gl),_=m.bindFramebuffer(36008,this.handle);return i===0&&s===0&&A===void 0&&h===void 0?m.invalidateFramebuffer(36008,t):m.invalidateFramebuffer(36008,t,i,s,A,h),m.bindFramebuffer(36008,_),this}getAttachmentParameter(e,t,i){let s=this._getAttachmentParameterFallback(t);return s===null&&(this.gl.bindFramebuffer(36160,this.handle),s=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&s>1e3&&(s=qa(this.gl,s)),s}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const s={};for(const A of i){const h=t?qa(this.gl,A):A;s[h]=this.getAttachmentParameter(e,A,t)}return s}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const t=Object.keys(this.attachments),i={};for(const s of t){const A=Number(s),h=e?qa(this.gl,A):A;i[h]=this.getAttachmentParameters(A,e)}return i}show(){return typeof window<"u"&&window.open(lb(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>it.level||typeof window>"u")return this;t=t||"Framebuffer ".concat(this.id);const i=lb(this,{targetMaxHeight:100});return it.image({logLevel:e,message:t,image:i},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,s,A){let h=null;return e&&(h=h||{},h[36064]=new fr(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:s,height:A,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(h[36064])),t&&i?(h=h||{},h[33306]=new nl(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:s,height:111}),this.ownResources.push(h[33306])):t?(h=h||{},h[36096]=new nl(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:s,height:A}),this.ownResources.push(h[36096])):i&&Qe(!1),h}_unattach(e){const t=this.attachments[e];t&&(t instanceof nl?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:i}=e;const{gl:s}=this;s.framebufferRenderbuffer(36160,t,36161,i.handle),this.attachments[t]=i}_attachTexture(e){let{attachment:t=36064,texture:i,layer:s,level:A}=e;const{gl:h}=this;switch(h.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:xi(h).framebufferTextureLayer(36160,t,i.target,A,s);break;case 34067:const _=k6(s);h.framebufferTexture2D(36160,t,_,i.handle,A);break;case 3553:h.framebufferTexture2D(36160,t,3553,i.handle,A);break;default:Qe(!1,"Illegal texture type")}h.bindTexture(i.target,null),this.attachments[t]=i}_setReadBuffer(e){const t=dS(this.gl);t?t.readBuffer(e):Qe(e===36064||e===1029,ub),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=xi(t);if(i)i.drawBuffers(e);else{const s=t.getExtension("WEBGL_draw_buffers");s?s.drawBuffersWEBGL(e):Qe(e.length===1&&(e[0]===36064||e[0]===1029),ub)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=F6(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return!t.WEBGL2&&!t.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function k6(n){return n<34069?n+34069:n}function z6(n){return(jn.STATUS||{})[n]||"Framebuffer error ".concat(n)}const G6=[36049,36048,33296,33298,33299,33300,33301,33302,33303];jn.ATTACHMENT_PARAMETERS=G6;function V6(n,e){Qe(n instanceof fr||n instanceof Ov||n instanceof x6);const t=n.constructor,{gl:i,width:s,height:A,format:h,type:m,dataFormat:_,border:E,mipmaps:x}=n,S=Object.assign({width:s,height:A,format:h,type:m,dataFormat:_,border:E,mipmaps:x},e);return new t(i,S)}function H6(n,e){const{gl:t,width:i,height:s,id:A}=n;return new jn(t,Object.assign({},e,{id:"framebuffer-for-".concat(A),width:i,height:s,attachments:{36064:n}}))}function f0(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const t=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,i=n.match(t);return i?i[1]:e}const j6=35632,Y6=35633;function Q6(n){switch(n){case j6:return"fragment";case Y6:return"vertex";default:return"unknown type"}}function X6(n,e,t,i){const s=n.split(/\r?\n/),A={},h={},m=i||f0(e)||"(unnamed)",_="".concat(Q6(t)," shader ").concat(m);for(let x=0;x<s.length;x++){const S=s[x];if(S.length<=1)continue;const C=S.split(":"),L=C[0],B=parseInt(C[2],10);if(isNaN(B))throw new Error("GLSL compilation error in ".concat(_,": ").concat(n));L!=="WARNING"?A[B]=S:h[B]=S}const E=W6(e);return{shaderName:_,errors:cb(A,E),warnings:cb(h,E)}}function cb(n,e){let t="";for(let i=0;i<e.length;i++){const s=e[i];if(!(!n[i+3]&&!n[i+2]&&!n[i+1])&&(t+="".concat(s,`
`),n[i+1])){const A=n[i+1],h=A.split(":",3),m=h[0],_=parseInt(h[1],10)||0,E=A.substring(h.join(":").length+1).trim();t+=Fv("^^^ ".concat(m,": ").concat(E,`

`),_)}}return t}function W6(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const i=n.split(/\r?\n/),s=String(i.length+e-1).length;return i.map((A,h)=>{const m=String(h+e),_=m.length;return Fv(m,s-_)+t+A})}function Fv(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return"".concat(t).concat(n)}function Uv(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&t[0]==="#version"){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const q6="Shader: GLSL source code must be a JavaScript string";class ac extends ea{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Qe(!1),"unknown"}}constructor(e,t){nh(e),Qe(typeof t.source=="string",q6);const i=f0(t.source,null)||t.id||Ka("unnamed ".concat(ac.getTypeName(t.shaderType)));super(e,{id:i}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const i=f0(t,null);i&&(this.id=Ka(i)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(ac.getTypeName(this.shaderType),":").concat(this.id)}getName(){return f0(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:s,errors:A,warnings:h}=X6(i,this.source,this.shaderType,this.id);throw it.error("GLSL compilation errors in ".concat(s,`
`).concat(A))(),it.warn("GLSL compilation warnings in ".concat(s,`
`).concat(h))(),new Error("GLSL compilation errors in ".concat(s))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}let vg=class extends ac{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){typeof t=="string"&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}},Tg=class extends ac{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){typeof t=="string"&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}};const Z6={5126:hn.bind(null,"uniform1fv",sr,1,yi),35664:hn.bind(null,"uniform2fv",sr,2,yi),35665:hn.bind(null,"uniform3fv",sr,3,yi),35666:hn.bind(null,"uniform4fv",sr,4,yi),5124:hn.bind(null,"uniform1iv",za,1,yi),35667:hn.bind(null,"uniform2iv",za,2,yi),35668:hn.bind(null,"uniform3iv",za,3,yi),35669:hn.bind(null,"uniform4iv",za,4,yi),35670:hn.bind(null,"uniform1iv",za,1,yi),35671:hn.bind(null,"uniform2iv",za,2,yi),35672:hn.bind(null,"uniform3iv",za,3,yi),35673:hn.bind(null,"uniform4iv",za,4,yi),35674:hn.bind(null,"uniformMatrix2fv",sr,4,Hs),35675:hn.bind(null,"uniformMatrix3fv",sr,9,Hs),35676:hn.bind(null,"uniformMatrix4fv",sr,16,Hs),35678:li,35680:li,5125:hn.bind(null,"uniform1uiv",Zf,1,yi),36294:hn.bind(null,"uniform2uiv",Zf,2,yi),36295:hn.bind(null,"uniform3uiv",Zf,3,yi),36296:hn.bind(null,"uniform4uiv",Zf,4,yi),35685:hn.bind(null,"uniformMatrix2x3fv",sr,6,Hs),35686:hn.bind(null,"uniformMatrix2x4fv",sr,8,Hs),35687:hn.bind(null,"uniformMatrix3x2fv",sr,6,Hs),35688:hn.bind(null,"uniformMatrix3x4fv",sr,12,Hs),35689:hn.bind(null,"uniformMatrix4x2fv",sr,8,Hs),35690:hn.bind(null,"uniformMatrix4x3fv",sr,12,Hs),35678:li,35680:li,35679:li,35682:li,36289:li,36292:li,36293:li,36298:li,36299:li,36300:li,36303:li,36306:li,36307:li,36308:li,36311:li},K6={},$6={},J6={},fb=[0];function gp(n,e,t,i){e===1&&typeof n=="boolean"&&(n=n?1:0),Number.isFinite(n)&&(fb[0]=n,n=fb);const s=n.length;if(s%e&&it.warn("Uniform size should be multiples of ".concat(e),n)(),n instanceof t)return n;let A=i[s];A||(A=new t(s),i[s]=A);for(let h=0;h<s;h++)A[h]=n[h];return A}function sr(n,e){return gp(n,e,Float32Array,K6)}function za(n,e){return gp(n,e,Int32Array,$6)}function Zf(n,e){return gp(n,e,Uint32Array,J6)}function hb(n,e,t){const i=Z6[t.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(t.type));return i().bind(null,n,e)}function eM(n){if(n[n.length-1]!=="]")return{name:n,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,t=n.match(e);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(n));return{name:t[1],length:t[2]||1,isArray:!!t[2]}}function tM(n,e,t){for(const i in n){const s=n[i];if((!t||!!t[i])&&!nM(s))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),s),new Error("".concat(e," Bad uniform ").concat(i))}return!0}function nM(n){return Array.isArray(n)||ArrayBuffer.isView(n)?rM(n):isFinite(n)||n===!0||n===!1||n instanceof jA||n instanceof nl?!0:n instanceof jn?!!n.texture:!1}function iM(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let s=0,A=t.length;s<A;++s)i[s]=t[s]}else n[e]=t.slice();else n[e]=t}function rM(n){if(n.length===0)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}function li(){let n=null;return(e,t,i)=>{const s=n!==i;return s&&(e.uniform1i(t,i),n=i),s}}function hn(n,e,t,i){let s=null,A=null;return(h,m,_)=>{const E=e(_,t),x=E.length;let S=!1;if(s===null)s=new Float32Array(x),A=x,S=!0;else{Qe(A===x,"Uniform length cannot change.");for(let C=0;C<x;++C)if(E[C]!==s[C]){S=!0;break}}return S&&(i(h,n,m,E),s.set(E)),S}}function yi(n,e,t,i){n[e](t,i)}function Hs(n,e,t,i){n[e](t,!1,i)}const sM=5120,aM=5121,AM=5122,oM=5123,db=0,Kf=1,lM=2,uM=3,$f=4,cM=5,fM=6,Vn=5126,hM=35664,dM=35665,gM=35666,Uu=5124,mM=35667,pM=35668,_M=35669,ku=5125,bM=36294,EM=36295,yM=36296,vM=35670,TM=35671,wM=35672,xM=35673,SM=35674,MM=35675,CM=35676,RM=35685,LM=35686,OM=35687,DM=35688,NM=35689,BM=35690,ym={[Vn]:[Vn,1,"float"],[hM]:[Vn,2,"vec2"],[dM]:[Vn,3,"vec3"],[gM]:[Vn,4,"vec4"],[Uu]:[Uu,1,"int"],[mM]:[Uu,2,"ivec2"],[pM]:[Uu,3,"ivec3"],[_M]:[Uu,4,"ivec4"],[ku]:[ku,1,"uint"],[bM]:[ku,2,"uvec2"],[EM]:[ku,3,"uvec3"],[yM]:[ku,4,"uvec4"],[vM]:[Vn,1,"bool"],[TM]:[Vn,2,"bvec2"],[wM]:[Vn,3,"bvec3"],[xM]:[Vn,4,"bvec4"],[SM]:[Vn,8,"mat2"],[RM]:[Vn,8,"mat2x3"],[LM]:[Vn,8,"mat2x4"],[MM]:[Vn,12,"mat3"],[OM]:[Vn,12,"mat3x2"],[DM]:[Vn,12,"mat3x4"],[CM]:[Vn,16,"mat4"],[NM]:[Vn,16,"mat4x2"],[BM]:[Vn,16,"mat4x3"]};function PM(n){switch(n){case db:return db;case Kf:return Kf;case uM:return Kf;case lM:return Kf;case $f:return $f;case cM:return $f;case fM:return $f;default:return Qe(!1),0}}function gb(n){const e=ym[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function kv(n,e){switch(n){case sM:case aM:case AM:case oM:n=Vn;break}for(const t in ym){const[i,s,A]=ym[t];if(i===n&&s===e)return{glType:t,name:A}}return null}class IM{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let s=0;s<i;s++){const{name:A,type:h,size:m}=t.getActiveAttrib(e.handle,s),_=t.getAttribLocation(e.handle,A);_>=0&&this._addAttribute(_,A,h,m)}this.attributeInfos.sort((s,A)=>s.location-A.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!Ut(t))return;const i=t.getProgramParameter(e.handle,35971);for(let s=0;s<i;s++){const{name:A,type:h,size:m}=t.getTransformFeedbackVarying(e.handle,s);this._addVarying(s,A,h,m)}this.varyingInfos.sort((s,A)=>s.location-A.location)}_addAttribute(e,t,i,s){const{type:A,components:h}=gb(i),m={type:A,size:s*h};this._inferProperties(e,t,m);const _={location:e,name:t,accessor:new lr(m)};this.attributeInfos.push(_),this.attributeInfosByLocation[e]=_,this.attributeInfosByName[_.name]=_}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,s){const{type:A,components:h}=gb(i),m=new lr({type:A,size:s*h}),_={location:e,name:t,accessor:m};this.varyingInfos.push(_),this.varyingInfosByName[_.name]=_}}const mb=4,FM=35981,UM=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class zv extends ea{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",UM),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:t,vs:i,fs:s,varyings:A,bufferMode:h=FM}=e;return this.hash=t||"",this.vs=typeof i=="string"?new vg(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs=typeof s=="string"?new Tg(this.gl,{id:"".concat(e.id,"-fs"),source:s}):s,Qe(this.vs instanceof vg),Qe(this.fs instanceof Tg),this.uniforms={},this._textureUniforms={},A&&A.length>0&&(xi(this.gl),this.varyings=A,this.gl2.transformFeedbackVaryings(this.handle,A,h)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new IM(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:i=4,vertexCount:s,offset:A=0,start:h,end:m,isIndexed:_=!1,indexType:E=5123,instanceCount:x=0,isInstanced:S=x>0,vertexArray:C=null,transformFeedback:L,framebuffer:B,parameters:G={},uniforms:j,samplers:H}=e;if((j||H)&&(it.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(j||{})),it.priority>=t){const Y=B?B.id:"default",K="mode=".concat(qa(this.gl,i)," verts=").concat(s," ")+"instances=".concat(x," indexType=").concat(qa(this.gl,E)," ")+"isInstanced=".concat(S," isIndexed=").concat(_," ")+"Framebuffer=".concat(Y);it.log(t,K)()}return Qe(C),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||s===0||S&&x===0?!1:(C.bindForDraw(s,x,()=>{if(B!==void 0&&(G=Object.assign({},G,{framebuffer:B})),L){const Y=PM(i);L.begin(Y)}this._bindTextures(),Fr(this.gl,G,()=>{_&&S?this.gl2.drawElementsInstanced(i,s,E,A,x):_&&Ut(this.gl)&&!isNaN(h)&&!isNaN(m)?this.gl2.drawRangeElements(i,h,m,s,E,A):_?this.gl.drawElements(i,s,E,A):S?this.gl2.drawArraysInstanced(i,A,s,x):this.gl.drawArrays(i,A,s)}),L&&L.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};it.priority>=2&&tM(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],s=this._uniformSetters[t];if(s){let A=i,h=!1;if(A instanceof jn&&(A=A.texture),A instanceof jA)if(h=this.uniforms[t]!==i,h){s.textureIndex===void 0&&(s.textureIndex=this._textureIndexCounter++);const m=A,{textureIndex:_}=s;m.bind(_),A=_,this._textureUniforms[t]=m}else A=s.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(s(A)||h)&&iM(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const s of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new vg({handle:s});break;case 35632:i.fs=new Tg({handle:s});break}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=Ka(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),it.time(mb,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),it.timeEnd(mb,"linkProgram for ".concat(this._getName()))(),e.debug||it.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:s}=eM(i.name);let A=e.getUniformLocation(this.handle,s);if(this._uniformSetters[s]=hb(e,A,i),i.size>1)for(let h=0;h<i.size;h++)A=e.getUniformLocation(this.handle,"".concat(s,"[").concat(h,"]")),this._uniformSetters["".concat(s,"[").concat(h,"]")]=hb(e,A,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}const kM=34918,zM=34919,GM=35007,VM=36795,HM=35976,jM=35887,YM=36202;class R0 extends ea{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=Ut(e),s=Pv(e,gn.TIMER_QUERY);let A=i||s;for(const h of t)switch(h){case"queries":A=A&&i;break;case"timers":A=A&&s;break;default:Qe(!1)}return A}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(GM)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?YM:jM)}beginTransformFeedbackQuery(){return this.begin(HM)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,zM);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(VM)}getResult(){return this.gl2.getQueryParameter(this.handle,kM)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,s)=>{const A=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(s("Timed out"),this._pollingPromise=null):requestAnimationFrame(A)};requestAnimationFrame(A)}),this._pollingPromise}_createHandle(){return R0.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class Gv extends ea{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Ut(e)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xi(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,_l(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:s,byteSize:A,byteOffset:h}=this._getBufferParams(t);return i<0?(this.unused[e]=s,it.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,s,h,A),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,s;return e instanceof an?s=e:(s=e.buffer,i=e.byteSize,t=e.byteOffset),(t!==void 0||i!==void 0)&&(t=t||0,i=i||s.byteLength-t),{buffer:s,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:s}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,s,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;const A=t&&t.handle;return!A||s===void 0?this.gl.bindBufferBase(35982,e,A):this.gl.bindBufferRange(35982,e,A,i,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let Jf=null;function QM(n){return(!Jf||Jf.byteLength<n)&&(Jf=new ArrayBuffer(n)),Jf}function XM(n,e){const t=QM(n.BYTES_PER_ELEMENT*e);return new n(t,0,e)}function WM(n){let{target:e,source:t,start:i=0,count:s=1}=n;const A=t.length,h=s*A;let m=0;for(let _=i;m<A;m++)e[_++]=t[m];for(;m<h;)m<h-m?(e.copyWithin(i+m,i,i+m),m*=2):(e.copyWithin(i+m,i,i+h-m),m=h);return e}const qM="elements must be GL.ELEMENT_ARRAY_BUFFER";class ar extends ea{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Ut(e)||Av()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new ar(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return ar.MAX_ATTRIBUTES=ar.MAX_ATTRIBUTES||e.getParameter(34921),ar.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:ar._setConstantFloatArray(e,t,i);break;case Int32Array:ar._setConstantIntArray(e,t,i);break;case Uint32Array:ar._setConstantUintArray(e,t,i);break;default:Qe(!1)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=t.id||t.program&&t.program.id;super(e,Object.assign({},t,{id:i})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return ar.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return Qe(!e||e.target===34963,qM),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(t.target===34963)return this.setElementBuffer(t,i);const{size:s,type:A,stride:h,offset:m,normalized:_,integer:E,divisor:x}=i,{gl:S,gl2:C}=this;return e=Number(e),this.bind(()=>{S.bindBuffer(34962,t.handle),E?(Qe(Ut(S)),C.vertexAttribIPointer(e,s,A,h,m)):S.vertexAttribPointer(e,s,A,_,h,m),S.enableVertexAttribArray(e),C.vertexAttribDivisor(e,x||0)}),this}enable(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!t&&e===0&&!ar.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),s=i.byteLength*e,A=i.length*e;let h=!this.buffer;if(this.buffer=this.buffer||new an(this.gl,s),h=h||this.buffer.reallocate(s),h=h||!this._compareConstantArrayValues(i,this.bufferValue),h){const m=XM(t.constructor,A);WM({target:m,source:i,start:0,count:A}),this.buffer.subData(m),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:Qe(!1)}}static _setConstantIntArray(e,t,i){switch(Qe(Ut(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:Qe(!1)}}static _setConstantUintArray(e,t,i){switch(Qe(Ut(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:Qe(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:i}=t;return Qe(Number.isFinite(i)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(i,e);default:return this.gl.getVertexAttrib(i,e)}})}}const ZM="VertexArray: attributes must be Buffers or constants (i.e. typed array)",KM=/^(.+)__LOCATION_([0-9]+)$/,$M=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class JM{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=t.id||t.program&&t.program.id;this.id=i,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new ar(e),Mv(this,"VertexArray","v6.0",$M),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e){const i=e[t];this._setAttribute(t,i)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t.target===34963)return this.setElementBuffer(t,i);const{location:s,accessor:A}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return s>=0&&(this.values[s]=t,this.accessors[s]=A,this.clearDrawParams(),this.vertexArrayObject.setBuffer(s,t,A)),this}setConstant(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:s,accessor:A}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return s>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[s]=t,this.accessors[s]=A,this.clearDrawParams(),this.vertexArrayObject.enable(s,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new an(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof an&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof an&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let s;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),s=i()}),s}_resolveLocationAndAccessor(e,t,i,s){const A={location:-1,accessor:null},{location:h,name:m}=this._getAttributeIndex(e);if(!Number.isFinite(h)||h<0)return this.unused[e]=t,it.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),A;const _=this._getAttributeInfo(m||h);if(!_)return A;const E=this.accessors[h]||{},x=lr.resolve(_.accessor,E,i,s),{size:S,type:C}=x;return Qe(Number.isFinite(S)&&Number.isFinite(C)),{location:h,accessor:x}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=KM.exec(e),s=i?i[1]:e,A=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(s)+A,name:s}:{location:-1}}_setAttribute(e,t){if(t instanceof an)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof an){const i=t[0],s=t[1];this.setBuffer(e,i,s)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){const i=t;this.setConstant(e,i)}else if(t.buffer instanceof an){const i=t;this.setBuffer(e,i.buffer,i)}else throw new Error(ZM)}_setConstantAttributes(e,t){const i=Math.max(e|0,t|0);let s=this.values[0];ArrayBuffer.isView(s)&&this._setConstantAttributeZero(s,i);for(let A=1;A<this.vertexArrayObject.MAX_ATTRIBUTES;A++)s=this.values[A],ArrayBuffer.isView(s)&&this._setConstantAttribute(A,s)}_setConstantAttributeZero(e,t){if(ar.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){ar.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],s=this.accessors[t];if(!i)return;const{divisor:A}=s,h=A>0;if(e.isInstanced=e.isInstanced||h,i instanceof an){const m=i;if(h){const _=m.getVertexCount(s);e.instanceCount=Math.min(e.instanceCount,_)}else{const _=m.getVertexCount(s);e.vertexCount=Math.min(e.vertexCount,_)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return it.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function e5(n,e){const{maxElts:t=16,size:i=1}=e;let s="[";for(let h=0;h<n.length&&h<t;++h)h>0&&(s+=",".concat(h%i===0?" ":"")),s+=Ac(n[h],e);const A=n.length>t?"...":"]";return"".concat(s).concat(A)}function Ac(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=1e-16,{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return e5(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<t)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const s=n.toPrecision(2);return s.indexOf(".0")===s.length-2?s.slice(0,-1):s}function pb(n){let{header:e="Uniforms",program:t,uniforms:i,undefinedOnly:s=!1}=n;Qe(t);const A=".*_.*",h=".*Matrix",m=t._uniformSetters,_={},E=Object.keys(m).sort();let x=0;for(const L of E)!L.match(A)&&!L.match(h)&&wg({table:_,header:e,uniforms:i,uniformName:L,undefinedOnly:s})&&x++;for(const L of E)L.match(h)&&wg({table:_,header:e,uniforms:i,uniformName:L,undefinedOnly:s})&&x++;for(const L of E)_[L]||wg({table:_,header:e,uniforms:i,uniformName:L,undefinedOnly:s})&&x++;let S=0;const C={};if(!s)for(const L in i){const B=i[L];_[L]||(S++,C[L]={Type:"NOT USED: ".concat(B),[e]:Ac(B)})}return{table:_,count:x,unusedTable:C,unusedCount:S}}function wg(n){let{table:e,header:t,uniforms:i,uniformName:s,undefinedOnly:A}=n;const h=i[s],m=t5(h);return!A||!m?(e[s]={[t]:m?Ac(h):"N/A","Uniform Type":m?h:"NOT PROVIDED"},!0):!1}function t5(n){return n!=null}function n5(n){let{vertexArray:e,header:t="Attributes"}=n;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=_b(e,e.elements,null,t));const s=e.values;for(const A in s){const h=e._getAttributeInfo(A);if(h){let m="".concat(A,": ").concat(h.name);const _=e.accessors[h.location];_&&(m="".concat(A,": ").concat(i5(h.name,_))),i[m]=_b(e,s[A],_,t)}}return i}function _b(n,e,t,i){const{gl:s}=n;if(!e)return{[i]:"null","Format ":"N/A"};let A="NOT PROVIDED",h=1,m=0,_=0,E,x,S;if(t&&(A=t.type,h=t.size,A=String(A).replace("Array",""),E=A.indexOf("nt")!==-1),e instanceof an){const C=e,{data:L,changed:B}=C.getDebugData();x=B?"*":"",S=L,_=C.byteLength,m=_/L.BYTES_PER_ELEMENT/h;let G;if(t){const j=t.divisor>0;G="".concat(j?"I ":"P "," ").concat(m," (x").concat(h,"=").concat(_," bytes ").concat(qa(s,A),")")}else E=!0,G="".concat(_," bytes");return{[i]:"".concat(x).concat(Ac(S,{size:h,isInteger:E})),"Format ":G}}return S=e,h=e.length,A=String(e.constructor.name).replace("Array",""),E=A.indexOf("nt")!==-1,{[i]:"".concat(Ac(S,{size:h,isInteger:E})," (constant)"),"Format ":"".concat(h,"x").concat(A," (constant)")}}function i5(n,e){const{type:t,size:i}=e,s=kv(t,i);return s?"".concat(n," (").concat(s.name,")"):n}function r5(n){const e={},t="Accessors for ".concat(n.id);for(const i of n.attributeInfos)if(i){const s=bb(i);e["in ".concat(s)]={[t]:JSON.stringify(i.accessor)}}for(const i of n.varyingInfos)if(i){const s=bb(i);e["out ".concat(s)]={[t]:JSON.stringify(i.accessor)}}return e}function bb(n){const{type:e,size:t}=n.accessor,i=kv(e,t);return i?"".concat(i.name," ").concat(n.name):n.name}const Eb=Nl()&&typeof document<"u";let s5=0;class a5{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:t=j=>Sv(j),onAddHTML:i=null,onInitialize:s=()=>{},onRender:A=()=>{},onFinalize:h=()=>{},onError:m,gl:_=null,glOptions:E={},debug:x=!1,createFramebuffer:S=!1,autoResizeViewport:C=!0,autoResizeDrawingBuffer:L=!0,stats:B=zA.get("animation-loop-".concat(s5++))}=e;let{useDevicePixels:G=!0}=e;"useDevicePixelRatio"in e&&(it.deprecated("useDevicePixelRatio","useDevicePixels")(),G=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:s,onRender:A,onFinalize:h,onError:m,gl:_,glOptions:E,debug:x,createFramebuffer:S},this.gl=_,this.needsRedraw=null,this.timeline=null,this.stats=B,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:C,autoResizeDrawingBuffer:L,useDevicePixels:G}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Qe(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=R0.isSupported(this.gl,["timers"])?new R0(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),i!==!1&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return it.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Eb?new Promise((e,t)=>{if(Eb&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):f6(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):c6(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?fp(this.props.gl,e):this.onCreateContext(e),!th(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");$S(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:s}=this.gl;return s&&s.clientHeight?i=s.clientWidth/s.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&i6(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new jn(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const Sc="vs",mp="fs";function cr(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const xg={number:{validate(n,e){return Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)}},array:{validate(n,e){return Array.isArray(n)||ArrayBuffer.isView(n)}}};function A5(n){const e={};for(const t in n){const i=n[t],s=o5(i);e[t]=s}return e}function o5(n){let e=yb(n);return e==="object"?n?"type"in n?Object.assign({},n,xg[n.type]):"value"in n?(e=yb(n.value),Object.assign({type:e},n,xg[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},xg[e])}function yb(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}const l5="vs",u5="fs";class vb{constructor(e){let{name:t,vs:i,fs:s,dependencies:A=[],uniforms:h,getUniforms:m,deprecations:_=[],defines:E={},inject:x={},vertexShader:S,fragmentShader:C}=e;cr(typeof t=="string"),this.name=t,this.vs=i||S,this.fs=s||C,this.getModuleUniforms=m,this.dependencies=A,this.deprecations=this._parseDeprecationDefinitions(_),this.defines=E,this.injections=c5(x),h&&(this.uniforms=A5(h))}getModuleSource(e){let t;switch(e){case l5:t=this.vs||"";break;case u5:t=this.fs||"";break;default:cr(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(t,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{switch(t.type){case"function":t.regex=new RegExp("\\b".concat(t.old,"\\("));break;default:t.regex=new RegExp("".concat(t.type," ").concat(t.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={},i=this.uniforms;for(const s in i){const A=i[s];s in e&&!A.private?(A.validate&&cr(A.validate(e[s],A),"".concat(this.name,": invalid ").concat(s)),t[s]=e[s]):t[s]=A.value}return t}}function c5(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];const s=t.slice(0,2);typeof i=="string"&&(i={order:0,injection:i}),e[s][t]=i}return e}function f5(n){return h5(Hv(n))}function h5(n){const e={},t={};return Vv({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,s)=>t[s]-t[i]).map(i=>e[i])}function Vv(n){let{modules:e,level:t,moduleMap:i,moduleDepth:s}=n;if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const A of e)i[A.name]=A,(s[A.name]===void 0||s[A.name]<t)&&(s[A.name]=t);for(const A of e)A.dependencies&&Vv({modules:A.dependencies,level:t+1,moduleMap:i,moduleDepth:s})}function Hv(n,e){return n.map(t=>(t instanceof vb||(cr(typeof t!="string","Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),cr(t.name,"shader module has no name"),t=new vb(t),t.dependencies=Hv(t.dependencies)),t))}function d5(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},t=n.userAgent||e.userAgent||"",i=t.indexOf("MSIE ")!==-1,s=t.indexOf("Trident/")!==-1;return i||s}const g5=7936,m5=7937,p5=7938,_5=35724,pp={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},UA={};Object.keys(pp).forEach(n=>{UA[n]=n});function b5(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?!0:!!(n&&n._version===2)}function E5(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||g5),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||m5);return{gpuVendor:y5(t,i),vendor:t,renderer:i,version:n.getParameter(p5),shadingLanguageVersion:n.getParameter(_5)}}function y5(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const Sg={};function Tb(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=pp[e];if(cr(i,e),!d5(t))return!0;if(e in Sg)return Sg[e];const s=i[0],A=t.behavior||"enable",h="#extension GL_".concat(s," : ").concat(A,`
void main(void) {}`),m=n.createShader(35633);n.shaderSource(m,h),n.compileShader(m);const _=n.getShaderParameter(m,35713);return n.deleteShader(m),Sg[e]=_,_}function v5(n,e){const t=pp[e];cr(t,e);const i=b5(n)&&t[1]||t[0],s=typeof i=="string"?!!n.getExtension(i):i;return cr(s===!1||s===!0),s}function e0(n,e){return e=Array.isArray(e)?e:[e],e.every(t=>v5(n,t))}function T5(n){switch(E5(n).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function w5(n,e,t){let i=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return e0(n,UA.GLSL_FRAG_DEPTH)&&(i+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),e0(n,UA.GLSL_DERIVATIVES)&&Tb(n,UA.GLSL_DERIVATIVES)&&(i+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),e0(n,UA.GLSL_FRAG_DATA)&&Tb(n,UA.GLSL_FRAG_DATA,{behavior:"require"})&&(i+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),e0(n,UA.GLSL_TEXTURE_LOD)&&(i+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),i}const x5=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,S5=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,M5={[Sc]:x5,[mp]:S5},h0="__LUMA_INJECT_DECLARATIONS__",wb=/void\s+main\s*\([^)]*\)\s*\{\n?/,xb=/}\n?[^{}]*$/,Mg=[];function Sb(n,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=e===Sc;for(const A in t){const h=t[A];h.sort((_,E)=>_.order-E.order),Mg.length=h.length;for(let _=0,E=h.length;_<E;++_)Mg[_]=h[_].injection;const m="".concat(Mg.join(`
`),`
`);switch(A){case"vs:#decl":s&&(n=n.replace(h0,m));break;case"vs:#main-start":s&&(n=n.replace(wb,_=>_+m));break;case"vs:#main-end":s&&(n=n.replace(xb,_=>m+_));break;case"fs:#decl":s||(n=n.replace(h0,m));break;case"fs:#main-start":s||(n=n.replace(wb,_=>_+m));break;case"fs:#main-end":s||(n=n.replace(xb,_=>m+_));break;default:n=n.replace(A,_=>_+m)}}return n=n.replace(h0,""),i&&(n=n.replace(/\}\s*$/,A=>A+M5[e])),n}function vm(n){const e={};return cr(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?"".concat(e[i],`
`).concat(t[i]):t[i]}),e}function bl(n){return new RegExp("\\b".concat(n,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const jv=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],C5=[...jv,[bl("attribute"),"in $1"],[bl("varying"),"out $1"]],R5=[...jv,[bl("varying"),"in $1"]],Yv=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],L5=[...Yv,[bl("in"),"attribute $1"],[bl("out"),"varying $1"]],O5=[...Yv,[bl("in"),"varying $1"]],Tm="gl_FragColor",wm=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,D5=/void\s+main\s*\([^)]*\)\s*\{\n?/;function N5(n,e,t){switch(e){case 300:return t?L0(n,C5):B5(n);case 100:return t?L0(n,L5):P5(n);default:throw new Error("unknown GLSL version ".concat(e))}}function L0(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}function B5(n){n=L0(n,R5);const e=n.match(wm);if(e){const t=e[1];n=n.replace(new RegExp("\\b".concat(Tm,"\\b"),"g"),t)}else{const t="fragmentColor";n=n.replace(D5,i=>"out vec4 ".concat(t,`;
`).concat(i)).replace(new RegExp("\\b".concat(Tm,"\\b"),"g"),t)}return n}function P5(n){n=L0(n,O5);const e=n.match(wm);if(e){const t=e[1];n=n.replace(wm,"").replace(new RegExp("\\b".concat(t,"\\b"),"g"),Tm)}return n}const I5=`

`.concat(h0,`

`),Qv={[Sc]:"vertex",[mp]:"fragment"},F5=`precision highp float;

`;function U5(n,e){const{vs:t,fs:i}=e,s=f5(e.modules||[]);return{gl:n,vs:Mb(n,Object.assign({},e,{source:t,type:Sc,modules:s})),fs:Mb(n,Object.assign({},e,{source:i,type:mp,modules:s})),getUniforms:k5(s)}}function Mb(n,e){let{id:t,source:i,type:s,modules:A,defines:h={},hookFunctions:m=[],inject:_={},transpileToGLSL100:E=!1,prologue:x=!0,log:S}=e;cr(typeof i=="string","shader source must be a string");const C=s===Sc,L=i.split(`
`);let B=100,G="",j=i;L[0].indexOf("#version ")===0?(B=300,G=L[0],j=L.slice(1).join(`
`)):G="#version ".concat(B);const H={};A.forEach(be=>{Object.assign(H,be.getDefines())}),Object.assign(H,h);let Y=x?"".concat(G,`
`).concat(G5({id:t,source:i,type:s}),`
`).concat(z5({type:s}),`
`).concat(T5(n),`
`).concat(w5(n),`
`).concat(V5(H),`
`).concat(C?"":F5,`
`):"".concat(G,`
`);const K=j5(m),ee={},Z={},se={};for(const be in _){const he=typeof _[be]=="string"?{injection:_[be],order:0}:_[be],Ae=be.match(/^(v|f)s:(#)?([\w-]+)$/);if(Ae){const ye=Ae[2],me=Ae[3];ye?me==="decl"?Z[be]=[he]:se[be]=[he]:ee[be]=[he]}else se[be]=[he]}for(const be of A){S&&be.checkDeprecations(j,S);const he=be.getModuleSource(s,B);Y+=he;const Ae=be.injections[s];for(const ye in Ae){const me=ye.match(/^(v|f)s:#([\w-]+)$/);if(me){const Be=me[2]==="decl"?Z:se;Be[ye]=Be[ye]||[],Be[ye].push(Ae[ye])}else ee[ye]=ee[ye]||[],ee[ye].push(Ae[ye])}}return Y+=I5,Y=Sb(Y,s,Z),Y+=H5(K[s],ee),Y+=j,Y=Sb(Y,s,se),Y=N5(Y,E?100:B,C),Y}function k5(n){return function(t){const i={};for(const s of n){const A=s.getUniforms(t,i);Object.assign(i,A)}return i}}function z5(n){let{type:e}=n;return`
#define SHADER_TYPE_`.concat(Qv[e].toUpperCase(),`
`)}function G5(n){let{id:e,source:t,type:i}=n;return e&&typeof e=="string"&&t.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(Qv[i],`

`):""}function V5(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,t="";for(const i in n){e===0&&(t+=`
// APPLICATION DEFINES
`),e++;const s=n[i];(s||Number.isFinite(s))&&(t+="#define ".concat(i.toUpperCase()," ").concat(n[i],`
`))}return e===0&&(t+=`
`),t}function H5(n,e){let t="";for(const i in n){const s=n[i];if(t+="void ".concat(s.signature,` {
`),s.header&&(t+="  ".concat(s.header)),e[i]){const A=e[i];A.sort((h,m)=>h.order-m.order);for(const h of A)t+="  ".concat(h.injection,`
`)}s.footer&&(t+="  ".concat(s.footer)),t+=`}
`}return t}function j5(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;typeof t!="string"?(i=t,t=i.hook):i={},t=t.trim();const[s,A]=t.split(":"),h=t.replace(/\(.+/,"");e[s][h]=Object.assign(i,{signature:A})}),e}const Y5="void main() {gl_FragColor = vec4(0);}",Xv=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,Q5=`#version 300 es
`.concat(Xv);function Wv(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,s,A]=t;if(!e.includes(i)||!s||!A)return null;const h=A.split(";")[0];return{qualifier:i,type:s,name:h}}function qv(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:t,inputType:i,output:s}=n;if(!t)return e===300?Q5:e>300?"#version ".concat(e,`
`).concat(Xv):Y5;const A=q5(t,i);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(i," ").concat(t,`;
out vec4 `).concat(s,`;
void main() {
  `).concat(s," = ").concat(A,`;
}`):"varying ".concat(i," ").concat(t,`;
void main() {
  gl_FragColor = `).concat(A,`;
}`)}function X5(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return cr(!1),null}}function W5(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return cr(!1),null}}function q5(n,e){switch(e){case"float":return"vec4(".concat(n,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(n,", 0.0, 1.0)");case"vec3":return"vec4(".concat(n,", 1.0)");case"vec4":return n;default:return cr(!1),null}}const Z5=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,K5={name:"fp32",vs:Z5,fs:null};function Cb(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}const yr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function $5(n,{precision:e=yr.precision}={}){return n=J5(n),"".concat(parseFloat(n.toPrecision(e)))}function El(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Qa(n,e,t){return tC(n,i=>Math.max(e,Math.min(t,i)))}function O0(n,e,t){return El(n)?n.map((i,s)=>O0(i,e[s],t)):t*e+(1-t)*n}function oc(n,e,t){const i=yr.EPSILON;try{if(n===e)return!0;if(El(n)&&El(e)){if(n.length!==e.length)return!1;for(let s=0;s<n.length;++s)if(!oc(n[s],e[s]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):typeof n=="number"&&typeof e=="number"?Math.abs(n-e)<=yr.EPSILON*Math.max(1,Math.abs(n),Math.abs(e)):!1}finally{yr.EPSILON=i}}function J5(n){return Math.round(n/yr.EPSILON)*yr.EPSILON}function eC(n){return n.clone?n.clone():new Array(n.length)}function tC(n,e,t){if(El(n)){const i=n;t=t||eC(i);for(let s=0;s<t.length&&s<i.length;++s)t[s]=e(n[s],s,t);return t}return e(n)}function nC(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}class Zv extends nC(Array){clone(){return new this.constructor().copy(this)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:El(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(yr)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+$5(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!oc(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){if(i===void 0)return this.lerp(this,e,t);for(let s=0;s<this.ELEMENTS;++s){const A=e[s];this[s]=A+i*(t[s]-A)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if(typeof e=="number")for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(yr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}get elements(){return this}}function iC(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}function or(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function Cg(n,e,t=""){if(yr.debug&&!iC(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}class rC extends Zv{get x(){return this[0]}set x(e){this[0]=or(e)}get y(){return this[1]}set y(e){this[1]=or(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const s=this[i]-e[i];t+=s*s}return or(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return or(t)}normalize(){const e=this.magnitude();if(e!==0)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Cb(e>=0&&e<this.ELEMENTS,"index is out of range"),or(this[e])}setComponent(e,t){return Cb(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var In=1e-6,yl=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function sC(){var n=new yl(2);return yl!=Float32Array&&(n[0]=0,n[1]=0),n}function D0(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function Kv(n,e){return n[0]=-e[0],n[1]=-e[1],n}function $v(n,e,t,i){var s=e[0],A=e[1];return n[0]=s+i*(t[0]-s),n[1]=A+i*(t[1]-A),n}function aC(n,e,t){var i=e[0],s=e[1];return n[0]=t[0]*i+t[4]*s+t[12],n[1]=t[1]*i+t[5]*s+t[13],n}(function(){var n=sC();return function(e,t,i,s,A,h){var m,_;for(t||(t=2),i||(i=0),s?_=Math.min(s*t+i,e.length):_=e.length,m=i;m<_;m+=t)n[0]=e[m],n[1]=e[m+1],A(n,n,h),e[m]=n[0],e[m+1]=n[1];return e}})();function AC(n,e,t){const i=e[0],s=e[1],A=t[3]*i+t[7]*s||1;return n[0]=(t[0]*i+t[4]*s)/A,n[1]=(t[1]*i+t[5]*s)/A,n}function Jv(n,e,t){const i=e[0],s=e[1],A=e[2],h=t[3]*i+t[7]*s+t[11]*A||1;return n[0]=(t[0]*i+t[4]*s+t[8]*A)/h,n[1]=(t[1]*i+t[5]*s+t[9]*A)/h,n[2]=(t[2]*i+t[6]*s+t[10]*A)/h,n}function oC(n,e,t){const i=e[0],s=e[1];return n[0]=t[0]*i+t[2]*s,n[1]=t[1]*i+t[3]*s,n[2]=e[2],n}function lC(){var n=new yl(3);return yl!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function uC(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function cC(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function fC(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function hC(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function dC(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function gC(n,e,t){var i=e[0],s=e[1],A=e[2],h=t[0],m=t[1],_=t[2];return n[0]=s*_-A*m,n[1]=A*h-i*_,n[2]=i*m-s*h,n}function e3(n,e,t){var i=e[0],s=e[1],A=e[2],h=t[3]*i+t[7]*s+t[11]*A+t[15];return h=h||1,n[0]=(t[0]*i+t[4]*s+t[8]*A+t[12])/h,n[1]=(t[1]*i+t[5]*s+t[9]*A+t[13])/h,n[2]=(t[2]*i+t[6]*s+t[10]*A+t[14])/h,n}function mC(n,e,t){var i=e[0],s=e[1],A=e[2];return n[0]=i*t[0]+s*t[3]+A*t[6],n[1]=i*t[1]+s*t[4]+A*t[7],n[2]=i*t[2]+s*t[5]+A*t[8],n}function pC(n,e,t){var i=t[0],s=t[1],A=t[2],h=t[3],m=e[0],_=e[1],E=e[2],x=s*E-A*_,S=A*m-i*E,C=i*_-s*m,L=s*C-A*S,B=A*x-i*C,G=i*S-s*x,j=h*2;return x*=j,S*=j,C*=j,L*=2,B*=2,G*=2,n[0]=m+x+L,n[1]=_+S+B,n[2]=E+C+G,n}function _C(n,e,t,i){var s=[],A=[];return s[0]=e[0]-t[0],s[1]=e[1]-t[1],s[2]=e[2]-t[2],A[0]=s[0],A[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),A[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),n[0]=A[0]+t[0],n[1]=A[1]+t[1],n[2]=A[2]+t[2],n}function bC(n,e,t,i){var s=[],A=[];return s[0]=e[0]-t[0],s[1]=e[1]-t[1],s[2]=e[2]-t[2],A[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),A[1]=s[1],A[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),n[0]=A[0]+t[0],n[1]=A[1]+t[1],n[2]=A[2]+t[2],n}function EC(n,e,t,i){var s=[],A=[];return s[0]=e[0]-t[0],s[1]=e[1]-t[1],s[2]=e[2]-t[2],A[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),A[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),A[2]=s[2],n[0]=A[0]+t[0],n[1]=A[1]+t[1],n[2]=A[2]+t[2],n}function yC(n,e){var t=n[0],i=n[1],s=n[2],A=e[0],h=e[1],m=e[2],_=Math.sqrt(t*t+i*i+s*s),E=Math.sqrt(A*A+h*h+m*m),x=_*E,S=x&&dC(n,e)/x;return Math.acos(Math.min(Math.max(S,-1),1))}var vC=cC,TC=fC;(function(){var n=lC();return function(e,t,i,s,A,h){var m,_;for(t||(t=3),i||(i=0),s?_=Math.min(s*t+i,e.length):_=e.length,m=i;m<_;m+=t)n[0]=e[m],n[1]=e[m+1],n[2]=e[m+2],A(n,n,h),e[m]=n[0],e[m+1]=n[1],e[m+2]=n[2];return e}})();const Rg=[0,0,0];let t0;class os extends rC{static get ZERO(){return t0||(t0=new os(0,0,0),Object.freeze(t0)),t0}constructor(e=0,t=0,i=0){super(-0,-0,-0),arguments.length===1&&El(e)?this.copy(e):(yr.debug&&(or(e),or(t),or(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return yr.debug&&(or(e.x),or(e.y),or(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=or(e)}angle(e){return yC(this,e)}cross(e){return gC(this,this,e),this.check()}rotateX({radians:e,origin:t=Rg}){return _C(this,this,t,e),this.check()}rotateY({radians:e,origin:t=Rg}){return bC(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=Rg}){return EC(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return e3(this,this,e),this.check()}transformAsVector(e){return Jv(this,this,e),this.check()}transformByMatrix3(e){return mC(this,this,e),this.check()}transformByMatrix2(e){return oC(this,this,e),this.check()}transformByQuaternion(e){return pC(this,this,e),this.check()}}class wC extends Zv{toString(){let e="[";if(yr.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=or(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let s=0;s<this.RANK;++s)t[s]=this[i+s];return t}setColumn(e,t){const i=e*this.RANK;for(let s=0;s<this.RANK;++s)this[i+s]=t[s];return this}}function xC(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function SC(n,e){if(n===e){var t=e[1],i=e[2],s=e[3],A=e[6],h=e[7],m=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=A,n[11]=e[14],n[12]=s,n[13]=h,n[14]=m}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15];return n}function N0(n,e){var t=e[0],i=e[1],s=e[2],A=e[3],h=e[4],m=e[5],_=e[6],E=e[7],x=e[8],S=e[9],C=e[10],L=e[11],B=e[12],G=e[13],j=e[14],H=e[15],Y=t*m-i*h,K=t*_-s*h,ee=t*E-A*h,Z=i*_-s*m,se=i*E-A*m,be=s*E-A*_,he=x*G-S*B,Ae=x*j-C*B,ye=x*H-L*B,me=S*j-C*G,Ne=S*H-L*G,Be=C*H-L*j,He=Y*Be-K*Ne+ee*me+Z*ye-se*Ae+be*he;return He?(He=1/He,n[0]=(m*Be-_*Ne+E*me)*He,n[1]=(s*Ne-i*Be-A*me)*He,n[2]=(G*be-j*se+H*Z)*He,n[3]=(C*se-S*be-L*Z)*He,n[4]=(_*ye-h*Be-E*Ae)*He,n[5]=(t*Be-s*ye+A*Ae)*He,n[6]=(j*ee-B*be-H*K)*He,n[7]=(x*be-C*ee+L*K)*He,n[8]=(h*Ne-m*ye+E*he)*He,n[9]=(i*ye-t*Ne-A*he)*He,n[10]=(B*se-G*ee+H*Y)*He,n[11]=(S*ee-x*se-L*Y)*He,n[12]=(m*Ae-h*me-_*he)*He,n[13]=(t*me-i*Ae+s*he)*He,n[14]=(G*K-B*Z-j*Y)*He,n[15]=(x*Z-S*K+C*Y)*He,n):null}function MC(n){var e=n[0],t=n[1],i=n[2],s=n[3],A=n[4],h=n[5],m=n[6],_=n[7],E=n[8],x=n[9],S=n[10],C=n[11],L=n[12],B=n[13],G=n[14],j=n[15],H=e*h-t*A,Y=e*m-i*A,K=e*_-s*A,ee=t*m-i*h,Z=t*_-s*h,se=i*_-s*m,be=E*B-x*L,he=E*G-S*L,Ae=E*j-C*L,ye=x*G-S*B,me=x*j-C*B,Ne=S*j-C*G;return H*Ne-Y*me+K*ye+ee*Ae-Z*he+se*be}function is(n,e,t){var i=e[0],s=e[1],A=e[2],h=e[3],m=e[4],_=e[5],E=e[6],x=e[7],S=e[8],C=e[9],L=e[10],B=e[11],G=e[12],j=e[13],H=e[14],Y=e[15],K=t[0],ee=t[1],Z=t[2],se=t[3];return n[0]=K*i+ee*m+Z*S+se*G,n[1]=K*s+ee*_+Z*C+se*j,n[2]=K*A+ee*E+Z*L+se*H,n[3]=K*h+ee*x+Z*B+se*Y,K=t[4],ee=t[5],Z=t[6],se=t[7],n[4]=K*i+ee*m+Z*S+se*G,n[5]=K*s+ee*_+Z*C+se*j,n[6]=K*A+ee*E+Z*L+se*H,n[7]=K*h+ee*x+Z*B+se*Y,K=t[8],ee=t[9],Z=t[10],se=t[11],n[8]=K*i+ee*m+Z*S+se*G,n[9]=K*s+ee*_+Z*C+se*j,n[10]=K*A+ee*E+Z*L+se*H,n[11]=K*h+ee*x+Z*B+se*Y,K=t[12],ee=t[13],Z=t[14],se=t[15],n[12]=K*i+ee*m+Z*S+se*G,n[13]=K*s+ee*_+Z*C+se*j,n[14]=K*A+ee*E+Z*L+se*H,n[15]=K*h+ee*x+Z*B+se*Y,n}function lc(n,e,t){var i=t[0],s=t[1],A=t[2],h,m,_,E,x,S,C,L,B,G,j,H;return e===n?(n[12]=e[0]*i+e[4]*s+e[8]*A+e[12],n[13]=e[1]*i+e[5]*s+e[9]*A+e[13],n[14]=e[2]*i+e[6]*s+e[10]*A+e[14],n[15]=e[3]*i+e[7]*s+e[11]*A+e[15]):(h=e[0],m=e[1],_=e[2],E=e[3],x=e[4],S=e[5],C=e[6],L=e[7],B=e[8],G=e[9],j=e[10],H=e[11],n[0]=h,n[1]=m,n[2]=_,n[3]=E,n[4]=x,n[5]=S,n[6]=C,n[7]=L,n[8]=B,n[9]=G,n[10]=j,n[11]=H,n[12]=h*i+x*s+B*A+e[12],n[13]=m*i+S*s+G*A+e[13],n[14]=_*i+C*s+j*A+e[14],n[15]=E*i+L*s+H*A+e[15]),n}function rh(n,e,t){var i=t[0],s=t[1],A=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*s,n[5]=e[5]*s,n[6]=e[6]*s,n[7]=e[7]*s,n[8]=e[8]*A,n[9]=e[9]*A,n[10]=e[10]*A,n[11]=e[11]*A,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function CC(n,e,t,i){var s=i[0],A=i[1],h=i[2],m=Math.hypot(s,A,h),_,E,x,S,C,L,B,G,j,H,Y,K,ee,Z,se,be,he,Ae,ye,me,Ne,Be,He,je;return m<In?null:(m=1/m,s*=m,A*=m,h*=m,_=Math.sin(t),E=Math.cos(t),x=1-E,S=e[0],C=e[1],L=e[2],B=e[3],G=e[4],j=e[5],H=e[6],Y=e[7],K=e[8],ee=e[9],Z=e[10],se=e[11],be=s*s*x+E,he=A*s*x+h*_,Ae=h*s*x-A*_,ye=s*A*x-h*_,me=A*A*x+E,Ne=h*A*x+s*_,Be=s*h*x+A*_,He=A*h*x-s*_,je=h*h*x+E,n[0]=S*be+G*he+K*Ae,n[1]=C*be+j*he+ee*Ae,n[2]=L*be+H*he+Z*Ae,n[3]=B*be+Y*he+se*Ae,n[4]=S*ye+G*me+K*Ne,n[5]=C*ye+j*me+ee*Ne,n[6]=L*ye+H*me+Z*Ne,n[7]=B*ye+Y*me+se*Ne,n[8]=S*Be+G*He+K*je,n[9]=C*Be+j*He+ee*je,n[10]=L*Be+H*He+Z*je,n[11]=B*Be+Y*He+se*je,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}function t3(n,e,t){var i=Math.sin(t),s=Math.cos(t),A=e[4],h=e[5],m=e[6],_=e[7],E=e[8],x=e[9],S=e[10],C=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=A*s+E*i,n[5]=h*s+x*i,n[6]=m*s+S*i,n[7]=_*s+C*i,n[8]=E*s-A*i,n[9]=x*s-h*i,n[10]=S*s-m*i,n[11]=C*s-_*i,n}function RC(n,e,t){var i=Math.sin(t),s=Math.cos(t),A=e[0],h=e[1],m=e[2],_=e[3],E=e[8],x=e[9],S=e[10],C=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=A*s-E*i,n[1]=h*s-x*i,n[2]=m*s-S*i,n[3]=_*s-C*i,n[8]=A*i+E*s,n[9]=h*i+x*s,n[10]=m*i+S*s,n[11]=_*i+C*s,n}function n3(n,e,t){var i=Math.sin(t),s=Math.cos(t),A=e[0],h=e[1],m=e[2],_=e[3],E=e[4],x=e[5],S=e[6],C=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=A*s+E*i,n[1]=h*s+x*i,n[2]=m*s+S*i,n[3]=_*s+C*i,n[4]=E*s-A*i,n[5]=x*s-h*i,n[6]=S*s-m*i,n[7]=C*s-_*i,n}function LC(n,e){var t=e[0],i=e[1],s=e[2],A=e[3],h=t+t,m=i+i,_=s+s,E=t*h,x=i*h,S=i*m,C=s*h,L=s*m,B=s*_,G=A*h,j=A*m,H=A*_;return n[0]=1-S-B,n[1]=x+H,n[2]=C-j,n[3]=0,n[4]=x-H,n[5]=1-E-B,n[6]=L+G,n[7]=0,n[8]=C+j,n[9]=L-G,n[10]=1-E-S,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function OC(n,e,t,i,s,A,h){var m=1/(t-e),_=1/(s-i),E=1/(A-h);return n[0]=A*2*m,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=A*2*_,n[6]=0,n[7]=0,n[8]=(t+e)*m,n[9]=(s+i)*_,n[10]=(h+A)*E,n[11]=-1,n[12]=0,n[13]=0,n[14]=h*A*2*E,n[15]=0,n}function DC(n,e,t,i,s){var A=1/Math.tan(e/2),h;return n[0]=A/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=A,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,s!=null&&s!==1/0?(h=1/(i-s),n[10]=(s+i)*h,n[14]=2*s*i*h):(n[10]=-1,n[14]=-2*i),n}var i3=DC;function NC(n,e,t,i,s,A,h){var m=1/(e-t),_=1/(i-s),E=1/(A-h);return n[0]=-2*m,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*_,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*E,n[11]=0,n[12]=(e+t)*m,n[13]=(s+i)*_,n[14]=(h+A)*E,n[15]=1,n}var BC=NC;function PC(n,e,t,i){var s,A,h,m,_,E,x,S,C,L,B=e[0],G=e[1],j=e[2],H=i[0],Y=i[1],K=i[2],ee=t[0],Z=t[1],se=t[2];return Math.abs(B-ee)<In&&Math.abs(G-Z)<In&&Math.abs(j-se)<In?xC(n):(x=B-ee,S=G-Z,C=j-se,L=1/Math.hypot(x,S,C),x*=L,S*=L,C*=L,s=Y*C-K*S,A=K*x-H*C,h=H*S-Y*x,L=Math.hypot(s,A,h),L?(L=1/L,s*=L,A*=L,h*=L):(s=0,A=0,h=0),m=S*h-C*A,_=C*s-x*h,E=x*A-S*s,L=Math.hypot(m,_,E),L?(L=1/L,m*=L,_*=L,E*=L):(m=0,_=0,E=0),n[0]=s,n[1]=m,n[2]=x,n[3]=0,n[4]=A,n[5]=_,n[6]=S,n[7]=0,n[8]=h,n[9]=E,n[10]=C,n[11]=0,n[12]=-(s*B+A*G+h*j),n[13]=-(m*B+_*G+E*j),n[14]=-(x*B+S*G+C*j),n[15]=1,n)}function Rb(n,e){var t=n[0],i=n[1],s=n[2],A=n[3],h=n[4],m=n[5],_=n[6],E=n[7],x=n[8],S=n[9],C=n[10],L=n[11],B=n[12],G=n[13],j=n[14],H=n[15],Y=e[0],K=e[1],ee=e[2],Z=e[3],se=e[4],be=e[5],he=e[6],Ae=e[7],ye=e[8],me=e[9],Ne=e[10],Be=e[11],He=e[12],je=e[13],Te=e[14],We=e[15];return Math.abs(t-Y)<=In*Math.max(1,Math.abs(t),Math.abs(Y))&&Math.abs(i-K)<=In*Math.max(1,Math.abs(i),Math.abs(K))&&Math.abs(s-ee)<=In*Math.max(1,Math.abs(s),Math.abs(ee))&&Math.abs(A-Z)<=In*Math.max(1,Math.abs(A),Math.abs(Z))&&Math.abs(h-se)<=In*Math.max(1,Math.abs(h),Math.abs(se))&&Math.abs(m-be)<=In*Math.max(1,Math.abs(m),Math.abs(be))&&Math.abs(_-he)<=In*Math.max(1,Math.abs(_),Math.abs(he))&&Math.abs(E-Ae)<=In*Math.max(1,Math.abs(E),Math.abs(Ae))&&Math.abs(x-ye)<=In*Math.max(1,Math.abs(x),Math.abs(ye))&&Math.abs(S-me)<=In*Math.max(1,Math.abs(S),Math.abs(me))&&Math.abs(C-Ne)<=In*Math.max(1,Math.abs(C),Math.abs(Ne))&&Math.abs(L-Be)<=In*Math.max(1,Math.abs(L),Math.abs(Be))&&Math.abs(B-He)<=In*Math.max(1,Math.abs(B),Math.abs(He))&&Math.abs(G-je)<=In*Math.max(1,Math.abs(G),Math.abs(je))&&Math.abs(j-Te)<=In*Math.max(1,Math.abs(j),Math.abs(Te))&&Math.abs(H-We)<=In*Math.max(1,Math.abs(H),Math.abs(We))}function IC(){var n=new yl(4);return yl!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function FC(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function Mc(n,e,t){var i=e[0],s=e[1],A=e[2],h=e[3];return n[0]=t[0]*i+t[4]*s+t[8]*A+t[12]*h,n[1]=t[1]*i+t[5]*s+t[9]*A+t[13]*h,n[2]=t[2]*i+t[6]*s+t[10]*A+t[14]*h,n[3]=t[3]*i+t[7]*s+t[11]*A+t[15]*h,n}(function(){var n=IC();return function(e,t,i,s,A,h){var m,_;for(t||(t=4),i||(i=0),s?_=Math.min(s*t+i,e.length):_=e.length,m=i;m<_;m+=t)n[0]=e[m],n[1]=e[m+1],n[2]=e[m+2],n[3]=e[m+3],A(n,n,h),e[m]=n[0],e[m+1]=n[1],e[m+2]=n[2],e[m+3]=n[3];return e}})();var xm;(function(n){n[n.COL0ROW0=0]="COL0ROW0",n[n.COL0ROW1=1]="COL0ROW1",n[n.COL0ROW2=2]="COL0ROW2",n[n.COL0ROW3=3]="COL0ROW3",n[n.COL1ROW0=4]="COL1ROW0",n[n.COL1ROW1=5]="COL1ROW1",n[n.COL1ROW2=6]="COL1ROW2",n[n.COL1ROW3=7]="COL1ROW3",n[n.COL2ROW0=8]="COL2ROW0",n[n.COL2ROW1=9]="COL2ROW1",n[n.COL2ROW2=10]="COL2ROW2",n[n.COL2ROW3=11]="COL2ROW3",n[n.COL3ROW0=12]="COL3ROW0",n[n.COL3ROW1=13]="COL3ROW1",n[n.COL3ROW2=14]="COL3ROW2",n[n.COL3ROW3=15]="COL3ROW3"})(xm||(xm={}));const UC=45*Math.PI/180,kC=1,Lg=.1,Og=500,zC=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class ls extends wC{static get IDENTITY(){return VC()}static get ZERO(){return GC()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return xm}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,s,A,h,m,_,E,x,S,C,L,B,G,j){return this[0]=e,this[1]=t,this[2]=i,this[3]=s,this[4]=A,this[5]=h,this[6]=m,this[7]=_,this[8]=E,this[9]=x,this[10]=S,this[11]=C,this[12]=L,this[13]=B,this[14]=G,this[15]=j,this.check()}setRowMajor(e,t,i,s,A,h,m,_,E,x,S,C,L,B,G,j){return this[0]=e,this[1]=A,this[2]=E,this[3]=L,this[4]=t,this[5]=h,this[6]=x,this[7]=B,this[8]=i,this[9]=m,this[10]=S,this[11]=G,this[12]=s,this[13]=_,this[14]=C,this[15]=j,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(zC)}fromObject(e){return this.check()}fromQuaternion(e){return LC(this,e),this.check()}frustum(e){const{left:t,right:i,bottom:s,top:A,near:h=Lg,far:m=Og}=e;return m===1/0?HC(this,t,i,s,A,h):OC(this,t,i,s,A,h,m),this.check()}lookAt(e){const{eye:t,center:i=[0,0,0],up:s=[0,1,0]}=e;return PC(this,t,i,s),this.check()}ortho(e){const{left:t,right:i,bottom:s,top:A,near:h=Lg,far:m=Og}=e;return BC(this,t,i,s,A,h,m),this.check()}orthographic(e){const{fovy:t=UC,aspect:i=kC,focalDistance:s=1,near:A=Lg,far:h=Og}=e;Lb(t);const m=t/2,_=s*Math.tan(m),E=_*i;return this.ortho({left:-E,right:E,bottom:-_,top:_,near:A,far:h})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:i=1,near:s=.1,far:A=500}=e;return Lb(t),i3(this,t,i,s,A),this.check()}determinant(){return MC(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const i=this.getScale(t),s=1/i[0],A=1/i[1],h=1/i[2];return e[0]=this[0]*s,e[1]=this[1]*A,e[2]=this[2]*h,e[3]=0,e[4]=this[4]*s,e[5]=this[5]*A,e[6]=this[6]*h,e[7]=0,e[8]=this[8]*s,e[9]=this[9]*A,e[10]=this[10]*h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const i=this.getScale(t),s=1/i[0],A=1/i[1],h=1/i[2];return e[0]=this[0]*s,e[1]=this[1]*A,e[2]=this[2]*h,e[3]=this[4]*s,e[4]=this[5]*A,e[5]=this[6]*h,e[6]=this[8]*s,e[7]=this[9]*A,e[8]=this[10]*h,e}transpose(){return SC(this,this),this.check()}invert(){return N0(this,this),this.check()}multiplyLeft(e){return is(this,e,this),this.check()}multiplyRight(e){return is(this,this,e),this.check()}rotateX(e){return t3(this,this,e),this.check()}rotateY(e){return RC(this,this,e),this.check()}rotateZ(e){return n3(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return CC(this,this,e,t),this.check()}scale(e){return rh(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return lc(this,this,e),this.check()}transform(e,t){return e.length===4?(t=Mc(t||[-0,-0,-0,-0],e,this),Cg(t,4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;let s;switch(i){case 2:s=aC(t||[-0,-0],e,this);break;case 3:s=e3(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Cg(s,e.length),s}transformAsVector(e,t){let i;switch(e.length){case 2:i=AC(t||[-0,-0],e,this);break;case 3:i=Jv(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Cg(i,e.length),i}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}}let n0,i0;function GC(){return n0||(n0=new ls([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(n0)),n0}function VC(){return i0||(i0=new ls,Object.freeze(i0)),i0}function Lb(n){if(n>Math.PI*2)throw Error("expected radians")}function HC(n,e,t,i,s,A){const h=2*A/(t-e),m=2*A/(s-i),_=(t+e)/(t-e),E=(s+i)/(s-i),x=-1,S=-1,C=-2*A;return n[0]=h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=m,n[6]=0,n[7]=0,n[8]=_,n[9]=E,n[10]=x,n[11]=S,n[12]=0,n[13]=0,n[14]=C,n[15]=0,n}const jC=new Uint8Array([0,255,255,255]),YC={pickingSelectedColor:null,pickingHighlightColor:jC,pickingActive:!1,pickingAttribute:!1};function QC(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:YC;const e={};if(n.pickingSelectedColor!==void 0)if(!n.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return n.pickingActive!==void 0&&(e.picking_uActive=!!n.pickingActive,e.picking_uAttribute=!!n.pickingAttribute),e}const XC=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,WC=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,qC={name:"picking",vs:XC,fs:WC,getUniforms:QC},ZC=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,KC={name:"transform",vs:ZC,fs:null};class Cc{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Cc(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:t="",fs:i="",defines:s={},inject:A={},varyings:h=[],bufferMode:m=35981,transpileToGLSL100:_=!1}=e,E=this._getModuleList(e.modules),x=this._getHash(t),S=this._getHash(i),C=E.map(K=>this._getHash(K.name)).sort(),L=h.map(K=>this._getHash(K)),B=Object.keys(s).sort(),G=Object.keys(A).sort(),j=[],H=[];for(const K of B)j.push(this._getHash(K)),j.push(this._getHash(s[K]));for(const K of G)H.push(this._getHash(K)),H.push(this._getHash(A[K]));const Y="".concat(x,"/").concat(S,"D").concat(j.join("/"),"M").concat(C.join("/"),"I").concat(H.join("/"),"V").concat(L.join("/"),"H").concat(this.stateHash,"B").concat(m).concat(_?"T":"");if(!this._programCache[Y]){const K=U5(this.gl,{vs:t,fs:i,modules:E,inject:A,defines:s,hookFunctions:this._hookFunctions,transpileToGLSL100:_});this._programCache[Y]=new zv(this.gl,{hash:Y,vs:K.vs,fs:K.fs,varyings:h,bufferMode:m}),this._getUniforms[Y]=K.getUniforms,this._useCounts[Y]=0}return this._useCounts[Y]++,this._programCache[Y]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,this._useCounts[t]===0&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),i={};let s=0;for(let A=0,h=this._defaultModules.length;A<h;++A){const m=this._defaultModules[A],_=m.name;t[s++]=m,i[_]=!0}for(let A=0,h=e.length;A<h;++A){const m=e[A],_=m.name;i[_]||(t[s++]=m,i[_]=!0)}return t.length=s,t}}const $C={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function JC(n,e,t){const i={};let s=e.indices;for(const A in e.attributes){const h=e.attributes[A],m=eR(A);if(A==="indices")s=h;else if(h.constant)i[m]=h.value;else{const _=h.value,E={...h};delete E.value,i[m]=[new an(n,_),E],tR(A,E)}}if(s){const A=s.value||s;Qe(A instanceof Uint16Array||A instanceof Uint32Array,'attribute array for "indices" must be of integer type');const h={size:1,isIndexed:s.isIndexed===void 0?!0:s.isIndexed};i.indices=[new an(n,{data:A,target:34963}),h]}return i}function eR(n,e){const{attributeMap:t=$C}={};return t&&t[n]||n}function tR(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors";break}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}Qe(Number.isFinite(e.size),"attribute ".concat(n," needs size"))}const qo=2,nR=1e4,iR="Model needs drawMode and vertexCount",Ob=()=>{},rR={};class $A{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:i=Ka("model")}=t;Qe(th(e)),this.id=i,this.gl=e,this.id=t.id||Ka("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||Cc.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:s,modules:A,defines:h,inject:m,varyings:_,bufferMode:E,transpileToGLSL100:x}=e;this.programProps={program:t,vs:i,fs:s,modules:A,defines:h,inject:m,varyings:_,bufferMode:E,transpileToGLSL100:x},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Qe(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),iR)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:s,modules:A,defines:h,inject:m,varyings:_,bufferMode:E,transpileToGLSL100:x}=e;this.programProps={program:t,vs:i,fs:s,modules:A,defines:h,inject:m,varyings:_,bufferMode:E,transpileToGLSL100:x},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Qe(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Qe(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=JC(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(_l(e))return this;const t={};for(const i in e){const s=e[i];t[i]=s.getValue?s.getValue():s}return this.vertexArray.setAttributes(t),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return dp(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:s={},attributes:A={},transformFeedback:h=this.transformFeedback,parameters:m={},vertexArray:_=this.vertexArray}=e;this.setAttributes(A),this.updateModuleSettings(t),this.setUniforms(s);let E;it.priority>=qo&&(E=this._logDrawCallStart(qo));const x=this.vertexArray.getDrawParams(),{isIndexed:S=x.isIndexed,indexType:C=x.indexType,indexOffset:L=x.indexOffset,vertexArrayInstanced:B=x.isInstanced}=this.props;B&&!this.isInstanced&&it.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:G,instanceCount:j}=this,{onBeforeRender:H=Ob,onAfterRender:Y=Ob}=this.props;H(),this.program.setUniforms(this.uniforms);const K=this.program.draw(Object.assign(rR,e,{logPriority:E,uniforms:null,framebuffer:i,parameters:m,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:_,transformFeedback:h,isIndexed:S,indexType:C,isInstanced:G,instanceCount:j,offset:S?L:0}));return Y(),it.priority>=qo&&this._logDrawCallEnd(E,_,i),K}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:t=!0,feedbackBuffers:i,unbindModels:s=[]}=e;let{parameters:A}=e;i&&this._setFeedbackBuffers(i),t&&(A=Object.assign({},A,{35977:t})),s.forEach(h=>h.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:A}))}finally{s.forEach(h=>h.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:s,modules:A,inject:h,defines:m,varyings:_,bufferMode:E,transpileToGLSL100:x}=this.programProps;t=this.programManager.get({vs:i,fs:s,modules:A,inject:h,defines:m,varyings:_,bufferMode:E,transpileToGLSL100:x}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Qe(t instanceof zv,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new JM(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof an&&t.delete()}}_setAnimationProps(e){this.animated&&Qe(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(_l(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new Gv(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:nR;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),it.group(qo,">>> DRAWING MODEL ".concat(this.id),{collapsed:it.level<=2})(),e}_logDrawCallEnd(e,t,i,s){if(e===void 0)return;const A=n5({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:h,unusedTable:m,unusedCount:_}=pb({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:E,count:x}=pb({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});x>0&&it.log("MISSING UNIFORMS",Object.keys(E))(),_>0&&it.log("UNUSED UNIFORMS",Object.keys(m))();const S=r5(this.vertexArray.configuration);it.table(e,A)(),it.table(e,h)(),it.table(e+1,S)(),s&&s.log({logLevel:qo,message:"Rendered to ".concat(s.id)}),it.groupEnd(qo)()}}class sR{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:s}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:s}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof an?i:i.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Qe(Ut(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const s in this.feedbackMap){const A=this.feedbackMap[s];s in t&&(i[A]=s)}Object.assign(i,e.feedbackBuffers);for(const s in i){const A=i[s];if(typeof A=="string"){const h=t[A],{byteLength:m,usage:_,accessor:E}=h;i[s]=this._createNewBuffer(s,{byteLength:m,usage:_,accessor:E})}}return i}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,t){let{model:i}=t;const{program:s}=i;e.transformFeedback=new Gv(this.gl,{program:s,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),s=this._getNextIndex();this.bindings[s]=this._updateBinding(this.bindings[s],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const s in this.feedbackMap){const A=this.feedbackMap[s];t[s]=e.feedbackBuffers[A],i[A]=e.sourceBuffers[s],Qe(i[A]instanceof an)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new an(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}const aR="transform_uSampler_",B0="transform_uSize_",Db="transform_position";function AR(n){let{vs:e,sourceTextureMap:t,targetTextureVarying:i,targetTexture:s}=n,h=Object.keys(t).length,m=null;const _={};let E=e,x={};if(h>0||i){const S=E.split(`
`),C=S.slice();if(S.forEach((L,B,G)=>{if(h>0){const j=fR(L,t);if(j){const{updatedLine:H,inject:Y}=j;C[B]=H,x=vm([x,Y]),Object.assign(_,j.samplerTextureMap),h--}}i&&!m&&(m=cR(L,i))}),i){Qe(s);const L="".concat(B0).concat(i),B="uniform vec2 ".concat(L,`;
`),G="     vec2 ".concat(Db," = transform_getPos(").concat(L,`);
     gl_Position = vec4(`).concat(Db,`, 0, 1.);
`);x=vm([x,{"vs:#decl":B,"vs:#main-start":G}])}E=C.join(`
`)}return{vs:E,targetTextureType:m,inject:x,samplerTextureMap:_}}function oR(n){let{sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}=n;const s={};let A,h;t&&({width:A,height:h}=i,s["".concat(B0).concat(t)]=[A,h]);for(const m in e)({width:A,height:h}=e[m]),s["".concat(B0).concat(m)]=[A,h];return s}function lR(n){return Wv(n,["attribute","in"])}function uR(n){const e="".concat(aR).concat(n),t="".concat(B0).concat(n),i="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(t,";");return{samplerName:e,sizeName:t,uniformDeclerations:i}}function cR(n,e){const t=Wv(n,["varying","out"]);return t&&t.name===e?t.type:null}function fR(n,e){const t={},i=lR(n);if(!i)return null;const{type:s,name:A}=i;if(A&&e[A]){const h="// ".concat(n," => Replaced by Transform with a sampler"),{samplerName:m,sizeName:_,uniformDeclerations:E}=uR(A),x=X5(s),S="  ".concat(s," ").concat(A," = transform_getInput(").concat(m,", ").concat(_,").").concat(x,`;
`);return t[m]=A,{updatedLine:h,inject:{"vs:#decl":E,"vs:#main-start":S},samplerTextureMap:t}}return null}const hR={10241:9728,10240:9728,10242:33071,10243:33071},dR="transform_output";class gR{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:t,sourceTextures:i,framebuffer:s,targetTexture:A}=this.bindings[this.currentIndex],h=Object.assign({},t,e.attributes),m=Object.assign({},e.uniforms),_=Object.assign({},e.parameters);let E=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){h.transform_elementID=this.elementIDBuffer;for(const S in this.samplerTextureMap){const C=this.samplerTextureMap[S];m[S]=i[C]}this._setSourceTextureParameters();const x=oR({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:A});Object.assign(m,x)}return this.hasTargetTexture&&(E=!1,_.viewport=[0,0,s.width,s.height]),{attributes:h,framebuffer:s,uniforms:m,discard:E,parameters:_}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],i=ih(t);if(!e)return i;const s=i.constructor,A=W5(this.targetTextureType),h=new s(i.length*A/4);let m=0;for(let _=0;_<i.length;_+=4)for(let E=0;E<A;E++)h[m++]=i[_+E];return h}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof fr)return i;const s=t[i];return s?(this._targetRefTexName=i,this._createNewTexture(s)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:s}=e,A=this._createTargetTexture({sourceTextures:i,textureOrReference:s});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:A}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,s,A)=>{A[s]=s}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new an(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),s=this._getNextIndex();this.bindings[s]=this._updateBinding(this.bindings[s],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:s,targetTexture:A}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,s),Object.assign(e.sourceBuffers,i),A){e.targetTexture=A;const{width:h,height:m}=A,{framebuffer:_}=e;_?(_.update({attachments:{36064:A},resizeAttachments:!1}),_.resize({width:h,height:m})):e.framebuffer=new jn(this.gl,{id:"transform-framebuffer",width:h,height:m,attachments:{36064:A}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(hR)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);t[this._swapTexture]=e.targetTexture;const i=e.sourceTextures[this._swapTexture];return{sourceTextures:t,targetTexture:i}}_createNewTexture(e){const t=V6(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:s,uniforms:A,targetTextureType:h,inject:m,samplerTextureMap:_}=AR({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),E=vm([e.inject||{},m]);this.targetTextureType=h,this.samplerTextureMap=_;const x=e._fs||qv({version:Uv(s),input:this.targetTextureVarying,inputType:h,output:dR}),S=this.hasSourceTextures||this.targetTextureVarying?[KC].concat(e.modules||[]):e.modules;return{vs:s,fs:x,modules:S,uniforms:A,inject:E}}}class _p{static isSupported(e){return Ut(e)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();Qe(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const s=i.getData(e);if(s)return s}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new $A(t,Object.assign({},e,{fs:e.fs||qv({version:Uv(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const s of i)t=s.updateModelProps(t);return t}_buildResourceTransforms(e,t){mR(t)&&(this.bufferTransform=new sR(e,t)),pR(t)&&(this.textureTransform=new gR(e,t)),Qe(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const s of i)t=Object.assign(t,s.getDrawOptions(t));return t}}function mR(n){return!!(!_l(n.feedbackBuffers)||!_l(n.feedbackMap)||n.varyings&&n.varyings.length>0)}function pR(n){return!!(!_l(n._sourceTextures)||n._targetTexture||n._targetTextureVarying)}const Nb={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Bl{static get DRAW_MODE(){return Nb}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:t=Ka("geometry"),drawMode:i=Nb.TRIANGLES,attributes:s={},indices:A=null,vertexCount:h=null}=e;this.id=t,this.drawMode=i|0,this.attributes={},this.userData={},this._setAttributes(s,A),this.vertexCount=h||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let s=e[i];s=ArrayBuffer.isView(s)?{value:s}:s,Qe(ArrayBuffer.isView(s.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),(i==="POSITION"||i==="positions")&&!s.size&&(s.size=3),i==="indices"?(Qe(!this.indices),this.indices=s):this.attributes[i]=s}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const s in e){const A=e[s],{value:h,size:m,constant:_}=A;!_&&h&&m>=1&&(i=Math.min(i,h.length/m))}return Qe(Number.isFinite(i)),i}}let _R=1,bR=1;class r3{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:s=1,repeat:A=1}=e,h=_R++,m={time:0,delay:t,duration:i,rate:s,repeat:A};return this._setChannelTime(m,this.time),this.channels.set(h,m),h}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return t===void 0?!1:this.time>=t.delay+t.duration*t.repeat}getTime(e){if(e===void 0)return this.time;const t=this.channels.get(e);return t===void 0?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const s of t)this._setChannelTime(s,this.time);const i=this.animations.values();for(const s of i){const{animation:A,channel:h}=s;A.setTime(this.getTime(h))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=bR++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay,s=e.duration*e.repeat;i>=s?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}const ER=[255,255,255],yR=1;let vR=0;class TR{constructor(e={}){N(this,"id",void 0),N(this,"color",void 0),N(this,"intensity",void 0),N(this,"type","ambient");const{color:t=ER}=e,{intensity:i=yR}=e;this.id=e.id||"ambient-".concat(vR++),this.color=t,this.intensity=i}}const wR=[255,255,255],xR=1,SR=[0,0,-1];let MR=0;class Bb{constructor(e={}){N(this,"id",void 0),N(this,"color",void 0),N(this,"intensity",void 0),N(this,"type","directional"),N(this,"direction",void 0),N(this,"shadow",void 0);const{color:t=wR}=e,{intensity:i=xR}=e,{direction:s=SR}=e,{_shadow:A=!1}=e;this.id=e.id||"directional-".concat(MR++),this.color=t,this.intensity=i,this.type="directional",this.direction=new os(s).normalize().toArray(),this.shadow=A}getProjectedLight(e){return this}}class CR{constructor(e,t={id:"pass"}){N(this,"id",void 0),N(this,"gl",void 0),N(this,"props",void 0);const{id:i}=t;this.id=i,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class bp extends CR{constructor(...e){super(...e),N(this,"_lastRenderIndex",-1)}render(e){const t=this.gl;return Zs(t,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:i,viewports:s,views:A,onViewportActive:h,clearStack:m=!0,clearCanvas:_=!0}=e;e.pass=e.pass||"unknown";const E=this.gl;_&&LR(E,t),m&&(this._lastRenderIndex=-1);const x=[];for(const S of s){const C=A&&A[S.id];h==null||h(S);const L=this._getDrawLayerParams(S,e),B=S.subViewports||[S];for(const G of B){const j=this._drawLayersInViewport(E,{target:t,moduleParameters:i,viewport:G,view:C,pass:e.pass,layers:e.layers},L);x.push(j)}}return x}_getDrawLayerParams(e,{layers:t,pass:i,isPicking:s=!1,layerFilter:A,cullRect:h,effects:m,moduleParameters:_},E=!1){const x=[],S=s3(this._lastRenderIndex+1),C={layer:t[0],viewport:e,isPicking:s,renderPass:i,cullRect:h},L={};for(let B=0;B<t.length;B++){const G=t[B],j=this._shouldDrawLayer(G,C,A,L),H={shouldDrawLayer:j};j&&!E&&(H.layerRenderIndex=S(G,j),H.moduleParameters=this._getModuleParameters(G,m,i,_),H.layerParameters=this.getLayerParameters(G,B,e)),x[B]=H}return x}_drawLayersInViewport(e,{layers:t,moduleParameters:i,pass:s,target:A,viewport:h,view:m},_){const E=RR(e,{moduleParameters:i,target:A,viewport:h});if(m&&m.props.clear){const S=m.props.clear===!0?{color:!0,depth:!0}:m.props.clear;Fr(e,{scissorTest:!0,scissor:E},()=>dp(e,S))}const x={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};Zs(e,{viewport:E});for(let S=0;S<t.length;S++){const C=t[S],{shouldDrawLayer:L,layerRenderIndex:B,moduleParameters:G,layerParameters:j}=_[S];if(L&&C.props.pickable&&x.pickableCount++,C.isComposite)x.compositeCount++;else if(L){x.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,B),G.viewport=h;try{C._drawLayer({moduleParameters:G,uniforms:{layerIndex:B},parameters:j})}catch(H){C.raiseError(H,"drawing ".concat(C," to ").concat(s))}}}return x}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,i){return e.props.parameters}_shouldDrawLayer(e,t,i,s){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;t.layer=e;let h=e.parent;for(;h;){if(!h.props.visible||!h.filterSubLayer(t))return!1;t.layer=h,h=h.parent}if(i){const m=t.layer.id;if(m in s||(s[m]=i(t)),!s[m])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,s){var A;const h=Object.assign(Object.create(((A=e.internalState)===null||A===void 0?void 0:A.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:pl(this.gl)});if(t)for(const _ of t){var m;Object.assign(h,(m=_.getModuleParameters)===null||m===void 0?void 0:m.call(_,e))}return Object.assign(h,this.getModuleParameters(e,t),s)}}function s3(n=0,e={}){const t={},i=(s,A)=>{const h=s.props._offset,m=s.id,_=s.parent&&s.parent.id;let E;if(_&&!(_ in e)&&i(s.parent,!1),_ in t){const x=t[_]=t[_]||s3(e[_],e);E=x(s,A),t[m]=x}else Number.isFinite(h)?(E=h+(e[_]||0),t[m]=null):E=n;return A&&E>=n&&(n=E+1),e[m]=E,E};return i}function RR(n,{moduleParameters:e,target:t,viewport:i}){const s=t&&t.id!=="default-framebuffer",A=e&&e.devicePixelRatio||pl(n),h=s?t.height:n.drawingBufferHeight,m=i;return[m.x*A,h-(m.y+m.height)*A,m.width*A,m.height*A]}function LR(n,e){const t=e?e.width:n.drawingBufferWidth,i=e?e.height:n.drawingBufferHeight;Zs(n,{viewport:[0,0,t,i]}),n.clear(16640)}class OR extends bp{constructor(e,t){super(e,t),N(this,"shadowMap",void 0),N(this,"depthBuffer",void 0),N(this,"fbo",void 0),this.shadowMap=new fr(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new nl(e,{format:33189,width:1,height:1}),this.fbo=new jn(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;Fr(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],s=pl(this.gl),A=i.width*s,h=i.height*s;(A!==t.width||h!==t.height)&&t.resize({width:A,height:h}),super.render({...e,target:t,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const a3="#define SMOOTH_EDGE_RADIUS 0.5",DR=`
`.concat(a3,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),NR=`
`.concat(a3,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),BR={name:"geometry",vs:DR,fs:NR},PR=Object.keys($t).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat($t[n],";")).join(""),IR=Object.keys(ts).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(ts[n],";")).join(""),FR=Object.keys(ml).map(n=>"const int UNIT_".concat(n.toUpperCase()," = ").concat(ml[n],";")).join(""),UR="".concat(PR,`
`).concat(IR,`
`).concat(FR,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function kR(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function Rc(n){let e={},t;return i=>{for(const s in i)if(!kR(i[s],e[s])){t=n(i),e=i;break}return t}}const Pb=[0,0,0,0],zR=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],A3=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],GR=[0,0,0],o3=[0,0,0],VR=Rc(YR);function l3(n,e,t=o3){t.length<3&&(t=[t[0],t[1],0]);let i=t,s,A=!0;switch(e===$t.LNGLAT_OFFSETS||e===$t.METER_OFFSETS?s=t:s=n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case ts.WEB_MERCATOR:(e===$t.LNGLAT||e===$t.CARTESIAN)&&(s=[0,0,0],A=!1);break;case ts.WEB_MERCATOR_AUTO_OFFSET:e===$t.LNGLAT?i=s:e===$t.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],s=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case ts.IDENTITY:i=n.position.map(Math.fround),i[2]=i[2]||0;break;case ts.GLOBE:A=!1,s=null;break;default:A=!1}return{geospatialOrigin:s,shaderCoordinateOrigin:i,offsetMode:A}}function HR(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:s}=n;let{viewMatrix:A,viewProjectionMatrix:h}=n,m=Pb,_=Pb,E=n.cameraPosition;const{geospatialOrigin:x,shaderCoordinateOrigin:S,offsetMode:C}=l3(n,e,t);return C&&(_=n.projectPosition(x||S),E=[E[0]-_[0],E[1]-_[1],E[2]-_[2]],_[3]=1,m=Mc([],_,h),A=i||A,h=is([],s,A),h=is([],h,zR)),{viewMatrix:A,viewProjectionMatrix:h,projectionCenter:m,originCommon:_,cameraPosCommon:E,shaderCoordinateOrigin:S,geospatialOrigin:x}}function jR({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=$t.DEFAULT,coordinateOrigin:s=o3,autoWrapLongitude:A=!1}){i===$t.DEFAULT&&(i=n.isGeospatial?$t.LNGLAT:$t.CARTESIAN);const h=VR({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:s});return h.project_uWrapLongitude=A,h.project_uModelMatrix=t||A3,h}function YR({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:s,viewProjectionMatrix:A,originCommon:h,cameraPosCommon:m,shaderCoordinateOrigin:_,geospatialOrigin:E}=HR(n,t,i),x=n.getDistanceScales(),S=[n.width*e,n.height*e],C=Mc([],[0,0,-n.focalDistance,1],n.projectionMatrix)[3]||1,L={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:_,project_uCommonOrigin:h.slice(0,3),project_uCenter:s,project_uPseudoMeters:!!n._pseudoMeters,project_uViewportSize:S,project_uDevicePixelRatio:e,project_uFocalDistance:C,project_uCommonUnitsPerMeter:x.unitsPerMeter,project_uCommonUnitsPerWorldUnit:x.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:GR,project_uScale:n.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:A,project_uModelMatrix:A3,project_uCameraPosition:m};if(E){const B=n.getDistanceScales(E);switch(t){case $t.METER_OFFSETS:L.project_uCommonUnitsPerWorldUnit=B.unitsPerMeter,L.project_uCommonUnitsPerWorldUnit2=B.unitsPerMeter2;break;case $t.LNGLAT:case $t.LNGLAT_OFFSETS:n._pseudoMeters||(L.project_uCommonUnitsPerMeter=B.unitsPerMeter),L.project_uCommonUnitsPerWorldUnit=B.unitsPerDegree,L.project_uCommonUnitsPerWorldUnit2=B.unitsPerDegree2;break;case $t.CARTESIAN:L.project_uCommonUnitsPerWorldUnit=[1,1,B.unitsPerMeter[2]],L.project_uCommonUnitsPerWorldUnit2=[0,0,B.unitsPerMeter2[2]];break}}return L}const QR={};function XR(n=QR){return"viewport"in n?jR(n):{}}const Ep={name:"project",dependencies:[K5,BR],vs:UR,getUniforms:XR};function d0(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ol(n,e){const t=Mc([],e,n);return FC(t,t,1/t[3]),t}function Ib(n,e){const t=n%e;return t<0?e+t:t}function Sm(n,e,t){return n<e?e:n>t?t:n}function WR(n){return Math.log(n)*Math.LOG2E}const yp=Math.log2||WR;function Ks(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Pr=Math.PI,u3=Pr/4,vr=Pr/180,Mm=180/Pr,vl=512,P0=4003e4,Fb=85.051129,c3=1.5;function qR(n){return Math.pow(2,n)}function ZR(n){return yp(n)}function Xa(n){const[e,t]=n;Ks(Number.isFinite(e)),Ks(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude");const i=e*vr,s=t*vr,A=vl*(i+Pr)/(2*Pr),h=vl*(Pr+Math.log(Math.tan(u3+s*.5)))/(2*Pr);return[A,h]}function Ws(n){const[e,t]=n,i=e/vl*(2*Pr)-Pr,s=2*(Math.atan(Math.exp(t/vl*(2*Pr)-Pr))-u3);return[i*Mm,s*Mm]}function KR(n){const{latitude:e}=n;Ks(Number.isFinite(e));const t=Math.cos(e*vr);return ZR(P0*t)-9}function Dg(n){const e=Math.cos(n*vr);return vl/P0/e}function I0(n){const{latitude:e,longitude:t,highPrecision:i=!1}=n;Ks(Number.isFinite(e)&&Number.isFinite(t));const s=vl,A=Math.cos(e*vr),h=s/360,m=h/A,_=s/P0/A,E={unitsPerMeter:[_,_,_],metersPerUnit:[1/_,1/_,1/_],unitsPerDegree:[h,m,_],degreesPerUnit:[1/h,1/m,1/_]};if(i){const x=vr*Math.tan(e*vr)/A,S=h*x/2,C=s/P0*x,L=C/m*_;E.unitsPerDegree2=[0,S,C],E.unitsPerMeter2=[L,0,L]}return E}function f3(n,e){const[t,i,s]=n,[A,h,m]=e,{unitsPerMeter:_,unitsPerMeter2:E}=I0({longitude:t,latitude:i,highPrecision:!0}),x=Xa(n);x[0]+=A*(_[0]+E[0]*h),x[1]+=h*(_[1]+E[1]*h);const S=Ws(x),C=(s||0)+(m||0);return Number.isFinite(s)||Number.isFinite(m)?[S[0],S[1],C]:S}function h3(n){const{height:e,pitch:t,bearing:i,altitude:s,scale:A,center:h}=n,m=d0();lc(m,m,[0,0,-s]),t3(m,m,-t*vr),n3(m,m,i*vr);const _=A/e;return rh(m,m,[_,_,_]),h&&lc(m,m,hC([],h)),m}function d3(n){const{width:e,height:t,altitude:i,pitch:s=0,offset:A,center:h,scale:m,nearZMultiplier:_=1,farZMultiplier:E=1}=n;let{fovy:x=Tl(c3)}=n;i!==void 0&&(x=Tl(i));const S=x*vr,C=s*vr,L=vp(x);let B=L;h&&(B+=h[2]*m/Math.cos(C)/t);const G=S*(.5+(A?A[1]:0)/t),j=Math.sin(G)*B/Math.sin(Sm(Math.PI/2-C-G,.01,Math.PI-.01)),H=Math.sin(C)*j+B,Y=B*10,K=Math.min(H*E,Y);return{fov:S,aspect:e/t,focalDistance:L,near:_,far:K}}function $R(n){const{fov:e,aspect:t,near:i,far:s}=d3(n);return i3([],e,t,i,s)}function Tl(n){return 2*Math.atan(.5/n)*Mm}function vp(n){return .5/Math.tan(.5*n*vr)}function Tp(n,e){const[t,i,s=0]=n;return Ks(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(s)),ol(e,[t,i,s,1])}function uc(n,e,t=0){const[i,s,A]=n;if(Ks(Number.isFinite(i)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(A))return ol(e,[i,s,A,1]);const h=ol(e,[i,s,0,1]),m=ol(e,[i,s,1,1]),_=h[2],E=m[2],x=_===E?0:((t||0)-_)/(E-_);return $v([],h,m,x)}function wp(n){const{width:e,height:t,bounds:i,minExtent:s=0,maxZoom:A=24,offset:h=[0,0]}=n,[[m,_],[E,x]]=i,S=JR(n.padding),C=Xa([m,Sm(x,-85.051129,Fb)]),L=Xa([E,Sm(_,-85.051129,Fb)]),B=[Math.max(Math.abs(L[0]-C[0]),s),Math.max(Math.abs(L[1]-C[1]),s)],G=[e-S.left-S.right-Math.abs(h[0])*2,t-S.top-S.bottom-Math.abs(h[1])*2];Ks(G[0]>0&&G[1]>0);const j=G[0]/B[0],H=G[1]/B[1],Y=(S.right-S.left)/2/j,K=(S.top-S.bottom)/2/H,ee=[(L[0]+C[0])/2+Y,(L[1]+C[1])/2+K],Z=Ws(ee),se=Math.min(A,yp(Math.abs(Math.min(j,H))));return Ks(Number.isFinite(se)),{longitude:Z[0],latitude:Z[1],zoom:se}}function JR(n=0){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:(Ks(Number.isFinite(n.top)&&Number.isFinite(n.bottom)&&Number.isFinite(n.left)&&Number.isFinite(n.right)),n)}const Ub=Math.PI/180;function g3(n,e=0){const{width:t,height:i,unproject:s}=n,A={targetZ:e},h=s([0,i],A),m=s([t,i],A);let _,E;const x=n.fovy?.5*n.fovy*Ub:Math.atan(.5/n.altitude),S=(90-n.pitch)*Ub;return x>S-.01?(_=kb(n,0,e),E=kb(n,t,e)):(_=s([0,0],A),E=s([t,0],A)),[h,m,E,_]}function kb(n,e,t){const{pixelUnprojectionMatrix:i}=n,s=ol(i,[e,0,1,1]),A=ol(i,[e,n.height,1,1]),m=(t*n.distanceScales.unitsPerMeter[2]-s[2])/(A[2]-s[2]),_=$v([],s,A,m),E=Ws(_);return E.push(t),E}let eL=class Cm{constructor(e={width:1,height:1}){N(this,"latitude",void 0),N(this,"longitude",void 0),N(this,"zoom",void 0),N(this,"pitch",void 0),N(this,"bearing",void 0),N(this,"altitude",void 0),N(this,"fovy",void 0),N(this,"meterOffset",void 0),N(this,"center",void 0),N(this,"width",void 0),N(this,"height",void 0),N(this,"scale",void 0),N(this,"distanceScales",void 0),N(this,"viewMatrix",void 0),N(this,"projectionMatrix",void 0),N(this,"viewProjectionMatrix",void 0),N(this,"pixelProjectionMatrix",void 0),N(this,"pixelUnprojectionMatrix",void 0),N(this,"equals",H=>H instanceof Cm?H.width===this.width&&H.height===this.height&&Rb(H.projectionMatrix,this.projectionMatrix)&&Rb(H.viewMatrix,this.viewMatrix):!1),N(this,"project",(H,Y={})=>{const{topLeft:K=!0}=Y,ee=this.projectPosition(H),Z=Tp(ee,this.pixelProjectionMatrix),[se,be]=Z,he=K?be:this.height-be;return H.length===2?[se,he]:[se,he,Z[2]]}),N(this,"unproject",(H,Y={})=>{const{topLeft:K=!0,targetZ:ee=void 0}=Y,[Z,se,be]=H,he=K?se:this.height-se,Ae=ee&&ee*this.distanceScales.unitsPerMeter[2],ye=uc([Z,he,be],this.pixelUnprojectionMatrix,Ae),[me,Ne,Be]=this.unprojectPosition(ye);return Number.isFinite(be)?[me,Ne,Be]:Number.isFinite(ee)?[me,Ne,ee]:[me,Ne]}),N(this,"projectPosition",H=>{const[Y,K]=Xa(H),ee=(H[2]||0)*this.distanceScales.unitsPerMeter[2];return[Y,K,ee]}),N(this,"unprojectPosition",H=>{const[Y,K]=Ws(H),ee=(H[2]||0)*this.distanceScales.metersPerUnit[2];return[Y,K,ee]});let{width:t,height:i,altitude:s=null,fovy:A=null}=e;const{latitude:h=0,longitude:m=0,zoom:_=0,pitch:E=0,bearing:x=0,position:S=null,nearZMultiplier:C=.02,farZMultiplier:L=1.01}=e;t=t||1,i=i||1,A===null&&s===null?(s=c3,A=Tl(s)):A===null?A=Tl(s):s===null&&(s=vp(A));const B=qR(_);s=Math.max(.75,s);const G=I0({longitude:m,latitude:h}),j=Xa([m,h]);j.push(0),S&&uC(j,j,TC([],S,G.unitsPerMeter)),this.projectionMatrix=$R({width:t,height:i,scale:B,center:j,pitch:E,fovy:A,nearZMultiplier:C,farZMultiplier:L}),this.viewMatrix=h3({height:i,scale:B,center:j,pitch:E,bearing:x,altitude:s}),this.width=t,this.height=i,this.scale=B,this.latitude=h,this.longitude=m,this.zoom=_,this.pitch=E,this.bearing=x,this.altitude=s,this.fovy=A,this.center=j,this.meterOffset=S||[0,0,0],this.distanceScales=G,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:e,height:t,projectionMatrix:i,viewMatrix:s}=this,A=d0();is(A,A,i),is(A,A,s),this.viewProjectionMatrix=A;const h=d0();rh(h,h,[e/2,-t/2,1]),lc(h,h,[1,-1,0]),is(h,h,A);const m=N0(d0(),h);if(!m)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=m}projectFlat(e){return Xa(e)}unprojectFlat(e){return Ws(e)}getMapCenterByLngLatPosition({lngLat:e,pos:t}){const i=uc(t,this.pixelUnprojectionMatrix),s=Xa(e),A=D0([],s,Kv([],i)),h=D0([],this.center,A);return Ws(h)}fitBounds(e,t={}){const{width:i,height:s}=this,{longitude:A,latitude:h,zoom:m}=wp(Object.assign({width:i,height:s,bounds:e},t));return new Cm({width:i,height:s,longitude:A,latitude:h,zoom:m})}getBounds(e){const t=this.getBoundingRegion(e),i=Math.min(...t.map(m=>m[0])),s=Math.max(...t.map(m=>m[0])),A=Math.min(...t.map(m=>m[1])),h=Math.max(...t.map(m=>m[1]));return[[i,A],[s,h]]}getBoundingRegion(e={}){return g3(this,e.z||0)}getLocationAtPoint({lngLat:e,pos:t}){return this.getMapCenterByLngLatPosition({lngLat:e,pos:t})}};const zb=512;function tL(n){const{width:e,height:t,pitch:i=0}=n;let{longitude:s,latitude:A,zoom:h,bearing:m=0}=n;(s<-180||s>180)&&(s=Ib(s+180,360)-180),(m<-180||m>180)&&(m=Ib(m+180,360)-180);const _=yp(t/zb);if(h<=_)h=_,A=0;else{const E=t/2/Math.pow(2,h),x=Ws([0,E])[1];if(A<x)A=x;else{const S=Ws([0,zb-E])[1];A>S&&(A=S)}}return{width:e,height:t,longitude:s,latitude:A,zoom:h,pitch:i,bearing:m}}const nL=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,iL=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,rL=Rc(lL),sL=Rc(uL),aL=[0,0,0,1],AL=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function oL(n,e){const[t,i,s]=n,A=uc([t,i,s],e);return Number.isFinite(s)?A:[A[0],A[1],0]}function lL({viewport:n,center:e}){return new ls(n.viewProjectionMatrix).invert().transform(e)}function uL({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,s=n.isGeospatial?void 0:1,A=[[0,0,s],[n.width,0,s],[0,n.height,s],[n.width,n.height,s],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(h=>oL(h,i));for(const h of e){const m=h.clone().translate(new os(n.center).negate()),_=A.map(x=>m.transform(x)),E=new ls().ortho({left:Math.min(..._.map(x=>x[0])),right:Math.max(..._.map(x=>x[0])),bottom:Math.min(..._.map(x=>x[1])),top:Math.max(..._.map(x=>x[1])),near:Math.min(..._.map(x=>-x[2])),far:Math.max(..._.map(x=>-x[2]))});t.push(E.multiplyRight(h))}return t}function cL(n,e){const{shadowEnabled:t=!0}=n;if(!t||!n.shadowMatrices||!n.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!n.drawToShadowMap,shadow_uUseShadowMap:n.shadowMaps?n.shadowMaps.length>0:!1,shadow_uColor:n.shadowColor||aL,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},s=rL({viewport:n.viewport,center:e.project_uCenter}),A=[],h=sL({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let m=0;m<n.shadowMatrices.length;m++){const _=h[m],E=_.clone().translate(new os(n.viewport.center).negate());e.project_uCoordinateSystem===$t.LNGLAT&&e.project_uProjectionMode===ts.WEB_MERCATOR?(h[m]=E,A[m]=s):(h[m]=_.clone().multiplyRight(AL),A[m]=E.transform(s))}for(let m=0;m<h.length;m++)i["shadow_uViewProjectionMatrices[".concat(m,"]")]=h[m],i["shadow_uProjectCenters[".concat(m,"]")]=A[m],n.shadowMaps&&n.shadowMaps.length>0?i["shadow_uShadowMap".concat(m)]=n.shadowMaps[m]:i["shadow_uShadowMap".concat(m)]=n.dummyShadowMap;return i}const Gb={name:"shadow",dependencies:[Ep],vs:nL,fs:iL,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(n={},e={})=>"viewport"in n&&(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0)?cL(n,e):{}},fL={color:[255,255,255],intensity:1},Vb=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],hL=[0,0,0,200/255];class m3{constructor(e={}){N(this,"id","lighting-effect"),N(this,"props",void 0),N(this,"shadowColor",hL),N(this,"shadow",void 0),N(this,"ambientLight",void 0),N(this,"directionalLights",void 0),N(this,"pointLights",void 0),N(this,"shadowPasses",[]),N(this,"shadowMaps",[]),N(this,"dummyShadowMap",null),N(this,"programManager",void 0),N(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow),this.props=e}preRender(e,{layers:t,layerFilter:i,viewports:s,onViewportActive:A,views:h}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=Cc.getDefaultProgramManager(e),this.programManager.addDefaultModule(Gb)),this.dummyShadowMap||(this.dummyShadowMap=new fr(e,{width:1,height:1}));for(let m=0;m<this.shadowPasses.length;m++)this.shadowPasses[m].render({layers:t,layerFilter:i,viewports:s,onViewportActive:A,views:h,moduleParameters:{shadowLightId:m,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Gb),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const i=new ls().lookAt({eye:new os(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new OR(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&t.length===0&&i.length===0&&(this.ambientLight=new TR(fL),this.directionalLights.push(new Bb(Vb[0]),new Bb(Vb[1])))}}class dL{constructor(e={}){N(this,"_pool",[]),N(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:i=1,type:s,padding:A=0,copy:h=!1,initialize:m=!1,maxCount:_}){const E=s||e&&e.constructor||Float32Array,x=t*i+A;if(ArrayBuffer.isView(e)){if(x<=e.length)return e;if(x*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new E(e.buffer,0,x)}let S=1/0;_&&(S=_*i+A);const C=this._allocate(E,x,m,S);return e&&h?C.set(e):m||C.fill(0,0,4),this._release(e),C}release(e){this._release(e)}_allocate(e,t,i,s){let A=Math.max(Math.ceil(t*this.opts.overAlloc),1);A>s&&(A=s);const h=this._pool,m=e.BYTES_PER_ELEMENT*A,_=h.findIndex(E=>E.byteLength>=m);if(_>=0){const E=new e(h.splice(_,1)[0],0,A);return i&&E.fill(0),E}return new e(A)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:s}=i,A=t.findIndex(h=>h.byteLength>=s);A<0?t.push(i):(A>0||t.length<this.opts.poolSize)&&t.splice(A,0,i),t.length>this.opts.poolSize&&t.shift()}}const cc=new dL;function Zu(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function gL(n){return[n[12],n[13],n[14]]}function mL(n){return{left:Zo(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),right:Zo(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),bottom:Zo(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),top:Zo(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),near:Zo(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),far:Zo(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14])}}const Hb=new os;function Zo(n,e,t,i){Hb.set(n,e,t);const s=Hb.len();return{distance:i/s,normal:new os(-n/s,-e/s,-t/s)}}function pL(n){return n-Math.fround(n)}let zu;function Ng(n,e){const{size:t=1,startIndex:i=0}=e,s=e.endIndex!==void 0?e.endIndex:n.length,A=(s-i)/t;zu=cc.allocate(zu,A,{type:Float32Array,size:t*2});let h=i,m=0;for(;h<s;){for(let _=0;_<t;_++){const E=n[h++];zu[m+_]=E,zu[m+_+t]=pL(E)}m+=t*2}return zu.subarray(0,A*t*2)}function _L(n){let e=null,t=!1;for(const i of n)i&&(e?(t||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],t=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}const bL=Math.PI/180,EL=Zu(),jb=[0,0,0],yL={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function vL({width:n,height:e,orthographic:t,fovyRadians:i,focalDistance:s,padding:A,near:h,far:m}){const _=n/e,E=t?new ls().orthographic({fovy:i,aspect:_,focalDistance:s,near:h,far:m}):new ls().perspective({fovy:i,aspect:_,near:h,far:m});if(A){const{left:x=0,right:S=0,top:C=0,bottom:L=0}=A,B=Qa((x+n-S)/2,0,n)-n/2,G=Qa((C+e-L)/2,0,e)-e/2;E[8]-=B*2/n,E[9]+=G*2/e}return E}class Pl{constructor(e={}){N(this,"id",void 0),N(this,"x",void 0),N(this,"y",void 0),N(this,"width",void 0),N(this,"height",void 0),N(this,"padding",void 0),N(this,"isGeospatial",void 0),N(this,"zoom",void 0),N(this,"focalDistance",void 0),N(this,"position",void 0),N(this,"modelMatrix",void 0),N(this,"distanceScales",void 0),N(this,"scale",void 0),N(this,"center",void 0),N(this,"cameraPosition",void 0),N(this,"projectionMatrix",void 0),N(this,"viewMatrix",void 0),N(this,"viewMatrixUncentered",void 0),N(this,"viewMatrixInverse",void 0),N(this,"viewProjectionMatrix",void 0),N(this,"pixelProjectionMatrix",void 0),N(this,"pixelUnprojectionMatrix",void 0),N(this,"resolution",void 0),N(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||yL,this.focalDistance=e.focalDistance||1,this.position=e.position||jb,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?ts.WEB_MERCATOR:ts.WEB_MERCATOR_AUTO_OFFSET:ts.IDENTITY}equals(e){return e instanceof Pl?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&oc(e.projectionMatrix,this.projectionMatrix)&&oc(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:t=!0}={}){const i=this.projectPosition(e),s=Tp(i,this.pixelProjectionMatrix),[A,h]=s,m=t?h:this.height-h;return e.length===2?[A,m]:[A,m,s[2]]}unproject(e,{topLeft:t=!0,targetZ:i}={}){const[s,A,h]=e,m=t?A:this.height-A,_=i&&i*this.distanceScales.unitsPerMeter[2],E=uc([s,m,h],this.pixelUnprojectionMatrix,_),[x,S,C]=this.unprojectPosition(E);return Number.isFinite(h)?[x,S,C]:Number.isFinite(i)?[x,S,i]:[x,S]}projectPosition(e){const[t,i]=this.projectFlat(e),s=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[t,i,s]}unprojectPosition(e){const[t,i]=this.unprojectFlat(e),s=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[t,i,s]}projectFlat(e){if(this.isGeospatial){const t=Xa(e);return t[1]=Qa(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?Ws(e):e}getBounds(e={}){const t={targetZ:e.z||0},i=this.unproject([0,0],t),s=this.unproject([this.width,0],t),A=this.unproject([0,this.height],t),h=this.unproject([this.width,this.height],t);return[Math.min(i[0],s[0],A[0],h[0]),Math.min(i[1],s[1],A[1],h[1]),Math.max(i[0],s[0],A[0],h[0]),Math.max(i[1],s[1],A[1],h[1])]}getDistanceScales(e){return e?I0({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:i=1,height:s=1}){return e<this.x+this.width&&this.x<e+i&&t<this.y+this.height&&this.y<t+s}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,mL(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=KR({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||I0({latitude:i,longitude:t}));const s=Math.pow(2,this.zoom);this.scale=s;const{position:A,modelMatrix:h}=e;let m=jb;if(A&&(m=h?new ls(h).transformAsVector(A,[]):A),this.isGeospatial){const _=this.projectPosition([t,i,0]);this.center=new os(m).scale(this.distanceScales.unitsPerMeter).add(_)}else this.center=this.projectPosition(m)}_initMatrices(e){const{viewMatrix:t=EL,projectionMatrix:i=null,orthographic:s=!1,fovyRadians:A,fovy:h=75,near:m=.1,far:_=1e3,padding:E=null,focalDistance:x=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=new ls().multiplyRight(t).translate(new os(this.center).negate()),this.projectionMatrix=i||vL({width:this.width,height:this.height,orthographic:s,fovyRadians:A||h*bL,focalDistance:x,padding:E,near:m,far:_});const S=Zu();is(S,S,this.projectionMatrix),is(S,S,this.viewMatrix),this.viewProjectionMatrix=S,this.viewMatrixInverse=N0([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=gL(this.viewMatrixInverse);const C=Zu(),L=Zu();rh(C,C,[this.width/2,-this.height/2,1]),lc(C,C,[1,-1,0]),is(L,C,this.viewProjectionMatrix),this.pixelProjectionMatrix=L,this.pixelUnprojectionMatrix=N0(Zu(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Xt.warn("Pixel project matrix not invertible")()}}N(Pl,"displayName","Viewport");class wl extends Pl{constructor(e={}){const{latitude:t=0,longitude:i=0,zoom:s=0,pitch:A=0,bearing:h=0,nearZMultiplier:m=.1,farZMultiplier:_=1.01,nearZ:E,farZ:x,orthographic:S=!1,projectionMatrix:C,repeat:L=!1,worldOffset:B=0,position:G,padding:j,legacyMeterSizes:H=!1}=e;let{width:Y,height:K,altitude:ee=1.5}=e;const Z=Math.pow(2,s);Y=Y||1,K=K||1;let se,be=null;if(C)ee=C[5]/2,se=Tl(ee);else{e.fovy?(se=e.fovy,ee=vp(se)):se=Tl(ee);let Ae;if(j){const{top:ye=0,bottom:me=0}=j;Ae=[0,Qa((ye+K-me)/2,0,K)-K/2]}be=d3({width:Y,height:K,scale:Z,center:G&&[0,0,G[2]*Dg(t)],offset:Ae,pitch:A,fovy:se,nearZMultiplier:m,farZMultiplier:_}),Number.isFinite(E)&&(be.near=E),Number.isFinite(x)&&(be.far=x)}let he=h3({height:K,pitch:A,bearing:h,scale:Z,altitude:ee});B&&(he=new ls().translate([512*B,0,0]).multiplyLeft(he)),super({...e,width:Y,height:K,viewMatrix:he,longitude:i,latitude:t,zoom:s,...be,fovy:se,focalDistance:ee}),N(this,"longitude",void 0),N(this,"latitude",void 0),N(this,"pitch",void 0),N(this,"bearing",void 0),N(this,"altitude",void 0),N(this,"fovy",void 0),N(this,"orthographic",void 0),N(this,"_subViewports",void 0),N(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=i,this.zoom=s,this.pitch=A,this.bearing=h,this.altitude=ee,this.fovy=se,this.orthographic=S,this._subViewports=L?[]:null,this._pseudoMeters=H,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let s=t;s<=i;s++){const A=s?new wl({...this,worldOffset:s}):this;this._subViewports.push(A)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,i]=this.projectFlat(e),s=(e[2]||0)*Dg(e[1]);return[t,i,s]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,i]=this.unprojectFlat(e),s=(e[2]||0)/Dg(i);return[t,i,s]}addMetersToLngLat(e,t){return f3(e,t)}panByPosition(e,t){const i=uc(t,this.pixelUnprojectionMatrix),s=this.projectFlat(e),A=D0([],s,Kv([],i)),h=D0([],this.center,A),[m,_]=this.unprojectFlat(h);return{longitude:m,latitude:_}}getBounds(e={}){const t=g3(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:i,height:s}=this,{longitude:A,latitude:h,zoom:m}=wp({width:i,height:s,bounds:e,...t});return new wl({width:i,height:s,longitude:A,latitude:h,zoom:m})}}N(wl,"displayName","WebMercatorViewport");const Yb=[0,0,0];function Bg(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof wl){const[s,A,h=0]=n,m=e.getDistanceScales([s,A]);i[2]=h*m.unitsPerMeter[2]}return i}function TL(n){const{viewport:e,modelMatrix:t,coordinateOrigin:i}=n;let{coordinateSystem:s,fromCoordinateSystem:A,fromCoordinateOrigin:h}=n;return s===$t.DEFAULT&&(s=e.isGeospatial?$t.LNGLAT:$t.CARTESIAN),A===void 0&&(A=s),h===void 0&&(h=i),{viewport:e,coordinateSystem:s,coordinateOrigin:i,modelMatrix:t,fromCoordinateSystem:A,fromCoordinateOrigin:h}}function p3(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:s,offsetMode:A}){let[h,m,_=0]=n;switch(t&&([h,m,_]=Mc([],[h,m,_,1],t)),i){case $t.LNGLAT:return Bg([h,m,_],e,A);case $t.LNGLAT_OFFSETS:return Bg([h+s[0],m+s[1],_+(s[2]||0)],e,A);case $t.METER_OFFSETS:return Bg(f3(s,[h,m,_]),e,A);case $t.CARTESIAN:default:return e.isGeospatial?[h+s[0],m+s[1],_+s[2]]:e.projectPosition([h,m,_])}}function wL(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:s,modelMatrix:A,fromCoordinateSystem:h,fromCoordinateOrigin:m}=TL(e),{autoOffset:_=!0}=e,{geospatialOrigin:E=Yb,shaderCoordinateOrigin:x=Yb,offsetMode:S=!1}=_?l3(t,i,s):{},C=p3(n,{viewport:t,modelMatrix:A,coordinateSystem:h,coordinateOrigin:m,offsetMode:S});if(S){const L=t.projectPosition(E||x);vC(C,C,L)}return C}const Qb={blendFunc:[1,0,32771,0],blendEquation:32774};class _3 extends bp{constructor(...e){super(...e),N(this,"pickZ",void 0),N(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:s,onViewportActive:A,pickingFBO:h,deviceRect:{x:m,y:_,width:E,height:x},cullRect:S,effects:C,pass:L="picking",pickZ:B,moduleParameters:G}){const j=this.gl;this.pickZ=B;const H=this._resetColorEncoder(B),Y=Fr(j,{scissorTest:!0,scissor:[m,_,E,x],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...Qb,blend:!B},()=>super.render({target:h,layers:e,layerFilter:t,views:i,viewports:s,onViewportActive:A,cullRect:S,effects:C==null?void 0:C.filter(ee=>ee.useInPicking),pass:L,isPicking:!0,moduleParameters:G}));return this._colorEncoderState=null,{decodePickingColor:H&&SL.bind(null,H),stats:Y}}shouldDrawLayer(e){const{pickable:t,operation:i}=e.props;return t&&i.includes("draw")||i.includes("terrain")||i.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,i){const s={...e.props.parameters},{pickable:A,operation:h}=e.props;return this._colorEncoderState?A&&h.includes("draw")&&(Object.assign(s,Qb),s.blend=!0,s.blendColor=xL(this._colorEncoderState,e,i)):s.blend=!1,h.includes("terrain")&&(s.blend=!1),s}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function xL(n,e,t){const{byLayer:i,byAlpha:s}=n;let A,h=i.get(e);return h?(h.viewports.push(t),A=h.a):(A=i.size+1,A<=255?(h={a:A,layer:e,viewports:[t]},i.set(e,h),s[A]=h):(Xt.warn("Too many pickable layers, only picking the first 255")(),A=0)),[0,0,0,A/255]}function SL(n,e){const t=n.byAlpha[e[3]];return t&&{pickedLayer:t.layer,pickedViewports:t.viewports,pickedObjectIndex:t.layer.decodePickingColor(e)}}const el={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},F0=Symbol.for("component"),Za=Symbol.for("propTypes"),Pg=Symbol.for("deprecatedProps"),ll=Symbol.for("asyncPropDefaults"),YA=Symbol.for("asyncPropOriginal"),Wa=Symbol.for("asyncPropResolved");function xp(n,e=()=>!0){return Array.isArray(n)?b3(n,e,[]):e(n)?[n]:[]}function b3(n,e,t){let i=-1;for(;++i<n.length;){const s=n[i];Array.isArray(s)?b3(s,e,t):e(s)&&t.push(s)}return t}function ML({target:n,source:e,start:t=0,count:i=1}){const s=e.length,A=i*s;let h=0;for(let m=t;h<s;h++)n[m++]=e[h];for(;h<A;)h<A-h?(n.copyWithin(t+h,t,t+h),h*=2):(n.copyWithin(t+h,t,t+A-h),h=A);return n}class CL{constructor(e,t,i){N(this,"id",void 0),N(this,"context",void 0),N(this,"isLoaded",void 0),N(this,"persistent",void 0),N(this,"_loadCount",0),N(this,"_subscribers",new Set),N(this,"_data",void 0),N(this,"_loader",void 0),N(this,"_error",void 0),N(this,"_content",void 0),this.id=e,this.context=i,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let s=e;typeof e=="string"&&(s=C0(e)),s instanceof Promise?(this.isLoaded=!1,this._loader=s.then(A=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=A)}).catch(A=>{this._loadCount===i&&(this.isLoaded=!0,this._error=A||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const A of this._subscribers)A.onChange(this.getData())}}class RL{constructor({gl:e,protocol:t}){N(this,"protocol",void 0),N(this,"_context",void 0),N(this,"_resources",void 0),N(this,"_consumers",void 0),N(this,"_pruneRequest",void 0),this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:s=!0}){let A=this._resources[e];A?A.setData(t,i):(A=new CL(e,t,this._context),this._resources[e]=A),A.persistent=s}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const s=t[i],A=this._resources[s.resourceId];A&&A.unsubscribe(s)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:s="default"}){const{_resources:A,protocol:h}=this;e.startsWith(h)&&(e=e.replace(h,""),A[e]||this.add({resourceId:e,data:null,persistent:!1}));const m=A[e];if(this._track(i,s,m,t),m)return m.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,s){const A=this._consumers,h=A[e]=A[e]||{},m=h[t]||{},_=m.resourceId&&this._resources[m.resourceId];_&&(_.unsubscribe(m),this.prune()),i&&(h[t]=m,m.onChange=s,m.resourceId=i.id,i.subscribe(m))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const LL=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Il={name:"project32",dependencies:[Ep],vs:LL},Fl={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...qC},OL=[Ep],DL=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function NL(n){const e=Cc.getDefaultProgramManager(n);for(const t of OL)e.addDefaultModule(t);for(const t of DL)e.addShaderHook(t);return e}const BL="layerManager.setLayers",PL="layerManager.activateViewport";class IL{constructor(e,{deck:t,stats:i,viewport:s,timeline:A}={}){N(this,"layers",void 0),N(this,"context",void 0),N(this,"resourceManager",void 0),N(this,"_lastRenderedLayers",[]),N(this,"_needsRedraw",!1),N(this,"_needsUpdate",!1),N(this,"_nextLayers",null),N(this,"_debug",!1),N(this,"activateViewport",h=>{wi(PL,this,h),h&&(this.context.viewport=h)}),this.layers=[],this.resourceManager=new RL({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&NL(e),stats:i||new ip({id:"deck.gl"}),viewport:s||new Pl({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:A||new r3,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const s=i.getNeedsRedraw(e);t=t||s}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(t=>e.find(i=>t.id.indexOf(i)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){wi(BL,this,t,e),this._lastRenderedLayers=e;const i=xp(e,Boolean);for(const s of i)s.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const h of e)i[h.id]?Xt.warn("Multiple old layers with same id ".concat(h.id))():i[h.id]=h;const s=[];this._updateSublayersRecursively(t,i,s),this._finalizeOldLayers(i);let A=!1;for(const h of s)if(h.hasUniformTransition()){A="Uniform transition in ".concat(h);break}this._needsUpdate=A,this.layers=s}_updateSublayersRecursively(e,t,i){for(const s of e){s.context=this.context;const A=t[s.id];A===null&&Xt.warn("Multiple new layers with same id ".concat(s.id))(),t[s.id]=null;let h=null;try{this._debug&&A!==s&&s.validateProps(),A?(this._transferLayerState(A,s),this._updateLayer(s)):this._initializeLayer(s),i.push(s),h=s.isComposite?s.getSubLayers():null}catch(m){this._handleError("matching",m,s)}h&&this._updateSublayersRecursively(h,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=el.INITIALIZED}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle=el.MATCHED,t!==e&&(e.lifecycle=el.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=el.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=el.FINALIZED}catch(t){this._handleError("finalization",t,e)}}}function ns(n,e,t){if(n===e)return!0;if(!t||!n||!e)return!1;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let i=0;i<n.length;i++)if(!ns(n[i],e[i],t-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof n=="object"&&typeof e=="object"){const i=Object.keys(n),s=Object.keys(e);if(i.length!==s.length)return!1;for(const A of i)if(!e.hasOwnProperty(A)||!ns(n[A],e[A],t-1))return!1;return!0}return!1}class FL{constructor(e){N(this,"width",void 0),N(this,"height",void 0),N(this,"views",void 0),N(this,"viewState",void 0),N(this,"controllers",void 0),N(this,"timeline",void 0),N(this,"_viewports",void 0),N(this,"_viewportMap",void 0),N(this,"_isUpdating",void 0),N(this,"_needsRedraw",void 0),N(this,"_needsUpdate",void 0),N(this,"_eventManager",void 0),N(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return this.views.find(t=>t.id===e)}getViewState(e){const t=typeof e=="string"?this.getView(e):e,i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),s={x:e[0],y:e[1]};for(let A=i.length-1;A>=0;--A){const h=i[A];if(h.containsPixel(s)){const m=e.slice();return m[0]-=h.x,m[1]-=h.y,h.unproject(m,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=xp(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!ns(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Xt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){const i=t.type;return new i({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:A=>{var h;return(h=this.getView(e.id))===null||h===void 0?void 0:h.makeViewport({viewState:A,width:this.width,height:this.height})}})}_updateController(e,t,i,s){const A=e.controller;if(A&&i){const h={...t,...A,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return(!s||s.constructor!==A.type)&&(s=this._createController(e,h)),s&&s.setProps(h),s}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let s=e.length;s--;){const A=e[s],h=this.getViewState(A),m=A.makeViewport({viewState:h,width:this.width,height:this.height});let _=t[A.id];const E=!!A.controller;E&&!_&&(i=!0),(i||!E)&&_&&(_.finalize(),_=null),this.controllers[A.id]=this._updateController(A,h,m,_),m&&this._viewports.unshift(m)}for(const s in t){const A=t[s];A&&!this.controllers[s]&&A.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length?!0:e.some((i,s)=>!e[s].equals(t[s]))}}const UL=/([0-9]+\.?[0-9]*)(%|px)/;function Ga(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=UL.exec(n);if(e&&e.length>=3){const t=e[2]==="%",i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function Va(n,e){return n.relative?Math.round(n.position*e):n.position}function ui(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}class xl{constructor(e){N(this,"id",void 0),N(this,"viewportInstance",void 0),N(this,"_x",void 0),N(this,"_y",void 0),N(this,"_width",void 0),N(this,"_height",void 0),N(this,"_padding",void 0),N(this,"props",void 0);const{id:t,x:i=0,y:s=0,width:A="100%",height:h="100%",padding:m=null,viewportInstance:_}=e||{};ui(!_||_ instanceof Pl),this.viewportInstance=_,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Ga(i),this._y=Ga(s),this._width=Ga(A),this._height=Ga(h),this._padding=m&&{left:Ga(m.left||0),right:Ga(m.right||0),top:Ga(m.top||0),bottom:Ga(m.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&ns(this.props,e.props,2)}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const s=this.getDimensions({width:e,height:t});return!s.height||!s.width?null:new this.ViewportType({...i,...this.props,...s})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const i in this.props.viewState)i!=="id"&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){const i={x:Va(this._x,e),y:Va(this._y,t),width:Va(this._width,e),height:Va(this._height,t)};return this._padding&&(i.padding={left:Va(this._padding.left,e),top:Va(this._padding.top,t),right:Va(this._padding.right,e),bottom:Va(this._padding.bottom,t)}),i}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Lc{constructor(e){N(this,"_inProgress",void 0),N(this,"_handle",void 0),N(this,"_timeline",void 0),N(this,"time",void 0),N(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,i;this.cancel(),this.settings=e,this._inProgress=!0,(t=(i=this.settings).onStart)===null||t===void 0||t.call(i,this)}end(){if(this._inProgress){var e,t;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(t=this.settings).onEnd)===null||e===void 0||e.call(t,this)}}cancel(){if(this._inProgress){var e,t;(e=(t=this.settings).onInterrupt)===null||e===void 0||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,t;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:i,settings:s}=this;this._handle=i.addChannel({delay:i.getTime(),duration:s.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(t=this.settings).onUpdate)===null||e===void 0||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const Xb=()=>{},Rm={BREAK:1,SNAP_TO_END:2,IGNORE:3},kL=n=>n,zL=Rm.BREAK;class GL{constructor(e){N(this,"getControllerState",void 0),N(this,"props",void 0),N(this,"propsInTransition",void 0),N(this,"transition",void 0),N(this,"onViewStateChange",void 0),N(this,"onStateChange",void 0),N(this,"_onTransitionUpdate",t=>{const{time:i,settings:{interpolator:s,startProps:A,endProps:h,duration:m,easing:_}}=t,E=_(i/m),x=s.interpolateProps(A,h,E);this.propsInTransition=this.getControllerState({...this.props,...x}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Lc(e.timeline),this.onViewStateChange=e.onViewStateChange||Xb,this.onStateChange=e.onStateChange||Xb}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let s=i;if(this.transition.inProgress){const{interruption:A,endProps:h}=this.transition.settings;s={...i,...A===Rm.SNAP_TO_END?h:this.propsInTransition||i}}this._triggerTransition(s,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||t==="auto")&&!!i}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?this.transition.settings.interruption===Rm.IGNORE||this._isUpdateDueToCurrentTransition(t):this._isTransitionEnabled(t)?t.transitionInterpolator.arePropsEqual(e,t):!0}_triggerTransition(e,t){const i=this.getControllerState(e),s=this.getControllerState(t).shortestPathFrom(i),A=t.transitionInterpolator,h=A.getDuration?A.getDuration(e,t):t.transitionDuration;if(h===0)return;const m=A.initializeProps(e,s);this.propsInTransition={};const _={duration:h,easing:t.transitionEasing||kL,interpolator:A,interruption:t.transitionInterruption||zL,startProps:m.start,endProps:m.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(_),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(t)}}}class VL{constructor(e){N(this,"_propsToCompare",void 0),N(this,"_propsToExtract",void 0),N(this,"_requiredProps",void 0);const{compare:t,extract:i,required:s}=e;this._propsToCompare=t,this._propsToExtract=i||t,this._requiredProps=s}arePropsEqual(e,t){for(const i of this._propsToCompare)if(!(i in e)||!(i in t)||!oc(e[i],t[i]))return!1;return!0}initializeProps(e,t){const i={},s={};for(const A of this._propsToExtract)(A in e||A in t)&&(i[A]=e[A],s[A]=t[A]);return this._checkRequiredProps(i),this._checkRequiredProps(s),{start:i,end:s}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(t=>{const i=e[t];ui(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}const HL=["longitude","latitude","zoom","bearing","pitch"],jL=["longitude","latitude","zoom"];class E3 extends VL{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:HL,required:jL},super(i.transitionProps),N(this,"opts",void 0),this.opts=i}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:s,around:A}=this.opts;if(s&&A){const h=s(e),m=s(t),_=h.unproject(A);i.start.around=A,Object.assign(i.end,{around:m.project(_),aroundPosition:_,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const s={};for(const A of this._propsToExtract)s[A]=O0(e[A]||0,t[A]||0,i);if(t.aroundPosition&&this.opts.makeViewport){const A=this.opts.makeViewport({...t,...s});Object.assign(s,A.panByPosition(t.aroundPosition,O0(e.around,t.around,i)))}return s}}const Ha={transitionDuration:0},YL=300,r0=n=>1-(1-n)*(1-n),Ko={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},IA={};let QL=class{constructor(e){N(this,"props",void 0),N(this,"state",{}),N(this,"transitionManager",void 0),N(this,"eventManager",void 0),N(this,"onViewStateChange",void 0),N(this,"onStateChange",void 0),N(this,"makeViewport",void 0),N(this,"_controllerState",void 0),N(this,"_events",{}),N(this,"_interactionState",{isDragging:!1}),N(this,"_customEvents",[]),N(this,"_eventStartBlocked",null),N(this,"_panMove",!1),N(this,"invertPan",!1),N(this,"dragMode","rotate"),N(this,"inertia",0),N(this,"scrollZoom",!0),N(this,"dragPan",!0),N(this,"dragRotate",!0),N(this,"doubleClickZoom",!0),N(this,"touchZoom",!0),N(this,"touchRotate",!1),N(this,"keyboard",!0),this.transitionManager=new GL({...e,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)if(this._events[t]){var e;(e=this.eventManager)===null||e===void 0||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return t?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return t?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return t?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:i}=this.props,{offsetCenter:s}=e;return[s.x-t,s.y-i]}isPointInBounds(e,t){const{width:i,height:s}=this.props;if(t&&t.handled)return!1;const A=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=s;return A&&t&&t.stopPropagation(),A}isFunctionKeyPressed(e){const{srcEvent:t}=e;return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:t===!0?YL:0;const{scrollZoom:i=!0,dragPan:s=!0,dragRotate:A=!0,doubleClickZoom:h=!0,touchZoom:m=!0,touchRotate:_=!1,keyboard:E=!0}=e,x=!!this.onViewStateChange;this.toggleEvents(Ko.WHEEL,x&&i),this.toggleEvents(Ko.PAN,x),this.toggleEvents(Ko.PINCH,x&&(m||_)),this.toggleEvents(Ko.TRIPLE_PAN,x&&_),this.toggleEvents(Ko.DOUBLE_TAP,x&&h),this.toggleEvents(Ko.KEYBOARD,x&&E),this.scrollZoom=i,this.dragPan=s,this.dragRotate=A,this.doubleClickZoom=h,this.touchZoom=m,this.touchRotate=_,this.keyboard=E}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t=null,i={}){const s={...e.getViewportProps(),...t},A=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),A){const h=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:s,interactionState:this._interactionState,oldViewState:h})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(i=!i);const s=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(s,Ha,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,Ha,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),s=[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2],A=this.controllerState.pan({pos:s}).panEnd();this.updateViewport(A,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:r0},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,Ha,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),s=[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2],A=this.controllerState.rotate({pos:s}).rotateEnd();this.updateViewport(A,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:r0},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;e.srcEvent.preventDefault();const{speed:i=.01,smooth:s=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:A}=e;let h=2/(1+Math.exp(-Math.abs(A*i)));A<0&&h!==0&&(h=1/h);const m=this.controllerState.zoom({pos:t,scale:h});return this.updateViewport(m,{...this._getTransitionProps({around:t}),transitionDuration:s?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,Ha,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,Ha,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),s=[i[0],i[1]+=e.velocityY*t/2],A=this.controllerState.rotate({pos:s});this.updateViewport(A,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:r0},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return IA._startPinchRotation=e.rotation,IA._lastPinchEvent=e,this.updateViewport(i,Ha,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,s=this.getCenter(e);t=t.zoom({pos:s,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:IA._startPinchRotation-i})}return this.updateViewport(t,Ha,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),IA._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:i}=IA;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const s=this.getCenter(e);let A=this.controllerState.rotateEnd();const h=Math.log2(e.scale),m=(h-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),_=Math.pow(2,h+m*t/2);A=A.zoom({pos:s,scale:_}).zoomEnd(),this.updateViewport(A,{...this._getTransitionProps({around:s}),transitionDuration:t,transitionEasing:r0},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const s=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(s,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return IA._startPinchRotation=null,IA._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),s=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(s,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:s,rotateSpeedX:A,rotateSpeedY:h}=this.keyboard===!0?{}:this.keyboard,{controllerState:m}=this;let _;const E={};switch(e.srcEvent.code){case"Minus":_=t?m.zoomOut(i).zoomOut(i):m.zoomOut(i),E.isZooming=!0;break;case"Equal":_=t?m.zoomIn(i).zoomIn(i):m.zoomIn(i),E.isZooming=!0;break;case"ArrowLeft":t?(_=m.rotateLeft(A),E.isRotating=!0):(_=m.moveLeft(s),E.isPanning=!0);break;case"ArrowRight":t?(_=m.rotateRight(A),E.isRotating=!0):(_=m.moveRight(s),E.isPanning=!0);break;case"ArrowUp":t?(_=m.rotateUp(h),E.isRotating=!0):(_=m.moveUp(s),E.isPanning=!0);break;case"ArrowDown":t?(_=m.rotateDown(h),E.isRotating=!0):(_=m.moveDown(s),E.isPanning=!0);break;default:return!1}return this.updateViewport(_,this._getTransitionProps(),E),!0}_getTransitionProps(e){const{transition:t}=this;return!t||!t.transitionInterpolator?Ha:e?{...t,transitionInterpolator:new E3({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t}};class XL{constructor(e,t){N(this,"_viewportProps",void 0),N(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}const Wb=5,WL=1.2;class qL extends XL{constructor(e){const{width:t,height:i,latitude:s,longitude:A,zoom:h,bearing:m=0,pitch:_=0,altitude:E=1.5,position:x=[0,0,0],maxZoom:S=20,minZoom:C=0,maxPitch:L=60,minPitch:B=0,startPanLngLat:G,startZoomLngLat:j,startRotatePos:H,startBearing:Y,startPitch:K,startZoom:ee,normalize:Z=!0}=e;ui(Number.isFinite(A)),ui(Number.isFinite(s)),ui(Number.isFinite(h)),super({width:t,height:i,latitude:s,longitude:A,zoom:h,bearing:m,pitch:_,altitude:E,maxZoom:S,minZoom:C,maxPitch:L,minPitch:B,normalize:Z,position:x},{startPanLngLat:G,startZoomLngLat:j,startRotatePos:H,startBearing:Y,startPitch:K,startZoom:ee}),N(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this.getState().startPanLngLat||this._unproject(t);if(!i)return this;const A=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(A)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:s,startBearing:A,startPitch:h}=this.getState();if(!s||A===void 0||h===void 0)return this;let m;return e?m=this._getNewRotation(e,s,h,A):m={bearing:A+t,pitch:h+i},this._getUpdatedState(m)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:s,startZoomLngLat:A}=this.getState();if(A||(s=this.getViewportProps().zoom,A=this._unproject(t)||this._unproject(e)),!A)return this;const{maxZoom:h,minZoom:m}=this.getViewportProps();let _=s+Math.log2(i);_=Qa(_,m,h);const E=this.makeViewport({...this.getViewportProps(),zoom:_});return this._getUpdatedState({zoom:_,...E.panByPosition(A,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{bearing:s,longitude:A}=i;return Math.abs(s-t.bearing)>180&&(i.bearing=s<0?s+360:s-360),Math.abs(A-t.longitude)>180&&(i.longitude=A<0?A+360:A-360),i}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:s}=e;e.zoom=Qa(s,i,t);const{maxPitch:A,minPitch:h,pitch:m}=e;e.pitch=Qa(m,h,A);const{normalize:_=!0}=e;return _&&Object.assign(e,tL(e)),e}_zoomFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,i,s){const A=e[0]-t[0],h=e[1]-t[1],m=e[1],_=t[1],{width:E,height:x}=this.getViewportProps(),S=A/E;let C=0;h>0?Math.abs(x-_)>Wb&&(C=h/(_-x)*WL):h<0&&_>Wb&&(C=1-m/_),C=Qa(C,-1,1);const{minPitch:L,maxPitch:B}=this.getViewportProps(),G=s+180*S;let j=i;return C>0?j=i+C*(B-i):C<0&&(j=i-C*(L-i)),{pitch:j,bearing:G}}}class ZL extends QL{constructor(...e){super(...e),N(this,"ControllerState",qL),N(this,"transition",{transitionDuration:300,transitionInterpolator:new E3({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),N(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class y3 extends xl{get ViewportType(){return wl}get ControllerType(){return ZL}}N(y3,"displayName","MapView");const KL=new m3;function $L(n,e){var t,i;const s=(t=n.order)!==null&&t!==void 0?t:1/0,A=(i=e.order)!==null&&i!==void 0?i:1/0;return s-A}class JL{constructor(){N(this,"effects",void 0),N(this,"_resolvedEffects",[]),N(this,"_defaultEffects",[]),N(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const t=this._defaultEffects;if(!t.find(i=>i.id===e.id)){const i=t.findIndex(s=>$L(s,e)>0);i<0?t.push(e):t.splice(i,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(ns(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._resolvedEffects}_setEffects(e){const t={};for(const s of this.effects)t[s.id]=s;const i=[];for(const s of e){const A=t[s.id];A&&A!==s?A.setProps?(A.setProps(s.props),i.push(A)):(A.cleanup(),i.push(s)):i.push(s),delete t[s.id]}for(const s in t)t[s].cleanup();this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),e.some(s=>s instanceof m3)||this._resolvedEffects.push(KL),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class eO extends bp{shouldDrawLayer(e){const{operation:t}=e.props;return t.includes("draw")||t.includes("terrain")}}const tO="deckRenderer.renderLayers";class nO{constructor(e){N(this,"gl",void 0),N(this,"layerFilter",void 0),N(this,"drawPickingColors",void 0),N(this,"drawLayersPass",void 0),N(this,"pickLayersPass",void 0),N(this,"renderCount",void 0),N(this,"_needsRedraw",void 0),N(this,"renderBuffers",void 0),N(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new eO(e),this.pickLayersPass=new _3(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||jn.getDefaultFramebuffer(this.gl)};i.effects&&this._preRender(i.effects,i);const s=this.lastPostProcessEffect?this.renderBuffers[0]:i.target,A=t.render({...i,target:s});i.effects&&this._postRender(i.effects,i),this.renderCount++,wi(tO,this,A,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){this.lastPostProcessEffect=null,t.preRenderStats=t.preRenderStats||{};for(const i of e)t.preRenderStats[i.id]=i.preRender(this.gl,t),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new jn(this.gl),new jn(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,s={...t,inputBuffer:i[0],swapBuffer:i[1],target:null};for(const A of e)if(A.postRender){if(A.id===this.lastPostProcessEffect){s.target=t.target,A.postRender(this.gl,s);break}const h=A.postRender(this.gl,s);s.inputBuffer=h,s.swapBuffer=h===i[0]?i[1]:i[0]}}}const iO={pickedColor:null,pickedObjectIndex:-1};function rO({pickedColors:n,decodePickingColor:e,deviceX:t,deviceY:i,deviceRadius:s,deviceRect:A}){const{x:h,y:m,width:_,height:E}=A;let x=s*s,S=-1,C=0;for(let L=0;L<E;L++){const B=L+m-i,G=B*B;if(G>x)C+=4*_;else for(let j=0;j<_;j++){if(n[C+3]-1>=0){const Y=j+h-t,K=Y*Y+G;K<=x&&(x=K,S=C)}C+=4}}if(S>=0){const L=n.slice(S,S+4),B=e(L);if(B){const G=Math.floor(S/4/_),j=S/4-G*_;return{...B,pickedColor:L,pickedX:h+j,pickedY:m+G}}Xt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return iO}function sO({pickedColors:n,decodePickingColor:e}){const t=new Map;if(n){for(let i=0;i<n.length;i+=4)if(n[i+3]-1>=0){const A=n.slice(i,i+4),h=A.join(",");if(!t.has(h)){const m=e(A);m?t.set(h,{...m,color:A}):Xt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(t.values())}function v3({pickInfo:n,viewports:e,pixelRatio:t,x:i,y:s,z:A}){let h=e[0];e.length>1&&(h=AO((n==null?void 0:n.pickedViewports)||e,{x:i,y:s}));let m;if(h){const _=[i-h.x,s-h.y];A!==void 0&&(_[2]=A),m=h.unproject(_)}return{color:null,layer:null,viewport:h,index:-1,picked:!1,x:i,y:s,pixel:[i,s],coordinate:m,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:t}}function aO(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:s}=n,{pickedColor:A,pickedLayer:h,pickedObjectIndex:m}=e,_=h?[h]:[];if(i==="hover"){const S=t.index,C=t.layerId,L=h?h.props.id:null;if(L!==C||m!==S){if(L!==C){const B=s.find(G=>G.props.id===C);B&&_.unshift(B)}t.layerId=L,t.index=m,t.info=null}}const E=v3(n),x=new Map;return x.set(null,E),_.forEach(S=>{let C={...E};S===h&&(C.color=A,C.index=m,C.picked=!0),C=T3({layer:S,info:C,mode:i});const L=C.layer;S===h&&i==="hover"&&(t.info=C),x.set(L.id,C),i==="hover"&&L.updateAutoHighlight(C)}),x}function T3({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}function AO(n,e){for(let t=n.length-1;t>=0;t--){const i=n[t];if(i.containsPixel(e))return i}return n[0]}class oO{constructor(e){N(this,"gl",void 0),N(this,"pickingFBO",void 0),N(this,"depthFBO",void 0),N(this,"pickLayersPass",void 0),N(this,"layerFilter",void 0),N(this,"lastPickedInfo",void 0),N(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new _3(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:s},A=this.lastPickedInfo.info){const h=A&&A.layer&&A.layer.id,m=A&&A.viewport&&A.viewport.id,_=h?i.find(C=>C.id===h):null,E=m&&s.find(C=>C.id===m)||s[0],x=E&&E.unproject([e-E.x,t-E.y]);return{...A,...{x:e,y:t,viewport:E,coordinate:x,layer:_}}}_resizeBuffer(){var e,t;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new jn(i),jn.isSupported(i,{colorBufferFloat:!0}))){const s=new jn(i);s.attach({36064:new fr(i,{format:Ut(i)?34836:6408,type:5126})}),this.depthFBO=s}(e=this.pickingFBO)===null||e===void 0||e.resize({width:i.canvas.width,height:i.canvas.height}),(t=this.depthFBO)===null||t===void 0||t.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const t=e.filter(i=>this.pickLayersPass.shouldDrawLayer(i)&&!i.isComposite);return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:s,y:A,radius:h=0,depth:m=1,mode:_="query",unproject3D:E,onViewportActive:x,effects:S}){const C=this._getPickable(e),L=pl(this.gl);if(!C)return{result:[],emptyInfo:v3({viewports:i,x:s,y:A,pixelRatio:L})};this._resizeBuffer();const B=bg(this.gl,[s,A],!0),G=[B.x+Math.floor(B.width/2),B.y+Math.floor(B.height/2)],j=Math.round(h*L),{width:H,height:Y}=this.pickingFBO,K=this._getPickingRect({deviceX:G[0],deviceY:G[1],deviceRadius:j,deviceWidth:H,deviceHeight:Y}),ee={x:s-h,y:A-h,width:h*2+1,height:h*2+1};let Z;const se=[],be=new Set;for(let he=0;he<m;he++){let Ae;if(K){const me=this._drawAndSample({layers:C,views:t,viewports:i,onViewportActive:x,deviceRect:K,cullRect:ee,effects:S,pass:"picking:".concat(_)});Ae=rO({...me,deviceX:G[0],deviceY:G[1],deviceRadius:j,deviceRect:K})}else Ae={pickedColor:null,pickedObjectIndex:-1};let ye;if(Ae.pickedLayer&&E&&this.depthFBO){const{pickedColors:me}=this._drawAndSample({layers:[Ae.pickedLayer],views:t,viewports:i,onViewportActive:x,deviceRect:{x:Ae.pickedX,y:Ae.pickedY,width:1,height:1},cullRect:ee,effects:S,pass:"picking:".concat(_,":z")},!0);me[3]&&(ye=me[0])}Ae.pickedLayer&&he+1<m&&(be.add(Ae.pickedLayer),Ae.pickedLayer.disablePickingIndex(Ae.pickedObjectIndex)),Z=aO({pickInfo:Ae,lastPickedInfo:this.lastPickedInfo,mode:_,layers:C,viewports:i,x:s,y:A,z:ye,pixelRatio:L});for(const me of Z.values())me.layer&&se.push(me);if(!Ae.pickedColor)break}for(const he of be)he.restorePickingColors();return{result:se,emptyInfo:Z.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:s,y:A,width:h=1,height:m=1,mode:_="query",maxObjects:E=null,onViewportActive:x,effects:S}){const C=this._getPickable(e);if(!C)return[];this._resizeBuffer();const L=pl(this.gl),B=bg(this.gl,[s,A],!0),G=B.x,j=B.y+B.height,H=bg(this.gl,[s+h,A+m],!0),Y=H.x+H.width,K=H.y,ee={x:G,y:K,width:Y-G,height:j-K},Z=this._drawAndSample({layers:C,views:t,viewports:i,onViewportActive:x,deviceRect:ee,cullRect:{x:s,y:A,width:h,height:m},effects:S,pass:"picking:".concat(_)}),se=sO(Z),be=new Map,he=Number.isFinite(E);for(let ye=0;ye<se.length;ye++){var Ae;if(he&&E&&be.size>=E)break;const me=se[ye];let Ne={color:me.pickedColor,layer:null,index:me.pickedObjectIndex,picked:!0,x:s,y:A,pixelRatio:L};Ne=T3({layer:me.pickedLayer,info:Ne,mode:_});const Be=(Ae=Ne.object)!==null&&Ae!==void 0?Ae:"".concat(Ne.layer.id,"[").concat(Ne.index,"]");be.has(Be)||be.set(Be,Ne)}return Array.from(be.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:s,deviceRect:A,cullRect:h,effects:m,pass:_},E=!1){const x=E?this.depthFBO:this.pickingFBO,S={layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:s,pickingFBO:x,deviceRect:A,cullRect:h,effects:m,pass:_,pickZ:E,preRenderStats:{}};for(const Y of m)Y.useInPicking&&(S.preRenderStats[Y.id]=Y.preRender(this.gl,S));const{decodePickingColor:C}=this.pickLayersPass.render(S),{x:L,y:B,width:G,height:j}=A,H=new(E?Float32Array:Uint8Array)(G*j*4);return ih(x,{sourceX:L,sourceY:B,sourceWidth:G,sourceHeight:j,target:H}),{pickedColors:H,decodePickingColor:C}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:s,deviceHeight:A}){const h=Math.max(0,e-i),m=Math.max(0,t-i),_=Math.min(s,e+i+1)-h,E=Math.min(A,t+i+1)-m;return _<=0||E<=0?null:{x:h,y:m,width:_,height:E}}}const lO={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class uO{constructor(e){N(this,"el",null),N(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,lO),t.appendChild(this.el))}setTooltip(e,t,i){const s=this.el;if(s){if(typeof e=="string")s.innerText=e;else if(e)e.text&&(s.innerText=e.text),e.html&&(s.innerHTML=e.html),e.className&&(s.className=e.className);else{this.isVisible=!1,s.style.display="none";return}this.isVisible=!0,s.style.display="block",s.style.transform="translate(".concat(t,"px, ").concat(i,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(s.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Ig={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var qb;function cO(){return qb||(qb=1,function(n){(function(e,t,i,s){var A=["","webkit","Moz","MS","ms","o"],h=t.createElement("div"),m="function",_=Math.round,E=Math.abs,x=Date.now;function S(P,k,X){return setTimeout(K(P,X),k)}function C(P,k,X){return Array.isArray(P)?(L(P,X[k],X),!0):!1}function L(P,k,X){var fe;if(P)if(P.forEach)P.forEach(k,X);else if(P.length!==s)for(fe=0;fe<P.length;)k.call(X,P[fe],fe,P),fe++;else for(fe in P)P.hasOwnProperty(fe)&&k.call(X,P[fe],fe,P)}function B(P,k,X){var fe="DEPRECATED METHOD: "+k+`
`+X+` AT 
`;return function(){var Le=new Error("get-stack-trace"),Ye=Le&&Le.stack?Le.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",yt=e.console&&(e.console.warn||e.console.log);return yt&&yt.call(e.console,fe,Ye),P.apply(this,arguments)}}var G;typeof Object.assign!="function"?G=function(k){if(k===s||k===null)throw new TypeError("Cannot convert undefined or null to object");for(var X=Object(k),fe=1;fe<arguments.length;fe++){var Le=arguments[fe];if(Le!==s&&Le!==null)for(var Ye in Le)Le.hasOwnProperty(Ye)&&(X[Ye]=Le[Ye])}return X}:G=Object.assign;var j=B(function(k,X,fe){for(var Le=Object.keys(X),Ye=0;Ye<Le.length;)(!fe||fe&&k[Le[Ye]]===s)&&(k[Le[Ye]]=X[Le[Ye]]),Ye++;return k},"extend","Use `assign`."),H=B(function(k,X){return j(k,X,!0)},"merge","Use `assign`.");function Y(P,k,X){var fe=k.prototype,Le;Le=P.prototype=Object.create(fe),Le.constructor=P,Le._super=fe,X&&G(Le,X)}function K(P,k){return function(){return P.apply(k,arguments)}}function ee(P,k){return typeof P==m?P.apply(k&&k[0]||s,k):P}function Z(P,k){return P===s?k:P}function se(P,k,X){L(ye(k),function(fe){P.addEventListener(fe,X,!1)})}function be(P,k,X){L(ye(k),function(fe){P.removeEventListener(fe,X,!1)})}function he(P,k){for(;P;){if(P==k)return!0;P=P.parentNode}return!1}function Ae(P,k){return P.indexOf(k)>-1}function ye(P){return P.trim().split(/\s+/g)}function me(P,k,X){if(P.indexOf&&!X)return P.indexOf(k);for(var fe=0;fe<P.length;){if(X&&P[fe][X]==k||!X&&P[fe]===k)return fe;fe++}return-1}function Ne(P){return Array.prototype.slice.call(P,0)}function Be(P,k,X){for(var fe=[],Le=[],Ye=0;Ye<P.length;){var yt=P[Ye][k];me(Le,yt)<0&&fe.push(P[Ye]),Le[Ye]=yt,Ye++}return fe=fe.sort(function(Ln,vn){return Ln[k]>vn[k]}),fe}function He(P,k){for(var X,fe,Le=k[0].toUpperCase()+k.slice(1),Ye=0;Ye<A.length;){if(X=A[Ye],fe=X?X+Le:k,fe in P)return fe;Ye++}return s}var je=1;function Te(){return je++}function We(P){var k=P.ownerDocument||P;return k.defaultView||k.parentWindow||e}var $e=/mobile|tablet|ip(ad|hone|od)|android/i,Et="ontouchstart"in e,te=He(e,"PointerEvent")!==s,De=Et&&$e.test(navigator.userAgent),Je="touch",nt="pen",Ve="mouse",Lt="kinect",_t=25,kt=1,St=2,Me=4,Ge=8,lt=1,Ce=2,qt=4,Nt=8,An=16,jt=Ce|qt,nn=Nt|An,hi=jt|nn,ta=["x","y"],Ur=["clientX","clientY"];function on(P,k){var X=this;this.manager=P,this.callback=k,this.element=P.element,this.target=P.options.inputTarget,this.domHandler=function(fe){ee(P.options.enable,[P])&&X.handler(fe)},this.init()}on.prototype={handler:function(){},init:function(){this.evEl&&se(this.element,this.evEl,this.domHandler),this.evTarget&&se(this.target,this.evTarget,this.domHandler),this.evWin&&se(We(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&be(this.element,this.evEl,this.domHandler),this.evTarget&&be(this.target,this.evTarget,this.domHandler),this.evWin&&be(We(this.element),this.evWin,this.domHandler)}};function nA(P){var k,X=P.options.inputClass;return X?k=X:te?k=Se:De?k=gs:Et?k=oe:k=ra,new k(P,no)}function no(P,k,X){var fe=X.pointers.length,Le=X.changedPointers.length,Ye=k&kt&&fe-Le===0,yt=k&(Me|Ge)&&fe-Le===0;X.isFirst=!!Ye,X.isFinal=!!yt,Ye&&(P.session={}),X.eventType=k,Fn(P,X),P.emit("hammer.input",X),P.recognize(X),P.session.prevInput=X}function Fn(P,k){var X=P.session,fe=k.pointers,Le=fe.length;X.firstInput||(X.firstInput=rA(k)),Le>1&&!X.firstMultiple?X.firstMultiple=rA(k):Le===1&&(X.firstMultiple=!1);var Ye=X.firstInput,yt=X.firstMultiple,yn=yt?yt.center:Ye.center,Ln=k.center=kr(fe);k.timeStamp=x(),k.deltaTime=k.timeStamp-Ye.timeStamp,k.angle=ia(yn,Ln),k.distance=na(yn,Ln),iA(X,k),k.offsetDirection=aA(k.deltaX,k.deltaY);var vn=sA(k.deltaTime,k.deltaX,k.deltaY);k.overallVelocityX=vn.x,k.overallVelocityY=vn.y,k.overallVelocity=E(vn.x)>E(vn.y)?vn.x:vn.y,k.scale=yt?ii(yt.pointers,fe):1,k.rotation=yt?fs(yt.pointers,fe):0,k.maxPointers=X.prevInput?k.pointers.length>X.prevInput.maxPointers?k.pointers.length:X.prevInput.maxPointers:k.pointers.length,io(X,k);var Ct=P.element;he(k.srcEvent.target,Ct)&&(Ct=k.srcEvent.target),k.target=Ct}function iA(P,k){var X=k.center,fe=P.offsetDelta||{},Le=P.prevDelta||{},Ye=P.prevInput||{};(k.eventType===kt||Ye.eventType===Me)&&(Le=P.prevDelta={x:Ye.deltaX||0,y:Ye.deltaY||0},fe=P.offsetDelta={x:X.x,y:X.y}),k.deltaX=Le.x+(X.x-fe.x),k.deltaY=Le.y+(X.y-fe.y)}function io(P,k){var X=P.lastInterval||k,fe=k.timeStamp-X.timeStamp,Le,Ye,yt,yn;if(k.eventType!=Ge&&(fe>_t||X.velocity===s)){var Ln=k.deltaX-X.deltaX,vn=k.deltaY-X.deltaY,Ct=sA(fe,Ln,vn);Ye=Ct.x,yt=Ct.y,Le=E(Ct.x)>E(Ct.y)?Ct.x:Ct.y,yn=aA(Ln,vn),P.lastInterval=k}else Le=X.velocity,Ye=X.velocityX,yt=X.velocityY,yn=X.direction;k.velocity=Le,k.velocityX=Ye,k.velocityY=yt,k.direction=yn}function rA(P){for(var k=[],X=0;X<P.pointers.length;)k[X]={clientX:_(P.pointers[X].clientX),clientY:_(P.pointers[X].clientY)},X++;return{timeStamp:x(),pointers:k,center:kr(k),deltaX:P.deltaX,deltaY:P.deltaY}}function kr(P){var k=P.length;if(k===1)return{x:_(P[0].clientX),y:_(P[0].clientY)};for(var X=0,fe=0,Le=0;Le<k;)X+=P[Le].clientX,fe+=P[Le].clientY,Le++;return{x:_(X/k),y:_(fe/k)}}function sA(P,k,X){return{x:k/P||0,y:X/P||0}}function aA(P,k){return P===k?lt:E(P)>=E(k)?P<0?Ce:qt:k<0?Nt:An}function na(P,k,X){X||(X=ta);var fe=k[X[0]]-P[X[0]],Le=k[X[1]]-P[X[1]];return Math.sqrt(fe*fe+Le*Le)}function ia(P,k,X){X||(X=ta);var fe=k[X[0]]-P[X[0]],Le=k[X[1]]-P[X[1]];return Math.atan2(Le,fe)*180/Math.PI}function fs(P,k){return ia(k[1],k[0],Ur)+ia(P[1],P[0],Ur)}function ii(P,k){return na(k[0],k[1],Ur)/na(P[0],P[1],Ur)}var kl={mousedown:kt,mousemove:St,mouseup:Me},Qi="mousedown",ri="mousemove mouseup";function ra(){this.evEl=Qi,this.evWin=ri,this.pressed=!1,on.apply(this,arguments)}Y(ra,on,{handler:function(k){var X=kl[k.type];X&kt&&k.button===0&&(this.pressed=!0),X&St&&k.which!==1&&(X=Me),this.pressed&&(X&Me&&(this.pressed=!1),this.callback(this.manager,X,{pointers:[k],changedPointers:[k],pointerType:Ve,srcEvent:k}))}});var zl={pointerdown:kt,pointermove:St,pointerup:Me,pointercancel:Ge,pointerout:Ge},AA={2:Je,3:nt,4:Ve,5:Lt},hs="pointerdown",ds="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(hs="MSPointerDown",ds="MSPointerMove MSPointerUp MSPointerCancel");function Se(){this.evEl=hs,this.evWin=ds,on.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Y(Se,on,{handler:function(k){var X=this.store,fe=!1,Le=k.type.toLowerCase().replace("ms",""),Ye=zl[Le],yt=AA[k.pointerType]||k.pointerType,yn=yt==Je,Ln=me(X,k.pointerId,"pointerId");Ye&kt&&(k.button===0||yn)?Ln<0&&(X.push(k),Ln=X.length-1):Ye&(Me|Ge)&&(fe=!0),!(Ln<0)&&(X[Ln]=k,this.callback(this.manager,Ye,{pointers:X,changedPointers:[k],pointerType:yt,srcEvent:k}),fe&&X.splice(Ln,1))}});var sa={touchstart:kt,touchmove:St,touchend:Me,touchcancel:Ge},zr="touchstart",Gl="touchstart touchmove touchend touchcancel";function oA(){this.evTarget=zr,this.evWin=Gl,this.started=!1,on.apply(this,arguments)}Y(oA,on,{handler:function(k){var X=sa[k.type];if(X===kt&&(this.started=!0),!!this.started){var fe=aa.call(this,k,X);X&(Me|Ge)&&fe[0].length-fe[1].length===0&&(this.started=!1),this.callback(this.manager,X,{pointers:fe[0],changedPointers:fe[1],pointerType:Je,srcEvent:k})}}});function aa(P,k){var X=Ne(P.touches),fe=Ne(P.changedTouches);return k&(Me|Ge)&&(X=Be(X.concat(fe),"identifier")),[X,fe]}var Aa={touchstart:kt,touchmove:St,touchend:Me,touchcancel:Ge},Gr="touchstart touchmove touchend touchcancel";function gs(){this.evTarget=Gr,this.targetIds={},on.apply(this,arguments)}Y(gs,on,{handler:function(k){var X=Aa[k.type],fe=ms.call(this,k,X);fe&&this.callback(this.manager,X,{pointers:fe[0],changedPointers:fe[1],pointerType:Je,srcEvent:k})}});function ms(P,k){var X=Ne(P.touches),fe=this.targetIds;if(k&(kt|St)&&X.length===1)return fe[X[0].identifier]=!0,[X,X];var Le,Ye,yt=Ne(P.changedTouches),yn=[],Ln=this.target;if(Ye=X.filter(function(vn){return he(vn.target,Ln)}),k===kt)for(Le=0;Le<Ye.length;)fe[Ye[Le].identifier]=!0,Le++;for(Le=0;Le<yt.length;)fe[yt[Le].identifier]&&yn.push(yt[Le]),k&(Me|Ge)&&delete fe[yt[Le].identifier],Le++;if(yn.length)return[Be(Ye.concat(yn),"identifier"),yn]}var oa=2500,Xi=25;function oe(){on.apply(this,arguments);var P=K(this.handler,this);this.touch=new gs(this.manager,P),this.mouse=new ra(this.manager,P),this.primaryTouch=null,this.lastTouches=[]}Y(oe,on,{handler:function(k,X,fe){var Le=fe.pointerType==Je,Ye=fe.pointerType==Ve;if(!(Ye&&fe.sourceCapabilities&&fe.sourceCapabilities.firesTouchEvents)){if(Le)ve.call(this,X,fe);else if(Ye&&Xe.call(this,fe))return;this.callback(k,X,fe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ve(P,k){P&kt?(this.primaryTouch=k.changedPointers[0].identifier,Pe.call(this,k)):P&(Me|Ge)&&Pe.call(this,k)}function Pe(P){var k=P.changedPointers[0];if(k.identifier===this.primaryTouch){var X={x:k.clientX,y:k.clientY};this.lastTouches.push(X);var fe=this.lastTouches,Le=function(){var Ye=fe.indexOf(X);Ye>-1&&fe.splice(Ye,1)};setTimeout(Le,oa)}}function Xe(P){for(var k=P.srcEvent.clientX,X=P.srcEvent.clientY,fe=0;fe<this.lastTouches.length;fe++){var Le=this.lastTouches[fe],Ye=Math.abs(k-Le.x),yt=Math.abs(X-Le.y);if(Ye<=Xi&&yt<=Xi)return!0}return!1}var u=He(h.style,"touchAction"),U=u!==s,Mt="compute",zt="auto",dn="manipulation",At="none",bt="pan-x",Yn="pan-y",wt=Wi();function at(P,k){this.manager=P,this.set(k)}at.prototype={set:function(P){P==Mt&&(P=this.compute()),U&&this.manager.element.style&&wt[P]&&(this.manager.element.style[u]=P),this.actions=P.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var P=[];return L(this.manager.recognizers,function(k){ee(k.options.enable,[k])&&(P=P.concat(k.getTouchAction()))}),On(P.join(" "))},preventDefaults:function(P){var k=P.srcEvent,X=P.offsetDirection;if(this.manager.session.prevented){k.preventDefault();return}var fe=this.actions,Le=Ae(fe,At)&&!wt[At],Ye=Ae(fe,Yn)&&!wt[Yn],yt=Ae(fe,bt)&&!wt[bt];if(Le){var yn=P.pointers.length===1,Ln=P.distance<2,vn=P.deltaTime<250;if(yn&&Ln&&vn)return}if(!(yt&&Ye)&&(Le||Ye&&X&jt||yt&&X&nn))return this.preventSrc(k)},preventSrc:function(P){this.manager.session.prevented=!0,P.preventDefault()}};function On(P){if(Ae(P,At))return At;var k=Ae(P,bt),X=Ae(P,Yn);return k&&X?At:k||X?k?bt:Yn:Ae(P,dn)?dn:zt}function Wi(){if(!U)return!1;var P={},k=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(X){P[X]=k?e.CSS.supports("touch-action",X):!0}),P}var fn=1,Un=2,En=4,mn=8,rn=mn,kn=16,Ii=32;function Dn(P){this.options=G({},this.defaults,P||{}),this.id=Te(),this.manager=null,this.options.enable=Z(this.options.enable,!0),this.state=fn,this.simultaneous={},this.requireFail=[]}Dn.prototype={defaults:{},set:function(P){return G(this.options,P),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(P){if(C(P,"recognizeWith",this))return this;var k=this.simultaneous;return P=et(P,this),k[P.id]||(k[P.id]=P,P.recognizeWith(this)),this},dropRecognizeWith:function(P){return C(P,"dropRecognizeWith",this)?this:(P=et(P,this),delete this.simultaneous[P.id],this)},requireFailure:function(P){if(C(P,"requireFailure",this))return this;var k=this.requireFail;return P=et(P,this),me(k,P)===-1&&(k.push(P),P.requireFailure(this)),this},dropRequireFailure:function(P){if(C(P,"dropRequireFailure",this))return this;P=et(P,this);var k=me(this.requireFail,P);return k>-1&&this.requireFail.splice(k,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(P){return!!this.simultaneous[P.id]},emit:function(P){var k=this,X=this.state;function fe(Le){k.manager.emit(Le,P)}X<mn&&fe(k.options.event+ht(X)),fe(k.options.event),P.additionalEvent&&fe(P.additionalEvent),X>=mn&&fe(k.options.event+ht(X))},tryEmit:function(P){if(this.canEmit())return this.emit(P);this.state=Ii},canEmit:function(){for(var P=0;P<this.requireFail.length;){if(!(this.requireFail[P].state&(Ii|fn)))return!1;P++}return!0},recognize:function(P){var k=G({},P);if(!ee(this.options.enable,[this,k])){this.reset(),this.state=Ii;return}this.state&(rn|kn|Ii)&&(this.state=fn),this.state=this.process(k),this.state&(Un|En|mn|kn)&&this.tryEmit(k)},process:function(P){},getTouchAction:function(){},reset:function(){}};function ht(P){return P&kn?"cancel":P&mn?"end":P&En?"move":P&Un?"start":""}function V(P){return P==An?"down":P==Nt?"up":P==Ce?"left":P==qt?"right":""}function et(P,k){var X=k.manager;return X?X.get(P):P}function zn(){Dn.apply(this,arguments)}Y(zn,Dn,{defaults:{pointers:1},attrTest:function(P){var k=this.options.pointers;return k===0||P.pointers.length===k},process:function(P){var k=this.state,X=P.eventType,fe=k&(Un|En),Le=this.attrTest(P);return fe&&(X&Ge||!Le)?k|kn:fe||Le?X&Me?k|mn:k&Un?k|En:Un:Ii}});function di(){zn.apply(this,arguments),this.pX=null,this.pY=null}Y(di,zn,{defaults:{event:"pan",threshold:10,pointers:1,direction:hi},getTouchAction:function(){var P=this.options.direction,k=[];return P&jt&&k.push(Yn),P&nn&&k.push(bt),k},directionTest:function(P){var k=this.options,X=!0,fe=P.distance,Le=P.direction,Ye=P.deltaX,yt=P.deltaY;return Le&k.direction||(k.direction&jt?(Le=Ye===0?lt:Ye<0?Ce:qt,X=Ye!=this.pX,fe=Math.abs(P.deltaX)):(Le=yt===0?lt:yt<0?Nt:An,X=yt!=this.pY,fe=Math.abs(P.deltaY))),P.direction=Le,X&&fe>k.threshold&&Le&k.direction},attrTest:function(P){return zn.prototype.attrTest.call(this,P)&&(this.state&Un||!(this.state&Un)&&this.directionTest(P))},emit:function(P){this.pX=P.deltaX,this.pY=P.deltaY;var k=V(P.direction);k&&(P.additionalEvent=this.options.event+k),this._super.emit.call(this,P)}});function Qn(){zn.apply(this,arguments)}Y(Qn,zn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[At]},attrTest:function(P){return this._super.attrTest.call(this,P)&&(Math.abs(P.scale-1)>this.options.threshold||this.state&Un)},emit:function(P){if(P.scale!==1){var k=P.scale<1?"in":"out";P.additionalEvent=this.options.event+k}this._super.emit.call(this,P)}});function la(){Dn.apply(this,arguments),this._timer=null,this._input=null}Y(la,Dn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[zt]},process:function(P){var k=this.options,X=P.pointers.length===k.pointers,fe=P.distance<k.threshold,Le=P.deltaTime>k.time;if(this._input=P,!fe||!X||P.eventType&(Me|Ge)&&!Le)this.reset();else if(P.eventType&kt)this.reset(),this._timer=S(function(){this.state=rn,this.tryEmit()},k.time,this);else if(P.eventType&Me)return rn;return Ii},reset:function(){clearTimeout(this._timer)},emit:function(P){this.state===rn&&(P&&P.eventType&Me?this.manager.emit(this.options.event+"up",P):(this._input.timeStamp=x(),this.manager.emit(this.options.event,this._input)))}});function lA(){zn.apply(this,arguments)}Y(lA,zn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[At]},attrTest:function(P){return this._super.attrTest.call(this,P)&&(Math.abs(P.rotation)>this.options.threshold||this.state&Un)}});function I(){zn.apply(this,arguments)}Y(I,zn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:jt|nn,pointers:1},getTouchAction:function(){return di.prototype.getTouchAction.call(this)},attrTest:function(P){var k=this.options.direction,X;return k&(jt|nn)?X=P.overallVelocity:k&jt?X=P.overallVelocityX:k&nn&&(X=P.overallVelocityY),this._super.attrTest.call(this,P)&&k&P.offsetDirection&&P.distance>this.options.threshold&&P.maxPointers==this.options.pointers&&E(X)>this.options.velocity&&P.eventType&Me},emit:function(P){var k=V(P.offsetDirection);k&&this.manager.emit(this.options.event+k,P),this.manager.emit(this.options.event,P)}});function ps(){Dn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}Y(ps,Dn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[dn]},process:function(P){var k=this.options,X=P.pointers.length===k.pointers,fe=P.distance<k.threshold,Le=P.deltaTime<k.time;if(this.reset(),P.eventType&kt&&this.count===0)return this.failTimeout();if(fe&&Le&&X){if(P.eventType!=Me)return this.failTimeout();var Ye=this.pTime?P.timeStamp-this.pTime<k.interval:!0,yt=!this.pCenter||na(this.pCenter,P.center)<k.posThreshold;this.pTime=P.timeStamp,this.pCenter=P.center,!yt||!Ye?this.count=1:this.count+=1,this._input=P;var yn=this.count%k.taps;if(yn===0)return this.hasRequireFailures()?(this._timer=S(function(){this.state=rn,this.tryEmit()},k.interval,this),Un):rn}return Ii},failTimeout:function(){return this._timer=S(function(){this.state=Ii},this.options.interval,this),Ii},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Si(P,k){return k=k||{},k.recognizers=Z(k.recognizers,Si.defaults.preset),new _s(P,k)}Si.VERSION="2.0.7",Si.defaults={domEvents:!1,touchAction:Mt,enable:!0,inputTarget:null,inputClass:null,preset:[[lA,{enable:!1}],[Qn,{enable:!1},["rotate"]],[I,{direction:jt}],[di,{direction:jt},["swipe"]],[ps],[ps,{event:"doubletap",taps:2},["tap"]],[la]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Vl=1,si=2;function _s(P,k){this.options=G({},Si.defaults,k||{}),this.options.inputTarget=this.options.inputTarget||P,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=P,this.input=nA(this),this.touchAction=new at(this,this.options.touchAction),uA(this,!0),L(this.options.recognizers,function(X){var fe=this.add(new X[0](X[1]));X[2]&&fe.recognizeWith(X[2]),X[3]&&fe.requireFailure(X[3])},this)}_s.prototype={set:function(P){return G(this.options,P),P.touchAction&&this.touchAction.update(),P.inputTarget&&(this.input.destroy(),this.input.target=P.inputTarget,this.input.init()),this},stop:function(P){this.session.stopped=P?si:Vl},recognize:function(P){var k=this.session;if(!k.stopped){this.touchAction.preventDefaults(P);var X,fe=this.recognizers,Le=k.curRecognizer;(!Le||Le&&Le.state&rn)&&(Le=k.curRecognizer=null);for(var Ye=0;Ye<fe.length;)X=fe[Ye],k.stopped!==si&&(!Le||X==Le||X.canRecognizeWith(Le))?X.recognize(P):X.reset(),!Le&&X.state&(Un|En|mn)&&(Le=k.curRecognizer=X),Ye++}},get:function(P){if(P instanceof Dn)return P;for(var k=this.recognizers,X=0;X<k.length;X++)if(k[X].options.event==P)return k[X];return null},add:function(P){if(C(P,"add",this))return this;var k=this.get(P.options.event);return k&&this.remove(k),this.recognizers.push(P),P.manager=this,this.touchAction.update(),P},remove:function(P){if(C(P,"remove",this))return this;if(P=this.get(P),P){var k=this.recognizers,X=me(k,P);X!==-1&&(k.splice(X,1),this.touchAction.update())}return this},on:function(P,k){if(P!==s&&k!==s){var X=this.handlers;return L(ye(P),function(fe){X[fe]=X[fe]||[],X[fe].push(k)}),this}},off:function(P,k){if(P!==s){var X=this.handlers;return L(ye(P),function(fe){k?X[fe]&&X[fe].splice(me(X[fe],k),1):delete X[fe]}),this}},emit:function(P,k){this.options.domEvents&&ua(P,k);var X=this.handlers[P]&&this.handlers[P].slice();if(!(!X||!X.length)){k.type=P,k.preventDefault=function(){k.srcEvent.preventDefault()};for(var fe=0;fe<X.length;)X[fe](k),fe++}},destroy:function(){this.element&&uA(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function uA(P,k){var X=P.element;if(X.style){var fe;L(P.options.cssProps,function(Le,Ye){fe=He(X.style,Ye),k?(P.oldCssProps[fe]=X.style[fe],X.style[fe]=Le):X.style[fe]=P.oldCssProps[fe]||""}),k||(P.oldCssProps={})}}function ua(P,k){var X=t.createEvent("Event");X.initEvent(P,!0,!0),X.gesture=k,k.target.dispatchEvent(X)}G(Si,{INPUT_START:kt,INPUT_MOVE:St,INPUT_END:Me,INPUT_CANCEL:Ge,STATE_POSSIBLE:fn,STATE_BEGAN:Un,STATE_CHANGED:En,STATE_ENDED:mn,STATE_RECOGNIZED:rn,STATE_CANCELLED:kn,STATE_FAILED:Ii,DIRECTION_NONE:lt,DIRECTION_LEFT:Ce,DIRECTION_RIGHT:qt,DIRECTION_UP:Nt,DIRECTION_DOWN:An,DIRECTION_HORIZONTAL:jt,DIRECTION_VERTICAL:nn,DIRECTION_ALL:hi,Manager:_s,Input:on,TouchAction:at,TouchInput:gs,MouseInput:ra,PointerEventInput:Se,TouchMouseInput:oe,SingleTouchInput:oA,Recognizer:Dn,AttrRecognizer:zn,Tap:ps,Pan:di,Swipe:I,Pinch:Qn,Rotate:lA,Press:la,on:se,off:be,each:L,merge:H,extend:j,assign:G,inherit:Y,bindFn:K,prefixed:He});var Tr=typeof e<"u"?e:typeof self<"u"?self:{};Tr.Hammer=Si,n.exports?n.exports=Si:e[i]=Si})(window,document,"Hammer")}(Ig)),Ig.exports}var Oc=cO();const fO=ep(Oc),Kr=U4({__proto__:null,default:fO},[Oc]),w3=1,x3=2,Lm=4,hO={mousedown:w3,mousemove:x3,mouseup:Lm};function dO(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}function gO(n){const e=n.prototype.handler;n.prototype.handler=function(i){const s=this.store;i.button>0&&i.type==="pointerdown"&&(dO(s,A=>A.pointerId===i.pointerId)||s.push(i)),e.call(this,i)}}function mO(n){n.prototype.handler=function(t){let i=hO[t.type];i&w3&&t.button>=0&&(this.pressed=!0),i&x3&&t.buttons===0&&(i=Lm),this.pressed&&(i&Lm&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}gO(Oc.PointerEventInput);mO(Oc.MouseInput);const pO=Oc.Manager;class sh{constructor(e,t,i){this.element=e,this.callback=t,this.options={enable:!0,...i}}}const _O=Kr?[[Kr.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Kr.Rotate,{enable:!1}],[Kr.Pinch,{enable:!1}],[Kr.Swipe,{enable:!1}],[Kr.Pan,{threshold:0,enable:!1}],[Kr.Press,{enable:!1}],[Kr.Tap,{event:"doubletap",taps:2,enable:!1}],[Kr.Tap,{event:"anytap",enable:!1}],[Kr.Tap,{enable:!1}]]:null,Zb={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},bO={doubletap:["tap"]},EO={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Sp={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},yO={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Kb={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},vO=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",il=typeof window<"u"?window:global;let Om=!1;try{const n={get passive(){return Om=!0,!0}};il.addEventListener("test",null,n),il.removeEventListener("test",null)}catch{Om=!1}const TO=vO.indexOf("firefox")!==-1,{WHEEL_EVENTS:wO}=Sp,$b="wheel",Jb=4.000244140625,xO=40,SO=.25;class MO extends sh{constructor(e,t,i){super(e,t,i),this.handleEvent=s=>{if(!this.options.enable)return;let A=s.deltaY;il.WheelEvent&&(TO&&s.deltaMode===il.WheelEvent.DOM_DELTA_PIXEL&&(A/=il.devicePixelRatio),s.deltaMode===il.WheelEvent.DOM_DELTA_LINE&&(A*=xO)),A!==0&&A%Jb===0&&(A=Math.floor(A/Jb)),s.shiftKey&&A&&(A=A*SO),this.callback({type:$b,center:{x:s.clientX,y:s.clientY},delta:-A,srcEvent:s,pointerType:"mouse",target:s.target})},this.events=(this.options.events||[]).concat(wO),this.events.forEach(s=>e.addEventListener(s,this.handleEvent,Om?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===$b&&(this.options.enable=t)}}const{MOUSE_EVENTS:CO}=Sp,eE="pointermove",tE="pointerover",nE="pointerout",iE="pointerenter",rE="pointerleave";class RO extends sh{constructor(e,t,i){super(e,t,i),this.handleEvent=A=>{this.handleOverEvent(A),this.handleOutEvent(A),this.handleEnterEvent(A),this.handleLeaveEvent(A),this.handleMoveEvent(A)},this.pressed=!1;const{enable:s}=this.options;this.enableMoveEvent=s,this.enableLeaveEvent=s,this.enableEnterEvent=s,this.enableOutEvent=s,this.enableOverEvent=s,this.events=(this.options.events||[]).concat(CO),this.events.forEach(A=>e.addEventListener(A,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===eE&&(this.enableMoveEvent=t),e===tE&&(this.enableOverEvent=t),e===nE&&(this.enableOutEvent=t),e===iE&&(this.enableEnterEvent=t),e===rE&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(tE,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(nE,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(iE,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(rE,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit(eE,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:LO}=Sp,sE="keydown",aE="keyup";class OO extends sh{constructor(e,t,i){super(e,t,i),this.handleEvent=s=>{const A=s.target||s.srcElement;A.tagName==="INPUT"&&A.type==="text"||A.tagName==="TEXTAREA"||(this.enableDownEvent&&s.type==="keydown"&&this.callback({type:sE,srcEvent:s,key:s.key,target:s.target}),this.enableUpEvent&&s.type==="keyup"&&this.callback({type:aE,srcEvent:s,key:s.key,target:s.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(LO),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===sE&&(this.enableDownEvent=t),e===aE&&(this.enableUpEvent=t)}}const AE="contextmenu";class DO extends sh{constructor(e,t,i){super(e,t,i),this.handleEvent=s=>{this.options.enable&&this.callback({type:AE,center:{x:s.clientX,y:s.clientY},srcEvent:s,pointerType:"mouse",target:s.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===AE&&(this.options.enable=t)}}const oE=1,Dm=2,lE=4,NO={pointerdown:oE,pointermove:Dm,pointerup:lE,mousedown:oE,mousemove:Dm,mouseup:lE},BO=0,PO=1,IO=2,FO=1,UO=2,kO=4;function zO(n){const e=NO[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i}=n.srcEvent;let s=!1,A=!1,h=!1;return e===Dm?(s=!!(t&FO),A=!!(t&kO),h=!!(t&UO)):(s=i===BO,A=i===PO,h=i===IO),{leftButton:s,middleButton:A,rightButton:h}}function GO(n,e){const t=n.center;if(!t)return null;const i=e.getBoundingClientRect(),s=i.width/e.offsetWidth||1,A=i.height/e.offsetHeight||1,h={x:(t.x-i.left-e.clientLeft)/s,y:(t.y-i.top-e.clientTop)/A};return{center:t,offsetCenter:h}}const Fg={srcElement:"root",priority:0};class VO{constructor(e){this.handleEvent=t=>{if(this.isEmpty())return;const i=this._normalizeEvent(t);let s=t.srcEvent.target;for(;s&&s!==i.rootElement;){if(this._emit(i,s),i.handled)return;s=s.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,i,s=!1,A=!1){const{handlers:h,handlersByElement:m}=this;let _=Fg;typeof i=="string"||i&&i.addEventListener?_={...Fg,srcElement:i}:i&&(_={...Fg,...i});let E=m.get(_.srcElement);E||(E=[],m.set(_.srcElement,E));const x={type:e,handler:t,srcElement:_.srcElement,priority:_.priority};s&&(x.once=!0),A&&(x.passive=!0),h.push(x),this._active=this._active||!x.passive;let S=E.length-1;for(;S>=0&&!(E[S].priority>=x.priority);)S--;E.splice(S+1,0,x)}remove(e,t){const{handlers:i,handlersByElement:s}=this;for(let A=i.length-1;A>=0;A--){const h=i[A];if(h.type===e&&h.handler===t){i.splice(A,1);const m=s.get(h.srcElement);m.splice(m.indexOf(h),1),m.length===0&&s.delete(h.srcElement)}}this._active=i.some(A=>!A.passive)}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let s=!1;const A=()=>{e.handled=!0},h=()=>{e.handled=!0,s=!0},m=[];for(let _=0;_<i.length;_++){const{type:E,handler:x,once:S}=i[_];if(x({...e,type:E,stopPropagation:A,stopImmediatePropagation:h}),S&&m.push(i[_]),s)break}for(let _=0;_<m.length;_++){const{type:E,handler:x}=m[_];this.remove(E,x)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...zO(e),...GO(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const HO={events:null,recognizers:null,recognizerOptions:{},Manager:pO,touchAction:"none",tabIndex:0};class jO{constructor(e=null,t){this._onBasicInput=s=>{const{srcEvent:A}=s,h=EO[A.type];h&&this.manager.emit(h,s)},this._onOtherEvent=s=>{this.manager.emit(s.type,s)},this.options={...HO,...t},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this,i=t.Manager;this.manager=new i(e,{touchAction:t.touchAction,recognizers:t.recognizers||_O}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(Zb).forEach(s=>{const A=this.manager.get(s);A&&Zb[s].forEach(h=>{A.recognizeWith(h)})});for(const s in t.recognizerOptions){const A=this.manager.get(s);if(A){const h=t.recognizerOptions[s];delete h.enable,A.set(h)}}this.wheelInput=new MO(e,this._onOtherEvent,{enable:!1}),this.moveInput=new RO(e,this._onOtherEvent,{enable:!1}),this.keyInput=new OO(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new DO(e,this._onOtherEvent,{enable:!1});for(const[s,A]of this.events)A.isEmpty()||(this._toggleRecognizer(A.recognizerName,!0),this.manager.on(s,A.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const s=i.get(e);if(s&&s.options.enable!==t){s.set({enable:t});const A=bO[e];A&&!this.options.recognizers&&A.forEach(h=>{const m=i.get(h);t?(m.requireFailure(e),s.dropRequireFailure(h)):m.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,s,A){if(typeof e!="string"){i=t;for(const x in e)this._addEventHandler(x,e[x],i,s,A);return}const{manager:h,events:m}=this,_=Kb[e]||e;let E=m.get(_);E||(E=new VO(this),m.set(_,E),E.recognizerName=yO[_]||_,h&&h.on(_,E.handleEvent)),E.add(e,t,i,s,A),E.isEmpty()||this._toggleRecognizer(E.recognizerName,!0)}_removeEventHandler(e,t){if(typeof e!="string"){for(const h in e)this._removeEventHandler(h,e[h]);return}const{events:i}=this,s=Kb[e]||e,A=i.get(s);if(A&&(A.remove(e,t),A.isEmpty())){const{recognizerName:h}=A;let m=!1;for(const _ of i.values())if(_.recognizerName===h&&!_.isEmpty()){m=!0;break}m||this._toggleRecognizer(h,!1)}}}function FA(){}const YO=({isDragging:n})=>n?"grabbing":"grab",S3={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:FA,onResize:FA,onViewStateChange:FA,onInteractionStateChange:FA,onBeforeRender:FA,onAfterRender:FA,onLoad:FA,onError:n=>Xt.error(n.message,n.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:YO,getTooltip:null,debug:!1,drawPickingColors:!1};class ah{constructor(e){N(this,"props",void 0),N(this,"width",0),N(this,"height",0),N(this,"userData",{}),N(this,"canvas",null),N(this,"viewManager",null),N(this,"layerManager",null),N(this,"effectManager",null),N(this,"deckRenderer",null),N(this,"deckPicker",null),N(this,"eventManager",null),N(this,"tooltip",null),N(this,"metrics",void 0),N(this,"animationLoop",void 0),N(this,"stats",void 0),N(this,"viewState",void 0),N(this,"cursorState",void 0),N(this,"_needsRedraw",void 0),N(this,"_pickRequest",void 0),N(this,"_lastPointerDownInfo",null),N(this,"_metricsCounter",void 0),N(this,"_onPointerMove",t=>{const{_pickRequest:i}=this;if(t.type==="pointerleave")i.x=-1,i.y=-1,i.radius=0;else{if(t.leftButton||t.rightButton)return;{const s=t.offsetCenter;if(!s)return;i.x=s.x,i.y=s.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=t}),N(this,"_onEvent",t=>{const i=j_[t.type],s=t.offsetCenter;if(!i||!s||!this.layerManager)return;const A=this.layerManager.getLayers(),h=this.deckPicker.getLastPickedObject({x:s.x,y:s.y,layers:A,viewports:this.getViewports(s)},this._lastPointerDownInfo),{layer:m}=h,_=m&&(m[i.handler]||m.props[i.handler]),E=this.props[i.handler];let x=!1;_&&(x=_.call(m,h,t)),!x&&E&&E(h,t)}),N(this,"_onPointerDown",t=>{const i=t.offsetCenter,s=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=s.result[0]||s.emptyInfo}),this.props={...S3,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&Xt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),Av()==="IE"&&Xt.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new ip({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&cc.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,i,s,A,h,m,_;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(i=this.viewManager)===null||i===void 0||i.finalize(),this.viewManager=null,(s=this.effectManager)===null||s===void 0||s.finalize(),this.effectManager=null,(A=this.deckRenderer)===null||A===void 0||A.finalize(),this.deckRenderer=null,(h=this.deckPicker)===null||h===void 0||h.finalize(),this.deckPicker=null,(m=this.eventManager)===null||m===void 0||m.destroy(),this.eventManager=null,(_=this.tooltip)===null||_===void 0||_.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var E;(E=this.canvas.parentElement)===null||E===void 0||E.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Xt.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Xt.removed("onLayerClick","onClick")(),e.initialViewState&&!ns(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),s=this.layerManager.needsRedraw(e),A=this.effectManager.needsRedraw(e),h=this.deckRenderer.needsRedraw(e);return t=t||i||s||A||h,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return this.viewManager!==null}getViews(){return ui(this.viewManager),this.viewManager.views}getViewports(e){return ui(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,t,i){ui(this.deckPicker);const{stats:s}=this;s.get("Pick Count").incrementCount(),s.get(t).timeStart();const A=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return s.get(t).timeEnd(),A}_createCanvas(e){let t=e.canvas;return typeof t=="string"&&(t=document.getElementById(t),ui(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:i}=e;if(t||t===0){const A=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=A}if(i||i===0){var s;const A=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=((s=e.style)===null||s===void 0?void 0:s.position)||"absolute",this.canvas.style.height=A}}_updateCanvasSize(){var e,t;const{canvas:i}=this;if(!i)return;const s=(e=i.clientWidth)!==null&&e!==void 0?e:i.width,A=(t=i.clientHeight)!==null&&t!==void 0?t:i.height;if(s!==this.width||A!==this.height){var h,m;this.width=s,this.height=A,(h=this.viewManager)===null||h===void 0||h.setProps({width:s,height:A}),(m=this.layerManager)===null||m===void 0||m.activateViewport(this.getViewports()[0]),this.props.onResize({width:s,height:A})}}_createAnimationLoop(e){const{width:t,height:i,gl:s,glOptions:A,debug:h,onError:m,onBeforeRender:_,onAfterRender:E,useDevicePixels:x}=e;return new a5({width:t,height:i,useDevicePixels:x,autoResizeDrawingBuffer:!s,autoResizeViewport:!1,gl:s,onCreateContext:S=>Sv({...A,...S,canvas:this.canvas,debug:h,onContextLost:()=>this._onContextLost()}),onInitialize:S=>this._setGLContext(S.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:_,onAfterRender:E,onError:m})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new y3({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:s}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let A=s,h=!1;for(const m of i){var t;A=m,h=((t=m.layer)===null||t===void 0?void 0:t.onHover(m,e.event))||h}if(!h&&this.props.onHover&&this.props.onHover(A,e.event),this.props.getTooltip&&this.tooltip){const m=this.props.getTooltip(A);this.tooltip.setTooltip(m,A.x,A.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,fp(e,{enable:!0,copyState:!0})),this.tooltip=new uO(this.canvas),Zs(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new r3;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new jO(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const s in j_)this.eventManager.on(s,this._onEvent);this.viewManager=new FL({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new IL(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new JL,this.deckRenderer=new nO(e),this.deckPicker=new oO(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;Zs(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Xt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=zA.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}N(ah,"defaultProps",S3);N(ah,"VERSION",cS);class Ug{constructor(e,t){N(this,"opts",void 0),N(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:s}=t;let A=i;if(i&&i.length!==s){A=new Float32Array(s);const h=t.elementOffset||0;for(let m=0;m<s;++m)A[m]=i[h+m]}return A}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function QO(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function g0(n){return n.stride||n.size*n.bytesPerElement}function M3(n,e){e.offset&&Xt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=g0(n),i=e.vertexOffset!==void 0?e.vertexOffset:n.vertexOffset||0,s=e.elementOffset||0,A=i*t+s*n.bytesPerElement+(n.offset||0);return{...e,offset:A,stride:t}}function XO(n,e){const t=M3(n,e);return{high:t,low:{...t,offset:t.offset+n.size*4}}}class WO{constructor(e,t,i){N(this,"gl",void 0),N(this,"id",void 0),N(this,"size",void 0),N(this,"settings",void 0),N(this,"value",void 0),N(this,"doublePrecision",void 0),N(this,"_buffer",void 0),N(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const s=t.logicalType||t.type,A=s===5130;let{defaultValue:h}=t;h=Number.isFinite(h)?[h]:h||new Array(this.size).fill(0);let m;A?m=5126:!s&&t.isIndexed?m=e&&I6(e,gn.ELEMENT_INDEX_UINT32)?5125:5123:m=s||5126;let _=QO(s||m||5126);this.doublePrecision=A,A&&t.fp64===!1&&(_=Float32Array),this.value=null,this.settings={...t,defaultType:_,defaultValue:h,logicalType:s,type:m,size:this.size,bytesPerElement:_.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new an(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*g0(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),cc.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},s=this.value instanceof Float64Array,A=XO(this.getAccessor(),t||{});return i[e]=new Ug(this,A.high),i["".concat(e,"64Low")]=s?new Ug(this,A.low):new Float32Array(this.size),i}if(t){const i=M3(this.getAccessor(),t);return{[e]:new Ug(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:i,size:s}=this,A=i*s;if(t&&A&&t.length>=A){const h=new Array(s).fill(1/0),m=new Array(s).fill(-1/0);for(let _=0;_<A;)for(let E=0;E<s;E++){const x=t[_++];x<h[E]&&(h[E]=x),x>m[E]&&(m[E]=x)}e=[h,m]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let i;ArrayBuffer.isView(e)?i={value:e}:e instanceof an?i={buffer:e}:i=e;const s={...this.settings,...i};if(t.bufferAccessor=s,t.bounds=null,i.constant){let A=i.value;if(A=this._normalizeValue(A,[],0),this.settings.normalized&&(A=this.normalizeConstant(A)),!(!t.constant||!this._areValuesEqual(A,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=A}else if(i.buffer){const A=i.buffer;t.externalBuffer=A,t.constant=!1,this.value=i.value||null;const h=i.value instanceof Float64Array;s.type=i.type||A.accessor.type,s.bytesPerElement=A.accessor.BYTES_PER_ELEMENT*(h?2:1),s.stride=g0(s)}else if(i.value){this._checkExternalBuffer(i);let A=i.value;t.externalBuffer=null,t.constant=!1,this.value=A,s.bytesPerElement=A.BYTES_PER_ELEMENT,s.stride=g0(s);const{buffer:h,byteOffset:m}=this;this.doublePrecision&&A instanceof Float64Array&&(A=Ng(A,s));const _=A.byteLength+m+s.stride*2;h.byteLength<_&&h.reallocate(_),h.setAccessor(null),h.subData({data:A,offset:m}),s.type=i.type||h.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:i=0,endOffset:s}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?Ng(t,{size:this.size,startIndex:i,endIndex:s}):t.subarray(i,s),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,t=!1){const{state:i}=this,s=i.allocatedValue,A=cc.allocate(s,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=A;const{buffer:h,byteOffset:m}=this;return h.byteLength<A.byteLength+m&&(h.reallocate(A.byteLength+m),t&&s&&h.subData({data:s instanceof Float64Array?Ng(s,this):s,offset:m})),i.allocatedValue=A,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let s=!1;if(this.doublePrecision&&(s=t.BYTES_PER_ELEMENT<4),s)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&Xt.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:s,size:A}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e){let h=A;for(;--h>=0;)t[i+h]=s[h];return t}switch(A){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:s[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:s[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:s[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:s[0];break;default:let h=A;for(;--h>=0;)t[i+h]=Number.isFinite(e[h])?e[h]:s[h]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let s=0;s<i;s++)if(e[s]!==t[s])return!1;return!0}}const uE=[],cE=[];function Mp(n,e=0,t=1/0){let i=uE;const s={index:-1,data:n,target:[]};return n?typeof n[Symbol.iterator]=="function"?i=n:n.length>0&&(cE.length=n.length,i=cE):i=uE,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),s.index=e-1),{iterable:i,objectInfo:s}}function C3(n){return n&&n[Symbol.asyncIterator]}function qO(n,e){const{size:t,stride:i,offset:s,startIndices:A,nested:h}=e,m=n.BYTES_PER_ELEMENT,_=i?i/m:t,E=s?s/m:0,x=Math.floor((n.length-E)/_);return(S,{index:C,target:L})=>{if(!A){const H=C*_+E;for(let Y=0;Y<t;Y++)L[Y]=n[H+Y];return L}const B=A[C],G=A[C+1]||x;let j;if(h){j=new Array(G-B);for(let H=B;H<G;H++){const Y=H*_+E;L=new Array(t);for(let K=0;K<t;K++)L[K]=n[Y+K];j[H-B]=L}}else if(_===t)j=n.subarray(B*t+E,G*t+E);else{j=new n.constructor((G-B)*t);let H=0;for(let Y=B;Y<G;Y++){const K=Y*_+E;for(let ee=0;ee<t;ee++)j[H++]=n[K+ee]}}return j}}const ZO=[],m0=[[0,1/0]];function KO(n,e){if(n===m0||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let s=0;for(let A=0;A<i;A++){const h=n[A];h[1]<e[0]?(t.push(h),s=A+1):h[0]>e[1]?t.push(h):e=[Math.min(h[0],e[0]),Math.max(h[1],e[1])]}return t.splice(s,0,e),t}function kg(n){const{source:e,target:t,start:i=0,size:s,getData:A}=n,h=n.end||t.length,m=e.length,_=h-i;if(m>_){t.set(e.subarray(0,_),i);return}if(t.set(e,i),!A)return;let E=m;for(;E<_;){const x=A(E,e);for(let S=0;S<s;S++)t[i+E]=x[S]||0,E++}}function $O({source:n,target:e,size:t,getData:i,sourceStartIndices:s,targetStartIndices:A}){if(!Array.isArray(A))return kg({source:n,target:e,size:t,getData:i}),e;let h=0,m=0;const _=i&&((x,S)=>i(x+m,S)),E=Math.min(s.length,A.length);for(let x=1;x<E;x++){const S=s[x]*t,C=A[x]*t;kg({source:n.subarray(h,S),target:e,start:m,end:C,size:t,getData:_}),h=S,m=C}return m<e.length&&kg({source:[],target:e,start:m,size:t,getData:_}),e}const JO={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function R3(n,e){if(!n)return null;Number.isFinite(n)&&(n={type:"interpolation",duration:n});const t=n.type||"interpolation";return{...JO[t],...e,...n,type:t}}function L3(n,e){const t=e.getBuffer();return t?[t,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function O3(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function D3(n){n.push(n.shift())}function Cp(n,e){const{doublePrecision:t,settings:i,value:s,size:A}=n,h=t&&s instanceof Float64Array?2:1;return(i.noAlloc?s.length:e*A)*h}function N3({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:s,getData:A=h=>h}){const h=t.doublePrecision&&t.value instanceof Float64Array?2:1,m=t.size*h,_=t.byteOffset,E=t.startIndices,x=s&&E,S=Cp(t,e),C=t.isConstant;if(!x&&i>=S)return;const L=C?t.value:t.getBuffer().getData({srcByteOffset:_});if(t.settings.normalized&&!C){const H=A;A=(Y,K)=>t.normalizeConstant(H(Y,K))}const B=C?(H,Y)=>A(L,Y):(H,Y)=>A(L.subarray(H,H+m),Y),G=n.getData({length:i}),j=new Float32Array(S);$O({source:G,target:j,sourceStartIndices:s,targetStartIndices:E,size:m,getData:B}),n.byteLength<j.byteLength+_&&n.reallocate(j.byteLength+_),n.subData({data:j,offset:_})}class Rp extends WO{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:m0}),N(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition,s=Array.isArray(t)?e[t.find(A=>e[A])]:e[t];return R3(s,i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:s=1/0}=t;this.state.updateRanges=KO(this.state.updateRanges,[i,s])}else this.state.updateRanges=m0}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=ZO}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:i}=this;return i.noAlloc?!1:i.update?(super.allocate(e,t.updateRanges!==m0),!0):!1}updateBuffer({numInstances:e,data:t,props:i,context:s}){if(!this.needsUpdate())return!1;const{state:{updateRanges:A},settings:{update:h,noAlloc:m}}=this;let _=!0;if(h){for(const[E,x]of A)h.call(s,this,{data:t,startRow:E,endRow:x,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[E,x]of A){const S=Number.isFinite(E)?this.getVertexOffset(E):0,C=Number.isFinite(x)?this.getVertexOffset(x):m||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:S,endOffset:C})}this._checkAttributeArray()}else _=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),_}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:s}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(s.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),s.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const h=e;ui(ArrayBuffer.isView(h.value),"invalid ".concat(s.accessor));const m=!!h.size&&h.size!==this.size;return i.binaryAccessor=qO(h.value,{size:h.size||this.size,stride:h.stride,offset:h.offset,startIndices:t,nested:m}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:s,props:A,numInstances:h}){if(e.constant)return;const{settings:m,state:_,value:E,size:x,startIndices:S}=e,{accessor:C,transform:L}=m,B=_.binaryAccessor||(typeof C=="function"?C:A[C]);ui(typeof B=="function",'accessor "'.concat(C,'" is not a function'));let G=e.getVertexOffset(i);const{iterable:j,objectInfo:H}=Mp(t,i,s);for(const Y of j){H.index++;let K=B(Y,H);if(L&&(K=L.call(this,K)),S){const ee=(H.index<S.length-1?S[H.index+1]:h)-S[H.index];if(K&&Array.isArray(K[0])){let Z=G;for(const se of K)e._normalizeValue(se,E,Z),Z+=x}else K&&K.length>x?E.set(K,G):(e._normalizeValue(K,H.target,0),ML({target:E,source:H.target,start:G,count:ee}));G+=ee*x}else e._normalizeValue(K,E,G),G+=x}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class eD{constructor({gl:e,attribute:t,timeline:i}){N(this,"gl",void 0),N(this,"type","interpolation"),N(this,"attributeInTransition",void 0),N(this,"settings",void 0),N(this,"attribute",void 0),N(this,"transition",void 0),N(this,"currentStartIndices",void 0),N(this,"currentLength",void 0),N(this,"transform",void 0),N(this,"buffers",void 0),this.gl=e,this.transition=new Lc(i),this.attribute=t,this.attributeInTransition=new Rp(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=nD(e,t);const s={byteLength:0,usage:35050};this.buffers=[new an(e,s),new an(e,s)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:i,buffers:s,attribute:A}=this;D3(s);const h={numInstances:t,attribute:A,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const m of s)N3({buffer:m,...h});this.currentStartIndices=A.startIndices,this.currentLength=Cp(A,t),this.attributeInTransition.setData({buffer:s[1],value:A.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/A.size),sourceBuffers:{aFrom:s[0],aTo:L3(i,A)},feedbackBuffers:{vCurrent:s[1]}})}update(){const e=this.transition.update();if(e){const{duration:t,easing:i}=this.settings,{time:s}=this.transition;let A=s/t;i&&(A=i(A)),this.transform.run({uniforms:{time:A}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const tD=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function nD(n,e){const t=O3(e.size);return new _p(n,{vs:tD,defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}class iD{constructor({gl:e,attribute:t,timeline:i}){N(this,"gl",void 0),N(this,"type","spring"),N(this,"attributeInTransition",void 0),N(this,"settings",void 0),N(this,"attribute",void 0),N(this,"transition",void 0),N(this,"currentStartIndices",void 0),N(this,"currentLength",void 0),N(this,"texture",void 0),N(this,"framebuffer",void 0),N(this,"transform",void 0),N(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Lc(i),this.attribute=t,this.attributeInTransition=new Rp(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=sD(e),this.framebuffer=aD(e,this.texture),this.transform=rD(e,t,this.framebuffer);const s={byteLength:0,usage:35050};this.buffers=[new an(e,s),new an(e,s),new an(e,s)]}get inProgress(){return this.transition.inProgress}start(e,t){const{gl:i,buffers:s,attribute:A}=this,h={numInstances:t,attribute:A,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const m of s)N3({buffer:m,...h});this.settings=e,this.currentStartIndices=A.startIndices,this.currentLength=Cp(A,t),this.attributeInTransition.setData({buffer:s[1],value:A.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/A.size),sourceBuffers:{aTo:L3(i,A)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:s}=this;if(!s.update())return!1;const h=this.settings;return t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:h.stiffness,damping:h.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),D3(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),ih(i)[0]>0||s.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function rD(n,e,t){const i=O3(e.size);return new _p(n,{framebuffer:t,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}function sD(n){return new fr(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function aD(n,e){return new jn(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const AD={interpolation:eD,spring:iD};class oD{constructor(e,{id:t,timeline:i}){N(this,"id",void 0),N(this,"isSupported",void 0),N(this,"gl",void 0),N(this,"timeline",void 0),N(this,"transitions",void 0),N(this,"needsRedraw",void 0),N(this,"numInstances",void 0),this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=_p.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const s in e){const A=e[s],h=A.getTransitionSetting(t);h&&this._updateAttribute(s,A,h)}for(const s in this.transitions){const A=e[s];(!A||!A.getTransitionSetting(t))&&this._removeTransition(s)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const s=this.transitions[e];let A=!s||s.type!==i.type;if(A){if(!this.isSupported){Xt.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}s&&this._removeTransition(e);const h=AD[i.type];h?this.transitions[e]=new h({attribute:t,timeline:this.timeline,gl:this.gl}):(Xt.error("unsupported transition type '".concat(i.type,"'"))(),A=!1)}(A||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const fE="attributeManager.invalidate",lD="attributeManager.updateStart",uD="attributeManager.updateEnd",cD="attribute.updateStart",fD="attribute.allocate",hD="attribute.updateEnd";class dD{constructor(e,{id:t="attribute-manager",stats:i,timeline:s}={}){N(this,"id",void 0),N(this,"gl",void 0),N(this,"attributes",void 0),N(this,"updateTriggers",void 0),N(this,"needsRedraw",void 0),N(this,"userData",void 0),N(this,"stats",void 0),N(this,"attributeTransitionManager",void 0),N(this,"mergeBoundsMemoized",Rc(_L)),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new oD(e,{id:"".concat(t,"-transitions"),timeline:s}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)this.attributes[t]!==void 0&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const i=this._invalidateTrigger(e,t);wi(fE,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);wi(fE,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:s,props:A={},buffers:h={},context:m={}}){let _=!1;wi(lD,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const E in this.attributes){const x=this.attributes[E],S=x.settings.accessor;x.startIndices=i,x.numInstances=t,A[E]&&Xt.removed("props.".concat(E),"data.attributes.".concat(E))(),x.setExternalBuffer(h[E])||x.setBinaryValue(typeof S=="string"?h[S]:void 0,e.startIndices)||typeof S=="string"&&!h[S]&&x.setConstantValue(A[S])||x.needsUpdate()&&(_=!0,this._updateAttribute({attribute:x,numInstances:t,data:e,props:A,context:m})),this.needsRedraw=this.needsRedraw||x.needsRedraw()}_&&wi(uD,this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:s})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getBounds(e){const t=e.map(i=>{var s;return(s=this.attributes[i])===null||s===void 0?void 0:s.getBounds()});return this.mergeBoundsMemoized(t)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,s={...i.getAttributes()};for(const A in t){const h=t[A];h.needsRedraw(e)&&!i.hasAttribute(A)&&(s[A]=h)}return s}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const s in e)t[s]||Object.assign(i,e[s].getShaderAttributes());return i}_add(e,t={}){for(const i in e){const s=e[i];this.attributes[i]=this._createAttribute(i,s,t)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const s={...t,id:e,size:t.isIndexed&&1||t.size||1,divisor:i.instanced?1:t.divisor||0};return new Rp(this.gl,s)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(s=>{e[s]||(e[s]=[]),e[s].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:s}=this,A=s[e];return A&&A.forEach(h=>{const m=i[h];m&&m.setNeedsUpdate(m.id,t)}),A}_updateAttribute(e){const{attribute:t,numInstances:i}=e;if(wi(cD,t),t.constant){t.setConstantValue(t.value);return}t.allocate(i)&&wi(fD,t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,wi(hD,t,i))}}class gD extends Lc{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:s,easing:A}}=this,h=A(e/s);this._value=O0(t,i,h)}}const hE=1e-5;function dE(n,e,t,i,s){const A=e-n,m=(t-e)*s,_=-A*i;return m+_+A+e}function mD(n,e,t,i,s){if(Array.isArray(t)){const A=[];for(let h=0;h<t.length;h++)A[h]=dE(n[h],e[h],t[h],i,s);return A}return dE(n,e,t,i,s)}function gE(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const s=n[i]-e[i];t+=s*s}return Math.sqrt(t)}return Math.abs(n-e)}class pD extends Lc{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:s}=this.settings,{_prevValue:A=e,_currValue:h=e}=this;let m=mD(A,h,t,i,s);const _=gE(m,t),E=gE(m,h);_<hE&&E<hE&&(m=t,this.end()),this._prevValue=h,this._currValue=m}}const _D={interpolation:gD,spring:pD};class bD{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,s){const{transitions:A}=this;if(A.has(e)){const _=A.get(e),{value:E=_.settings.fromValue}=_;t=E,this.remove(e)}if(s=R3(s),!s)return;const h=_D[s.type];if(!h){Xt.error("unsupported transition type '".concat(s.type,"'"))();return}const m=new h(this.timeline);m.start({...s,fromValue:t,toValue:i}),A.set(e,m)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function ED(n){const e=n[Za];for(const t in e){const i=e[t],{validate:s}=i;if(s&&!s(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}function yD(n,e){const t=B3({newProps:n,oldProps:e,propTypes:n[Za],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=TD(n,e);let s=!1;return i||(s=wD(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:s,extensionsChanged:xD(n,e),transitionsChanged:vD(n,e)}}function vD(n,e){if(!n.transitions)return!1;const t={},i=n[Za];let s=!1;for(const A in n.transitions){const h=i[A],m=h&&h.type;(m==="number"||m==="color"||m==="array")&&Nm(n[A],e[A],h)&&(t[A]=!0,s=!0)}return s?t:!1}function B3({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:s="props"}){if(e===n)return!1;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return"".concat(s," changed shallowly");for(const A of Object.keys(n))if(!(A in t)){if(!(A in e))return"".concat(s,".").concat(A," added");const h=Nm(n[A],e[A],i[A]);if(h)return"".concat(s,".").concat(A," ").concat(h)}for(const A of Object.keys(e))if(!(A in t)){if(!(A in n))return"".concat(s,".").concat(A," dropped");if(!Object.hasOwnProperty.call(n,A)){const h=Nm(n[A],e[A],i[A]);if(h)return"".concat(s,".").concat(A," ").concat(h)}}return!1}function Nm(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":!i&&e!==n?"changed shallowly":null}function TD(n,e){if(e===null)return"oldProps is null, initial diff";let t=!1;const{dataComparator:i,_dataDiff:s}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&s&&(t=s(n.data,e.data)||t),t}function wD(n,e){if(e===null)return{all:!0};if("all"in n.updateTriggers&&mE(n,e,"all"))return{all:!0};const t={};let i=!1;for(const s in n.updateTriggers)s!=="all"&&mE(n,e,s)&&(t[s]=!0,i=!0);return i?t:!1}function xD(n,e){if(e===null)return!0;const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(!t||!i||i.length!==t.length)return!0;for(let s=0;s<i.length;s++)if(!i[s].equals(t[s]))return!0;return!1}function mE(n,e,t){let i=n.updateTriggers[t];i=i??{};let s=e.updateTriggers[t];return s=s??{},B3({oldProps:s,newProps:i,triggerName:t})}const SD="count(): argument not an object",MD="count(): argument not a container";function CD(n){if(!LD(n))throw new Error(SD);if(typeof n.count=="function")return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(RD(n))return Object.keys(n).length;throw new Error(MD)}function RD(n){return n!==null&&typeof n=="object"&&n.constructor===Object}function LD(n){return n!==null&&typeof n=="object"}function OD(n,e){if(!e)return n;const t={...n,...e};if("defines"in e&&(t.defines={...n.defines,...e.defines}),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>i.name==="project64"))){const i=t.modules.findIndex(s=>s.name==="project32");i>=0&&t.modules.splice(i,1)}if("inject"in e)if(!n.inject)t.inject=e.inject;else{const i={...n.inject};for(const s in e.inject)i[s]=(i[s]||"")+e.inject[s];t.inject=i}return t}const DD={10241:9987,10240:9729,10242:33071,10243:33071},Bm={};function ND(n,e,t,i){if(t instanceof fr)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let s=null;t.compressed&&(s={10241:t.data.length>1?9985:9729});const A=new fr(e,{...t,parameters:{...DD,...s,...i}});return Bm[A.id]=n,A}function BD(n,e){!e||!(e instanceof fr)||Bm[e.id]===n&&(e.delete(),delete Bm[e.id])}const PD={boolean:{validate(n,e){return!0},equal(n,e,t){return!!n==!!e}},number:{validate(n,e){return Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)}},color:{validate(n,e){return e.optional&&!n||Pm(n)&&(n.length===3||n.length===4)},equal(n,e,t){return ns(n,e,1)}},accessor:{validate(n,e){const t=U0(n);return t==="function"||t===U0(e.value)},equal(n,e,t){return typeof e=="function"?!0:ns(n,e,1)}},array:{validate(n,e){return e.optional&&!n||Pm(n)},equal(n,e,t){const{compare:i}=t,s=Number.isInteger(i)?i:i?1:0;return i?ns(n,e,s):n===e}},object:{equal(n,e,t){if(t.ignore)return!0;const{compare:i}=t,s=Number.isInteger(i)?i:i?1:0;return i?ns(n,e,s):n===e}},function:{validate(n,e){return e.optional&&!n||typeof n=="function"},equal(n,e,t){return!t.compare&&t.ignore!==!1||n===e}},data:{transform:(n,e,t)=>{const{dataTransform:i}=t.props;return i&&n?i(n):n}},image:{transform:(n,e,t)=>{const i=t.context;return!i||!i.gl?null:ND(t.id,i.gl,n,{...e.parameters,...t.props.textureParameters})},release:(n,e,t)=>{BD(t.id,n)}}};function ID(n){const e={},t={},i={};for(const[s,A]of Object.entries(n)){const h=A==null?void 0:A.deprecatedFor;if(h)i[s]=Array.isArray(h)?h:[h];else{const m=FD(s,A);e[s]=m,t[s]=m.value}}return{propTypes:e,defaultProps:t,deprecatedProps:i}}function FD(n,e){switch(U0(e)){case"object":return Gu(n,e);case"array":return Gu(n,{type:"array",value:e,compare:!1});case"boolean":return Gu(n,{type:"boolean",value:e});case"number":return Gu(n,{type:"number",value:e});case"function":return Gu(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function Gu(n,e){return"type"in e?{name:n,...PD[e.type],...e}:"value"in e?{name:n,type:U0(e.value),...e}:{name:n,type:"object",value:e}}function Pm(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function U0(n){return Pm(n)?"array":n===null?"null":typeof n}function UD(n,e){let t;for(let A=e.length-1;A>=0;A--){const h=e[A];"extensions"in h&&(t=h.extensions)}const i=Im(n.constructor,t),s=Object.create(i);s[F0]=n,s[YA]={},s[Wa]={};for(let A=0;A<e.length;++A){const h=e[A];for(const m in h)s[m]=h[m]}return Object.freeze(s),s}const kD="_mergedDefaultProps";function Im(n,e){let t=kD;if(e)for(const s of e){const A=s.constructor;A&&(t+=":".concat(A.extensionName||A.name))}const i=P3(n,t);return i||(n[t]=zD(n,e||[]))}function zD(n,e){if(!n.prototype)return null;const i=Object.getPrototypeOf(n),s=Im(i),A=P3(n,"defaultProps")||{},h=ID(A),m=Object.assign(Object.create(null),s,h.defaultProps),_=Object.assign(Object.create(null),s==null?void 0:s[Za],h.propTypes),E=Object.assign(Object.create(null),s==null?void 0:s[Pg],h.deprecatedProps);for(const x of e){const S=Im(x.constructor);S&&(Object.assign(m,S),Object.assign(_,S[Za]),Object.assign(E,S[Pg]))}return GD(m,n),HD(m,_),VD(m,E),m[Za]=_,m[Pg]=E,e.length===0&&!Lp(n,"_propTypes")&&(n._propTypes=_),m}function GD(n,e){const t=YD(e);Object.defineProperties(n,{id:{writable:!0,value:t}})}function VD(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const s="".concat(this.id,": ").concat(t);for(const A of e[t])Lp(this,A)||(this[A]=i);Xt.deprecated(s,e[t].join("/"))()}})}function HD(n,e){const t={},i={};for(const s in e){const A=e[s],{name:h,value:m}=A;A.async&&(t[h]=m,i[h]=jD(h))}n[ll]=t,n[YA]={},Object.defineProperties(n,i)}function jD(n){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||C3(e)?this[YA][n]=e:this[Wa][n]=e},get(){if(this[Wa]){if(n in this[Wa])return this[Wa][n]||this[ll][n];if(n in this[YA]){const e=this[F0]&&this[F0].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[ll][n]}}return this[ll][n]}}}function Lp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function P3(n,e){return Lp(n,e)&&n[e]}function YD(n){const e=n.componentName;return e||Xt.warn("".concat(n.name,".componentName not specified"))(),e||n.name}let QD=0;class Op{constructor(...e){N(this,"id",void 0),N(this,"props",void 0),N(this,"count",void 0),this.props=UD(this,e),this.id=this.props.id,this.count=QD++}clone(e){const{props:t}=this,i={};for(const s in t[ll])s in t[Wa]?i[s]=t[Wa][s]:s in t[YA]&&(i[s]=t[YA][s]);return new this.constructor({...t,...i,...e})}}N(Op,"componentName","Component");N(Op,"defaultProps",{});const XD=Object.freeze({});class WD{constructor(e){N(this,"component",void 0),N(this,"onAsyncPropUpdated",void 0),N(this,"asyncProps",void 0),N(this,"oldProps",void 0),N(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||XD}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return!!(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){this.component=e[F0]||this.component;const t=e[Wa]||{},i=e[YA]||e,s=e[ll]||{};for(const A in t){const h=t[A];this._createAsyncPropData(A,s[A]),this._updateAsyncProp(A,h),t[A]=this.getAsyncProp(A)}for(const A in i){const h=i[A];this._createAsyncPropData(A,s[A]),this._updateAsyncProp(A,h)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if(typeof t=="string"&&(t=this._fetch(e,t)),t instanceof Promise){this._watchPromise(e,t);return}if(C3(t)){this._resolveAsyncIterable(e,t);return}this._setPropValue(e,t)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t===i.resolvedValue||t===i.lastValue?!1:(i.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,t,i){const s=this.asyncProps[e];s&&i>=s.resolvedLoadCount&&t!==void 0&&(this._freezeAsyncOldProps(),s.resolvedValue=t,s.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const s=i.pendingLoadCount;t.then(A=>{this.component&&(A=this._postProcessValue(i,A),this._setAsyncPropValue(e,A,s),this._onResolve(e,A))}).catch(A=>{this._onError(e,A)})}}async _resolveAsyncIterable(e,t){if(e!=="data"){this._setPropValue(e,t);return}const i=this.asyncProps[e];if(!i)return;i.pendingLoadCount++;const s=i.pendingLoadCount;let A=[],h=0;for await(const m of t){if(!this.component)return;const{dataTransform:_}=this.component.props;_?A=_(m,A):A=A.concat(m),Object.defineProperty(A,"__diff",{enumerable:!1,value:[{startRow:h,endRow:A.length}]}),h=A.length,this._setAsyncPropValue(e,A,s)}this._onResolve(e,A)}_postProcessValue(e,t){const i=e.type;return i&&this.component&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const s=this.component&&this.component.props[Za];this.asyncProps[e]={type:s&&s[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class qD extends WD{constructor({attributeManager:e,layer:t}){super(t),N(this,"attributeManager",void 0),N(this,"needsRedraw",void 0),N(this,"needsUpdate",void 0),N(this,"subLayers",void 0),N(this,"usesPickingColorCache",void 0),N(this,"hasPickingBuffer",void 0),N(this,"changeFlags",void 0),N(this,"viewport",void 0),N(this,"uniformTransitions",void 0),N(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,t){const i=this.layer,s=i==null?void 0:i.props.fetch;return s?s(t,{propName:e,layer:i}):super._fetch(e,t)}_onResolve(e,t){const i=this.layer;if(i){const s=i.props.onDataLoad;e==="data"&&s&&s(t,{propName:e,layer:i})}}_onError(e,t){const i=this.layer;i&&i.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const ZD="layer.changeFlag",KD="layer.initialize",$D="layer.update",JD="layer.finalize",e7="layer.matched",pE=2**24-1,t7=Object.freeze([]),n7=Rc(({oldViewport:n,viewport:e})=>n.equals(e));let $r=new Uint8ClampedArray(0);const i7={data:{type:"data",value:t7,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:n=>n&&n.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:s,signal:A})=>{const{resourceManager:h}=t.context;if(s=s||t.getLoadOptions(),i=i||t.props.loaders,A){var m;s={...s,fetch:{...(m=s)===null||m===void 0?void 0:m.fetch,signal:A}}}let _=h.contains(n);return!_&&!s&&(h.add({resourceId:n,data:C0(n,i),persistent:!1}),_=!0),_?h.subscribe({resourceId:n,onChange:E=>{var x;return(x=t.internalState)===null||x===void 0?void 0:x.reloadAsyncProp(e,E)},consumerId:t.id,requestId:e}):C0(n,i,s)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:$t.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,-n*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class us extends Op{constructor(...e){super(...e),N(this,"internalState",null),N(this,"lifecycle",el.NO_STATE),N(this,"context",void 0),N(this,"state",void 0),N(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){ui(this.internalState);const t=this.internalState.viewport||this.context.viewport,i=p3(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[s,A,h]=Tp(i,t.pixelProjectionMatrix);return e.length===2?[s,A]:[s,A,h]}unproject(e){return ui(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){ui(this.internalState);const i=this.internalState.viewport||this.context.viewport;return wL(e,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===$t.DEFAULT||e===$t.LNGLAT||e===$t.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){ui(e instanceof Uint8Array);const[t,i,s]=e;return t+i*256+s*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:CD(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const t of this.props.extensions)e=OD(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&t)if(Array.isArray(i))for(const s of i)t.invalidateAll(s);else t.invalidateAll();if(t){const{props:s}=e,A=this.internalState.hasPickingBuffer,h=Number.isInteger(s.highlightedObjectIndex)||s.pickable||s.extensions.some(m=>m.getNeedsPickingBuffer.call(this,m));if(A!==h){this.internalState.hasPickingBuffer=h;const{pickingColors:m,instancePickingColors:_}=t.attributes,E=m||_;E&&(h&&E.constant&&(E.constant=!1,t.invalidate(E.id)),!E.value&&!h&&(E.constant=!0,E.value=[0,0,0]))}}}finalizeState(e){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e,mode:t,sourceLayer:i}){const{index:s}=e;return s>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[s]),e}raiseError(e,t){var i,s;if(t&&(e=new Error("".concat(t,": ").concat(e.message),{cause:e})),!((i=(s=this.props).onError)!==null&&i!==void 0&&i.call(s,e))){var A,h;(A=this.context)===null||A===void 0||(h=A.onError)===null||h===void 0||h.call(A,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,(!t||!n7({oldViewport:t,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&(e==="all"?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,i=this.getNumInstances(),s=this.getStartIndices();e.update({data:t.data,numInstances:i,startIndices:s,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const A=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(A)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),i=Object.create(this.props);for(const s in t)Object.defineProperty(i,s,{value:t[s]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const i=Math.floor($r.length/3);if(this.internalState.usesPickingColorCache=!0,i<t){t>pE&&Xt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),$r=cc.allocate($r,t,{size:3,copy:!0,maxCount:Math.max(t,pE)});const s=Math.floor($r.length/3),A=[];for(let h=i;h<s;h++)this.encodePickingColor(h,A),$r[h*3+0]=A[0],$r[h*3+1]=A[1],$r[h*3+2]=A[2]}e.value=$r.subarray(0,t*3)}_setModelAttributes(e,t){const i=this.getAttributeManager(),s=e.userData.excludeAttributes||{},A=i.getShaderAttributes(t,s);e.setAttributes(A)}disablePickingIndex(e){const t=this.props.data;if(!("attributes"in t)){this._disablePickingIndex(e);return}const{pickingColors:i,instancePickingColors:s}=this.getAttributeManager().attributes,A=i||s,h=A&&t.attributes&&t.attributes[A.id];if(h&&h.value){const m=h.value,_=this.encodePickingColor(e);for(let E=0;E<t.length;E++){const x=A.getVertexOffset(E);m[x]===_[0]&&m[x+1]===_[1]&&m[x+2]===_[2]&&this._disablePickingIndex(E)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,s=t||i;if(!s)return;const A=s.getVertexOffset(e),h=s.getVertexOffset(e+1);s.buffer.subData({data:new Uint8Array(h-A),offset:A})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,i=e||t;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==$r.buffer&&(i.value=$r.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){ui(!this.internalState),ui(Number.isFinite(this.props.coordinateSystem)),wi(KD,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new qD({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Xt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new bD(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){wi(e7,this,this===e);const{state:t,internalState:i}=e;this!==e&&(this.internalState=i,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(wi($D,this,e),!e)return;const t=this.props,i=this.context,s=this.internalState,A=i.viewport,h=this._updateUniformTransition();s.propsInTransition=h,i.viewport=s.viewport||A,this.props=h;try{const m=this._getUpdateParams(),_=this.getModels();if(i.gl)this.updateState(m);else try{this.updateState(m)}catch{}for(const x of this.props.extensions)x.updateState.call(this,m,x);const E=this.getModels()[0]!==_[0];this._postUpdate(m,E)}finally{i.viewport=A,this.props=t,this._clearChangeFlags(),s.needsUpdate=!1,s.resetOldProps()}}_finalize(){wi(JD,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:t={},parameters:i={}}){this._updateAttributeTransition();const s=this.props,A=this.context;this.props=this.internalState.propsInTransition||s;const h=this.props.opacity;t.opacity=Math.pow(h,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:m}=this.props,_=m&&m(t)||[0,0];Zs(A.gl,{polygonOffset:_}),Fr(A.gl,i,()=>{const E={moduleParameters:e,uniforms:t,parameters:i,context:A};for(const x of this.props.extensions)x.draw.call(this,E,x);this.draw(E)})}finally{this.props=s}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const s in e)if(e[s]){let A=!1;switch(s){case"dataChanged":const h=e[s],m=t[s];h&&Array.isArray(m)&&(t.dataChanged=Array.isArray(h)?m.concat(h):h,A=!0);default:t[s]||(t[s]=e[s],A=!0)}A&&wi(ZD,this,s,e)}const i=!!(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=i,t.somethingChanged=i||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const i=yD(e,t);if(i.updateTriggersChanged)for(const A in i.updateTriggersChanged)i.updateTriggersChanged[A]&&this.invalidateAttribute(A);if(i.transitionsChanged)for(const A in i.transitionsChanged){var s;this.internalState.uniformTransitions.add(A,t[A],e[A],(s=e.transitions)===null||s===void 0?void 0:s[A])}return this.setChangeFlags(i)}validateProps(){ED(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&typeof i=="function"&&(t.pickingHighlightColor=i(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new dD(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:i,oldProps:s}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:A}=this.state;A==null||A.setInstanceCount(this.getNumInstances());const{autoHighlight:h,highlightedObjectIndex:m,highlightColor:_}=i;if(t||s.autoHighlight!==h||s.highlightedObjectIndex!==m||s.highlightColor!==_){const E={};h||(E.pickingSelectedColor=null),Array.isArray(_)&&(E.pickingHighlightColor=_),(t||m!==s.highlightedObjectIndex)&&(E.pickingSelectedColor=Number.isFinite(m)&&m>=0?this.encodePickingColor(m):null),this.setModuleParameters(E)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id;const i=this.getAttributeManager(),s=i?i.getNeedsRedraw(e):!1;if(t=t||s,t)for(const A of this.props.extensions)A.onNeedsRedraw.call(this,A);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}N(us,"defaultProps",i7);N(us,"layerName","Layer");const r7="compositeLayer.renderLayers";class Dp extends us{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id&&(e.object=t.__source.object,e.index=t.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||t}getSubLayerRow(e,t,i){return e.__source={parent:this,object:t,index:i},e}getSubLayerAccessor(e){if(typeof e=="function"){const t={index:-1,data:this.props.data,target:[]};return(i,s)=>i&&i.__source?(t.index=i.__source.index,e(i.__source.object,t)):e(i,s)}return e}getSubLayerProps(e={}){var t;const{opacity:i,pickable:s,visible:A,parameters:h,getPolygonOffset:m,highlightedObjectIndex:_,autoHighlight:E,highlightColor:x,coordinateSystem:S,coordinateOrigin:C,wrapLongitude:L,positionFormat:B,modelMatrix:G,extensions:j,fetch:H,operation:Y,_subLayerProps:K}=this.props,ee={id:"",updateTriggers:{},opacity:i,pickable:s,visible:A,parameters:h,getPolygonOffset:m,highlightedObjectIndex:_,autoHighlight:E,highlightColor:x,coordinateSystem:S,coordinateOrigin:C,wrapLongitude:L,positionFormat:B,modelMatrix:G,extensions:j,fetch:H,operation:Y},Z=K&&e.id&&K[e.id],se=Z&&Z.updateTriggers,be=e.id||"sublayer";if(Z){const he=this.props[Za],Ae=e.type?e.type._propTypes:{};for(const ye in Z){const me=Ae[ye]||he[ye];me&&me.type==="accessor"&&(Z[ye]=this.getSubLayerAccessor(Z[ye]))}}Object.assign(ee,e,Z),ee.id="".concat(this.props.id,"-").concat(be),ee.updateTriggers={all:(t=this.props.updateTriggers)===null||t===void 0?void 0:t.all,...e.updateTriggers,...se};for(const he of j){const Ae=he.getSubLayerProps.call(this,he);Ae&&Object.assign(ee,Ae,{updateTriggers:Object.assign(ee.updateTriggers,Ae.updateTriggers)})}return ee}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let i=this.internalState.subLayers;const s=!i||this.needsUpdate();if(s){const A=this.renderLayers();i=xp(A,Boolean),this.internalState.subLayers=i}wi(r7,this,s,i);for(const A of i)A.parent=this}}N(Dp,"layerName","CompositeLayer");const s7=typeof window<"u"?ze.useLayoutEffect:ze.useEffect;function k0(n,e){for(;n;){if(n===e)return!0;n=Object.getPrototypeOf(n)}return!1}const a7={position:"absolute",zIndex:-1};function I3(n,e){if(typeof n=="function")return n(e);if(Array.isArray(n))return n.map(t=>I3(t,e));if(Ah(n)){if(A7(n))return e.style=a7,ze.cloneElement(n,e);if(o7(n))return ze.cloneElement(n,e)}return n}function Ah(n){return n&&typeof n=="object"&&"type"in n||!1}function A7(n){var e;return(e=n.props)===null||e===void 0?void 0:e.mapStyle}function o7(n){const e=n.type;return e&&e.deckGLViewProps}function Fm(n){if(typeof n=="function")return ze.createElement(xl,{},n);if(Array.isArray(n))return n.map(Fm);if(Ah(n)){if(n.type===ze.Fragment)return Fm(n.props.children);if(k0(n.type,xl))return n}return n}function l7({children:n,layers:e=[],views:t=null}){const i=[],s=[],A={};return ze.Children.forEach(Fm(n),h=>{if(Ah(h)){const m=h.type;if(k0(m,us)){const _=u7(m,h.props);s.push(_)}else i.push(h);if(k0(m,xl)&&m!==xl&&h.props.id){const _=new m(h.props);A[_.id]=_}}else h&&i.push(h)}),Object.keys(A).length>0&&(Array.isArray(t)?t.forEach(h=>{A[h.id]=h}):t&&(A[t.id]=t),t=Object.values(A)),e=s.length>0?[...s,...e]:e,{layers:e,children:i,views:t}}function u7(n,e){const t={},i=n.defaultProps||{};for(const s in e)i[s]!==e[s]&&(t[s]=e[s]);return new n(t)}function c7({children:n,deck:e,ContextProvider:t}){const{viewManager:i}=e||{};if(!i||!i.views.length)return[];const s={},A=i.views[0].id;for(const h of n){let m=A,_=h;Ah(h)&&k0(h.type,xl)&&(m=h.props.id||A,_=h.props.children);const E=i.getViewport(m),x=i.getViewState(m);if(E){x.padding=E.padding;const{x:S,y:C,width:L,height:B}=E;_=I3(_,{x:S,y:C,width:L,height:B,viewport:E,viewState:x}),s[m]||(s[m]={viewport:E,children:[]}),s[m].children.push(_)}}return Object.keys(s).map(h=>{const{viewport:m,children:_}=s[h],{x:E,y:x,width:S,height:C}=m,L={position:"absolute",left:E,top:x,width:S,height:C},B="view-".concat(h),G=ze.createElement("div",{key:B,id:B,style:L},..._);if(t){const j={viewport:m,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:H=>{H.viewId=h,e._onViewStateChange(H)}};return ze.createElement(t,{key:B,value:j},G)}return G})}const f7={mixBlendMode:null};function h7({width:n,height:e,style:t}){const i={position:"absolute",zIndex:0,left:0,top:0,width:n,height:e},s={left:0,top:0};if(t)for(const A in t)A in f7?s[A]=t[A]:i[A]=t[A];return{containerStyle:i,canvasStyle:s}}function d7(n){return{get deck(){return n.deck},pickObject:e=>n.deck.pickObject(e),pickMultipleObjects:e=>n.deck.pickMultipleObjects(e),pickObjects:e=>n.deck.pickObjects(e)}}function F3(n){n.redrawReason&&(n.deck._drawLayers(n.redrawReason),n.redrawReason=null)}function g7(n,e,t){const i=new e({...t,_customRender:s=>{n.redrawReason=s;const A=i.getViewports();n.lastRenderedViewports!==A?n.forceUpdate():F3(n)}});return i}const U3=ze.forwardRef((n,e)=>{const[t,i]=ze.useState(0),A=ze.useRef({control:null,version:t,forceUpdate:()=>i(Z=>Z+1)}).current,h=ze.useRef(null),m=ze.useRef(null),_=ze.useMemo(()=>l7(n),[n.layers,n.views,n.children]);let E=!0;const x=Z=>{var se;return E&&n.viewState?(A.viewStateUpdateRequested=Z,null):(A.viewStateUpdateRequested=null,(se=n.onViewStateChange)===null||se===void 0?void 0:se.call(n,Z))},S=Z=>{if(E)A.interactionStateUpdateRequested=Z;else{var se;A.interactionStateUpdateRequested=null,(se=n.onInteractionStateChange)===null||se===void 0||se.call(n,Z)}},C=ze.useMemo(()=>{const Z={...n,style:null,width:"100%",height:"100%",parent:h.current,canvas:m.current,layers:_.layers,views:_.views,onViewStateChange:x,onInteractionStateChange:S};return delete Z._customRender,A.deck&&A.deck.setProps(Z),Z},[n]);ze.useEffect(()=>{const Z=n.Deck||ah;return A.deck=g7(A,Z,{...C,parent:h.current,canvas:m.current}),()=>{var se;return(se=A.deck)===null||se===void 0?void 0:se.finalize()}},[]),s7(()=>{F3(A);const{viewStateUpdateRequested:Z,interactionStateUpdateRequested:se}=A;Z&&x(Z),se&&S(se)}),ze.useImperativeHandle(e,()=>d7(A),[]);const L=A.deck&&A.deck.isInitialized?A.deck.getViewports():void 0,{ContextProvider:B,width:G,height:j,id:H,style:Y}=n,{containerStyle:K,canvasStyle:ee}=ze.useMemo(()=>h7({width:G,height:j,style:Y}),[G,j,Y]);if(!A.viewStateUpdateRequested&&A.lastRenderedViewports===L||A.version!==t){A.lastRenderedViewports=L,A.version=t;const Z=c7({children:_.children,deck:A.deck,ContextProvider:B}),se=ze.createElement("canvas",{key:"canvas",id:H||"deckgl-overlay",ref:m,style:ee});A.control=ze.createElement("div",{id:"".concat(H||"deckgl","-wrapper"),ref:h,style:K},[se,Z])}return E=!1,A.control});U3.defaultProps=ah.defaultProps;const Ir={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795},m7=`#define SHADER_NAME animated-flow-lines-layer-fragment-shader

precision highp float;

uniform float animationTailLength;

varying vec4 vColor;
varying float sourceToTarget;
varying vec2 uv;
                                   
void main(void) {
  geometry.uv = uv;

  gl_FragColor = vec4(vColor.xyz, vColor.w * smoothstep(1.0 - animationTailLength, 1.0, fract(sourceToTarget)));

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,p7=`#define SHADER_NAME animated-flow-lines-layer-vertex-shader
#define SPEED 0.015
#define NUM_PARTS 5.0

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;
attribute float instancePickable;
attribute float instanceStaggering;

uniform float opacity;
uniform float currentTime;
uniform float thicknessUnit;
    
varying vec4 vColor;
varying float sourceToTarget;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourcePositions64Low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceTargetPositions64Low, vec3(0.), target_commonspace);

  float widthPixels = instanceWidths * thicknessUnit;
  
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  if (instancePickable > 0.5) {
    geometry.pickingColor = instancePickingColors;
  }
  
  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;
  DECKGL_FILTER_COLOR(vColor, geometry);

  sourceToTarget = positions.x * length(source - target) * NUM_PARTS - currentTime * SPEED + instanceStaggering; 
}
`,_7=[0,132,193,255],k3=1800,b7=20,_E=k3/b7;class p0 extends us{constructor(e){super(e)}getShaders(){return super.getShaders({vs:p7,fs:m7,modules:[Il,Fl],shaderCache:this.context.shaderCache})}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:Ir.DOUBLE,transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:Ir.DOUBLE,transition:!0,accessor:"getTargetPosition"},instanceColors:{size:4,type:Ir.UNSIGNED_BYTE,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getThickness",defaultValue:1},instanceStaggering:{accessor:"getStaggering",size:1,transition:!1},instancePickable:{accessor:"getPickable",size:1,transition:!1}})}getNeedsRedraw(){return!0}updateState({props:e,oldProps:t,changeFlags:i}){var s;if(super.updateState({props:e,oldProps:t,changeFlags:i}),i.extensionsChanged){const{gl:A}=this.context;(s=this.state.model)==null||s.delete(),this.state.model=this._getModel(A),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{thicknessUnit:t,animationTailLength:i}=this.props,A=Date.now()/1e3%_E/_E*k3;this.state.model.setUniforms({...e,thicknessUnit:t*4,animationTailLength:i,currentTime:A}).draw()}_getModel(e){const t=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new $A(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new Bl({drawMode:Ir.TRIANGLE_STRIP,attributes:{positions:new Float32Array(t)}}),isInstanced:!0}))}}p0.defaultProps={currentTime:0,animationTailLength:.7,getSourcePosition:{type:"accessor",value:n=>[0,0]},getTargetPosition:{type:"accessor",value:n=>[0,0]},getPickable:{type:"accessor",value:n=>1},getStaggering:{type:"accessor",value:(n,{index:e})=>Math.random()},getColor:{type:"accessor",value:_7},getThickness:{type:"accessor",value:1},thicknessUnit:15*2,parameters:{depthTest:!1}};const E7=`#define SHADER_NAME flow-line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  if (vColor.a == 0.0) {
    discard;
  }

  geometry.uv = uv;
  gl_FragColor = vColor;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,y7=`#define SHADER_NAME flow-line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 normals;
attribute vec4 instanceColors;
attribute float instanceThickness;    // 0..0.5
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec3 instancePickingColors;
attribute vec2 instanceEndpointOffsets;
attribute float instancePickable;

uniform vec4 outlineColor;
uniform float thicknessUnit;
uniform float gap;
uniform float opacity;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;
  
  // Position
  vec4 source_commonspace;    
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(instanceSourcePositions, instanceSourcePositions64Low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(instanceTargetPositions, instanceTargetPositions64Low, vec3(0.), target_commonspace);

  // linear interpolation of source & target to pick right coord
  float sourceOrTarget = positions.x;
  geometry.position = mix(source_commonspace, target_commonspace, sourceOrTarget);
  uv = positions.xy;
  geometry.uv = uv;
  if (instancePickable > 0.5) {
    geometry.pickingColor = instancePickingColors;
  }
  
  // set the clamp limits in pixel size 
  float lengthCommon = length(target_commonspace - source_commonspace);    
  vec2 offsetDistances = project_pixel_size(positions.yz) * thicknessUnit;
  
  vec2 limitedOffsetDistances = clamp(   
    project_pixel_size(positions.yz) * thicknessUnit,
    -lengthCommon*.8, lengthCommon*.8
  );
  float startOffsetCommon = project_pixel_size(instanceEndpointOffsets[0]);
  float endOffsetCommon = project_pixel_size(instanceEndpointOffsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon*.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),
    positions.x
  );

  vec2 flowlineDir = normalize(target_commonspace.xy - source_commonspace.xy);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);
  vec2 normalsCommon = project_pixel_size(normals.xy);
  float gapCommon = project_pixel_size(gap);
  vec3 offsetCommon = vec3(
    flowlineDir * (instanceThickness * limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
    perpendicularDir * (instanceThickness * limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );
  
  DECKGL_FILTER_SIZE(offsetCommon, geometry);
  vec4 position_commonspace = mix(source_commonspace, target_commonspace, sourceOrTarget);
  vec4 offset_commonspace = vec4(offsetCommon, 0.0);
  gl_Position = project_common_position_to_clipspace(position_commonspace + offset_commonspace);
      
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  
  vec4 fillColor = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;
  vColor = mix(fillColor, vec4(outlineColor.xyz, outlineColor.w * fillColor.w), normals.z);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,v7=[0,132,193,255],bE=[1,0,0,1,2,-3,1,1,-3,1,0,0,1,1,-3,0,1,0,1,0,0,0,1,0,0,0,0];function T7(n,e){return[-1,2*n,1,2*n,-n,1,n,-n,1,-1,2*n,1,n,-n,1,n,-n,1,-1,2*n,1,n,-n,1,-1,-n,1]}const w7=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class rl extends us{constructor(e){super(e)}getShaders(){return super.getShaders({vs:y7,fs:E7,modules:[Il,Fl],shaderCache:this.context.shaderCache})}initializeState(){const{attributeManager:e}=this.state;e.addInstanced({instanceSourcePositions:{accessor:"getSourcePosition",size:3,transition:!1,type:Ir.DOUBLE},instanceTargetPositions:{accessor:"getTargetPosition",size:3,transition:!1,type:Ir.DOUBLE},instanceThickness:{accessor:"getThickness",size:1,transition:!1},instanceEndpointOffsets:{accessor:"getEndpointOffsets",size:2,transition:!1},instanceColors:{accessor:"getColor",size:4,type:Ir.UNSIGNED_BYTE,transition:!1},instancePickable:{accessor:"getPickable",size:1,transition:!1}})}updateState({props:e,oldProps:t,changeFlags:i}){if(super.updateState({props:e,oldProps:t,changeFlags:i}),i.extensionsChanged){const{gl:s}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(s)}),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{gl:t}=this.context,{outlineColor:i,thicknessUnit:s}=this.props;t.lineWidth(1),this.state.model.setUniforms({...e,outlineColor:i.map(A=>A/255),thicknessUnit:s*2,gap:.5}).draw()}_getModel(e){let t=[],i=[];const{drawOutline:s,outlineThickness:A}=this.props;if(s){t=t.concat(bE);const h=A;i=i.concat(T7(h))}return t=t.concat(bE),i=i.concat(w7),new $A(e,{id:this.props.id,...this.getShaders(),geometry:new Bl({drawMode:Ir.TRIANGLES,attributes:{positions:new Float32Array(t),normals:new Float32Array(i)}}),isInstanced:!0,shaderCache:this.context.shaderCache})}}rl.layerName="FlowLinesLayer";rl.defaultProps={getSourcePosition:{type:"accessor",value:n=>[0,0]},getTargetPosition:{type:"accessor",value:n=>[0,0]},getColor:{type:"accessor",value:v7},getThickness:{type:"accessor",value:n=>n.count},getPickable:{type:"accessor",value:n=>1},drawOutline:!0,thicknessUnit:12,outlineThickness:1,outlineColor:[255,255,255,255],parameters:{depthTest:!1}};const x7=`#define SHADER_NAME flow-circles-layer-fragment-shader
#define SOFT_OUTLINE 0.05
#define EPS 0.05
precision highp float;

uniform vec4 emptyColor;
uniform float outlineEmptyMix;

varying vec4 vColor;
varying vec2 unitPosition;
varying float unitInRadius;
varying float unitOutRadius;

float when_gt(float x, float y) {
  return max(sign(x - y), 0.0);
}

void main(void) {
  geometry.uv = unitPosition;
  float distToCenter = length(unitPosition);
  if (distToCenter > 1.0) {
    discard;
  }

  // See https://stackoverflow.com/questions/47285778
  vec4 ringColor = mix(
    emptyColor / 255., vColor,
    when_gt(unitInRadius, unitOutRadius)
  );
  vec4 outlineColor = mix(
    mix(vColor, emptyColor / 255., outlineEmptyMix),
    vColor,
    when_gt(unitInRadius, unitOutRadius)
  );
  
  float innerR = min(unitInRadius, unitOutRadius) * (1.0 - SOFT_OUTLINE);
  
  // Inner circle
  float step2 = innerR - 2.0 * EPS; 
  float step3 = innerR - EPS;
  
  // Ring
  float step4 = innerR;
  // float step5 = 1.0 - SOFT_OUTLINE - EPS;
  // float step6 = 1.0 - SOFT_OUTLINE;
  float step5 = 1.0 - 5.0 * EPS;
  float step6 = 1.0;
  
  gl_FragColor = vColor;
  gl_FragColor = mix(gl_FragColor, emptyColor / 255., smoothstep(step2, step3, distToCenter));
  gl_FragColor = mix(gl_FragColor, ringColor, smoothstep(step3, step4, distToCenter));
  gl_FragColor = mix(gl_FragColor, outlineColor, smoothstep(step5, step6, distToCenter));
  // gl_FragColor = mix(gl_FragColor, emptyColor / 255., smoothstep(step6, 1.0, distToCenter));
  gl_FragColor.a = vColor.a;
  gl_FragColor.a *= smoothstep(0.0, SOFT_OUTLINE, 1.0 - distToCenter);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,S7=`#define SHADER_NAME flow-circles-layer-vertex-shader
#define radiusScale 100

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceInRadius;
attribute float instanceOutRadius;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform vec4 emptyColor;
uniform float outlineEmptyMix;

varying vec4 vColor;
varying vec2 unitPosition;
varying float unitInRadius;
varying float unitOutRadius;

void main(void) {
  geometry.worldPosition = instancePositions;

  float outerRadiusPixels = max(instanceInRadius, instanceOutRadius);
  unitInRadius = instanceInRadius / outerRadiusPixels; 
  unitOutRadius = instanceOutRadius / outerRadiusPixels; 

  // position on the containing square in [-1, 1] space
  unitPosition = positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;
                                                                                                    
  // Find the center of the point and add the current vertex
  vec3 offset = positions * project_pixel_size(outerRadiusPixels);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
                            
  // Apply opacity to instance color, or return instance picking color
  vColor = vec4(instanceColors.rgb / 255., instanceColors.a / 255. * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,z3=[0,0,0,255],M7=[255,255,255,255],C7=.4;class tc extends us{constructor(e){super(e)}getShaders(){return super.getShaders({vs:S7,fs:x7,modules:[Il,Fl]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:Ir.DOUBLE,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceInRadius:{size:1,transition:!0,accessor:"getInRadius",defaultValue:1},instanceOutRadius:{size:1,transition:!0,accessor:"getOutRadius",defaultValue:1},instanceColors:{size:4,transition:!0,type:Ir.UNSIGNED_BYTE,accessor:"getColor",defaultValue:z3}})}updateState({props:e,oldProps:t,changeFlags:i}){if(super.updateState({props:e,oldProps:t,changeFlags:i}),i.extensionsChanged){const{gl:s}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(s)}),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{emptyColor:t,outlineEmptyMix:i}=this.props;this.state.model.setUniforms({...e,emptyColor:t,outlineEmptyMix:i}).draw()}_getModel(e){const t=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new $A(e,Object.assign(this.getShaders(),{id:this.props.id,geometry:new Bl({drawMode:Ir.TRIANGLE_FAN,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(t)}}}),isInstanced:!0}))}}tc.layerName="FlowCirclesLayer";tc.defaultProps={getColor:{type:"accessor",value:z3},emptyColor:{type:"accessor",value:M7},outlineEmptyMix:{type:"accessor",value:C7},getPosition:{type:"accessor",value:n=>n.position},getInRadius:{type:"accessor",value:1},getOutRadius:{type:"accessor",value:1},parameters:{depthTest:!1}};const R7=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,L7=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,O7=1024,D7=4,EE=()=>{},yE={10241:9987,10240:9729,10242:33071,10243:33071};function N7(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function B7(n,e,t,i){const s=Math.min(t/e.width,i/e.height),A=Math.floor(e.width*s),h=Math.floor(e.height*s);return s===1?{data:e,width:A,height:h}:(n.canvas.height=h,n.canvas.width=A,n.clearRect(0,0,A,h),n.drawImage(e,0,0,e.width,e.height,0,0,A,h),{data:n.canvas,width:A,height:h})}function fc(n){return n&&(n.id||n.url)}function P7(n,e,t,i){const s=n.width,A=n.height,h=new fr(n.gl,{width:e,height:t,parameters:i});return D6(n,h,{targetY:0,width:s,height:A}),n.delete(),h}function vE(n,e,t){for(let i=0;i<e.length;i++){const{icon:s,xOffset:A}=e[i],h=fc(s);n[h]={...s,x:A,y:t}}}function I7({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:s=0,rowHeight:A=0,canvasWidth:h}){let m=[];for(let _=0;_<n.length;_++){const E=n[_],x=fc(E);if(!t[x]){const{height:S,width:C}=E;i+C+e>h&&(vE(t,m,s),i=0,s=A+s+e,A=0,m=[]),m.push({icon:E,xOffset:i}),i=i+C+e,A=Math.max(A,S)}}return m.length>0&&vE(t,m,s),{mapping:t,rowHeight:A,xOffset:i,yOffset:s,canvasWidth:h,canvasHeight:N7(A+s+e)}}function F7(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:s,objectInfo:A}=Mp(n);for(const h of s){A.index++;const m=e(h,A),_=fc(m);if(!m)throw new Error("Icon is missing.");if(!m.url)throw new Error("Icon url is missing.");!i[_]&&(!t[_]||m.url!==t[_].url)&&(i[_]={...m,source:h,sourceIndex:A.index})}return i}class U7{constructor(e,{onUpdate:t=EE,onError:i=EE}){N(this,"gl",void 0),N(this,"onUpdate",void 0),N(this,"onError",void 0),N(this,"_loadOptions",null),N(this,"_texture",null),N(this,"_externalTexture",null),N(this,"_mapping",{}),N(this,"_textureParameters",null),N(this,"_pendingCount",0),N(this,"_autoPacking",!1),N(this,"_xOffset",0),N(this,"_yOffset",0),N(this,"_rowHeight",0),N(this,"_buffer",D7),N(this,"_canvasWidth",O7),N(this,"_canvasHeight",0),N(this,"_canvas",null),this.gl=e,this.onUpdate=t,this.onError=i}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?fc(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:s,textureParameters:A}){if(e&&(this._loadOptions=e),t!==void 0&&(this._autoPacking=t),s&&(this._mapping=s),i){var h;(h=this._texture)===null||h===void 0||h.delete(),this._texture=null,this._externalTexture=i}A&&(this._textureParameters=A)}get isLoaded(){return this._pendingCount===0}packIcons(e,t){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(F7(e,t,this._mapping)||{});if(i.length>0){const{mapping:s,xOffset:A,yOffset:h,rowHeight:m,canvasHeight:_}=I7({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=m,this._mapping=s,this._xOffset=A,this._yOffset=h,this._canvasHeight=_,this._texture||(this._texture=new fr(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||yE})),this._texture.height!==this._canvasHeight&&(this._texture=P7(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||yE)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const t=this._canvas.getContext("2d",{willReadFrequently:!0});for(const i of e)this._pendingCount++,C0(i.url,this._loadOptions).then(s=>{const A=fc(i),h=this._mapping[A],{x:m,y:_,width:E,height:x}=h,{data:S,width:C,height:L}=B7(t,s,E,x);this._texture.setSubImageData({data:S,x:m+(E-C)/2,y:_+(x-L)/2,width:C,height:L}),h.width=C,h.height=L,this._texture.generateMipmap(),this.onUpdate()}).catch(s=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:s})}).finally(()=>{this._pendingCount--})}}const G3=[0,0,0,255],k7={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:G3},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class Np extends us{constructor(...e){super(...e),N(this,"state",void 0)}getShaders(){return super.getShaders({vs:R7,fs:L7,modules:[Il,Fl]})}initializeState(){this.state={iconManager:new U7(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:G3},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:s}=e,A=this.getAttributeManager(),{iconAtlas:h,iconMapping:m,data:_,getIcon:E,textureParameters:x}=t,{iconManager:S}=this.state,C=h||this.internalState.isAsyncPropLoading("iconAtlas");if(S.setProps({loadOptions:t.loadOptions,autoPacking:!C,iconAtlas:h,iconMapping:C?m:null,textureParameters:x}),C?i.iconMapping!==t.iconMapping&&A.invalidate("getIcon"):(s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getIcon))&&S.packIcons(_,E),s.extensionsChanged){var L;const{gl:B}=this.context;(L=this.state.model)===null||L===void 0||L.delete(),this.state.model=this._getModel(B),A.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:i,sizeMaxPixels:s,sizeUnits:A,billboard:h,alphaCutoff:m}=this.props,{iconManager:_}=this.state,E=_.getTexture();E&&this.state.model.setUniforms(e).setUniforms({iconsTexture:E,iconsTextureDim:[E.width,E.height],sizeUnits:ml[A],sizeScale:t,sizeMinPixels:i,sizeMaxPixels:s,billboard:h,alphaCutoff:m}).draw()}_getModel(e){const t=[-1,-1,-1,1,1,1,1,-1];return new $A(e,{...this.getShaders(),id:this.props.id,geometry:new Bl({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(t)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const i=(t=this.getCurrentLayer())===null||t===void 0?void 0:t.props.onIconError;i?i(e):Xt.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:i,anchorX:s=t/2,anchorY:A=i/2}=this.state.iconManager.getIconMapping(e);return[t/2-s,i/2-A]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:i,width:s,height:A}=this.state.iconManager.getIconMapping(e);return[t,i,s,A]}}N(Np,"defaultProps",k7);N(Np,"layerName","IconLayer");const z7=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,G7=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,TE=[0,0,0,255],V7={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:n=>n.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:TE},getLineColor:{type:"accessor",value:TE},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Bp extends us{getShaders(){return super.getShaders({vs:z7,fs:G7,modules:[Il,Fl]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var t;const{gl:i}=this.context;(t=this.state.model)===null||t===void 0||t.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:t,radiusScale:i,radiusMinPixels:s,radiusMaxPixels:A,stroked:h,filled:m,billboard:_,antialiasing:E,lineWidthUnits:x,lineWidthScale:S,lineWidthMinPixels:C,lineWidthMaxPixels:L}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:h?1:0,filled:m,billboard:_,antialiasing:E,radiusUnits:ml[t],radiusScale:i,radiusMinPixels:s,radiusMaxPixels:A,lineWidthUnits:ml[x],lineWidthScale:S,lineWidthMinPixels:C,lineWidthMaxPixels:L}).draw()}_getModel(e){const t=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new $A(e,{...this.getShaders(),id:this.props.id,geometry:new Bl({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(t)}}}),isInstanced:!0})}}N(Bp,"defaultProps",V7);N(Bp,"layerName","ScatterplotLayer");const H7=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,zg=192/256,wE=[],j7={getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class Pp extends Np{constructor(...e){super(...e),N(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:H7}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:i,target:s})=>this.encodePickingColor(i,s)}})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;let{outlineColor:s}=t;s!==i.outlineColor&&(s=s.map(A=>A/255),s[3]=Number.isFinite(s[3])?s[3]:1,this.setState({outlineColor:s})),!t.sdf&&t.outlineWidth&&Xt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:i,outlineWidth:s}=this.props,{outlineColor:A}=this.state,h=s?Math.max(i,zg*(1-s)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:zg,outlineBuffer:h,gamma:i,sdf:!!t,outlineColor:A},super.draw(e),t&&s){const{iconManager:m}=this.state;m.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:zg}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(t=>super.getInstanceOffset(t)):wE}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(t=>super.getInstanceIconFrame(t)):wE}}N(Pp,"defaultProps",j7);N(Pp,"layerName","MultiIconLayer");const z0=1e20;class Y7{constructor({fontSize:e=24,buffer:t=3,radius:i=8,cutoff:s=.25,fontFamily:A="sans-serif",fontWeight:h="normal",fontStyle:m="normal"}={}){this.buffer=t,this.cutoff=s,this.radius=i;const _=this.size=e+t*4,E=this._createCanvas(_),x=this.ctx=E.getContext("2d",{willReadFrequently:!0});x.font=`${m} ${h} ${e}px ${A}`,x.textBaseline="alphabetic",x.textAlign="left",x.fillStyle="black",this.gridOuter=new Float64Array(_*_),this.gridInner=new Float64Array(_*_),this.f=new Float64Array(_),this.z=new Float64Array(_+1),this.v=new Uint16Array(_)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:i,actualBoundingBoxDescent:s,actualBoundingBoxLeft:A,actualBoundingBoxRight:h}=this.ctx.measureText(e),m=Math.ceil(i),_=0,E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(h-A))),x=Math.min(this.size-this.buffer,m+Math.ceil(s)),S=E+2*this.buffer,C=x+2*this.buffer,L=Math.max(S*C,0),B=new Uint8ClampedArray(L),G={data:B,width:S,height:C,glyphWidth:E,glyphHeight:x,glyphTop:m,glyphLeft:_,glyphAdvance:t};if(E===0||x===0)return G;const{ctx:j,buffer:H,gridInner:Y,gridOuter:K}=this;j.clearRect(H,H,E,x),j.fillText(e,H,H+m);const ee=j.getImageData(H,H,E,x);K.fill(z0,0,L),Y.fill(0,0,L);for(let Z=0;Z<x;Z++)for(let se=0;se<E;se++){const be=ee.data[4*(Z*E+se)+3]/255;if(be===0)continue;const he=(Z+H)*S+se+H;if(be===1)K[he]=0,Y[he]=z0;else{const Ae=.5-be;K[he]=Ae>0?Ae*Ae:0,Y[he]=Ae<0?Ae*Ae:0}}xE(K,0,0,S,C,S,this.f,this.v,this.z),xE(Y,H,H,E,x,S,this.f,this.v,this.z);for(let Z=0;Z<L;Z++){const se=Math.sqrt(K[Z])-Math.sqrt(Y[Z]);B[Z]=Math.round(255-255*(se/this.radius+this.cutoff))}return G}}function xE(n,e,t,i,s,A,h,m,_){for(let E=e;E<e+i;E++)SE(n,t*A+E,A,s,h,m,_);for(let E=t;E<t+s;E++)SE(n,E*A+e,1,i,h,m,_)}function SE(n,e,t,i,s,A,h){A[0]=0,h[0]=-1e20,h[1]=z0,s[0]=n[e];for(let m=1,_=0,E=0;m<i;m++){s[m]=n[e+m*t];const x=m*m;do{const S=A[_];E=(s[m]-s[S]+x-S*S)/(m-S)/2}while(E<=h[_]&&--_>-1);_++,A[_]=m,h[_]=E,h[_+1]=z0}for(let m=0,_=0;m<i;m++){for(;h[_+1]<m;)_++;const E=A[_],x=m-E;n[e+m*t]=s[E]+x*x}}const Q7=32,X7=[];function W7(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function q7({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:s,mapping:A={},xOffset:h=0,yOffset:m=0}){let _=0,E=h;const x=t+i*2;for(const S of n)if(!A[S]){const C=e(S);E+C+i*2>s&&(E=0,_++),A[S]={x:E+i,y:m+_*x+i,width:C,height:x,layoutWidth:C,layoutHeight:t},E+=C+i*2}return{mapping:A,xOffset:E,yOffset:m+_*x,canvasHeight:W7(m+(_+1)*x)}}function V3(n,e,t,i){let s=0;for(let h=e;h<t;h++){var A;const m=n[h];s+=((A=i[m])===null||A===void 0?void 0:A.layoutWidth)||0}return s}function H3(n,e,t,i,s,A){let h=e,m=0;for(let _=e;_<t;_++){const E=V3(n,_,_+1,s);m+E>i&&(h<_&&A.push(_),h=_,m=0),m+=E}return m}function Z7(n,e,t,i,s,A){let h=e,m=e,_=e,E=0;for(let x=e;x<t;x++)if((n[x]===" "||n[x+1]===" "||x+1===t)&&(_=x+1),_>m){let S=V3(n,m,_,s);E+S>i&&(h<m&&(A.push(m),h=m,E=0),S>i&&(S=H3(n,m,_,i,s,A),h=A[A.length-1])),m=_,E+=S}return E}function K7(n,e,t,i,s=0,A){A===void 0&&(A=n.length);const h=[];return e==="break-all"?H3(n,s,A,t,i,h):Z7(n,s,A,t,i,h),h}function $7(n,e,t,i,s,A){let h=0,m=0;for(let _=e;_<t;_++){const E=n[_],x=i[E];x?(m||(m=x.layoutHeight),s[_]=h+x.layoutWidth/2,h+=x.layoutWidth):(Xt.warn("Missing character: ".concat(E," (").concat(E.codePointAt(0),")"))(),s[_]=h,h+=Q7)}A[0]=h,A[1]=m}function J7(n,e,t,i,s){const A=Array.from(n),h=A.length,m=new Array(h),_=new Array(h),E=new Array(h),x=(t==="break-word"||t==="break-all")&&isFinite(i)&&i>0,S=[0,0],C=[0,0];let L=0,B=0,G=0;for(let H=0;H<=h;H++){const Y=A[H];if((Y===`
`||H===h)&&(G=H),G>B){const K=x?K7(A,t,i,s,B,G):X7;for(let ee=0;ee<=K.length;ee++){const Z=ee===0?B:K[ee-1],se=ee<K.length?K[ee]:G;$7(A,Z,se,s,m,C);for(let be=Z;be<se;be++){var j;const he=A[be],Ae=((j=s[he])===null||j===void 0?void 0:j.layoutOffsetY)||0;_[be]=L+C[1]/2+Ae,E[be]=C[0]}L=L+C[1]*e,S[0]=Math.max(S[0],C[0])}B=G}Y===`
`&&(m[B]=0,_[B]=0,E[B]=0,B++)}return S[1]=L,{x:m,y:_,rowWidth:E,size:S}}function eN({value:n,length:e,stride:t,offset:i,startIndices:s,characterSet:A}){const h=n.BYTES_PER_ELEMENT,m=t?t/h:1,_=i?i/h:0,E=s[e]||Math.ceil((n.length-_)/m),x=A&&new Set,S=new Array(e);let C=n;if(m>1||_>0){const L=n.constructor;C=new L(E);for(let B=0;B<E;B++)C[B]=n[B*m+_]}for(let L=0;L<e;L++){const B=s[L],G=s[L+1]||E,j=C.subarray(B,G);S[L]=String.fromCodePoint.apply(null,j),x&&j.forEach(x.add,x)}if(x)for(const L of x)A.add(String.fromCodePoint(L));return{texts:S,characterCount:E}}class j3{constructor(e=5){N(this,"limit",void 0),N(this,"_cache",{}),N(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}function tN(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}const ul={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:tN(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},ME=1024,CE=.9,RE=1.2,Y3=3;let G0=new j3(Y3);function nN(n,e){let t;typeof e=="string"?t=new Set(Array.from(e)):t=new Set(e);const i=G0.get(n);if(!i)return t;for(const s in i.mapping)t.has(s)&&t.delete(s);return t}function iN(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function LE(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="alphabetic",n.textAlign="left"}function rN(n){Xt.assert(Number.isFinite(n)&&n>=Y3,"Invalid cache limit"),G0=new j3(n)}class sN{constructor(){N(this,"props",{...ul}),N(this,"_key",void 0),N(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:t}=this.props;return(e*RE+t*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const t=nN(this._key,this.props.characterSet),i=G0.get(this._key);if(i&&t.size===0){this._atlas!==i&&(this._atlas=i);return}const s=this._generateFontAtlas(t,i);this._atlas=s,G0.set(this._key,s)}_generateFontAtlas(e,t){const{fontFamily:i,fontWeight:s,fontSize:A,buffer:h,sdf:m,radius:_,cutoff:E}=this.props;let x=t&&t.data;x||(x=document.createElement("canvas"),x.width=ME);const S=x.getContext("2d",{willReadFrequently:!0});LE(S,i,A,s);const{mapping:C,canvasHeight:L,xOffset:B,yOffset:G}=q7({getFontWidth:j=>S.measureText(j).width,fontHeight:A*RE,buffer:h,characterSet:e,maxCanvasWidth:ME,...t&&{mapping:t.mapping,xOffset:t.xOffset,yOffset:t.yOffset}});if(x.height!==L){const j=S.getImageData(0,0,x.width,x.height);x.height=L,S.putImageData(j,0,0)}if(LE(S,i,A,s),m){const j=new Y7({fontSize:A,buffer:h,radius:_,cutoff:E,fontFamily:i,fontWeight:"".concat(s)});for(const H of e){const{data:Y,width:K,height:ee,glyphTop:Z}=j.draw(H);C[H].width=K,C[H].layoutOffsetY=A*CE-Z;const se=S.createImageData(K,ee);iN(Y,se),S.putImageData(se,C[H].x,C[H].y)}}else for(const j of e)S.fillText(j,C[j].x,C[j].y+h+A*CE);return{xOffset:B,yOffset:G,mapping:C,data:x,width:x.width,height:x.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:s,sdf:A,radius:h,cutoff:m}=this.props;return A?"".concat(e," ").concat(t," ").concat(i," ").concat(s," ").concat(h," ").concat(m):"".concat(e," ").concat(t," ").concat(i," ").concat(s)}}const aN=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,AN=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,oN={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Ip extends us{constructor(...e){super(...e),N(this,"state",void 0)}getShaders(){return super.getShaders({vs:aN,fs:AN,modules:[Il,Fl]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var i;const{gl:s}=this.context;(i=this.state.model)===null||i===void 0||i.delete(),this.state.model=this._getModel(s),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:t,sizeScale:i,sizeUnits:s,sizeMinPixels:A,sizeMaxPixels:h,getLineWidth:m}=this.props;let{padding:_}=this.props;_.length<4&&(_=[_[0],_[1],_[0],_[1]]),this.state.model.setUniforms(e).setUniforms({billboard:t,stroked:!!m,padding:_,sizeUnits:ml[s],sizeScale:i,sizeMinPixels:A,sizeMaxPixels:h}).draw()}_getModel(e){const t=[0,0,1,0,1,1,0,1];return new $A(e,{...this.getShaders(),id:this.props.id,geometry:new Bl({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(t)}}}),isInstanced:!0})}}N(Ip,"defaultProps",oN);N(Ip,"layerName","TextBackgroundLayer");const OE={start:1,middle:0,end:-1},DE={top:1,center:0,bottom:-1},Gg=[0,0,0,255],lN=1,uN={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Gg},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:ul.characterSet},fontFamily:ul.fontFamily,fontWeight:ul.fontWeight,lineHeight:lN,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Gg},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:Gg},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Fp extends Dp{constructor(...e){super(...e),N(this,"state",void 0),N(this,"getBoundingRect",(t,i)=>{let{size:[s,A]}=this.transformParagraph(t,i);const{fontSize:h}=this.state.fontAtlasManager.props;s/=h,A/=h;const{getTextAnchor:m,getAlignmentBaseline:_}=this.props,E=OE[typeof m=="function"?m(t,i):m],x=DE[typeof _=="function"?_(t,i):_];return[(E-1)*s/2,(x-1)*A/2,s,A]}),N(this,"getIconOffsets",(t,i)=>{const{getTextAnchor:s,getAlignmentBaseline:A}=this.props,{x:h,y:m,rowWidth:_,size:[E,x]}=this.transformParagraph(t,i),S=OE[typeof s=="function"?s(t,i):s],C=DE[typeof A=="function"?A(t,i):A],L=h.length,B=new Array(L*2);let G=0;for(let j=0;j<L;j++){const H=(1-S)*(E-_[j])/2;B[G++]=(S-1)*E/2+H+h[j],B[G++]=(C-1)*x/2+m[j]}return B})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new sN},this.props.maxWidth>0&&Xt.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:t,oldProps:i,changeFlags:s}=e;(s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:i}=this.props,{fontAtlasManager:s,characterSet:A}=this.state,h={...e,characterSet:A,fontFamily:t,fontWeight:i};if(!s.mapping)return s.setProps(h),!0;for(const m in h)if(h[m]!==s.props[m])return s.setProps(h),!0;return!1}_updateText(){var e;const{data:t,characterSet:i}=this.props,s=(e=t.attributes)===null||e===void 0?void 0:e.getText;let{getText:A}=this.props,h=t.startIndices,m;const _=i==="auto"&&new Set;if(s&&h){const{texts:E,characterCount:x}=eN({...ArrayBuffer.isView(s)?{value:s}:s,length:t.length,startIndices:h,characterSet:_});m=x,A=(S,{index:C})=>E[C]}else{const{iterable:E,objectInfo:x}=Mp(t);h=[0],m=0;for(const S of E){x.index++;const C=Array.from(A(S,x)||"");_&&C.forEach(_.add,_),m+=C.length,h.push(m)}}this.setState({getText:A,startIndices:h,numInstances:m,characterSet:_||i})}transformParagraph(e,t){const{fontAtlasManager:i}=this.state,s=i.mapping,A=this.state.getText,{wordBreak:h,lineHeight:m,maxWidth:_}=this.props,E=A(e,t)||"";return J7(E,m,h,_*i.props.fontSize,s)}renderLayers(){const{startIndices:e,numInstances:t,getText:i,fontAtlasManager:{scale:s,texture:A,mapping:h},styleVersion:m}=this.state,{data:_,_dataDiff:E,getPosition:x,getColor:S,getSize:C,getAngle:L,getPixelOffset:B,getBackgroundColor:G,getBorderColor:j,getBorderWidth:H,backgroundPadding:Y,background:K,billboard:ee,fontSettings:Z,outlineWidth:se,outlineColor:be,sizeScale:he,sizeUnits:Ae,sizeMinPixels:ye,sizeMaxPixels:me,transitions:Ne,updateTriggers:Be}=this.props,He=this.getSubLayerClass("characters",Pp),je=this.getSubLayerClass("background",Ip);return[K&&new je({getFillColor:G,getLineColor:j,getLineWidth:H,padding:Y,getPosition:x,getSize:C,getAngle:L,getPixelOffset:B,billboard:ee,sizeScale:he,sizeUnits:Ae,sizeMinPixels:ye,sizeMaxPixels:me,transitions:Ne&&{getPosition:Ne.getPosition,getAngle:Ne.getAngle,getSize:Ne.getSize,getFillColor:Ne.getBackgroundColor,getLineColor:Ne.getBorderColor,getLineWidth:Ne.getBorderWidth,getPixelOffset:Ne.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:Be.getPosition,getAngle:Be.getAngle,getSize:Be.getSize,getFillColor:Be.getBackgroundColor,getLineColor:Be.getBorderColor,getLineWidth:Be.getBorderWidth,getPixelOffset:Be.getPixelOffset,getBoundingRect:{getText:Be.getText,getTextAnchor:Be.getTextAnchor,getAlignmentBaseline:Be.getAlignmentBaseline,styleVersion:m}}}),{data:_.attributes&&_.attributes.background?{length:_.length,attributes:_.attributes.background}:_,_dataDiff:E,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new He({sdf:Z.sdf,smoothing:Number.isFinite(Z.smoothing)?Z.smoothing:ul.smoothing,outlineWidth:se/(Z.radius||ul.radius),outlineColor:be,iconAtlas:A,iconMapping:h,getPosition:x,getColor:S,getSize:C,getAngle:L,getPixelOffset:B,billboard:ee,sizeScale:he*s,sizeUnits:Ae,sizeMinPixels:ye*s,sizeMaxPixels:me*s,transitions:Ne&&{getPosition:Ne.getPosition,getAngle:Ne.getAngle,getColor:Ne.getColor,getSize:Ne.getSize,getPixelOffset:Ne.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:Be.getText,getPosition:Be.getPosition,getAngle:Be.getAngle,getColor:Be.getColor,getSize:Be.getSize,getPixelOffset:Be.getPixelOffset,getIconOffsets:{getTextAnchor:Be.getTextAnchor,getAlignmentBaseline:Be.getAlignmentBaseline,styleVersion:m}}}),{data:_,_dataDiff:E,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){rN(e)}}N(Fp,"defaultProps",uN);N(Fp,"layerName","TextLayer");function Up(n){const{children:e}=n;return e&&e.length>0}function Ku(n){const{zoom:e}=n;return e!==void 0}function Vg(n){return n&&!!n.aggregate}var sl;(function(n){n.ALL="ALL",n.INCOMING="INCOMING",n.OUTGOING="OUTGOING",n.BETWEEN="BETWEEN"})(sl||(sl={}));function Rn(n){for(var e=n.length/6|0,t=new Array(e),i=0;i<e;)t[i]="#"+n.slice(i*6,++i*6);return t}function Ul(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Dc(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function tA(){}var QA=.7,Sl=1/QA,cl="\\s*([+-]?\\d+)\\s*",hc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cN=/^#([0-9a-f]{3,8})$/,fN=new RegExp(`^rgb\\(${cl},${cl},${cl}\\)$`),hN=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),dN=new RegExp(`^rgba\\(${cl},${cl},${cl},${hc}\\)$`),gN=new RegExp(`^rgba\\(${rs},${rs},${rs},${hc}\\)$`),mN=new RegExp(`^hsl\\(${hc},${rs},${rs}\\)$`),pN=new RegExp(`^hsla\\(${hc},${rs},${rs},${hc}\\)$`),NE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ul(tA,XA,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:BE,formatHex:BE,formatHex8:_N,formatHsl:bN,formatRgb:PE,toString:PE});function BE(){return this.rgb().formatHex()}function _N(){return this.rgb().formatHex8()}function bN(){return Q3(this).formatHsl()}function PE(){return this.rgb().formatRgb()}function XA(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=cN.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?IE(e):t===3?new ei(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?s0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?s0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fN.exec(n))?new ei(e[1],e[2],e[3],1):(e=hN.exec(n))?new ei(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=dN.exec(n))?s0(e[1],e[2],e[3],e[4]):(e=gN.exec(n))?s0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=mN.exec(n))?kE(e[1],e[2]/100,e[3]/100,1):(e=pN.exec(n))?kE(e[1],e[2]/100,e[3]/100,e[4]):NE.hasOwnProperty(n)?IE(NE[n]):n==="transparent"?new ei(NaN,NaN,NaN,0):null}function IE(n){return new ei(n>>16&255,n>>8&255,n&255,1)}function s0(n,e,t,i){return i<=0&&(n=e=t=NaN),new ei(n,e,t,i)}function kp(n){return n instanceof tA||(n=XA(n)),n?(n=n.rgb(),new ei(n.r,n.g,n.b,n.opacity)):new ei}function dc(n,e,t,i){return arguments.length===1?kp(n):new ei(n,e,t,i??1)}function ei(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}Ul(ei,dc,Dc(tA,{brighter(n){return n=n==null?Sl:Math.pow(Sl,n),new ei(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?QA:Math.pow(QA,n),new ei(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ei(VA(this.r),VA(this.g),VA(this.b),V0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FE,formatHex:FE,formatHex8:EN,formatRgb:UE,toString:UE}));function FE(){return`#${GA(this.r)}${GA(this.g)}${GA(this.b)}`}function EN(){return`#${GA(this.r)}${GA(this.g)}${GA(this.b)}${GA((isNaN(this.opacity)?1:this.opacity)*255)}`}function UE(){const n=V0(this.opacity);return`${n===1?"rgb(":"rgba("}${VA(this.r)}, ${VA(this.g)}, ${VA(this.b)}${n===1?")":`, ${n})`}`}function V0(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function VA(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function GA(n){return n=VA(n),(n<16?"0":"")+n.toString(16)}function kE(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Br(n,e,t,i)}function Q3(n){if(n instanceof Br)return new Br(n.h,n.s,n.l,n.opacity);if(n instanceof tA||(n=XA(n)),!n)return new Br;if(n instanceof Br)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,s=Math.min(e,t,i),A=Math.max(e,t,i),h=NaN,m=A-s,_=(A+s)/2;return m?(e===A?h=(t-i)/m+(t<i)*6:t===A?h=(i-e)/m+2:h=(e-t)/m+4,m/=_<.5?A+s:2-A-s,h*=60):m=_>0&&_<1?0:h,new Br(h,m,_,n.opacity)}function yN(n,e,t,i){return arguments.length===1?Q3(n):new Br(n,e,t,i??1)}function Br(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}Ul(Br,yN,Dc(tA,{brighter(n){return n=n==null?Sl:Math.pow(Sl,n),new Br(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?QA:Math.pow(QA,n),new Br(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,s=2*t-i;return new ei(Hg(n>=240?n-240:n+120,s,i),Hg(n,s,i),Hg(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new Br(zE(this.h),a0(this.s),a0(this.l),V0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=V0(this.opacity);return`${n===1?"hsl(":"hsla("}${zE(this.h)}, ${a0(this.s)*100}%, ${a0(this.l)*100}%${n===1?")":`, ${n})`}`}}));function zE(n){return n=(n||0)%360,n<0?n+360:n}function a0(n){return Math.max(0,Math.min(1,n||0))}function Hg(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const X3=Math.PI/180,W3=180/Math.PI,H0=18,q3=.96422,Z3=1,K3=.82521,$3=4/29,fl=6/29,J3=3*fl*fl,vN=fl*fl*fl;function eT(n){if(n instanceof ss)return new ss(n.l,n.a,n.b,n.opacity);if(n instanceof Xs)return tT(n);n instanceof ei||(n=kp(n));var e=Xg(n.r),t=Xg(n.g),i=Xg(n.b),s=jg((.2225045*e+.7168786*t+.0606169*i)/Z3),A,h;return e===t&&t===i?A=h=s:(A=jg((.4360747*e+.3850649*t+.1430804*i)/q3),h=jg((.0139322*e+.0971045*t+.7141733*i)/K3)),new ss(116*s-16,500*(A-s),200*(s-h),n.opacity)}function TN(n,e,t,i){return arguments.length===1?eT(n):new ss(n,e,t,i??1)}function ss(n,e,t,i){this.l=+n,this.a=+e,this.b=+t,this.opacity=+i}Ul(ss,TN,Dc(tA,{brighter(n){return new ss(this.l+H0*(n??1),this.a,this.b,this.opacity)},darker(n){return new ss(this.l-H0*(n??1),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,e=isNaN(this.a)?n:n+this.a/500,t=isNaN(this.b)?n:n-this.b/200;return e=q3*Yg(e),n=Z3*Yg(n),t=K3*Yg(t),new ei(Qg(3.1338561*e-1.6168667*n-.4906146*t),Qg(-.9787684*e+1.9161415*n+.033454*t),Qg(.0719453*e-.2289914*n+1.4052427*t),this.opacity)}}));function jg(n){return n>vN?Math.pow(n,1/3):n/J3+$3}function Yg(n){return n>fl?n*n*n:J3*(n-$3)}function Qg(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Xg(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function wN(n){if(n instanceof Xs)return new Xs(n.h,n.c,n.l,n.opacity);if(n instanceof ss||(n=eT(n)),n.a===0&&n.b===0)return new Xs(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var e=Math.atan2(n.b,n.a)*W3;return new Xs(e<0?e+360:e,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function oh(n,e,t,i){return arguments.length===1?wN(n):new Xs(n,e,t,i??1)}function Xs(n,e,t,i){this.h=+n,this.c=+e,this.l=+t,this.opacity=+i}function tT(n){if(isNaN(n.h))return new ss(n.l,0,0,n.opacity);var e=n.h*X3;return new ss(n.l,Math.cos(e)*n.c,Math.sin(e)*n.c,n.opacity)}Ul(Xs,oh,Dc(tA,{brighter(n){return new Xs(this.h,this.c,this.l+H0*(n??1),this.opacity)},darker(n){return new Xs(this.h,this.c,this.l-H0*(n??1),this.opacity)},rgb(){return tT(this).rgb()}}));var nT=-.14861,zp=1.78277,Gp=-.29227,lh=-.90649,gc=1.97294,GE=gc*lh,VE=gc*zp,HE=zp*Gp-lh*nT;function xN(n){if(n instanceof HA)return new HA(n.h,n.s,n.l,n.opacity);n instanceof ei||(n=kp(n));var e=n.r/255,t=n.g/255,i=n.b/255,s=(HE*i+GE*e-VE*t)/(HE+GE-VE),A=i-s,h=(gc*(t-s)-Gp*A)/lh,m=Math.sqrt(h*h+A*A)/(gc*s*(1-s)),_=m?Math.atan2(h,A)*W3-120:NaN;return new HA(_<0?_+360:_,m,s,n.opacity)}function $a(n,e,t,i){return arguments.length===1?xN(n):new HA(n,e,t,i??1)}function HA(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}Ul(HA,$a,Dc(tA,{brighter(n){return n=n==null?Sl:Math.pow(Sl,n),new HA(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?QA:Math.pow(QA,n),new HA(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*X3,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(n),s=Math.sin(n);return new ei(255*(e+t*(nT*i+zp*s)),255*(e+t*(Gp*i+lh*s)),255*(e+t*(gc*i)),this.opacity)}}));function SN(n,e,t,i,s){var A=n*n,h=A*n;return((1-3*n+3*A-h)*e+(4-6*A+3*h)*t+(1+3*n+3*A-3*h)*i+h*s)/6}function iT(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),s=n[i],A=n[i+1],h=i>0?n[i-1]:2*s-A,m=i<e-1?n[i+2]:2*A-s;return SN((t-i/e)*e,h,s,A,m)}}const uh=n=>()=>n;function rT(n,e){return function(t){return n+t*e}}function MN(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function CN(n,e){var t=e-n;return t?rT(n,t>180||t<-180?t-360*Math.round(t/360):t):uh(isNaN(n)?e:n)}function RN(n){return(n=+n)==1?hl:function(e,t){return t-e?MN(e,t,n):uh(isNaN(e)?t:e)}}function hl(n,e){var t=e-n;return t?rT(n,t):uh(isNaN(n)?e:n)}const jE=function n(e){var t=RN(e);function i(s,A){var h=t((s=dc(s)).r,(A=dc(A)).r),m=t(s.g,A.g),_=t(s.b,A.b),E=hl(s.opacity,A.opacity);return function(x){return s.r=h(x),s.g=m(x),s.b=_(x),s.opacity=E(x),s+""}}return i.gamma=n,i}(1);function LN(n){return function(e){var t=e.length,i=new Array(t),s=new Array(t),A=new Array(t),h,m;for(h=0;h<t;++h)m=dc(e[h]),i[h]=m.r||0,s[h]=m.g||0,A[h]=m.b||0;return i=n(i),s=n(s),A=n(A),m.opacity=1,function(_){return m.r=i(_),m.g=s(_),m.b=A(_),m+""}}}var sT=LN(iT);function ON(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,i=e.slice(),s;return function(A){for(s=0;s<t;++s)i[s]=n[s]*(1-A)+e[s]*A;return i}}function DN(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function NN(n,e){var t=e?e.length:0,i=n?Math.min(t,n.length):0,s=new Array(i),A=new Array(t),h;for(h=0;h<i;++h)s[h]=ch(n[h],e[h]);for(;h<t;++h)A[h]=e[h];return function(m){for(h=0;h<i;++h)A[h]=s[h](m);return A}}function BN(n,e){var t=new Date;return n=+n,e=+e,function(i){return t.setTime(n*(1-i)+e*i),t}}function j0(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function PN(n,e){var t={},i={},s;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in n?t[s]=ch(n[s],e[s]):i[s]=e[s];return function(A){for(s in t)i[s]=t[s](A);return i}}var Um=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wg=new RegExp(Um.source,"g");function IN(n){return function(){return n}}function FN(n){return function(e){return n(e)+""}}function UN(n,e){var t=Um.lastIndex=Wg.lastIndex=0,i,s,A,h=-1,m=[],_=[];for(n=n+"",e=e+"";(i=Um.exec(n))&&(s=Wg.exec(e));)(A=s.index)>t&&(A=e.slice(t,A),m[h]?m[h]+=A:m[++h]=A),(i=i[0])===(s=s[0])?m[h]?m[h]+=s:m[++h]=s:(m[++h]=null,_.push({i:h,x:j0(i,s)})),t=Wg.lastIndex;return t<e.length&&(A=e.slice(t),m[h]?m[h]+=A:m[++h]=A),m.length<2?_[0]?FN(_[0].x):IN(e):(e=_.length,function(E){for(var x=0,S;x<e;++x)m[(S=_[x]).i]=S.x(E);return m.join("")})}function ch(n,e){var t=typeof e,i;return e==null||t==="boolean"?uh(e):(t==="number"?j0:t==="string"?(i=XA(e))?(e=i,jE):UN:e instanceof XA?jE:e instanceof Date?BN:DN(e)?ON:Array.isArray(e)?NN:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?PN:j0)(n,e)}function aT(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function AT(n){return function e(t){t=+t;function i(s,A){var h=n((s=$a(s)).h,(A=$a(A)).h),m=hl(s.s,A.s),_=hl(s.l,A.l),E=hl(s.opacity,A.opacity);return function(x){return s.h=h(x),s.s=m(x),s.l=_(Math.pow(x,t)),s.opacity=E(x),s+""}}return i.gamma=e,i}(1)}AT(CN);var oT=AT(hl);const ti=n=>sT(n[n.length-1]);var lT=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Rn);ti(lT);var uT=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Rn);ti(uT);var cT=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Rn);ti(cT);var fT=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Rn);ti(fT);var hT=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Rn);ti(hT);var dT=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Rn);ti(dT);var gT=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Rn);ti(gT);var mT=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Rn);ti(mT);var pT=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Rn);ti(pT);var _T=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Rn);ti(_T);var bT=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Rn);ti(bT);var ET=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Rn);ti(ET);var yT=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Rn);ti(yT);var vT=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Rn);ti(vT);var TT=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Rn);ti(TT);var wT=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Rn);ti(wT);var xT=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Rn);ti(xT);var ST=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Rn);ti(ST);var kN=oT($a(-100,.75,.35),$a(80,1.5,.8)),zN=oT($a(260,.75,.35),$a(80,1.5,.8));$a();function fh(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}const GN=fh(Rn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var VN=fh(Rn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),HN=fh(Rn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),jN=fh(Rn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function dl(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Y0(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function MT(n){let e,t,i;n.length!==2?(e=dl,t=(m,_)=>dl(n(m),_),i=(m,_)=>n(m)-_):(e=n===dl||n===Y0?n:YN,t=n,i=n);function s(m,_,E=0,x=m.length){if(E<x){if(e(_,_)!==0)return x;do{const S=E+x>>>1;t(m[S],_)<0?E=S+1:x=S}while(E<x)}return E}function A(m,_,E=0,x=m.length){if(E<x){if(e(_,_)!==0)return x;do{const S=E+x>>>1;t(m[S],_)<=0?E=S+1:x=S}while(E<x)}return E}function h(m,_,E=0,x=m.length){const S=s(m,_,E,x-1);return S>E&&i(m[S-1],_)>-i(m[S],_)?S-1:S}return{left:s,center:h,right:A}}function YN(){return 0}function QN(n){return n===null?NaN:+n}const CT=MT(dl),XN=CT.right,WN=CT.left;MT(QN).center;function km(n,e){let t,i;if(e===void 0)for(const s of n)s!=null&&(t===void 0?s>=s&&(t=i=s):(t>s&&(t=s),i<s&&(i=s)));else{let s=-1;for(let A of n)(A=e(A,++s,n))!=null&&(t===void 0?A>=A&&(t=i=A):(t>A&&(t=A),i<A&&(i=A)))}return[t,i]}class hh{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let i=0;for(let s=0;s<this._n&&s<32;s++){const A=t[s],h=e+A,m=Math.abs(e)<Math.abs(A)?e-(h-A):A-(h-e);m&&(t[i++]=m),e=h}return t[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let t=this._n,i,s,A,h=0;if(t>0){for(h=e[--t];t>0&&(i=h,s=e[--t],h=i+s,A=s-(h-i),!A););t>0&&(A<0&&e[t-1]<0||A>0&&e[t-1]>0)&&(s=A*2,i=h+s,s==i-h&&(h=i))}return h}}class qN extends Map{constructor(e,t=$N){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(YE(this,e))}has(e){return super.has(YE(this,e))}set(e,t){return super.set(ZN(this,e),t)}delete(e){return super.delete(KN(this,e))}}function YE({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):t}function ZN({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function KN({_intern:n,_key:e},t){const i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function $N(n){return n!==null&&typeof n=="object"?n.valueOf():n}function JN(n){return n}function RT(n,e,...t){return eB(n,JN,e,t)}function eB(n,e,t,i){return function s(A,h){if(h>=i.length)return t(A);const m=new qN,_=i[h++];let E=-1;for(const x of A){const S=_(x,++E,A),C=m.get(S);C?C.push(x):m.set(S,[x])}for(const[x,S]of m)m.set(x,s(S,h));return e(m)}(n,0)}const tB=Math.sqrt(50),nB=Math.sqrt(10),iB=Math.sqrt(2);function Q0(n,e,t){const i=(e-n)/Math.max(0,t),s=Math.floor(Math.log10(i)),A=i/Math.pow(10,s),h=A>=tB?10:A>=nB?5:A>=iB?2:1;let m,_,E;return s<0?(E=Math.pow(10,-s)/h,m=Math.round(n*E),_=Math.round(e*E),m/E<n&&++m,_/E>e&&--_,E=-E):(E=Math.pow(10,s)*h,m=Math.round(n/E),_=Math.round(e/E),m*E<n&&++m,_*E>e&&--_),_<m&&.5<=t&&t<2?Q0(n,e,t*2):[m,_,E]}function rB(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const i=e<n,[s,A,h]=i?Q0(e,n,t):Q0(n,e,t);if(!(A>=s))return[];const m=A-s+1,_=new Array(m);if(i)if(h<0)for(let E=0;E<m;++E)_[E]=(A-E)/-h;else for(let E=0;E<m;++E)_[E]=(A-E)*h;else if(h<0)for(let E=0;E<m;++E)_[E]=(s+E)/-h;else for(let E=0;E<m;++E)_[E]=(s+E)*h;return _}function zm(n,e,t){return e=+e,n=+n,t=+t,Q0(n,e,t)[2]}function sB(n,e,t){e=+e,n=+n,t=+t;const i=e<n,s=i?zm(e,n,t):zm(n,e,t);return(i?-1:1)*(s<0?1/-s:s)}function LT(n,e){let t;if(e===void 0)for(const i of n)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(t>s||t===void 0&&s>=s)&&(t=s)}return t}function OT(n,e,t){n=+n,e=+e,t=(s=arguments.length)<2?(e=n,n=0,1):s<3?1:+t;for(var i=-1,s=Math.max(0,Math.ceil((e-n)/t))|0,A=new Array(s);++i<s;)A[i]=n+i*t;return A}function DT(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function NT(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}function aB(n){return function(){return n}}function AB(n){return+n}var QE=[0,1];function Er(n){return n}function Gm(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:aB(isNaN(e)?NaN:.5)}function oB(n,e){var t;return n>e&&(t=n,n=e,e=t),function(i){return Math.max(n,Math.min(e,i))}}function lB(n,e,t){var i=n[0],s=n[1],A=e[0],h=e[1];return s<i?(i=Gm(s,i),A=t(h,A)):(i=Gm(i,s),A=t(A,h)),function(m){return A(i(m))}}function uB(n,e,t){var i=Math.min(n.length,e.length)-1,s=new Array(i),A=new Array(i),h=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++h<i;)s[h]=Gm(n[h],n[h+1]),A[h]=t(e[h],e[h+1]);return function(m){var _=XN(n,m,1,i)-1;return A[_](s[_](m))}}function BT(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function PT(){var n=QE,e=QE,t=ch,i,s,A,h=Er,m,_,E;function x(){var C=Math.min(n.length,e.length);return h!==Er&&(h=oB(n[0],n[C-1])),m=C>2?uB:lB,_=E=null,S}function S(C){return C==null||isNaN(C=+C)?A:(_||(_=m(n.map(i),e,t)))(i(h(C)))}return S.invert=function(C){return h(s((E||(E=m(e,n.map(i),j0)))(C)))},S.domain=function(C){return arguments.length?(n=Array.from(C,AB),x()):n.slice()},S.range=function(C){return arguments.length?(e=Array.from(C),x()):e.slice()},S.rangeRound=function(C){return e=Array.from(C),t=aT,x()},S.clamp=function(C){return arguments.length?(h=C?!0:Er,x()):h!==Er},S.interpolate=function(C){return arguments.length?(t=C,x()):t},S.unknown=function(C){return arguments.length?(A=C,S):A},function(C,L){return i=C,s=L,x()}}function cB(){return PT()(Er,Er)}function fB(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function X0(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,i=n.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+n.slice(t+1)]}function Ml(n){return n=X0(Math.abs(n)),n?n[1]:NaN}function hB(n,e){return function(t,i){for(var s=t.length,A=[],h=0,m=n[0],_=0;s>0&&m>0&&(_+m+1>i&&(m=Math.max(1,i-_)),A.push(t.substring(s-=m,s+m)),!((_+=m+1)>i));)m=n[h=(h+1)%n.length];return A.reverse().join(e)}}function dB(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var gB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function W0(n){if(!(e=gB.exec(n)))throw new Error("invalid format: "+n);var e;return new Vp({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}W0.prototype=Vp.prototype;function Vp(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}Vp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mB(n){e:for(var e=n.length,t=1,i=-1,s;t<e;++t)switch(n[t]){case".":i=s=t;break;case"0":i===0&&(i=t),s=t;break;default:if(!+n[t])break e;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(s+1):n}var IT;function pB(n,e){var t=X0(n,e);if(!t)return n+"";var i=t[0],s=t[1],A=s-(IT=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,h=i.length;return A===h?i:A>h?i+new Array(A-h+1).join("0"):A>0?i.slice(0,A)+"."+i.slice(A):"0."+new Array(1-A).join("0")+X0(n,Math.max(0,e+A-1))[0]}function XE(n,e){var t=X0(n,e);if(!t)return n+"";var i=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const WE={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:fB,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>XE(n*100,e),r:XE,s:pB,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function qE(n){return n}var ZE=Array.prototype.map,KE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _B(n){var e=n.grouping===void 0||n.thousands===void 0?qE:hB(ZE.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",s=n.decimal===void 0?".":n.decimal+"",A=n.numerals===void 0?qE:dB(ZE.call(n.numerals,String)),h=n.percent===void 0?"%":n.percent+"",m=n.minus===void 0?"":n.minus+"",_=n.nan===void 0?"NaN":n.nan+"";function E(S){S=W0(S);var C=S.fill,L=S.align,B=S.sign,G=S.symbol,j=S.zero,H=S.width,Y=S.comma,K=S.precision,ee=S.trim,Z=S.type;Z==="n"?(Y=!0,Z="g"):WE[Z]||(K===void 0&&(K=12),ee=!0,Z="g"),(j||C==="0"&&L==="=")&&(j=!0,C="0",L="=");var se=G==="$"?t:G==="#"&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",be=G==="$"?i:/[%p]/.test(Z)?h:"",he=WE[Z],Ae=/[defgprs%]/.test(Z);K=K===void 0?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));function ye(me){var Ne=se,Be=be,He,je,Te;if(Z==="c")Be=he(me)+Be,me="";else{me=+me;var We=me<0||1/me<0;if(me=isNaN(me)?_:he(Math.abs(me),K),ee&&(me=mB(me)),We&&+me==0&&B!=="+"&&(We=!1),Ne=(We?B==="("?B:m:B==="-"||B==="("?"":B)+Ne,Be=(Z==="s"?KE[8+IT/3]:"")+Be+(We&&B==="("?")":""),Ae){for(He=-1,je=me.length;++He<je;)if(Te=me.charCodeAt(He),48>Te||Te>57){Be=(Te===46?s+me.slice(He+1):me.slice(He))+Be,me=me.slice(0,He);break}}}Y&&!j&&(me=e(me,1/0));var $e=Ne.length+me.length+Be.length,Et=$e<H?new Array(H-$e+1).join(C):"";switch(Y&&j&&(me=e(Et+me,Et.length?H-Be.length:1/0),Et=""),L){case"<":me=Ne+me+Be+Et;break;case"=":me=Ne+Et+me+Be;break;case"^":me=Et.slice(0,$e=Et.length>>1)+Ne+me+Be+Et.slice($e);break;default:me=Et+Ne+me+Be;break}return A(me)}return ye.toString=function(){return S+""},ye}function x(S,C){var L=E((S=W0(S),S.type="f",S)),B=Math.max(-8,Math.min(8,Math.floor(Ml(C)/3)))*3,G=Math.pow(10,-B),j=KE[8+B/3];return function(H){return L(G*H)+j}}return{format:E,formatPrefix:x}}var A0,FT,UT;bB({thousands:",",grouping:[3],currency:["$",""]});function bB(n){return A0=_B(n),FT=A0.format,UT=A0.formatPrefix,A0}function EB(n){return Math.max(0,-Ml(Math.abs(n)))}function yB(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ml(e)/3)))*3-Ml(Math.abs(n)))}function vB(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Ml(e)-Ml(n))+1}function TB(n,e,t,i){var s=sB(n,e,t),A;switch(i=W0(i??",f"),i.type){case"s":{var h=Math.max(Math.abs(n),Math.abs(e));return i.precision==null&&!isNaN(A=yB(s,h))&&(i.precision=A),UT(i,h)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(A=vB(s,Math.max(Math.abs(n),Math.abs(e))))&&(i.precision=A-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(A=EB(s))&&(i.precision=A-(i.type==="%")*2);break}}return FT(i)}function Hp(n){var e=n.domain;return n.ticks=function(t){var i=e();return rB(i[0],i[i.length-1],t??10)},n.tickFormat=function(t,i){var s=e();return TB(s[0],s[s.length-1],t??10,i)},n.nice=function(t){t==null&&(t=10);var i=e(),s=0,A=i.length-1,h=i[s],m=i[A],_,E,x=10;for(m<h&&(E=h,h=m,m=E,E=s,s=A,A=E);x-- >0;){if(E=zm(h,m,t),E===_)return i[s]=h,i[A]=m,e(i);if(E>0)h=Math.floor(h/E)*E,m=Math.ceil(m/E)*E;else if(E<0)h=Math.ceil(h*E)/E,m=Math.floor(m*E)/E;else break;_=E}return n},n}function kT(){var n=cB();return n.copy=function(){return BT(n,kT())},DT.apply(n,arguments),Hp(n)}function $E(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function wB(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function xB(n){return n<0?-n*n:n*n}function zT(n){var e=n(Er,Er),t=1;function i(){return t===1?n(Er,Er):t===.5?n(wB,xB):n($E(t),$E(1/t))}return e.exponent=function(s){return arguments.length?(t=+s,i()):t},Hp(e)}function jp(){var n=zT(PT());return n.copy=function(){return BT(n,jp()).exponent(n.exponent())},DT.apply(n,arguments),n}function SB(){return jp.apply(null,arguments).exponent(.5)}const qg=new Date,Zg=new Date;function ci(n,e,t,i){function s(A){return n(A=arguments.length===0?new Date:new Date(+A)),A}return s.floor=A=>(n(A=new Date(+A)),A),s.ceil=A=>(n(A=new Date(A-1)),e(A,1),n(A),A),s.round=A=>{const h=s(A),m=s.ceil(A);return A-h<m-A?h:m},s.offset=(A,h)=>(e(A=new Date(+A),h==null?1:Math.floor(h)),A),s.range=(A,h,m)=>{const _=[];if(A=s.ceil(A),m=m==null?1:Math.floor(m),!(A<h)||!(m>0))return _;let E;do _.push(E=new Date(+A)),e(A,m),n(A);while(E<A&&A<h);return _},s.filter=A=>ci(h=>{if(h>=h)for(;n(h),!A(h);)h.setTime(h-1)},(h,m)=>{if(h>=h)if(m<0)for(;++m<=0;)for(;e(h,-1),!A(h););else for(;--m>=0;)for(;e(h,1),!A(h););}),t&&(s.count=(A,h)=>(qg.setTime(+A),Zg.setTime(+h),n(qg),n(Zg),Math.floor(t(qg,Zg))),s.every=A=>(A=Math.floor(A),!isFinite(A)||!(A>0)?null:A>1?s.filter(i?h=>i(h)%A===0:h=>s.count(0,h)%A===0):s)),s}const mc=1e3,Ja=mc*60,pc=Ja*60,_c=pc*24,GT=_c*7,VT=ci(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*mc)},(n,e)=>(e-n)/mc,n=>n.getUTCSeconds());VT.range;const HT=ci(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*mc)},(n,e)=>{n.setTime(+n+e*Ja)},(n,e)=>(e-n)/Ja,n=>n.getMinutes());HT.range;const MB=ci(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Ja)},(n,e)=>(e-n)/Ja,n=>n.getUTCMinutes());MB.range;const jT=ci(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*mc-n.getMinutes()*Ja)},(n,e)=>{n.setTime(+n+e*pc)},(n,e)=>(e-n)/pc,n=>n.getHours());jT.range;const CB=ci(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*pc)},(n,e)=>(e-n)/pc,n=>n.getUTCHours());CB.range;const dh=ci(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Ja)/_c,n=>n.getDate()-1);dh.range;const Yp=ci(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/_c,n=>n.getUTCDate()-1);Yp.range;const RB=ci(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/_c,n=>Math.floor(n/_c));RB.range;function JA(n){return ci(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ja)/GT)}const YT=JA(0),q0=JA(1),LB=JA(2),OB=JA(3),Cl=JA(4),DB=JA(5),NB=JA(6);YT.range;q0.range;LB.range;OB.range;Cl.range;DB.range;NB.range;function eo(n){return ci(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/GT)}const QT=eo(0),Z0=eo(1),BB=eo(2),PB=eo(3),Rl=eo(4),IB=eo(5),FB=eo(6);QT.range;Z0.range;BB.range;PB.range;Rl.range;IB.range;FB.range;const XT=ci(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());XT.range;const UB=ci(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());UB.range;const eA=ci(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());eA.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:ci(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});eA.range;const WA=ci(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());WA.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:ci(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});WA.range;function Kg(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function $g(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Vu(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function kB(n){var e=n.dateTime,t=n.date,i=n.time,s=n.periods,A=n.days,h=n.shortDays,m=n.months,_=n.shortMonths,E=Hu(s),x=ju(s),S=Hu(A),C=ju(A),L=Hu(h),B=ju(h),G=Hu(m),j=ju(m),H=Hu(_),Y=ju(_),K={a:We,A:$e,b:Et,B:te,c:null,d:ry,e:ry,f:oP,g:_P,G:EP,H:sP,I:aP,j:AP,L:WT,m:lP,M:uP,p:De,q:Je,Q:Ay,s:oy,S:cP,u:fP,U:hP,V:dP,w:gP,W:mP,x:null,X:null,y:pP,Y:bP,Z:yP,"%":ay},ee={a:nt,A:Ve,b:Lt,B:_t,c:null,d:sy,e:sy,f:xP,g:PP,G:FP,H:vP,I:TP,j:wP,L:ZT,m:SP,M:MP,p:kt,q:St,Q:Ay,s:oy,S:CP,u:RP,U:LP,V:OP,w:DP,W:NP,x:null,X:null,y:BP,Y:IP,Z:UP,"%":ay},Z={a:ye,A:me,b:Ne,B:Be,c:He,d:ny,e:ny,f:tP,g:ty,G:ey,H:iy,I:iy,j:KB,L:eP,m:ZB,M:$B,p:Ae,q:qB,Q:iP,s:rP,S:JB,u:jB,U:YB,V:QB,w:HB,W:XB,x:je,X:Te,y:ty,Y:ey,Z:WB,"%":nP};K.x=se(t,K),K.X=se(i,K),K.c=se(e,K),ee.x=se(t,ee),ee.X=se(i,ee),ee.c=se(e,ee);function se(Me,Ge){return function(lt){var Ce=[],qt=-1,Nt=0,An=Me.length,jt,nn,hi;for(lt instanceof Date||(lt=new Date(+lt));++qt<An;)Me.charCodeAt(qt)===37&&(Ce.push(Me.slice(Nt,qt)),(nn=JE[jt=Me.charAt(++qt)])!=null?jt=Me.charAt(++qt):nn=jt==="e"?" ":"0",(hi=Ge[jt])&&(jt=hi(lt,nn)),Ce.push(jt),Nt=qt+1);return Ce.push(Me.slice(Nt,qt)),Ce.join("")}}function be(Me,Ge){return function(lt){var Ce=Vu(1900,void 0,1),qt=he(Ce,Me,lt+="",0),Nt,An;if(qt!=lt.length)return null;if("Q"in Ce)return new Date(Ce.Q);if("s"in Ce)return new Date(Ce.s*1e3+("L"in Ce?Ce.L:0));if(Ge&&!("Z"in Ce)&&(Ce.Z=0),"p"in Ce&&(Ce.H=Ce.H%12+Ce.p*12),Ce.m===void 0&&(Ce.m="q"in Ce?Ce.q:0),"V"in Ce){if(Ce.V<1||Ce.V>53)return null;"w"in Ce||(Ce.w=1),"Z"in Ce?(Nt=$g(Vu(Ce.y,0,1)),An=Nt.getUTCDay(),Nt=An>4||An===0?Z0.ceil(Nt):Z0(Nt),Nt=Yp.offset(Nt,(Ce.V-1)*7),Ce.y=Nt.getUTCFullYear(),Ce.m=Nt.getUTCMonth(),Ce.d=Nt.getUTCDate()+(Ce.w+6)%7):(Nt=Kg(Vu(Ce.y,0,1)),An=Nt.getDay(),Nt=An>4||An===0?q0.ceil(Nt):q0(Nt),Nt=dh.offset(Nt,(Ce.V-1)*7),Ce.y=Nt.getFullYear(),Ce.m=Nt.getMonth(),Ce.d=Nt.getDate()+(Ce.w+6)%7)}else("W"in Ce||"U"in Ce)&&("w"in Ce||(Ce.w="u"in Ce?Ce.u%7:"W"in Ce?1:0),An="Z"in Ce?$g(Vu(Ce.y,0,1)).getUTCDay():Kg(Vu(Ce.y,0,1)).getDay(),Ce.m=0,Ce.d="W"in Ce?(Ce.w+6)%7+Ce.W*7-(An+5)%7:Ce.w+Ce.U*7-(An+6)%7);return"Z"in Ce?(Ce.H+=Ce.Z/100|0,Ce.M+=Ce.Z%100,$g(Ce)):Kg(Ce)}}function he(Me,Ge,lt,Ce){for(var qt=0,Nt=Ge.length,An=lt.length,jt,nn;qt<Nt;){if(Ce>=An)return-1;if(jt=Ge.charCodeAt(qt++),jt===37){if(jt=Ge.charAt(qt++),nn=Z[jt in JE?Ge.charAt(qt++):jt],!nn||(Ce=nn(Me,lt,Ce))<0)return-1}else if(jt!=lt.charCodeAt(Ce++))return-1}return Ce}function Ae(Me,Ge,lt){var Ce=E.exec(Ge.slice(lt));return Ce?(Me.p=x.get(Ce[0].toLowerCase()),lt+Ce[0].length):-1}function ye(Me,Ge,lt){var Ce=L.exec(Ge.slice(lt));return Ce?(Me.w=B.get(Ce[0].toLowerCase()),lt+Ce[0].length):-1}function me(Me,Ge,lt){var Ce=S.exec(Ge.slice(lt));return Ce?(Me.w=C.get(Ce[0].toLowerCase()),lt+Ce[0].length):-1}function Ne(Me,Ge,lt){var Ce=H.exec(Ge.slice(lt));return Ce?(Me.m=Y.get(Ce[0].toLowerCase()),lt+Ce[0].length):-1}function Be(Me,Ge,lt){var Ce=G.exec(Ge.slice(lt));return Ce?(Me.m=j.get(Ce[0].toLowerCase()),lt+Ce[0].length):-1}function He(Me,Ge,lt){return he(Me,e,Ge,lt)}function je(Me,Ge,lt){return he(Me,t,Ge,lt)}function Te(Me,Ge,lt){return he(Me,i,Ge,lt)}function We(Me){return h[Me.getDay()]}function $e(Me){return A[Me.getDay()]}function Et(Me){return _[Me.getMonth()]}function te(Me){return m[Me.getMonth()]}function De(Me){return s[+(Me.getHours()>=12)]}function Je(Me){return 1+~~(Me.getMonth()/3)}function nt(Me){return h[Me.getUTCDay()]}function Ve(Me){return A[Me.getUTCDay()]}function Lt(Me){return _[Me.getUTCMonth()]}function _t(Me){return m[Me.getUTCMonth()]}function kt(Me){return s[+(Me.getUTCHours()>=12)]}function St(Me){return 1+~~(Me.getUTCMonth()/3)}return{format:function(Me){var Ge=se(Me+="",K);return Ge.toString=function(){return Me},Ge},parse:function(Me){var Ge=be(Me+="",!1);return Ge.toString=function(){return Me},Ge},utcFormat:function(Me){var Ge=se(Me+="",ee);return Ge.toString=function(){return Me},Ge},utcParse:function(Me){var Ge=be(Me+="",!0);return Ge.toString=function(){return Me},Ge}}}var JE={"-":"",_:" ",0:"0"},ni=/^\s*\d+/,zB=/^%/,GB=/[\\^$*+?|[\]().{}]/g;function Wt(n,e,t){var i=n<0?"-":"",s=(i?-n:n)+"",A=s.length;return i+(A<t?new Array(t-A+1).join(e)+s:s)}function VB(n){return n.replace(GB,"\\$&")}function Hu(n){return new RegExp("^(?:"+n.map(VB).join("|")+")","i")}function ju(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function HB(n,e,t){var i=ni.exec(e.slice(t,t+1));return i?(n.w=+i[0],t+i[0].length):-1}function jB(n,e,t){var i=ni.exec(e.slice(t,t+1));return i?(n.u=+i[0],t+i[0].length):-1}function YB(n,e,t){var i=ni.exec(e.slice(t,t+2));return i?(n.U=+i[0],t+i[0].length):-1}function QB(n,e,t){var i=ni.exec(e.slice(t,t+2));return i?(n.V=+i[0],t+i[0].length):-1}function XB(n,e,t){var i=ni.exec(e.slice(t,t+2));return i?(n.W=+i[0],t+i[0].length):-1}function ey(n,e,t){var i=ni.exec(e.slice(t,t+4));return i?(n.y=+i[0],t+i[0].length):-1}function ty(n,e,t){var i=ni.exec(e.slice(t,t+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),t+i[0].length):-1}function WB(n,e,t){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),t+i[0].length):-1}function qB(n,e,t){var i=ni.exec(e.slice(t,t+1));return i?(n.q=i[0]*3-3,t+i[0].length):-1}function ZB(n,e,t){var i=ni.exec(e.slice(t,t+2));return i?(n.m=i[0]-1,t+i[0].length):-1}function ny(n,e,t){var i=ni.exec(e.slice(t,t+2));return i?(n.d=+i[0],t+i[0].length):-1}function KB(n,e,t){var i=ni.exec(e.slice(t,t+3));return i?(n.m=0,n.d=+i[0],t+i[0].length):-1}function iy(n,e,t){var i=ni.exec(e.slice(t,t+2));return i?(n.H=+i[0],t+i[0].length):-1}function $B(n,e,t){var i=ni.exec(e.slice(t,t+2));return i?(n.M=+i[0],t+i[0].length):-1}function JB(n,e,t){var i=ni.exec(e.slice(t,t+2));return i?(n.S=+i[0],t+i[0].length):-1}function eP(n,e,t){var i=ni.exec(e.slice(t,t+3));return i?(n.L=+i[0],t+i[0].length):-1}function tP(n,e,t){var i=ni.exec(e.slice(t,t+6));return i?(n.L=Math.floor(i[0]/1e3),t+i[0].length):-1}function nP(n,e,t){var i=zB.exec(e.slice(t,t+1));return i?t+i[0].length:-1}function iP(n,e,t){var i=ni.exec(e.slice(t));return i?(n.Q=+i[0],t+i[0].length):-1}function rP(n,e,t){var i=ni.exec(e.slice(t));return i?(n.s=+i[0],t+i[0].length):-1}function ry(n,e){return Wt(n.getDate(),e,2)}function sP(n,e){return Wt(n.getHours(),e,2)}function aP(n,e){return Wt(n.getHours()%12||12,e,2)}function AP(n,e){return Wt(1+dh.count(eA(n),n),e,3)}function WT(n,e){return Wt(n.getMilliseconds(),e,3)}function oP(n,e){return WT(n,e)+"000"}function lP(n,e){return Wt(n.getMonth()+1,e,2)}function uP(n,e){return Wt(n.getMinutes(),e,2)}function cP(n,e){return Wt(n.getSeconds(),e,2)}function fP(n){var e=n.getDay();return e===0?7:e}function hP(n,e){return Wt(YT.count(eA(n)-1,n),e,2)}function qT(n){var e=n.getDay();return e>=4||e===0?Cl(n):Cl.ceil(n)}function dP(n,e){return n=qT(n),Wt(Cl.count(eA(n),n)+(eA(n).getDay()===4),e,2)}function gP(n){return n.getDay()}function mP(n,e){return Wt(q0.count(eA(n)-1,n),e,2)}function pP(n,e){return Wt(n.getFullYear()%100,e,2)}function _P(n,e){return n=qT(n),Wt(n.getFullYear()%100,e,2)}function bP(n,e){return Wt(n.getFullYear()%1e4,e,4)}function EP(n,e){var t=n.getDay();return n=t>=4||t===0?Cl(n):Cl.ceil(n),Wt(n.getFullYear()%1e4,e,4)}function yP(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Wt(e/60|0,"0",2)+Wt(e%60,"0",2)}function sy(n,e){return Wt(n.getUTCDate(),e,2)}function vP(n,e){return Wt(n.getUTCHours(),e,2)}function TP(n,e){return Wt(n.getUTCHours()%12||12,e,2)}function wP(n,e){return Wt(1+Yp.count(WA(n),n),e,3)}function ZT(n,e){return Wt(n.getUTCMilliseconds(),e,3)}function xP(n,e){return ZT(n,e)+"000"}function SP(n,e){return Wt(n.getUTCMonth()+1,e,2)}function MP(n,e){return Wt(n.getUTCMinutes(),e,2)}function CP(n,e){return Wt(n.getUTCSeconds(),e,2)}function RP(n){var e=n.getUTCDay();return e===0?7:e}function LP(n,e){return Wt(QT.count(WA(n)-1,n),e,2)}function KT(n){var e=n.getUTCDay();return e>=4||e===0?Rl(n):Rl.ceil(n)}function OP(n,e){return n=KT(n),Wt(Rl.count(WA(n),n)+(WA(n).getUTCDay()===4),e,2)}function DP(n){return n.getUTCDay()}function NP(n,e){return Wt(Z0.count(WA(n)-1,n),e,2)}function BP(n,e){return Wt(n.getUTCFullYear()%100,e,2)}function PP(n,e){return n=KT(n),Wt(n.getUTCFullYear()%100,e,2)}function IP(n,e){return Wt(n.getUTCFullYear()%1e4,e,4)}function FP(n,e){var t=n.getUTCDay();return n=t>=4||t===0?Rl(n):Rl.ceil(n),Wt(n.getUTCFullYear()%1e4,e,4)}function UP(){return"+0000"}function ay(){return"%"}function Ay(n){return+n}function oy(n){return Math.floor(+n/1e3)}var $o,Pi,tl;kP({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function kP(n){return $o=kB(n),Pi=$o.format,tl=$o.parse,$o.utcFormat,$o.utcParse,$o}function $T(){var n=0,e=1,t,i,s,A,h=Er,m=!1,_;function E(S){return S==null||isNaN(S=+S)?_:h(s===0?.5:(S=(A(S)-t)*s,m?Math.max(0,Math.min(1,S)):S))}E.domain=function(S){return arguments.length?([n,e]=S,t=A(n=+n),i=A(e=+e),s=t===i?0:1/(i-t),E):[n,e]},E.clamp=function(S){return arguments.length?(m=!!S,E):m},E.interpolator=function(S){return arguments.length?(h=S,E):h};function x(S){return function(C){var L,B;return arguments.length?([L,B]=C,h=S(L,B),E):[h(0),h(1)]}}return E.range=x(ch),E.rangeRound=x(aT),E.unknown=function(S){return arguments.length?(_=S,E):_},function(S){return A=S,t=S(n),i=S(e),s=t===i?0:1/(i-t),E}}function JT(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function ew(){var n=Hp($T()(Er));return n.copy=function(){return JT(n,ew())},NT.apply(n,arguments)}function tw(){var n=zT($T());return n.copy=function(){return JT(n,tw()).exponent(n.exponent())},NT.apply(n,arguments)}const zP="#fff",GP=.4,Qp="rgba(240,240,240,0.5)",VP=[Qp,"#137CBD"],HP="rgba(220,220,220,0.5)",jP=[Qp,"#f6654e"],YP=[Qp,"#00a9cc"],QP=[255,255,255,255];function XP(n){return Math.round(n*255)}function ly(n,e){const t=XA(n);if(!t)return console.warn("Invalid color: ",n),`rgba(255, 255, 255, ${e})`;const i=t.rgb();return`rgba(${i.r}, ${i.g}, ${i.b}, ${e})`}function as(n){if(Array.isArray(n))return n;const e=XA(n);if(!e)return console.warn("Invalid color: ",n),QP;const t=e.rgb();return[Math.floor(t.r),Math.floor(t.g),Math.floor(t.b),XP(e.opacity)]}function Jr(n,e){return n?as(n):typeof e=="string"?as(e):e}const $n=n=>n[n.length-1];var Vm;(function(n){n.primary="#162d3c"})(Vm||(Vm={}));const uy=20,Jo=n=>OT(0,uy+1).map(e=>n(e/uy)).reverse(),Hm="rgba(240,240,240,0.5)",WP=[Hm,Vm.primary],qP=["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],ZP=["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],nw=["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],KP=nw,iw={Blues:$n(yT),BluGrn:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],BluYl:qP,BrwnYl:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],BuGn:$n(lT),BuPu:$n(uT),Burg:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],BurgYl:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],Cool:Jo(zN),DarkMint:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],Emrld:ZP,GnBu:$n(cT),Grayish:WP,Greens:$n(vT),Greys:$n(TT),Inferno:Jo(HN),Magenta:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],Magma:Jo(VN),Mint:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],Oranges:$n(ST),OrRd:$n(fT),OrYel:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],Peach:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],Plasma:Jo(jN),PinkYl:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],PuBu:$n(dT),PuBuGn:$n(hT),PuRd:$n(gT),Purp:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],Purples:$n(wT),PurpOr:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],RdPu:$n(mT),RedOr:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],Reds:$n(xT),Sunset:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],SunsetDark:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],Teal:nw,TealGrn:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],Viridis:Jo(GN),Warm:Jo(kN),YlGn:$n(_T),YlGnBu:$n(pT),YlOrBr:$n(bT),YlOrRd:$n(ET)},$P="#f52020",JP="#17a5be",e9={negative:{flows:{scheme:[Hm,JP]}},positive:{flows:{scheme:[Hm,$P]}},locationAreas:{outline:"rgba(92,112,128,0.5)",normal:"rgba(220,220,220,0.5)"},outlineColor:"rgb(230,233,237)"};function t9(n){return rw(!1,n.colorScheme,n.darkMode,n.fadeEnabled,n.fadeOpacityEnabled,n.fadeAmount,n.animationEnabled)}function rw(n,e,t,i,s,A,h){if(n)return e9;let m;Array.isArray(e)?m=e:(m=e&&iw[e]||KP,t&&(m=m.slice().reverse()));{const _=OT(0,Math.max(10,m.length)),E=_.length-1,x=ew(sT(m)).domain([0,E]);if(!i||A===0)m=_.map((S,C)=>x(C));else{const S=jp().exponent(1.5).domain([E,0]).range([0,2*A/100]);m=_.map((C,L)=>{const B=x(L),G=S(L);if(B==null||G==null)return"#000";const j=oh(B);return j.l=t?j.l-j.l*G:j.l+(100-j.l)*G,j.c=j.c-j.c*(G/4),s&&(j.opacity=j.opacity*(1-G)),j.toString()})}}return{darkMode:t,flows:{scheme:m},locationCircles:{outgoing:t?"#000":"#fff"},outlineColor:t?"#000":"rgba(255, 255, 255, 0.5)"}}function n9(n){const e=iT,t=n.length;let i=new Array(t),s=new Array(t),A=new Array(t),h=new Array(t),m,_;for(m=0;m<t;++m)_=dc(n[m]),i[m]=_.r||0,s[m]=_.g||0,A[m]=_.b||0,h[m]=_.opacity||0;return i=e(i),s=e(s),A=e(A),h=e(h),function(E){return _.r=i(E),_.g=s(E),_.b=A(E),_.opacity=h(E),_+""}}function Jg(n,e,t){const i=tw(n9(e)).exponent(.3333333333333333).domain(n);return s=>as(i(s))}function i9(n,e,t){const i=e[0],s=e[1];if(sw(n)){const h=Jg([0,s],n.positive.flows.scheme),m=Jg([0,i],n.negative.flows.scheme);return _=>_>=0?h(_):m(_)}const A=Jg([0,s||0],n.flows.scheme);return h=>A(h)}function r9(n){return n.positive!==void 0}function sw(n){return n.positive!==void 0}function s9(n,e){const t=n&&n.normal||HP,i=oh(t),s=as(t);return{normal:s,connected:Jr(n&&n.connected,s),highlighted:Jr(n&&n.highlighted,ly(i[e?"brighter":"darker"](1).toString(),.5)),selected:Jr(n&&n.selected,ly(i[e?"brighter":"darker"](2).toString(),.8)),outline:Jr(n&&n.outline,as(i[e?"brighter":"darker"](4).toString()))}}function jm(n,e,t){var _,E;const i=n&&n.flows&&n.flows.scheme||e,s=oh(i[i.length-1]),A=Jr(n&&n.flows&&n.flows.highlighted,as(s[t?"brighter":"darker"](.7).toString())),h=Jr((_=n==null?void 0:n.locationCircles)==null?void 0:_.empty,t?"#000":"#fff"),m=Jr(n&&n.locationCircles&&n.locationCircles.inner,s.toString());return{flows:{scheme:i,highlighted:A},locationCircles:{inner:m,outgoing:Jr(n&&n.locationCircles&&n.locationCircles.outgoing,t?"#000":"#fff"),incoming:Jr(n&&n.locationCircles&&n.locationCircles.incoming,s[t?"brighter":"darker"](1.25).toString()),highlighted:Jr(n&&n.locationCircles&&n.locationCircles.highlighted,A),empty:h,outlineEmptyMix:((E=n==null?void 0:n.locationCircles)==null?void 0:E.outlineEmptyMix)??.4}}}function aw(n){const e=!!(n&&n.darkMode);return{darkMode:e,locationAreas:s9(n&&n.locationAreas,e),outlineColor:as(n&&n.outlineColor||zP),dimmedOpacity:n&&n.dimmedOpacity!=null?n.dimmedOpacity:GP}}function a9(n){const e=aw(n);return{...e,...jm(n,VP,e.darkMode)}}function A9(n){const e=aw(n);return{...e,positive:jm(n&&n.positive,jP,e.darkMode),negative:jm(n&&n.negative,YP,e.darkMode)}}const cy=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],em=1,Yu=8;class gh{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,i]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");const s=i>>4;if(s!==em)throw new Error(`Got v${s} data when expected v${em}.`);const A=cy[i&15];if(!A)throw new Error("Unrecognized array type.");const[h]=new Uint16Array(e,2,1),[m]=new Uint32Array(e,4,1);return new gh(m,h,A,e)}constructor(e,t=64,i=Float64Array,s){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const A=cy.indexOf(this.ArrayType),h=e*2*this.ArrayType.BYTES_PER_ELEMENT,m=e*this.IndexArrayType.BYTES_PER_ELEMENT,_=(8-m%8)%8;if(A<0)throw new Error(`Unexpected typed array class: ${i}.`);s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,Yu,e),this.coords=new this.ArrayType(this.data,Yu+m+_,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Yu+h+m+_),this.ids=new this.IndexArrayType(this.data,Yu,e),this.coords=new this.ArrayType(this.data,Yu+m+_,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(em<<4)+A]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=e,this.coords[this._pos++]=t,i}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Ym(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,i,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:A,coords:h,nodeSize:m}=this,_=[0,A.length-1,0],E=[];for(;_.length;){const x=_.pop()||0,S=_.pop()||0,C=_.pop()||0;if(S-C<=m){for(let j=C;j<=S;j++){const H=h[2*j],Y=h[2*j+1];H>=e&&H<=i&&Y>=t&&Y<=s&&E.push(A[j])}continue}const L=C+S>>1,B=h[2*L],G=h[2*L+1];B>=e&&B<=i&&G>=t&&G<=s&&E.push(A[L]),(x===0?e<=B:t<=G)&&(_.push(C),_.push(L-1),_.push(1-x)),(x===0?i>=B:s>=G)&&(_.push(L+1),_.push(S),_.push(1-x))}return E}within(e,t,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:A,nodeSize:h}=this,m=[0,s.length-1,0],_=[],E=i*i;for(;m.length;){const x=m.pop()||0,S=m.pop()||0,C=m.pop()||0;if(S-C<=h){for(let j=C;j<=S;j++)fy(A[2*j],A[2*j+1],e,t)<=E&&_.push(s[j]);continue}const L=C+S>>1,B=A[2*L],G=A[2*L+1];fy(B,G,e,t)<=E&&_.push(s[L]),(x===0?e-i<=B:t-i<=G)&&(m.push(C),m.push(L-1),m.push(1-x)),(x===0?e+i>=B:t+i>=G)&&(m.push(L+1),m.push(S),m.push(1-x))}return _}}function Ym(n,e,t,i,s,A){if(s-i<=t)return;const h=i+s>>1;Aw(n,e,h,i,s,A),Ym(n,e,t,i,h-1,1-A),Ym(n,e,t,h+1,s,1-A)}function Aw(n,e,t,i,s,A){for(;s>i;){if(s-i>600){const E=s-i+1,x=t-i+1,S=Math.log(E),C=.5*Math.exp(2*S/3),L=.5*Math.sqrt(S*C*(E-C)/E)*(x-E/2<0?-1:1),B=Math.max(i,Math.floor(t-x*C/E+L)),G=Math.min(s,Math.floor(t+(E-x)*C/E+L));Aw(n,e,t,B,G,A)}const h=e[2*t+A];let m=i,_=s;for(Qu(n,e,i,t),e[2*s+A]>h&&Qu(n,e,i,s);m<_;){for(Qu(n,e,m,_),m++,_--;e[2*m+A]<h;)m++;for(;e[2*_+A]>h;)_--}e[2*i+A]===h?Qu(n,e,i,_):(_++,Qu(n,e,_,s)),_<=t&&(i=_+1),t<=_&&(s=_-1)}}function Qu(n,e,t,i){tm(n,t,i),tm(e,2*t,2*i),tm(e,2*t+1,2*i+1)}function tm(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function fy(n,e,t,i){const s=n-t,A=e-i;return s*s+A*A}var K0="NOT_FOUND";function o9(n){var e;return{get:function(i){return e&&n(e.key,i)?e.value:K0},put:function(i,s){e={key:i,value:s}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function l9(n,e){var t=[];function i(m){var _=t.findIndex(function(x){return e(m,x.key)});if(_>-1){var E=t[_];return _>0&&(t.splice(_,1),t.unshift(E)),E.value}return K0}function s(m,_){i(m)===K0&&(t.unshift({key:m,value:_}),t.length>n&&t.pop())}function A(){return t}function h(){t=[]}return{get:i,put:s,getEntries:A,clear:h}}var u9=function(e,t){return e===t};function c9(n){return function(t,i){if(t===null||i===null||t.length!==i.length)return!1;for(var s=t.length,A=0;A<s;A++)if(!n(t[A],i[A]))return!1;return!0}}function ow(n,e){var t=typeof e=="object"?e:{equalityCheck:e},i=t.equalityCheck,s=i===void 0?u9:i,A=t.maxSize,h=A===void 0?1:A,m=t.resultEqualityCheck,_=c9(s),E=h===1?o9(_):l9(h,_);function x(){var S=E.get(arguments);if(S===K0){if(S=n.apply(null,arguments),m){var C=E.getEntries(),L=C.find(function(B){return m(B.value,S)});L&&(S=L.value)}E.put(arguments,S)}return S}return x.clearCache=function(){return E.clear()},x}function f9(n){var e=Array.isArray(n[0])?n[0]:n;if(!e.every(function(i){return typeof i=="function"})){var t=e.map(function(i){return typeof i=="function"?"function "+(i.name||"unnamed")+"()":typeof i}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t+"]")}return e}function lw(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var s=function(){for(var h=arguments.length,m=new Array(h),_=0;_<h;_++)m[_]=arguments[_];var E=0,x,S={memoizeOptions:void 0},C=m.pop();if(typeof C=="object"&&(S=C,C=m.pop()),typeof C!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof C+"]");var L=S,B=L.memoizeOptions,G=B===void 0?t:B,j=Array.isArray(G)?G:[G],H=f9(m),Y=n.apply(void 0,[function(){return E++,C.apply(null,arguments)}].concat(j)),K=n(function(){for(var Z=[],se=H.length,be=0;be<se;be++)Z.push(H[be].apply(null,arguments));return x=Y.apply(null,Z),x});return Object.assign(K,{resultFunc:C,memoizedResultFunc:Y,dependencies:H,lastResult:function(){return x},recomputations:function(){return E},resetRecomputations:function(){return E=0}}),K};return s}var gt=lw(ow),_0={exports:{}},h9=_0.exports,hy;function d9(){return hy||(hy=1,function(n){(function(e,t,i){function s(_){var E=this,x=m();E.next=function(){var S=2091639*E.s0+E.c*23283064365386963e-26;return E.s0=E.s1,E.s1=E.s2,E.s2=S-(E.c=S|0)},E.c=1,E.s0=x(" "),E.s1=x(" "),E.s2=x(" "),E.s0-=x(_),E.s0<0&&(E.s0+=1),E.s1-=x(_),E.s1<0&&(E.s1+=1),E.s2-=x(_),E.s2<0&&(E.s2+=1),x=null}function A(_,E){return E.c=_.c,E.s0=_.s0,E.s1=_.s1,E.s2=_.s2,E}function h(_,E){var x=new s(_),S=E&&E.state,C=x.next;return C.int32=function(){return x.next()*4294967296|0},C.double=function(){return C()+(C()*2097152|0)*11102230246251565e-32},C.quick=C,S&&(typeof S=="object"&&A(S,x),C.state=function(){return A(x,{})}),C}function m(){var _=4022871197,E=function(x){x=String(x);for(var S=0;S<x.length;S++){_+=x.charCodeAt(S);var C=.02519603282416938*_;_=C>>>0,C-=_,C*=_,_=C>>>0,C-=_,_+=C*4294967296}return(_>>>0)*23283064365386963e-26};return E}t.exports?t.exports=h:this.alea=h})(h9,n)}(_0)),_0.exports}var b0={exports:{}},g9=b0.exports,dy;function m9(){return dy||(dy=1,function(n){(function(e,t,i){function s(m){var _=this,E="";_.x=0,_.y=0,_.z=0,_.w=0,_.next=function(){var S=_.x^_.x<<11;return _.x=_.y,_.y=_.z,_.z=_.w,_.w^=_.w>>>19^S^S>>>8},m===(m|0)?_.x=m:E+=m;for(var x=0;x<E.length+64;x++)_.x^=E.charCodeAt(x)|0,_.next()}function A(m,_){return _.x=m.x,_.y=m.y,_.z=m.z,_.w=m.w,_}function h(m,_){var E=new s(m),x=_&&_.state,S=function(){return(E.next()>>>0)/4294967296};return S.double=function(){do var C=E.next()>>>11,L=(E.next()>>>0)/4294967296,B=(C+L)/(1<<21);while(B===0);return B},S.int32=E.next,S.quick=S,x&&(typeof x=="object"&&A(x,E),S.state=function(){return A(E,{})}),S}t.exports?t.exports=h:this.xor128=h})(g9,n)}(b0)),b0.exports}var E0={exports:{}},p9=E0.exports,gy;function _9(){return gy||(gy=1,function(n){(function(e,t,i){function s(m){var _=this,E="";_.next=function(){var S=_.x^_.x>>>2;return _.x=_.y,_.y=_.z,_.z=_.w,_.w=_.v,(_.d=_.d+362437|0)+(_.v=_.v^_.v<<4^(S^S<<1))|0},_.x=0,_.y=0,_.z=0,_.w=0,_.v=0,m===(m|0)?_.x=m:E+=m;for(var x=0;x<E.length+64;x++)_.x^=E.charCodeAt(x)|0,x==E.length&&(_.d=_.x<<10^_.x>>>4),_.next()}function A(m,_){return _.x=m.x,_.y=m.y,_.z=m.z,_.w=m.w,_.v=m.v,_.d=m.d,_}function h(m,_){var E=new s(m),x=_&&_.state,S=function(){return(E.next()>>>0)/4294967296};return S.double=function(){do var C=E.next()>>>11,L=(E.next()>>>0)/4294967296,B=(C+L)/(1<<21);while(B===0);return B},S.int32=E.next,S.quick=S,x&&(typeof x=="object"&&A(x,E),S.state=function(){return A(E,{})}),S}t.exports?t.exports=h:this.xorwow=h})(p9,n)}(E0)),E0.exports}var y0={exports:{}},b9=y0.exports,my;function E9(){return my||(my=1,function(n){(function(e,t,i){function s(m){var _=this;_.next=function(){var x=_.x,S=_.i,C,L;return C=x[S],C^=C>>>7,L=C^C<<24,C=x[S+1&7],L^=C^C>>>10,C=x[S+3&7],L^=C^C>>>3,C=x[S+4&7],L^=C^C<<7,C=x[S+7&7],C=C^C<<13,L^=C^C<<9,x[S]=L,_.i=S+1&7,L};function E(x,S){var C,L=[];if(S===(S|0))L[0]=S;else for(S=""+S,C=0;C<S.length;++C)L[C&7]=L[C&7]<<15^S.charCodeAt(C)+L[C+1&7]<<13;for(;L.length<8;)L.push(0);for(C=0;C<8&&L[C]===0;++C);for(C==8?L[7]=-1:L[C],x.x=L,x.i=0,C=256;C>0;--C)x.next()}E(_,m)}function A(m,_){return _.x=m.x.slice(),_.i=m.i,_}function h(m,_){m==null&&(m=+new Date);var E=new s(m),x=_&&_.state,S=function(){return(E.next()>>>0)/4294967296};return S.double=function(){do var C=E.next()>>>11,L=(E.next()>>>0)/4294967296,B=(C+L)/(1<<21);while(B===0);return B},S.int32=E.next,S.quick=S,x&&(x.x&&A(x,E),S.state=function(){return A(E,{})}),S}t.exports?t.exports=h:this.xorshift7=h})(b9,n)}(y0)),y0.exports}var v0={exports:{}},y9=v0.exports,py;function v9(){return py||(py=1,function(n){(function(e,t,i){function s(m){var _=this;_.next=function(){var x=_.w,S=_.X,C=_.i,L,B;return _.w=x=x+1640531527|0,B=S[C+34&127],L=S[C=C+1&127],B^=B<<13,L^=L<<17,B^=B>>>15,L^=L>>>12,B=S[C]=B^L,_.i=C,B+(x^x>>>16)|0};function E(x,S){var C,L,B,G,j,H=[],Y=128;for(S===(S|0)?(L=S,S=null):(S=S+"\0",L=0,Y=Math.max(Y,S.length)),B=0,G=-32;G<Y;++G)S&&(L^=S.charCodeAt((G+32)%S.length)),G===0&&(j=L),L^=L<<10,L^=L>>>15,L^=L<<4,L^=L>>>13,G>=0&&(j=j+1640531527|0,C=H[G&127]^=L+j,B=C==0?B+1:0);for(B>=128&&(H[(S&&S.length||0)&127]=-1),B=127,G=4*128;G>0;--G)L=H[B+34&127],C=H[B=B+1&127],L^=L<<13,C^=C<<17,L^=L>>>15,C^=C>>>12,H[B]=L^C;x.w=j,x.X=H,x.i=B}E(_,m)}function A(m,_){return _.i=m.i,_.w=m.w,_.X=m.X.slice(),_}function h(m,_){m==null&&(m=+new Date);var E=new s(m),x=_&&_.state,S=function(){return(E.next()>>>0)/4294967296};return S.double=function(){do var C=E.next()>>>11,L=(E.next()>>>0)/4294967296,B=(C+L)/(1<<21);while(B===0);return B},S.int32=E.next,S.quick=S,x&&(x.X&&A(x,E),S.state=function(){return A(E,{})}),S}t.exports?t.exports=h:this.xor4096=h})(y9,n)}(v0)),v0.exports}var T0={exports:{}},T9=T0.exports,_y;function w9(){return _y||(_y=1,function(n){(function(e,t,i){function s(m){var _=this,E="";_.next=function(){var S=_.b,C=_.c,L=_.d,B=_.a;return S=S<<25^S>>>7^C,C=C-L|0,L=L<<24^L>>>8^B,B=B-S|0,_.b=S=S<<20^S>>>12^C,_.c=C=C-L|0,_.d=L<<16^C>>>16^B,_.a=B-S|0},_.a=0,_.b=0,_.c=-1640531527,_.d=1367130551,m===Math.floor(m)?(_.a=m/4294967296|0,_.b=m|0):E+=m;for(var x=0;x<E.length+20;x++)_.b^=E.charCodeAt(x)|0,_.next()}function A(m,_){return _.a=m.a,_.b=m.b,_.c=m.c,_.d=m.d,_}function h(m,_){var E=new s(m),x=_&&_.state,S=function(){return(E.next()>>>0)/4294967296};return S.double=function(){do var C=E.next()>>>11,L=(E.next()>>>0)/4294967296,B=(C+L)/(1<<21);while(B===0);return B},S.int32=E.next,S.quick=S,x&&(typeof x=="object"&&A(x,E),S.state=function(){return A(E,{})}),S}t.exports?t.exports=h:this.tychei=h})(T9,n)}(T0)),T0.exports}var w0={exports:{}};const x9=k4(cx);var S9=w0.exports,by;function M9(){return by||(by=1,function(n){(function(e,t,i){var s=256,A=6,h=52,m="random",_=i.pow(s,A),E=i.pow(2,h),x=E*2,S=s-1,C;function L(ee,Z,se){var be=[];Z=Z==!0?{entropy:!0}:Z||{};var he=H(j(Z.entropy?[ee,K(t)]:ee??Y(),3),be),Ae=new B(be),ye=function(){for(var me=Ae.g(A),Ne=_,Be=0;me<E;)me=(me+Be)*s,Ne*=s,Be=Ae.g(1);for(;me>=x;)me/=2,Ne/=2,Be>>>=1;return(me+Be)/Ne};return ye.int32=function(){return Ae.g(4)|0},ye.quick=function(){return Ae.g(4)/4294967296},ye.double=ye,H(K(Ae.S),t),(Z.pass||se||function(me,Ne,Be,He){return He&&(He.S&&G(He,Ae),me.state=function(){return G(Ae,{})}),Be?(i[m]=me,Ne):me})(ye,he,"global"in Z?Z.global:this==i,Z.state)}function B(ee){var Z,se=ee.length,be=this,he=0,Ae=be.i=be.j=0,ye=be.S=[];for(se||(ee=[se++]);he<s;)ye[he]=he++;for(he=0;he<s;he++)ye[he]=ye[Ae=S&Ae+ee[he%se]+(Z=ye[he])],ye[Ae]=Z;(be.g=function(me){for(var Ne,Be=0,He=be.i,je=be.j,Te=be.S;me--;)Ne=Te[He=S&He+1],Be=Be*s+Te[S&(Te[He]=Te[je=S&je+Ne])+(Te[je]=Ne)];return be.i=He,be.j=je,Be})(s)}function G(ee,Z){return Z.i=ee.i,Z.j=ee.j,Z.S=ee.S.slice(),Z}function j(ee,Z){var se=[],be=typeof ee,he;if(Z&&be=="object")for(he in ee)try{se.push(j(ee[he],Z-1))}catch{}return se.length?se:be=="string"?ee:ee+"\0"}function H(ee,Z){for(var se=ee+"",be,he=0;he<se.length;)Z[S&he]=S&(be^=Z[S&he]*19)+se.charCodeAt(he++);return K(Z)}function Y(){try{var ee;return C&&(ee=C.randomBytes)?ee=ee(s):(ee=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(ee)),K(ee)}catch{var Z=e.navigator,se=Z&&Z.plugins;return[+new Date,e,se,e.screen,K(t)]}}function K(ee){return String.fromCharCode.apply(0,ee)}if(H(i.random(),t),n.exports){n.exports=L;try{C=x9}catch{}}else i["seed"+m]=L})(typeof self<"u"?self:S9,[],Math)}(w0)),w0.exports}var nm,Ey;function C9(){if(Ey)return nm;Ey=1;var n=d9(),e=m9(),t=_9(),i=E9(),s=v9(),A=w9(),h=M9();return h.alea=n,h.xor128=e,h.xorwow=t,h.xorshift7=i,h.xor4096=s,h.tychei=A,nm=h,nm}var R9=C9();class Qm{constructor(e){this.getLocationId=t=>Ku(t)?t.id:this.accessors.getLocationId(t),this.getLocationName=t=>{let i;return Ku(t)&&Up(t)?i=t.name:this.accessors.getLocationName&&(i=this.accessors.getLocationName(t)),i||(i=`${this.getLocationId(t)}`),i},this.getLocationLat=t=>Ku(t)?t.lat:this.accessors.getLocationLat(t),this.getLocationLon=t=>Ku(t)?t.lon:this.accessors.getLocationLon(t),this.getFlowOriginId=t=>Vg(t)?t.origin:this.accessors.getFlowOriginId(t),this.getFlowDestId=t=>Vg(t)?t.dest:this.accessors.getFlowDestId(t),this.getFlowMagnitude=t=>Vg(t)?t.count:this.accessors.getFlowMagnitude(t),this.getFlowTime=t=>{const{getFlowTime:i}=this.accessors;return i?i(t):void 0},this.accessors=e}setAccessors(e){this.accessors=e}getFlowmapDataAccessors(){return this.accessors}}function L9(n){const e=new Map,t=new Map,i=new Map;for(const{zoom:S,nodes:C}of n){e.set(S,C);for(const L of C)if(Up(L))t.set(L.id,L);else{const{id:B}=L,G=i.get(B);(G==null||G>S)&&i.set(B,S)}}const[s,A]=km(n,S=>S.zoom);if(s==null||A==null)throw new Error("Could not determine minZoom or maxZoom");const h=new Map;for(const S of t.values()){const{zoom:C}=S;let L=h.get(C);L||(L=new Map,h.set(C,L)),m(S,B=>{L==null||L.set(B,S)})}function m(S,C){for(const L of S.children){const B=t.get(L);B?m(B,C):C(L)}}const _=(S,C=A)=>{const L=[],B=(G,j)=>{if(C>G.zoom)for(const H of G.children){const Y=t.get(H);Y?B(Y,j):j.push(H)}else j.push(G.id)};return B(S,L),L};function E(S,C){const L=h.get(C);if(!L)return;const B=L.get(S);return B?B.id:void 0}return{availableZoomLevels:n.map(S=>+S.zoom).sort((S,C)=>dl(S,C)),getClusterNodesFor:S=>{if(S!==void 0)return e.get(S)},getClusterById:S=>t.get(S),getMinZoomForLocation:S=>i.get(S)||s,expandCluster:_,findClusterFor:E,aggregateFlows:(S,C,{getFlowOriginId:L,getFlowDestId:B,getFlowMagnitude:G},j={})=>{if(C>A)return S;const H=[],Y=new Map,K=(Z,se)=>`${Z}:${se}`,{flowCountsMapReduce:ee={map:G,reduce:(Z,se)=>(Z||0)+se}}=j;for(const Z of S){const se=L(Z),be=B(Z),he=E(se,C)||se,Ae=E(be,C)||be,ye=K(he,Ae);if(he===se&&Ae===be)H.push(Z);else{let me=Y.get(ye);me?me.count=ee.reduce(me.count,ee.map(Z)):(me={origin:he,dest:Ae,count:ee.map(Z),aggregate:!0},H.push(me),Y.set(ye,me))}}return H}}}function O9(n,{getFlowOriginId:e,getFlowDestId:t,getFlowMagnitude:i}){const s={incoming:new Map,outgoing:new Map};for(const A of n){const h=e(A),m=t(A),_=i(A);s.incoming.set(m,(s.incoming.get(m)||0)+_),s.outgoing.set(h,(s.outgoing.get(h)||0)+_)}return A=>Math.max(Math.abs(s.incoming.get(A)||0),Math.abs(s.outgoing.get(A)||0))}function D9(n,e){if(!n.length)throw new Error("No available zoom levels");return n[Math.min(WN(n,Math.floor(e)),n.length-1)]}const N9={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,makeClusterName:(n,e)=>{},makeClusterId:n=>`{[${n}]}`};function B9(n){const{index:e}=n;return e!=null}function uw(n){const{id:e}=n;return e!=null}function P9(n,e,t,i){const{getLocationLon:s,getLocationLat:A,getLocationId:h}=e,m={...N9,...i},{minZoom:_,maxZoom:E,nodeSize:x,makeClusterName:S,makeClusterId:C}=m,L=new Array(E+1);let B=new Array,G=0;for(const he of n){const Ae=s(he),ye=A(he);B.push({x:z9(Ae),y:G9(ye),weight:t(h(he)),zoom:1/0,index:G,parentId:-1,location:he}),G++}const j=he=>{const Ae=new gh(he.length,x,Float32Array);for(let ye=0;ye<he.length;ye++)Ae.add(he[ye].x,he[ye].y);return Ae.finish(),Ae.points=he,Ae};L[E+1]=j(B);let H=E+1;for(let he=E;he>=_;he--){const Ae=F9(B,he,L[H],m);Ae.length===B.length?(L[he]=L[H],L[H]=void 0,H=he,B=Ae):(H=he,B=Ae,L[he]=j(B))}if(L.length===0)return[];const Y=L.map(he=>he==null?void 0:he.points.length),K=LT(Y.filter(he=>he>0));let ee=H9(Y)??Y.length-1;const Z=V9(n,e);if(Z<G){const he=j9(Y,Ae=>Ae<=Z);he>=0&&(he<ee&&(L[he+1]=L[ee],L.splice(he+2)),ee=he+1)}const se=Math.min(ee,K?Y.lastIndexOf(K):ee),be=new Array;H=NaN;for(let he=ee;he>=se;he--){let Ae;const ye=L[he];if(!ye)continue;L[H]&&he<ee&&(Ae=RT(L[H].points,Ne=>Ne.map(Be=>Be.id?C(Be.id):h(Be.location)),Ne=>Ne.parentId));const me=[];for(const Ne of ye.points){const{x:Be,y:He,numPoints:je,location:Te}=Ne;if(B9(Ne))me.push({id:h(Te),zoom:he,lat:A(Te),lon:s(Te)});else if(uw(Ne)){const{id:We}=Ne,$e=Ae&&Ae.get(We);if(!$e){console.warn("Omitting cluster with no children, point:",Ne);continue}const Et={id:C(We),name:S(We,je),zoom:he,lat:k9(He),lon:U9(Be),children:$e??[]};me.push(Et)}}be.push({zoom:he,nodes:me}),H=he}return be}function I9(n,e,t,i,s){return{x:n,y:e,zoom:1/0,id:t,parentId:-1,numPoints:i,weight:s}}function F9(n,e,t,i){const s=[],{radius:A,extent:h}=i,m=A/(h*Math.pow(2,e));for(let _=0;_<n.length;_++){const E=n[_];if(E.zoom<=e)continue;E.zoom=e;const x=t.within(E.x,E.y,m);let S=E.weight||1,C=uw(E)?E.numPoints:1,L=E.x*S,B=E.y*S;const G=(_<<5)+(e+1);for(const j of x){const H=t.points[j];if(H.zoom<=e)continue;H.zoom=e;const Y=H.weight||1,K=H.numPoints||1;L+=H.x*Y,B+=H.y*Y,S+=Y,C+=K,H.parentId=G}C===1?s.push(E):(E.parentId=G,s.push(I9(L/S,B/S,G,C,S)))}return s}function U9(n){return(n-.5)*360}function k9(n){const e=(180-n*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function z9(n){return n/360+.5}function G9(n){const e=Math.sin(n*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function V9(n,e){const{getLocationLon:t,getLocationLat:i}=e,s=new Map;let A=0;for(const h of n){const m=t(h),_=i(h),E=`${m},${_}`,x=s.get(E);x||A++,s.set(E,x?x+1:1)}return A}function H9(n){let e=-1/0,t;for(let i=0;i<n.length;i++){const s=n[i];typeof s=="number"&&s>e&&(e=s,t=i)}return t}function j9(n,e){for(let t=n.length-1;t>=0;t--)if(e(n[t],t,n))return t;return-1}const Y9=(n,e=0)=>{const t=e,i=new eL({...n,width:n.width+t*2,height:n.height+t*2}).getBounds();return[i[0][0],i[0][1],i[1][0],i[1][1]]},Q9=n=>{if(n)return kT().range([.025,.5]).domain([0,Math.max.apply(null,n.map(e=>Math.abs(e||0)))])};function X9(n,e,t,i,s){const{getLocationId:A,getLocationName:h,getLocationClusterName:m}=i,_=E=>{const x=t.get(E);return x?h?h(x):A(x)||E:`"${E}"`};for(const E of e)for(const x of E.nodes)if(Up(x)){const S=n.expandCluster(x);if(S.sort((C,L)=>Y0(s(C),s(L))),m)x.name=m(S);else{const C=S[0],L=S.length===2?S[1]:void 0;x.name=`"${_(C)}" and ${L?`"${_(L)}"`:`${S.length-1} others`}`}}else x.name=_(x.id)}tl("%Y-%m-%d"),tl("%Y-%m-%d %H:%M"),tl("%Y-%m-%d %H:%M:%S"),tl("%Y"),tl("%Y-%m");var ja;(function(n){n.SECOND="SECOND",n.MINUTE="MINUTE",n.HOUR="HOUR",n.DAY="DAY",n.MONTH="MONTH",n.YEAR="YEAR"})(ja||(ja={}));Pi(".%L");const W9=Pi(":%S"),q9=Pi("%I:%M"),Z9=Pi("%I %p"),K9=Pi("%a %d");Pi("%b %d");const $9=Pi("%b"),J9=Pi("%Y"),nc=[{order:0,key:ja.SECOND,interval:VT,format:W9,formatFull:Pi("%Y-%m-%d %H:%M:%S")},{order:1,key:ja.MINUTE,interval:HT,format:q9,formatFull:Pi("%Y-%m-%d %H:%M")},{order:2,key:ja.HOUR,interval:jT,format:Z9,formatFull:Pi("%a %d %b %Y, %I %p")},{order:3,key:ja.DAY,interval:dh,format:K9,formatFull:Pi("%a %d %b %Y")},{order:4,key:ja.MONTH,interval:XT,format:$9,formatFull:Pi("%b %Y")},{order:5,key:ja.YEAR,interval:eA,format:J9,formatFull:Pi("%Y")}];function yy(n){return nc.find(e=>e.key===n)}function eI(n){return nc.find(e=>e.order===n)}function tI(n){let e;for(const t of nc){const{interval:i}=t;if(i(n)<n)return e||t;e=t}return nc[nc.length-1]}const nI=20;class iI{constructor(e){this.getFlowsFromProps=(t,i)=>i.flows,this.getLocationsFromProps=(t,i)=>i.locations,this.getClusterLevelsFromProps=(t,i)=>i.clusterLevels,this.getMaxTopFlowsDisplayNum=(t,i)=>t.settings.maxTopFlowsDisplayNum,this.getSelectedLocations=(t,i)=>{var s;return(s=t.filter)==null?void 0:s.selectedLocations},this.getLocationFilterMode=(t,i)=>{var s;return(s=t.filter)==null?void 0:s.locationFilterMode},this.getClusteringEnabled=(t,i)=>t.settings.clusteringEnabled,this.getLocationTotalsEnabled=(t,i)=>t.settings.locationTotalsEnabled,this.getLocationLabelsEnabled=(t,i)=>t.settings.locationLabelsEnabled,this.getZoom=(t,i)=>t.viewport.zoom,this.getViewport=(t,i)=>t.viewport,this.getSelectedTimeRange=(t,i)=>{var s;return(s=t.filter)==null?void 0:s.selectedTimeRange},this.getColorScheme=(t,i)=>t.settings.colorScheme,this.getDarkMode=(t,i)=>t.settings.darkMode,this.getFadeEnabled=(t,i)=>t.settings.fadeEnabled,this.getFadeOpacityEnabled=(t,i)=>t.settings.fadeOpacityEnabled,this.getFadeAmount=(t,i)=>t.settings.fadeAmount,this.getAnimate=(t,i)=>t.settings.animationEnabled,this.getInvalidLocationIds=gt(this.getLocationsFromProps,t=>{if(!t)return;const i=[];for(const s of t){const A=this.accessors.getLocationId(s),h=this.accessors.getLocationLon(s),m=this.accessors.getLocationLat(s);(!(-90<=m&&m<=90)||!(-180<=h&&h<=180))&&i.push(A)}return i.length>0?i:void 0}),this.getLocations=gt(this.getLocationsFromProps,this.getInvalidLocationIds,(t,i)=>{if(!t)return;if(!i||i.length===0)return t;const s=new Set(i),A=[];for(const h of t){const m=this.accessors.getLocationId(h);s.has(m)||A.push(h)}return A}),this.getLocationIds=gt(this.getLocations,t=>{if(!t)return;const i=new Set;for(const s of t)i.add(this.accessors.getLocationId(s));return i}),this.getSelectedLocationsSet=gt(this.getSelectedLocations,t=>t&&t.length>0?new Set(t):void 0),this.getSortedFlowsForKnownLocations=gt(this.getFlowsFromProps,this.getLocationIds,(t,i)=>{if(!i||!t)return;const s=[];for(const A of t){const h=this.accessors.getFlowOriginId(A),m=this.accessors.getFlowDestId(A);i.has(h)&&i.has(m)&&s.push(A)}return s.sort((A,h)=>Y0(Math.abs(this.accessors.getFlowMagnitude(A)),Math.abs(this.accessors.getFlowMagnitude(h))))}),this.getActualTimeExtent=gt(this.getSortedFlowsForKnownLocations,t=>{if(!t)return;let i=null,s=null;for(const A of t){const h=this.accessors.getFlowTime(A);h&&((i==null||i>h)&&(i=h),(s==null||s<h)&&(s=h))}if(!(!i||!s))return[i,s]}),this.getTimeGranularityKey=gt(this.getSortedFlowsForKnownLocations,this.getActualTimeExtent,(t,i)=>{if(!t||!i)return;const s=LT(t,h=>{const m=this.accessors.getFlowTime(h);return m?tI(m).order:null});if(s==null)return;const A=eI(s);return A?A.key:void 0}),this.getTimeExtent=gt(this.getActualTimeExtent,this.getTimeGranularityKey,(t,i)=>{const s=i?yy(i):void 0;if(!t||!(s!=null&&s.interval))return;const{interval:A}=s;return[t[0],A.offset(A.floor(t[1]),1)]}),this.getSortedFlowsForKnownLocationsFilteredByTime=gt(this.getSortedFlowsForKnownLocations,this.getTimeExtent,this.getSelectedTimeRange,(t,i,s)=>{if(t)return!i||!s||i[0]===s[0]&&i[1]===s[1]?t:t.filter(A=>{const h=this.accessors.getFlowTime(A);return h&&s[0]<=h&&h<s[1]})}),this.getLocationsHavingFlows=gt(this.getSortedFlowsForKnownLocations,this.getLocations,(t,i)=>{if(!i||!t)return i;const s=new Set;for(const h of t)s.add(this.accessors.getFlowOriginId(h)),s.add(this.accessors.getFlowDestId(h));const A=[];for(const h of i)s.has(this.accessors.getLocationId(h))&&A.push(h);return A}),this.getLocationsById=gt(this.getLocationsHavingFlows,t=>{if(!t)return;const i=new Map;for(const s of t)i.set(this.accessors.getLocationId(s),s);return i}),this.getLocationWeightGetter=gt(this.getSortedFlowsForKnownLocations,t=>t?O9(t,this.accessors.getFlowmapDataAccessors()):void 0),this.getClusterLevels=gt(this.getClusterLevelsFromProps,this.getLocationsHavingFlows,this.getLocationWeightGetter,(t,i,s)=>t||(!i||!s?void 0:P9(i,this.accessors.getFlowmapDataAccessors(),s,{maxZoom:nI}))),this.getClusterIndex=gt(this.getLocationsById,this.getLocationWeightGetter,this.getClusterLevels,(t,i,s)=>{if(!t||!i||!s)return;const A=L9(s);return X9(A,s,t,this.accessors.getFlowmapDataAccessors(),i),A}),this.getAvailableClusterZoomLevels=gt(this.getClusterIndex,this.getSelectedLocations,(t,i)=>{if(!t)return;let s=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY;const h=m=>{const _=t.getClusterById(m);if(_)A=Math.max(A,_.zoom),s=Math.min(s,_.zoom);else{const E=t.getMinZoomForLocation(m);A=Math.max(A,E)}};if(i)for(const m of i)h(m);return t.availableZoomLevels.filter(m=>A<=m&&m<=s)}),this._getClusterZoom=gt(this.getClusterIndex,this.getZoom,this.getAvailableClusterZoomLevels,(t,i,s)=>!t||!s||i==null?void 0:D9(s,i)),this.getClusterZoom=(t,i)=>{const{settings:s}=t;if(s.clusteringEnabled)return s.clusteringAuto||s.clusteringLevel==null?this._getClusterZoom(t,i):s.clusteringLevel},this.getLocationsForSearchBox=gt(this.getClusteringEnabled,this.getLocationsHavingFlows,this.getSelectedLocations,this.getClusterZoom,this.getClusterIndex,(t,i,s,A,h)=>{if(!i)return;let m=Array.from(i);if(h&&s){const _=[];for(const E of s){const x=h.getClusterById(E);x&&!m.find(S=>(Ku(S)?S.id:this.accessors.getLocationId(S))===E)&&_.push(x)}_.length>0&&(m=m.concat(_))}return m}),this.getDiffMode=gt(this.getFlowsFromProps,t=>{if(t){for(const i of t)if(this.accessors.getFlowMagnitude(i)<0)return!0}return!1}),this._getFlowmapColors=gt(this.getDiffMode,this.getColorScheme,this.getDarkMode,this.getFadeEnabled,this.getFadeOpacityEnabled,this.getFadeAmount,this.getAnimate,rw),this.getFlowmapColorsRGBA=gt(this._getFlowmapColors,t=>r9(t)?A9(t):a9(t)),this.getUnknownLocations=gt(this.getLocationIds,this.getFlowsFromProps,this.getSortedFlowsForKnownLocations,(t,i,s)=>{if(!t||!i||s)return;const A=new Set;for(const h of i)t.has(this.accessors.getFlowOriginId(h))||A.add(this.accessors.getFlowOriginId(h)),t.has(this.accessors.getFlowDestId(h))||A.add(this.accessors.getFlowDestId(h));return A}),this.getSortedAggregatedFilteredFlows=gt(this.getClusterIndex,this.getClusteringEnabled,this.getSortedFlowsForKnownLocationsFilteredByTime,this.getClusterZoom,this.getTimeExtent,(t,i,s,A,h)=>{if(!s)return;let m;return i&&t&&A!=null?m=t.aggregateFlows(s,A,this.accessors.getFlowmapDataAccessors()):m=rI(s,this.accessors.getFlowmapDataAccessors()),m.sort((_,E)=>Y0(Math.abs(this.accessors.getFlowMagnitude(_)),Math.abs(this.accessors.getFlowMagnitude(E)))),m}),this.getExpandedSelectedLocationsSet=gt(this.getClusteringEnabled,this.getSelectedLocationsSet,this.getClusterIndex,(t,i,s)=>{if(!i||!s)return i;const A=new Set;for(const h of i){const m=s.getClusterById(h);if(m){const _=s.expandCluster(m);for(const E of _)A.add(E)}else A.add(h)}return A}),this.getTotalCountsByTime=gt(this.getSortedFlowsForKnownLocations,this.getTimeGranularityKey,this.getTimeExtent,this.getExpandedSelectedLocationsSet,this.getLocationFilterMode,(t,i,s,A,h)=>{const m=i?yy(i):void 0;if(!t||!m||!s)return;const _=t.reduce((E,x)=>{if(this.isFlowInSelection(x,A,h)){const S=m.interval(this.accessors.getFlowTime(x)).getTime();E.set(S,(E.get(S)??0)+this.accessors.getFlowMagnitude(x))}return E},new Map);return Array.from(_.entries()).map(([E,x])=>({time:new Date(E),count:x}))}),this.getMaxLocationCircleSize=gt(this.getLocationTotalsEnabled,t=>t?17:1),this.getViewportBoundingBox=gt(this.getViewport,this.getMaxLocationCircleSize,Y9),this.getLocationsForZoom=gt(this.getClusteringEnabled,this.getLocationsHavingFlows,this.getClusterIndex,this.getClusterZoom,(t,i,s,A)=>t&&s?s.getClusterNodesFor(A):i),this.getLocationTotals=gt(this.getLocationsForZoom,this.getSortedAggregatedFilteredFlows,this.getSelectedLocationsSet,this.getLocationFilterMode,(t,i,s,A)=>{if(!i)return;const h=new Map,m=(_,E)=>{const x=h.get(_)??{incomingCount:0,outgoingCount:0,internalCount:0};return E.incomingCount!=null&&(x.incomingCount+=E.incomingCount),E.outgoingCount!=null&&(x.outgoingCount+=E.outgoingCount),E.internalCount!=null&&(x.internalCount+=E.internalCount),x};for(const _ of i)if(this.isFlowInSelection(_,s,A)){const E=this.accessors.getFlowOriginId(_),x=this.accessors.getFlowDestId(_),S=this.accessors.getFlowMagnitude(_);E===x?h.set(E,m(E,{internalCount:S})):(h.set(E,m(E,{outgoingCount:S})),h.set(x,m(x,{incomingCount:S})))}return h}),this.getLocationsTree=gt(this.getLocationsForZoom,t=>{if(!t)return;const i=Array.isArray(t)?t:Array.from(t),s=new gh(i.length,64,Float32Array);for(let A=0;A<i.length;A++){const h=i[A];s.add(im(this.accessors.getLocationLon(h)),rm(this.accessors.getLocationLat(h)))}return s.finish(),s.points=i,s}),this._getLocationIdsInViewport=gt(this.getLocationsTree,this.getViewportBoundingBox,(t,i)=>{const s=this._getLocationsInBboxIndices(t,i);if(s)return new Set(s.map(A=>this.accessors.getLocationId(t.points[A])))}),this.getLocationIdsInViewport=lw(ow,(t,i,s)=>{if(t===i)return!0;if(t==null||i==null||t.size!==i.size)return!1;for(const A of t)if(!i.has(A))return!1;return!0})(this._getLocationIdsInViewport,t=>{if(t)return t}),this.getTotalUnfilteredCount=gt(this.getSortedFlowsForKnownLocations,t=>{if(t)return t.reduce((i,s)=>i+this.accessors.getFlowMagnitude(s),0)}),this.getTotalFilteredCount=gt(this.getSortedAggregatedFilteredFlows,this.getSelectedLocationsSet,this.getLocationFilterMode,(t,i,s)=>t?t.reduce((h,m)=>this.isFlowInSelection(m,i,s)?h+this.accessors.getFlowMagnitude(m):h,0):void 0),this._getLocationTotalsExtent=gt(this.getLocationTotals,t=>vy(t,void 0)),this._getLocationTotalsForViewportExtent=gt(this.getLocationTotals,this.getLocationIdsInViewport,(t,i)=>vy(t,i)),this.getLocationTotalsExtent=(t,i)=>t.settings.adaptiveScalesEnabled?this._getLocationTotalsForViewportExtent(t,i):this._getLocationTotalsExtent(t,i),this.getFlowsForFlowmapLayer=gt(this.getSortedAggregatedFilteredFlows,this.getLocationIdsInViewport,this.getSelectedLocationsSet,this.getLocationFilterMode,this.getMaxTopFlowsDisplayNum,(t,i,s,A,h)=>{if(!t||!i)return;const m=[];let _=0;for(const E of t){const x=this.accessors.getFlowOriginId(E),S=this.accessors.getFlowDestId(E);if((i.has(x)||i.has(S))&&this.isFlowInSelection(E,s,A)&&x!==S&&(m.push(E),_++),_>h)break}return m.reverse()}),this._getFlowMagnitudeExtent=gt(this.getSortedAggregatedFilteredFlows,this.getSelectedLocationsSet,this.getLocationFilterMode,(t,i,s)=>{if(!t)return;let A;for(const h of t)if(this.accessors.getFlowOriginId(h)!==this.accessors.getFlowDestId(h)&&this.isFlowInSelection(h,i,s)){const m=this.accessors.getFlowMagnitude(h);A==null?A=[m,m]:(m<A[0]&&(A[0]=m),m>A[1]&&(A[1]=m))}return A}),this._getAdaptiveFlowMagnitudeExtent=gt(this.getFlowsForFlowmapLayer,t=>{if(!t)return;const i=km(t,this.accessors.getFlowMagnitude);return i[0]!==void 0&&i[1]!==void 0?i:void 0}),this.getFlowMagnitudeExtent=(t,i)=>t.settings.adaptiveScalesEnabled?this._getAdaptiveFlowMagnitudeExtent(t,i):this._getFlowMagnitudeExtent(t,i),this.getLocationMaxAbsTotalGetter=gt(this.getLocationTotals,t=>i=>{const s=t==null?void 0:t.get(i);if(s)return Math.max(Math.abs(s.incomingCount+s.internalCount),Math.abs(s.outgoingCount+s.internalCount))}),this.getFlowThicknessScale=gt(this.getFlowMagnitudeExtent,Q9),this.getCircleSizeScale=gt(this.getMaxLocationCircleSize,this.getLocationTotalsEnabled,this.getLocationTotalsExtent,(t,i,s)=>{if(!i)return()=>t;if(s)return SB().range([0,t]).domain([0,Math.max.apply(null,s.map(A=>Math.abs(A||0)))])}),this.getInCircleSizeGetter=gt(this.getCircleSizeScale,this.getLocationTotals,(t,i)=>s=>{const A=i==null?void 0:i.get(s);return A&&t&&t(Math.abs(A.incomingCount+A.internalCount))||0}),this.getOutCircleSizeGetter=gt(this.getCircleSizeScale,this.getLocationTotals,(t,i)=>s=>{const A=i==null?void 0:i.get(s);return A&&t&&t(Math.abs(A.outgoingCount+A.internalCount))||0}),this.getSortedLocationsForZoom=gt(this.getLocationsForZoom,this.getInCircleSizeGetter,this.getOutCircleSizeGetter,(t,i,s)=>t?[...t].sort((h,m)=>{const _=this.accessors.getLocationId(h),E=this.accessors.getLocationId(m);return dl(Math.max(i(_),s(_)),Math.max(i(E),s(E)))}):void 0),this.getLocationsForFlowmapLayer=gt(this.getSortedLocationsForZoom,t=>t),this.getLocationsForFlowmapLayerById=gt(this.getLocationsForFlowmapLayer,t=>{if(t)return t.reduce((i,s)=>(i.set(this.accessors.getLocationId(s),s),i),new Map)}),this.getLocationOrClusterByIdGetter=gt(this.getClusterIndex,this.getLocationsById,(t,i)=>s=>(t==null?void 0:t.getClusterById(s))??(i==null?void 0:i.get(s))),this.getLayersData=gt(this.getLocationsForFlowmapLayer,this.getFlowsForFlowmapLayer,this.getFlowmapColorsRGBA,this.getLocationsForFlowmapLayerById,this.getLocationIdsInViewport,this.getInCircleSizeGetter,this.getOutCircleSizeGetter,this.getFlowThicknessScale,this.getAnimate,this.getLocationLabelsEnabled,(t,i,s,A,h,m,_,E,x,S)=>this._prepareLayersData(t,i,s,A,h,m,_,E,x,S)),this.accessors=new Qm(e),this.setAccessors(e)}setAccessors(e){this.accessors=new Qm(e)}getAggregateAccessors(){return this.accessors}prepareLayersData(e,t){const i=this.getLocationsForFlowmapLayer(e,t)||[],s=this.getFlowsForFlowmapLayer(e,t)||[],A=this.getFlowmapColorsRGBA(e,t),h=this.getLocationsForFlowmapLayerById(e,t),m=this.getLocationIdsInViewport(e,t),_=this.getInCircleSizeGetter(e,t),E=this.getOutCircleSizeGetter(e,t),x=this.getFlowThicknessScale(e,t),S=this.getLocationLabelsEnabled(e,t);return this._prepareLayersData(i,s,A,h,m,_,E,x,e.settings.animationEnabled,S)}_prepareLayersData(e,t,i,s,A,h,m,_,E,x){e||(e=[]),t||(t=[]);const{getFlowOriginId:S,getFlowDestId:C,getFlowMagnitude:L,getLocationId:B,getLocationLon:G,getLocationLat:j,getLocationName:H}=this.accessors,Y=km(t,je=>L(je)),K=i9(i,Y),ee=Float32Array.from(function*(){for(const je of e)yield G(je),yield j(je)}()),Z=sw(i)?i.positive.locationCircles.inner:i.locationCircles.inner,se=Uint8Array.from(function*(){for(const je of e)yield*Z}()),be=Float32Array.from(function*(){for(const je of e){const Te=B(je);yield A!=null&&A.has(Te)?h(Te):1}}()),he=Float32Array.from(function*(){for(const je of e){const Te=B(je);yield A!=null&&A.has(Te)?m(Te):1}}()),Ae=Float32Array.from(function*(){for(const je of t){const Te=s==null?void 0:s.get(S(je));yield Te?G(Te):0,yield Te?j(Te):0}}()),ye=Float32Array.from(function*(){for(const je of t){const Te=s==null?void 0:s.get(C(je));yield Te?G(Te):0,yield Te?j(Te):0}}()),me=Float32Array.from(function*(){for(const je of t)yield _&&_(L(je))||0}()),Ne=Float32Array.from(function*(){for(const je of t){const Te=S(je),We=C(je);yield Math.max(h(Te),m(Te)),yield Math.max(h(We),m(We))}}()),Be=Uint8Array.from(function*(){for(const je of t)yield*K(L(je))}()),He=E?Float32Array.from(function*(){for(const je of t)yield new R9.alea(`${S(je)}-${C(je)}`)()}()):void 0;return{circleAttributes:{length:e.length,attributes:{getPosition:{value:ee,size:2},getColor:{value:se,size:4},getInRadius:{value:be,size:1},getOutRadius:{value:he,size:1}}},lineAttributes:{length:t.length,attributes:{getSourcePosition:{value:Ae,size:2},getTargetPosition:{value:ye,size:2},getThickness:{value:me,size:1},getColor:{value:Be,size:4},getEndpointOffsets:{value:Ne,size:2},...He?{getStaggering:{value:He,size:1}}:{}}},...x?{locationLabels:e.map(H)}:void 0}}getLocationsInBbox(e,t){if(e)return this._getLocationsInBboxIndices(e,t).map(i=>e.points[i])}_getLocationsInBboxIndices(e,t){if(!e)return;const[i,s,A,h]=t,[m,_,E,x]=[im(i),rm(s),im(A),rm(h)];return e.range(Math.min(m,E),Math.min(_,x),Math.max(m,E),Math.max(_,x))}isFlowInSelection(e,t,i){const s=this.accessors.getFlowOriginId(e),A=this.accessors.getFlowDestId(e);if(t)switch(i){case sl.ALL:return t.has(s)||t.has(A);case sl.BETWEEN:return t.has(s)&&t.has(A);case sl.INCOMING:return t.has(A);case sl.OUTGOING:return t.has(s)}return!0}}function vy(n,e){if(!n)return;let t;for(const[i,{incomingCount:s,outgoingCount:A,internalCount:h}]of n.entries())if(e==null||e.has(i)){const m=Math.min(s+h,A+h,h),_=Math.max(s+h,A+h,h);t?(m<t[0]&&(t[0]=m),_>t[1]&&(t[1]=_)):t=[m,_]}return t}function im(n){return n/360+.5}function rm(n){const e=Math.sin(n*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function rI(n,e){const t=RT(n,s=>{const A=e.getFlowOriginId(s[0]),h=e.getFlowDestId(s[0]);return{aggregate:!0,origin:A,dest:h,count:s.reduce((_,E)=>{const x=e.getFlowMagnitude(E);return x&&!isNaN(x)&&isFinite(x)?_+x:_},0)}},e.getFlowOriginId,e.getFlowDestId),i=[];for(const s of t.values())for(const A of s.values())i.push(A);return i}function sm(n,e){const{getInRadius:t,getOutRadius:i}=n.attributes;return Math.max(t.value[e],i.value[e])}function Ty(n,e){const{getPosition:t}=n.attributes;return[t.value[e*2],t.value[e*2+1]]}function sI(n,e){const{getColor:t,getEndpointOffsets:i,getSourcePosition:s,getTargetPosition:A,getThickness:h,getStaggering:m}=n.attributes;return{length:1,attributes:{getColor:{value:t.value.subarray(e*4,(e+1)*4),size:4},getEndpointOffsets:{value:i.value.subarray(e*2,(e+1)*2),size:2},getSourcePosition:{value:s.value.subarray(e*2,(e+1)*2),size:2},getTargetPosition:{value:A.value.subarray(e*2,(e+1)*2),size:2},getThickness:{value:h.value.subarray(e,e+1),size:1},...m?{getStaggering:{value:m.value.subarray(e,e+1),size:1}}:void 0}}}var cw=1e-6,Nc=Math.PI,wy=Nc/2,fw=Nc/4,xy=Nc*2,am=180/Nc,Ll=Nc/180,Xp=Math.abs,hw=Math.atan2,bc=Math.cos,Ec=Math.sin,aI=Math.sqrt;function AI(n){return n>1?wy:n<-1?-wy:Math.asin(n)}function o0(){}function $0(n,e){n&&My.hasOwnProperty(n.type)&&My[n.type](n,e)}var Sy={Feature:function(n,e){$0(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,s=t.length;++i<s;)$0(t[i].geometry,e)}},My={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)n=t[i],e.point(n[0],n[1],n[2])},LineString:function(n,e){Xm(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)Xm(t[i],e,0)},Polygon:function(n,e){Cy(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)Cy(t[i],e)},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,s=t.length;++i<s;)$0(t[i],e)}};function Xm(n,e,t){var i=-1,s=n.length-t,A;for(e.lineStart();++i<s;)A=n[i],e.point(A[0],A[1],A[2]);e.lineEnd()}function Cy(n,e){var t=-1,i=n.length;for(e.polygonStart();++t<i;)Xm(n[t],e,1);e.polygonEnd()}function oI(n,e){Sy.hasOwnProperty(n.type)?Sy[n.type](n,e):$0(n,e)}var J0=new hh,Ry=new hh,dw,gw,Wm,qm,Zm,$s={point:o0,lineStart:o0,lineEnd:o0,polygonStart:function(){J0=new hh,$s.lineStart=lI,$s.lineEnd=uI},polygonEnd:function(){var n=+J0;Ry.add(n<0?xy+n:n),this.lineStart=this.lineEnd=this.point=o0},sphere:function(){Ry.add(xy)}};function lI(){$s.point=cI}function uI(){mw(dw,gw)}function cI(n,e){$s.point=mw,dw=n,gw=e,n*=Ll,e*=Ll,Wm=n,qm=bc(e=e/2+fw),Zm=Ec(e)}function mw(n,e){n*=Ll,e*=Ll,e=e/2+fw;var t=n-Wm,i=t>=0?1:-1,s=i*t,A=bc(e),h=Ec(e),m=Zm*h,_=qm*A+m*bc(s),E=m*i*Ec(s);J0.add(hw(E,_)),Wm=n,qm=A,Zm=h}function fI(n){return[hw(n[1],n[0]),AI(n[2])]}function hI(n){var e=n[0],t=n[1],i=bc(t);return[i*bc(e),i*Ec(e),Ec(t)]}function Ly(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function dI(n){var e=aI(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}var bn,ji,Cn,ur,kA,pw,_w,gl,ic,Ya,Js,js={point:Km,lineStart:Oy,lineEnd:Dy,polygonStart:function(){js.point=Ew,js.lineStart=gI,js.lineEnd=mI,ic=new hh,$s.polygonStart()},polygonEnd:function(){$s.polygonEnd(),js.point=Km,js.lineStart=Oy,js.lineEnd=Dy,J0<0?(bn=-(Cn=180),ji=-(ur=90)):ic>cw?ur=90:ic<-1e-6&&(ji=-90),Js[0]=bn,Js[1]=Cn},sphere:function(){bn=-(Cn=180),ji=-(ur=90)}};function Km(n,e){Ya.push(Js=[bn=n,Cn=n]),e<ji&&(ji=e),e>ur&&(ur=e)}function bw(n,e){var t=hI([n*Ll,e*Ll]);if(gl){var i=Ly(gl,t),s=[i[1],-i[0],0],A=Ly(s,i);dI(A),A=fI(A);var h=n-kA,m=h>0?1:-1,_=A[0]*am*m,E,x=Xp(h)>180;x^(m*kA<_&&_<m*n)?(E=A[1]*am,E>ur&&(ur=E)):(_=(_+360)%360-180,x^(m*kA<_&&_<m*n)?(E=-A[1]*am,E<ji&&(ji=E)):(e<ji&&(ji=e),e>ur&&(ur=e))),x?n<kA?Ar(bn,n)>Ar(bn,Cn)&&(Cn=n):Ar(n,Cn)>Ar(bn,Cn)&&(bn=n):Cn>=bn?(n<bn&&(bn=n),n>Cn&&(Cn=n)):n>kA?Ar(bn,n)>Ar(bn,Cn)&&(Cn=n):Ar(n,Cn)>Ar(bn,Cn)&&(bn=n)}else Ya.push(Js=[bn=n,Cn=n]);e<ji&&(ji=e),e>ur&&(ur=e),gl=t,kA=n}function Oy(){js.point=bw}function Dy(){Js[0]=bn,Js[1]=Cn,js.point=Km,gl=null}function Ew(n,e){if(gl){var t=n-kA;ic.add(Xp(t)>180?t+(t>0?360:-360):t)}else pw=n,_w=e;$s.point(n,e),bw(n,e)}function gI(){$s.lineStart()}function mI(){Ew(pw,_w),$s.lineEnd(),Xp(ic)>cw&&(bn=-(Cn=180)),Js[0]=bn,Js[1]=Cn,gl=null}function Ar(n,e){return(e-=n)<0?e+360:e}function pI(n,e){return n[0]-e[0]}function Ny(n,e){return n[0]<=n[1]?n[0]<=e&&e<=n[1]:e<n[0]||n[1]<e}function _I(n){var e,t,i,s,A,h,m;if(ur=Cn=-(bn=ji=1/0),Ya=[],oI(n,js),t=Ya.length){for(Ya.sort(pI),e=1,i=Ya[0],A=[i];e<t;++e)s=Ya[e],Ny(i,s[0])||Ny(i,s[1])?(Ar(i[0],s[1])>Ar(i[0],i[1])&&(i[1]=s[1]),Ar(s[0],i[1])>Ar(i[0],i[1])&&(i[0]=s[0])):A.push(i=s);for(h=-1/0,t=A.length-1,e=0,i=A[t];e<=t;i=s,++e)s=A[e],(m=Ar(i[1],s[0]))>h&&(h=m,bn=s[0],Cn=i[1])}return Ya=Js=null,bn===1/0||ji===1/0?[[NaN,NaN],[NaN,NaN]]:[[bn,ji],[Cn,ur]]}function bI(n,e,t){const{pad:i=.05,maxZoom:s=100}=t||{},A=_I(n),[[h,m],[_,E]]=A,x=i?[[h-i*(_-h),m-i*(E-m)],[_+i*(_-h),E+i*(E-m)]]:A,[S,C]=e;return{...wp({width:S,height:C,bounds:x,padding:t==null?void 0:t.padding,maxZoom:s}),width:S,height:C,bearing:0,pitch:0}}function yw(n,e,t,i){const s=h=>({type:"Point",coordinates:e(h)});let A;if(Array.isArray(n))A=n.map(s);else{A=[];for(const h of n)A.push(s(h))}return bI({type:"GeometryCollection",geometries:A},t,i)}function EI(n){return n&&n.locations&&n.flows}function yI(n){return n&&typeof n.setFlowmapState=="function"&&typeof n.getViewportForLocations=="function"&&typeof n.getFlowByIndex=="function"&&typeof n.getLocationById=="function"&&typeof n.getLocationByIndex=="function"&&typeof n.getLayersData=="function"}class vI{constructor(e){this.selectors=new iI(e),this.flowmapData=void 0,this.flowmapState=void 0}setAccessors(e){this.selectors.setAccessors(e)}setFlowmapData(e){this.flowmapData=e}getSelectors(){return this.selectors}getFlowmapData(){return this.flowmapData}async setFlowmapState(e){this.flowmapState=e}getFlowmapState(){return this.flowmapState}async getFlowByIndex(e){if(!this.flowmapState||!this.flowmapData)return;const t=this.selectors.getFlowsForFlowmapLayer(this.flowmapState,this.flowmapData);return t==null?void 0:t[e]}async getLocationByIndex(e){if(!this.flowmapState||!this.flowmapData)return;const t=this.selectors.getLocationsForFlowmapLayer(this.flowmapState,this.flowmapData);return t==null?void 0:t[e]}async getLayersData(){if(!(!this.flowmapState||!this.flowmapData))return this.selectors.getLayersData(this.flowmapState,this.flowmapData)}async getLocationById(e){if(!this.flowmapState||!this.flowmapData)return;const t=this.selectors.getClusterIndex(this.flowmapState,this.flowmapData);if(t){const s=t.getClusterById(e);if(s)return s}const i=this.selectors.getLocationsById(this.flowmapState,this.flowmapData);return i==null?void 0:i.get(e)}async getTotalsForLocation(e){var t;if(!(!this.flowmapState||!this.flowmapData))return(t=this.selectors.getLocationTotals(this.flowmapState,this.flowmapData))==null?void 0:t.get(e)}async getViewportForLocations(e,t){var i;if((i=this.flowmapData)!=null&&i.locations)return yw(this.flowmapData.locations,s=>[this.selectors.accessors.getLocationLon(s),this.selectors.accessors.getLocationLat(s)],e,t)}async updateLayersData(e){e(await this.getLayersData())}getClusterZoom(){return this.flowmapState&&this.flowmapData?this.selectors.getClusterZoom(this.flowmapState,this.flowmapData):void 0}getClusterIndex(){return this.flowmapState&&this.flowmapData?this.selectors.getClusterIndex(this.flowmapState,this.flowmapData):void 0}getLocationsById(){return this.flowmapState&&this.flowmapData?this.selectors.getLocationsById(this.flowmapState,this.flowmapData):void 0}getLocationTotals(){return this.flowmapState&&this.flowmapData?this.selectors.getLocationTotals(this.flowmapState,this.flowmapData):void 0}getFlowsForFlowmapLayer(){return this.flowmapState&&this.flowmapData?this.selectors.getFlowsForFlowmapLayer(this.flowmapState,this.flowmapData):void 0}}var Ol;(function(n){n.LOCATION="location",n.FLOW="flow"})(Ol||(Ol={}));const TI=["filter","locationsEnabled","locationTotalsEnabled","locationLabelsEnabled","adaptiveScalesEnabled","animationEnabled","clusteringEnabled","clusteringLevel","fadeEnabled","fadeOpacityEnabled","clusteringAuto","darkMode","fadeAmount","colorScheme","highlightColor","maxTopFlowsDisplayNum"];var al;(function(n){n.LOCATION="location",n.FLOW="flow"})(al||(al={}));class Hn extends Dp{constructor(e){super({...e,onHover:(t,i)=>{const s=Date.now();this.setState({highlightedObject:this._getHighlightedObject(t),lastHoverTime:s});const{onHover:A}=e;A&&this._getFlowmapLayerPickingInfo(t).then(h=>{var m;(((m=this.state)==null?void 0:m.lastHoverTime)??0)<=s&&(this.setState({pickingInfo:h}),A(h,i))})},onClick:(t,i)=>{const{onClick:s}=e,A=Date.now();this.setState({lastClickTime:A}),s&&this._getFlowmapLayerPickingInfo(t).then(h=>{var m;(((m=this.state)==null?void 0:m.lastClickTime)??0)<=A&&(this.setState({pickingInfo:h}),h&&s(h,i))})}})}initializeState(){this.state={accessors:new Qm(this.props),dataProvider:this._getOrMakeDataProvider(),layersData:void 0,highlightedObject:void 0,pickingInfo:void 0,lastHoverTime:void 0,lastClickTime:void 0}}getPickingInfo({info:e}){var t,i;if(!e.object){const s=(i=(t=this.state)==null?void 0:t.pickingInfo)==null?void 0:i.object;if(s)return{...e,object:s,picked:!0}}return e}_getOrMakeDataProvider(){const{data:e,dataProvider:t}=this.props;if(yI(t))return t;if(EI(e)){const i=new vI(this.props);return i.setFlowmapData(e),i}throw new Error("FlowmapLayer: data must be a FlowmapDataProvider or FlowmapData")}_updateDataProvider(){this.setState({dataProvider:this._getOrMakeDataProvider()})}shouldUpdateState(e){const{changeFlags:t}=e;return t.viewportChanged?!0:super.shouldUpdateState(e)}updateState({oldProps:e,props:t,changeFlags:i}){if(i.propsChanged,i.dataChanged&&this._updateDataProvider(),(i.viewportChanged||i.dataChanged)&&this.setState({highlightedObject:void 0}),i.viewportChanged||i.dataChanged||i.propsChanged&&TI.some(s=>e[s]!==t[s])){const{dataProvider:s}=this.state||{};s&&(s.setFlowmapState(this._getFlowmapState()),s.updateLayersData(A=>{this.setState({layersData:A,highlightedObject:void 0})},i))}}_getSettingsState(){const{locationsEnabled:e,locationTotalsEnabled:t,locationLabelsEnabled:i,adaptiveScalesEnabled:s,animationEnabled:A,clusteringEnabled:h,clusteringLevel:m,fadeEnabled:_,fadeOpacityEnabled:E,clusteringAuto:x,darkMode:S,fadeAmount:C,colorScheme:L,highlightColor:B,maxTopFlowsDisplayNum:G}=this.props;return{locationsEnabled:e,locationTotalsEnabled:t,locationLabelsEnabled:i,adaptiveScalesEnabled:s,animationEnabled:A,clusteringEnabled:h,clusteringLevel:m,fadeEnabled:_,fadeOpacityEnabled:E,clusteringAuto:x,darkMode:S,fadeAmount:C,colorScheme:L,highlightColor:B,maxTopFlowsDisplayNum:G}}_getFlowmapState(){return{viewport:wI(this.context.viewport),filter:this.props.filter,settings:this._getSettingsState()}}async _getFlowmapLayerPickingInfo(e){var m;const{index:t,sourceLayer:i}=e,{dataProvider:s,accessors:A}=this.state||{};if(!s||!A)return;const h={...e,picked:e.picked,layer:e.layer,index:e.index,x:e.x,y:e.y,coordinate:e.coordinate,event:e.event};if(i instanceof rl||i instanceof p0){const _=t===-1?void 0:await s.getFlowByIndex(t);if(_){const E=await s.getLocationById(A.getFlowOriginId(_)),x=await s.getLocationById(A.getFlowDestId(_));if(E&&x)return{...h,object:{type:Ol.FLOW,flow:_,origin:E,dest:x,count:A.getFlowMagnitude(_)}}}}else if(i instanceof tc){const _=t===-1?void 0:await s.getLocationByIndex(t);if(_){const E=A.getLocationId(_),x=A.getLocationName(_),S=await s.getTotalsForLocation(E),{circleAttributes:C}=((m=this.state)==null?void 0:m.layersData)||{};if(S&&C){const L=sm(C,e.index);return{...h,object:{type:Ol.LOCATION,location:_,id:E,name:x,totals:S,circleRadius:L}}}}}}_getHighlightedObject(e){var s,A;const{index:t,sourceLayer:i}=e;if(!(t<0)){if(i instanceof rl||i instanceof p0){const{lineAttributes:h}=((s=this.state)==null?void 0:s.layersData)||{};if(h){let m=sI(h,t);return this.props.fadeOpacityEnabled&&(m={...m,attributes:{...m.attributes,getColor:{...m.attributes.getColor,value:new Uint8Array([...m.attributes.getColor.value.slice(0,3),255])}}}),{type:al.FLOW,lineAttributes:m}}}else if(i instanceof tc){const{circleAttributes:h}=((A=this.state)==null?void 0:A.layersData)||{};if(h)return{type:al.LOCATION,coords:Ty(h,t),radius:sm(h,t)}}}}renderLayers(){var t;const e=[];if((t=this.state)!=null&&t.layersData){const{layersData:i,highlightedObject:s}=this.state,{circleAttributes:A,lineAttributes:h,locationLabels:m}=i||{};if(A&&h){const _=t9(this._getSettingsState()),E=as(_.outlineColor||(this.props.darkMode?"#000":"#fff")),x={data:h,parameters:{...this.props.parameters,depthTest:!1}};if(this.props.animationEnabled?e.push(new p0({...this.getSubLayerProps({...x,id:"animated-flow-lines",drawOutline:!1,thicknessUnit:20})})):e.push(new rl({...this.getSubLayerProps({...x,id:"flow-lines",drawOutline:!0,outlineColor:E})})),e.push(new tc(this.getSubLayerProps({id:"circles",data:A,emptyColor:this.props.darkMode?[0,0,0,255]:[255,255,255,255],outlineEmptyMix:.4}))),s)switch(s.type){case al.LOCATION:e.push(new Bp({...this.getSubLayerProps({id:"location-highlight",data:[s],pickable:!1,antialiasing:!0,stroked:!0,filled:!1,lineWidthUnits:"pixels",getLineWidth:2,radiusUnits:"pixels",getRadius:S=>S.radius,getLineColor:as(this.props.highlightColor),getPosition:S=>S.coords})}));break;case al.FLOW:e.push(new rl({...this.getSubLayerProps({id:"flow-highlight",data:s.lineAttributes,drawOutline:!0,pickable:!1,outlineColor:as(this.props.highlightColor),outlineThickness:1,parameters:{depthTest:!1}})}));break}}m&&e.push(new Fp(this.getSubLayerProps({id:"location-labels",data:m,maxWidth:1e3,pickable:!1,fontFamily:"Helvetica",getPixelOffset:(_,{index:E})=>[0,sm(A,E)+5],getPosition:(_,{index:E})=>Ty(A,E),getText:_=>_,getSize:10,getColor:[255,255,255,255],getAngle:0,getTextAnchor:"middle",getAlignmentBaseline:"top"})))}return e}}Hn.defaultProps={darkMode:!0,fadeAmount:50,locationsEnabled:!0,locationTotalsEnabled:!0,locationLabelsEnabled:!1,animationEnabled:!1,clusteringEnabled:!0,fadeEnabled:!0,fadeOpacityEnabled:!1,clusteringAuto:!0,clusteringLevel:void 0,adaptiveScalesEnabled:!0,colorScheme:"Teal",highlightColor:"orange",maxTopFlowsDisplayNum:5e3};function wI(n){const{width:e,height:t,longitude:i,latitude:s,zoom:A,pitch:h,bearing:m}=n;return{width:e,height:t,longitude:i,latitude:s,zoom:A,pitch:h,bearing:m}}const xI="modulepreload",SI=function(n){return"/demo/2/"+n},By={},MI=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),m=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));s=Promise.allSettled(t.map(_=>{if(_=SI(_),_ in By)return;By[_]=!0;const E=_.endsWith(".css"),x=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${x}`))return;const S=document.createElement("link");if(S.rel=E?"stylesheet":xI,E||(S.as="script"),S.crossOrigin="",S.href=_,m&&S.setAttribute("nonce",m),document.head.appendChild(S),E)return new Promise((C,L)=>{S.addEventListener("load",C),S.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${_}`)))})}))}function A(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return s.then(h=>{for(const m of h||[])m.status==="rejected"&&A(m.reason);return e().catch(A)})},CI=ze.createContext(null);function RI(n,e){const t=Array.isArray(n)?n[0]:n?n.x:0,i=Array.isArray(n)?n[1]:n?n.y:0,s=Array.isArray(e)?e[0]:e?e.x:0,A=Array.isArray(e)?e[1]:e?e.y:0;return t===s&&i===A}function Qs(n,e){if(n===e)return!0;if(!n||!e)return!1;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Qs(n[t],e[t]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof n=="object"&&typeof e=="object"){const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(const s of t)if(!e.hasOwnProperty(s)||!Qs(n[s],e[s]))return!1;return!0}return!1}function LI(n){const e=n.clone();return e.pixelsToGLUnits=n.pixelsToGLUnits,e}function Py(n,e){if(!n.getProjection)return;const t=n.getProjection(),i=e.getProjection();Qs(t,i)||e.setProjection(t)}function Iy(n){return{longitude:n.center.lng,latitude:n.center.lat,zoom:n.zoom,pitch:n.pitch,bearing:n.bearing,padding:n.padding}}function Fy(n,e){const t=e.viewState||e;let i=!1;if("zoom"in t){const s=n.zoom;n.zoom=t.zoom,i=i||s!==n.zoom}if("bearing"in t){const s=n.bearing;n.bearing=t.bearing,i=i||s!==n.bearing}if("pitch"in t){const s=n.pitch;n.pitch=t.pitch,i=i||s!==n.pitch}if(t.padding&&!n.isPaddingEqual(t.padding)&&(i=!0,n.padding=t.padding),"longitude"in t&&"latitude"in t){const s=n.center;n.center=new s.constructor(t.longitude,t.latitude),i=i||s!==n.center}return i}const OI=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Uy(n){if(!n)return null;if(typeof n=="string"||("toJS"in n&&(n=n.toJS()),!n.layers))return n;const e={};for(const i of n.layers)e[i.id]=i;const t=n.layers.map(i=>{let s=null;"interactive"in i&&(s=Object.assign({},i),delete s.interactive);const A=e[i.ref];if(A){s=s||Object.assign({},i),delete s.ref;for(const h of OI)h in A&&(s[h]=A[h])}return s||i});return{...n,layers:t}}var ky={};const zy={version:8,sources:{},layers:[]},Gy={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Am={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Vy={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},DI=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],NI=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Dl{constructor(e,t,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=s=>{const A=this.props[Vy[s.type]];A?A(s):s.type==="error"&&console.error(s.error)},this._onPointerEvent=s=>{(s.type==="mousemove"||s.type==="mouseout")&&this._updateHover(s);const A=this.props[Gy[s.type]];A&&(this.props.interactiveLayerIds&&s.type!=="mouseover"&&s.type!=="mouseout"&&(s.features=this._hoveredFeatures||this._queryRenderedFeatures(s.point)),A(s),delete s.features)},this._onCameraEvent=s=>{if(!this._internalUpdate){const A=this.props[Am[s.type]];A&&A(s)}s.type in this._deferredEvents&&(this._deferredEvents[s.type]=!1)},this._MapClass=e,this.props=t,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const i=this._updateSettings(e,t);i&&this._createShadowTransform(this._map);const s=this._updateSize(e),A=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(i||s||A&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const i=Dl.savedMaps.pop();if(!i)return null;const s=i.map,A=s.getContainer();for(t.className=A.className;A.childNodes.length>0;)t.appendChild(A.childNodes[0]);s._container=t;const h=s._resizeObserver;h&&(h.disconnect(),h.observe(t)),i.setProps({...e,styleDiffing:!1}),s.resize();const{initialViewState:m}=e;return m&&(m.bounds?s.fitBounds(m.bounds,{...m.fitBoundsOptions,duration:0}):i._updateViewState(m,!1)),s.isStyleLoaded()?s.fire("load"):s.once("styledata",()=>s.fire("load")),s._update(),i}_initialize(e){const{props:t}=this,{mapStyle:i=zy}=t,s={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||BI()||null,container:e,style:Uy(i)},A=s.initialViewState||s.viewState||s;if(Object.assign(s,{center:[A.longitude||0,A.latitude||0],zoom:A.zoom||0,pitch:A.pitch||0,bearing:A.bearing||0}),t.gl){const x=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=x,t.gl)}const h=new this._MapClass(s);A.padding&&h.setPadding(A.padding),t.cursor&&(h.getCanvas().style.cursor=t.cursor),this._createShadowTransform(h);const m=h._render;h._render=x=>{this._inRender=!0,m.call(h,x),this._inRender=!1};const _=h._renderTaskQueue.run;h._renderTaskQueue.run=x=>{_.call(h._renderTaskQueue,x),this._onBeforeRepaint()},h.on("render",()=>this._onAfterRepaint());const E=h.fire;h.fire=this._fireEvent.bind(this,E),h.on("resize",()=>{this._renderTransform.resize(h.transform.width,h.transform.height)}),h.on("styledata",()=>{this._updateStyleComponents(this.props,{}),Py(h.transform,this._renderTransform)}),h.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const x in Gy)h.on(x,this._onPointerEvent);for(const x in Am)h.on(x,this._onCameraEvent);for(const x in Vy)h.on(x,this._onEvent);this._map=h}recycle(){const t=this.map.getContainer().querySelector("[mapboxgl-children]");t==null||t.remove(),Dl.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=LI(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const i=this._map;if(t.width!==i.transform.width||t.height!==i.transform.height)return i.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const i=this._map,s=this._renderTransform,{zoom:A,pitch:h,bearing:m}=s,_=i.isMoving();_&&(s.cameraElevationReference="sea");const E=Fy(s,{...Iy(i.transform),...e});if(_&&(s.cameraElevationReference="ground"),E&&t){const x=this._deferredEvents;x.move=!0,x.zoom||(x.zoom=A!==s.zoom),x.rotate||(x.rotate=m!==s.bearing),x.pitch||(x.pitch=h!==s.pitch)}return _||Fy(i.transform,e),E}_updateSettings(e,t){const i=this._map;let s=!1;for(const A of DI)if(A in e&&!Qs(e[A],t[A])){s=!0;const h=i[`set${A[0].toUpperCase()}${A.slice(1)}`];h==null||h.call(i,e[A])}return s}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==t.mapStyle){const{mapStyle:i=zy,styleDiffing:s=!0}=e,A={diff:s};return"localIdeographFontFamily"in e&&(A.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(Uy(i),A),!0}return!1}_updateStyleComponents(e,t){const i=this._map;let s=!1;return i.isStyleLoaded()&&("light"in e&&i.setLight&&!Qs(e.light,t.light)&&(s=!0,i.setLight(e.light)),"fog"in e&&i.setFog&&!Qs(e.fog,t.fog)&&(s=!0,i.setFog(e.fog)),"terrain"in e&&i.setTerrain&&!Qs(e.terrain,t.terrain)&&(!e.terrain||i.getSource(e.terrain.source))&&(s=!0,i.setTerrain(e.terrain))),s}_updateHandlers(e,t){var i,s;const A=this._map;let h=!1;for(const m of NI){const _=(i=e[m])!==null&&i!==void 0?i:!0,E=(s=t[m])!==null&&s!==void 0?s:!0;Qs(_,E)||(h=!0,_?A[m].enable(_):A[m].disable())}return h}_queryRenderedFeatures(e){const t=this._map,i=t.transform,{interactiveLayerIds:s=[]}=this.props;try{return t.transform=this._renderTransform,t.queryRenderedFeatures(e,{layers:s.filter(t.getLayer.bind(t))})}catch{return[]}finally{t.transform=i}}_updateHover(e){var t;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const A=e.type,h=((t=this._hoveredFeatures)===null||t===void 0?void 0:t.length)>0,m=this._queryRenderedFeatures(e.point),_=m.length>0;!_&&h&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=m,_&&!h&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=A}else this._hoveredFeatures=null}_fireEvent(e,t,i){const s=this._map,A=s.transform,h=typeof t=="string"?t:t.type;return h==="move"&&this._updateViewState(this.props,!1),h in Am&&(typeof t=="object"&&(t.viewState=Iy(A)),this._map.isMoving())?(s.transform=this._renderTransform,e.call(s,t,i),s.transform=A,s):(e.call(s,t,i),s)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const i in this._deferredEvents)this._deferredEvents[i]&&e.fire(i);this._internalUpdate=!1;const t=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{Py(this._renderTransform,t),e.transform=t}}}Dl.savedMaps=[];function BI(){let n=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);n=e&&e[1]}try{n=n||ky.MapboxAccessToken}catch{}try{n=n||ky.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return n}const PI=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function II(n){if(!n)return null;const e=n.map,t={getMap:()=>e,getCenter:()=>n.transform.center,getZoom:()=>n.transform.zoom,getBearing:()=>n.transform.bearing,getPitch:()=>n.transform.pitch,getPadding:()=>n.transform.padding,getBounds:()=>n.transform.getBounds(),project:i=>{const s=e.transform;e.transform=n.transform;const A=e.project(i);return e.transform=s,A},unproject:i=>{const s=e.transform;e.transform=n.transform;const A=e.unproject(i);return e.transform=s,A},queryTerrainElevation:(i,s)=>{const A=e.transform;e.transform=n.transform;const h=e.queryTerrainElevation(i,s);return e.transform=A,h},queryRenderedFeatures:(i,s)=>{const A=e.transform;e.transform=n.transform;const h=e.queryRenderedFeatures(i,s);return e.transform=A,h}};for(const i of FI(e))!(i in t)&&!PI.includes(i)&&(t[i]=e[i].bind(e));return t}function FI(n){const e=new Set;let t=n;for(;t;){for(const i of Object.getOwnPropertyNames(t))i[0]!=="_"&&typeof n[i]=="function"&&i!=="fire"&&i!=="setEventedParent"&&e.add(i);t=Object.getPrototypeOf(t)}return Array.from(e)}const UI=typeof document<"u"?ze.useLayoutEffect:ze.useEffect,kI=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function zI(n,e){for(const i of kI)i in e&&(n[i]=e[i]);const{RTLTextPlugin:t="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;t&&n.getRTLTextPluginStatus&&n.getRTLTextPluginStatus()==="unavailable"&&n.setRTLTextPlugin(t,i=>{i&&console.error(i)},!0)}const mh=ze.createContext(null);function GI(n,e,t){const i=ze.useContext(CI),[s,A]=ze.useState(null),h=ze.useRef(),{current:m}=ze.useRef({mapLib:null,map:null});ze.useEffect(()=>{const x=n.mapLib;let S=!0,C;return Promise.resolve(x||t).then(L=>{if(!S)return;if(!L)throw new Error("Invalid mapLib");const B="Map"in L?L:L.default;if(!B.Map)throw new Error("Invalid mapLib");if(zI(B,n),!B.supported||B.supported(n))n.reuseMaps&&(C=Dl.reuse(n,h.current)),C||(C=new Dl(B.Map,n,h.current)),m.map=II(C),m.mapLib=B,A(C),i==null||i.onMapMount(m.map,n.id);else throw new Error("Map is not supported by this browser")}).catch(L=>{const{onError:B}=n;B?B({type:"error",target:null,originalEvent:null,error:L}):console.error(L)}),()=>{S=!1,C&&(i==null||i.onMapUnmount(n.id),n.reuseMaps?C.recycle():C.destroy())}},[]),UI(()=>{s&&s.setProps(n)}),ze.useImperativeHandle(e,()=>m.map,[s]);const _=ze.useMemo(()=>({position:"relative",width:"100%",height:"100%",...n.style}),[n.style]),E={height:"100%"};return ze.createElement("div",{id:n.id,ref:h,style:_},s&&ze.createElement(mh.Provider,{value:m},ze.createElement("div",{"mapboxgl-children":"",style:E},n.children)))}var vw=Ky();const VI=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function to(n,e){if(!n||!e)return;const t=n.style;for(const i in e){const s=e[i];Number.isFinite(s)&&!VI.test(i)?t[i]=`${s}px`:t[i]=s}}function HI(n,e){const{map:t,mapLib:i}=ze.useContext(mh),s=ze.useRef({props:n});s.current.props=n;const A=ze.useMemo(()=>{let G=!1;ze.Children.forEach(n.children,Y=>{Y&&(G=!0)});const j={...n,element:G?document.createElement("div"):null},H=new i.Marker(j);return H.setLngLat([n.longitude,n.latitude]),H.getElement().addEventListener("click",Y=>{var K,ee;(ee=(K=s.current.props).onClick)===null||ee===void 0||ee.call(K,{type:"click",target:H,originalEvent:Y})}),H.on("dragstart",Y=>{var K,ee;const Z=Y;Z.lngLat=A.getLngLat(),(ee=(K=s.current.props).onDragStart)===null||ee===void 0||ee.call(K,Z)}),H.on("drag",Y=>{var K,ee;const Z=Y;Z.lngLat=A.getLngLat(),(ee=(K=s.current.props).onDrag)===null||ee===void 0||ee.call(K,Z)}),H.on("dragend",Y=>{var K,ee;const Z=Y;Z.lngLat=A.getLngLat(),(ee=(K=s.current.props).onDragEnd)===null||ee===void 0||ee.call(K,Z)}),H},[]);ze.useEffect(()=>(A.addTo(t.getMap()),()=>{A.remove()}),[]);const{longitude:h,latitude:m,offset:_,style:E,draggable:x=!1,popup:S=null,rotation:C=0,rotationAlignment:L="auto",pitchAlignment:B="auto"}=n;return ze.useEffect(()=>{to(A.getElement(),E)},[E]),ze.useImperativeHandle(e,()=>A,[]),(A.getLngLat().lng!==h||A.getLngLat().lat!==m)&&A.setLngLat([h,m]),_&&!RI(A.getOffset(),_)&&A.setOffset(_),A.isDraggable()!==x&&A.setDraggable(x),A.getRotation()!==C&&A.setRotation(C),A.getRotationAlignment()!==L&&A.setRotationAlignment(L),A.getPitchAlignment()!==B&&A.setPitchAlignment(B),A.getPopup()!==S&&A.setPopup(S),vw.createPortal(n.children,A.getElement())}ze.memo(ze.forwardRef(HI));function Hy(n){return new Set(n?n.trim().split(/\s+/):[])}function jI(n,e){const{map:t,mapLib:i}=ze.useContext(mh),s=ze.useMemo(()=>document.createElement("div"),[]),A=ze.useRef({props:n});A.current.props=n;const h=ze.useMemo(()=>{const m={...n},_=new i.Popup(m);return _.setLngLat([n.longitude,n.latitude]),_.once("open",E=>{var x,S;(S=(x=A.current.props).onOpen)===null||S===void 0||S.call(x,E)}),_},[]);if(ze.useEffect(()=>{const m=_=>{var E,x;(x=(E=A.current.props).onClose)===null||x===void 0||x.call(E,_)};return h.on("close",m),h.setDOMContent(s).addTo(t.getMap()),()=>{h.off("close",m),h.isOpen()&&h.remove()}},[]),ze.useEffect(()=>{to(h.getElement(),n.style)},[n.style]),ze.useImperativeHandle(e,()=>h,[]),h.isOpen()&&((h.getLngLat().lng!==n.longitude||h.getLngLat().lat!==n.latitude)&&h.setLngLat([n.longitude,n.latitude]),n.offset&&!Qs(h.options.offset,n.offset)&&h.setOffset(n.offset),(h.options.anchor!==n.anchor||h.options.maxWidth!==n.maxWidth)&&(h.options.anchor=n.anchor,h.setMaxWidth(n.maxWidth)),h.options.className!==n.className)){const m=Hy(h.options.className),_=Hy(n.className);for(const E of m)_.has(E)||h.removeClassName(E);for(const E of _)m.has(E)||h.addClassName(E);h.options.className=n.className}return vw.createPortal(n.children,s)}ze.memo(ze.forwardRef(jI));function Bc(n,e,t,i){const s=ze.useContext(mh),A=ze.useMemo(()=>n(s),[]);return ze.useEffect(()=>{const h=e,m=typeof e=="function"?e:null,{map:_}=s;return _.hasControl(A)||_.addControl(A,h==null?void 0:h.position),()=>{m&&m(s),_.hasControl(A)&&_.removeControl(A)}},[]),A}function YI(n){const e=Bc(({mapLib:t})=>new t.AttributionControl(n),{position:n.position});return ze.useEffect(()=>{to(e._container,n.style)},[n.style]),null}ze.memo(YI);function QI(n){const e=Bc(({mapLib:t})=>new t.FullscreenControl({container:n.containerId&&document.getElementById(n.containerId)}),{position:n.position});return ze.useEffect(()=>{to(e._controlContainer,n.style)},[n.style]),null}ze.memo(QI);function XI(n,e){const t=ze.useRef({props:n}),i=Bc(({mapLib:s})=>{const A=new s.GeolocateControl(n),h=A._setupUI;return A._setupUI=m=>{A._container.hasChildNodes()||h(m)},A.on("geolocate",m=>{var _,E;(E=(_=t.current.props).onGeolocate)===null||E===void 0||E.call(_,m)}),A.on("error",m=>{var _,E;(E=(_=t.current.props).onError)===null||E===void 0||E.call(_,m)}),A.on("outofmaxbounds",m=>{var _,E;(E=(_=t.current.props).onOutOfMaxBounds)===null||E===void 0||E.call(_,m)}),A.on("trackuserlocationstart",m=>{var _,E;(E=(_=t.current.props).onTrackUserLocationStart)===null||E===void 0||E.call(_,m)}),A.on("trackuserlocationend",m=>{var _,E;(E=(_=t.current.props).onTrackUserLocationEnd)===null||E===void 0||E.call(_,m)}),A},{position:n.position});return t.current.props=n,ze.useImperativeHandle(e,()=>i,[]),ze.useEffect(()=>{to(i._container,n.style)},[n.style]),null}ze.memo(ze.forwardRef(XI));function WI(n){const e=Bc(({mapLib:t})=>new t.NavigationControl(n),{position:n.position});return ze.useEffect(()=>{to(e._container,n.style)},[n.style]),null}ze.memo(WI);function qI(n){const e=Bc(({mapLib:A})=>new A.ScaleControl(n),{position:n.position}),t=ze.useRef(n),i=t.current;t.current=n;const{style:s}=n;return n.maxWidth!==void 0&&n.maxWidth!==i.maxWidth&&(e.options.maxWidth=n.maxWidth),n.unit!==void 0&&n.unit!==i.unit&&e.setUnit(n.unit),ze.useEffect(()=>{to(e._container,s)},[s]),null}ze.memo(qI);const ZI=MI(()=>import("./mapbox-gl-DO1CST3s.js").then(n=>n.m),[]),KI=ze.forwardRef(function(e,t){return GI(e,t,ZI)});var jy={},om={},lm=34,Xu=10,um=13;function Tw(n){return new Function("d","return {"+n.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function $I(n,e){var t=Tw(n);return function(i,s){return e(t(i),s,n)}}function Yy(n){var e=Object.create(null),t=[];return n.forEach(function(i){for(var s in i)s in e||t.push(e[s]=s)}),t}function Hi(n,e){var t=n+"",i=t.length;return i<e?new Array(e-i+1).join(0)+t:t}function JI(n){return n<0?"-"+Hi(-n,6):n>9999?"+"+Hi(n,6):Hi(n,4)}function eF(n){var e=n.getUTCHours(),t=n.getUTCMinutes(),i=n.getUTCSeconds(),s=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":JI(n.getUTCFullYear())+"-"+Hi(n.getUTCMonth()+1,2)+"-"+Hi(n.getUTCDate(),2)+(s?"T"+Hi(e,2)+":"+Hi(t,2)+":"+Hi(i,2)+"."+Hi(s,3)+"Z":i?"T"+Hi(e,2)+":"+Hi(t,2)+":"+Hi(i,2)+"Z":t||e?"T"+Hi(e,2)+":"+Hi(t,2)+"Z":"")}function tF(n){var e=new RegExp('["'+n+`
\r]`),t=n.charCodeAt(0);function i(S,C){var L,B,G=s(S,function(j,H){if(L)return L(j,H-1);B=j,L=C?$I(j,C):Tw(j)});return G.columns=B||[],G}function s(S,C){var L=[],B=S.length,G=0,j=0,H,Y=B<=0,K=!1;S.charCodeAt(B-1)===Xu&&--B,S.charCodeAt(B-1)===um&&--B;function ee(){if(Y)return om;if(K)return K=!1,jy;var se,be=G,he;if(S.charCodeAt(be)===lm){for(;G++<B&&S.charCodeAt(G)!==lm||S.charCodeAt(++G)===lm;);return(se=G)>=B?Y=!0:(he=S.charCodeAt(G++))===Xu?K=!0:he===um&&(K=!0,S.charCodeAt(G)===Xu&&++G),S.slice(be+1,se-1).replace(/""/g,'"')}for(;G<B;){if((he=S.charCodeAt(se=G++))===Xu)K=!0;else if(he===um)K=!0,S.charCodeAt(G)===Xu&&++G;else if(he!==t)continue;return S.slice(be,se)}return Y=!0,S.slice(be,B)}for(;(H=ee())!==om;){for(var Z=[];H!==jy&&H!==om;)Z.push(H),H=ee();C&&(Z=C(Z,j++))==null||L.push(Z)}return L}function A(S,C){return S.map(function(L){return C.map(function(B){return x(L[B])}).join(n)})}function h(S,C){return C==null&&(C=Yy(S)),[C.map(x).join(n)].concat(A(S,C)).join(`
`)}function m(S,C){return C==null&&(C=Yy(S)),A(S,C).join(`
`)}function _(S){return S.map(E).join(`
`)}function E(S){return S.map(x).join(n)}function x(S){return S==null?"":S instanceof Date?eF(S):e.test(S+="")?'"'+S.replace(/"/g,'""')+'"':S}return{parse:i,parseRows:s,format:h,formatBody:m,formatRows:_,formatRow:E,formatValue:x}}var nF=tF(","),iF=nF.parse;function rF(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.text()}function sF(n,e){return fetch(n,e).then(rF)}function aF(n){return function(e,t,i){return arguments.length===2&&typeof t=="function"&&(i=t,t=void 0),sF(e,t).then(function(s){return n(s,i)})}}var Qy=aF(iF),Yi=function(n){n=n||{};var e=typeof n<"u"?n:{},t={},i;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);var s="";function A(oe){return e.locateFile?e.locateFile(oe,s):s+oe}var h;typeof document<"u"&&document.currentScript&&(s=document.currentScript.src),s.indexOf("blob:")!==0?s=s.substr(0,s.lastIndexOf("/")+1):s="",h=function(ve,Pe,Xe){var u=new XMLHttpRequest;u.open("GET",ve,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status==200||u.status==0&&u.response){Pe(u.response);return}var Mt=AA(ve);if(Mt){Pe(Mt.buffer);return}Xe()},u.onerror=Xe,u.send(null)};var m=e.print||console.log.bind(console),_=e.printErr||console.warn.bind(console);for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);t=null,e.arguments&&e.arguments;var E=0,x=function(oe){E=oe},S=function(){return E},C=8;function L(oe,ve,Pe,Xe){switch(Pe=Pe||"i8",Pe.charAt(Pe.length-1)==="*"&&(Pe="i32"),Pe){case"i1":Ne[oe>>0]=ve;break;case"i8":Ne[oe>>0]=ve;break;case"i16":He[oe>>1]=ve;break;case"i32":je[oe>>2]=ve;break;case"i64":iA=[ve>>>0,(Fn=ve,+qt(Fn)>=1?Fn>0?(jt(+An(Fn/4294967296),4294967295)|0)>>>0:~~+Nt((Fn-+(~~Fn>>>0))/4294967296)>>>0:0)],je[oe>>2]=iA[0],je[oe+4>>2]=iA[1];break;case"float":Te[oe>>2]=ve;break;case"double":We[oe>>3]=ve;break;default:Xi("invalid type for setValue: "+Pe)}}function B(oe,ve,Pe){switch(ve=ve||"i8",ve.charAt(ve.length-1)==="*"&&(ve="i32"),ve){case"i1":return Ne[oe>>0];case"i8":return Ne[oe>>0];case"i16":return He[oe>>1];case"i32":return je[oe>>2];case"i64":return je[oe>>2];case"float":return Te[oe>>2];case"double":return We[oe>>3];default:Xi("invalid type for getValue: "+ve)}return null}var G=!1;function j(oe,ve){oe||Xi("Assertion failed: "+ve)}function H(oe){var ve=e["_"+oe];return j(ve,"Cannot call unknown function "+oe+", make sure it is exported"),ve}function Y(oe,ve,Pe,Xe,u){var U={string:function(at){var On=0;if(at!=null&&at!==0){var Wi=(at.length<<2)+1;On=zr(Wi),he(at,On,Wi)}return On},array:function(at){var On=zr(at.length);return Ae(at,On),On}};function Mt(at){return ve==="string"?se(at):ve==="boolean"?!!at:at}var zt=H(oe),dn=[],At=0;if(Xe)for(var bt=0;bt<Xe.length;bt++){var Yn=U[Pe[bt]];Yn?(At===0&&(At=oA()),dn[bt]=Yn(Xe[bt])):dn[bt]=Xe[bt]}var wt=zt.apply(null,dn);return wt=Mt(wt),At!==0&&Gl(At),wt}function K(oe,ve,Pe,Xe){Pe=Pe||[];var u=Pe.every(function(Mt){return Mt==="number"}),U=ve!=="string";return U&&u&&!Xe?H(oe):function(){return Y(oe,ve,Pe,arguments)}}var ee=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Z(oe,ve,Pe){for(var Xe=ve+Pe,u=ve;oe[u]&&!(u>=Xe);)++u;if(u-ve>16&&oe.subarray&&ee)return ee.decode(oe.subarray(ve,u));for(var U="";ve<u;){var Mt=oe[ve++];if(!(Mt&128)){U+=String.fromCharCode(Mt);continue}var zt=oe[ve++]&63;if((Mt&224)==192){U+=String.fromCharCode((Mt&31)<<6|zt);continue}var dn=oe[ve++]&63;if((Mt&240)==224?Mt=(Mt&15)<<12|zt<<6|dn:Mt=(Mt&7)<<18|zt<<12|dn<<6|oe[ve++]&63,Mt<65536)U+=String.fromCharCode(Mt);else{var At=Mt-65536;U+=String.fromCharCode(55296|At>>10,56320|At&1023)}}return U}function se(oe,ve){return oe?Z(Be,oe,ve):""}function be(oe,ve,Pe,Xe){if(!(Xe>0))return 0;for(var u=Pe,U=Pe+Xe-1,Mt=0;Mt<oe.length;++Mt){var zt=oe.charCodeAt(Mt);if(zt>=55296&&zt<=57343){var dn=oe.charCodeAt(++Mt);zt=65536+((zt&1023)<<10)|dn&1023}if(zt<=127){if(Pe>=U)break;ve[Pe++]=zt}else if(zt<=2047){if(Pe+1>=U)break;ve[Pe++]=192|zt>>6,ve[Pe++]=128|zt&63}else if(zt<=65535){if(Pe+2>=U)break;ve[Pe++]=224|zt>>12,ve[Pe++]=128|zt>>6&63,ve[Pe++]=128|zt&63}else{if(Pe+3>=U)break;ve[Pe++]=240|zt>>18,ve[Pe++]=128|zt>>12&63,ve[Pe++]=128|zt>>6&63,ve[Pe++]=128|zt&63}}return ve[Pe]=0,Pe-u}function he(oe,ve,Pe){return be(oe,Be,ve,Pe)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Ae(oe,ve){Ne.set(oe,ve)}function ye(oe,ve){return oe%ve>0&&(oe+=ve-oe%ve),oe}var me,Ne,Be,He,je,Te,We;function $e(oe){me=oe,e.HEAP8=Ne=new Int8Array(oe),e.HEAP16=He=new Int16Array(oe),e.HEAP32=je=new Int32Array(oe),e.HEAPU8=Be=new Uint8Array(oe),e.HEAPU16=new Uint16Array(oe),e.HEAPU32=new Uint32Array(oe),e.HEAPF32=Te=new Float32Array(oe),e.HEAPF64=We=new Float64Array(oe)}var Et=5267040,te=24128,De=e.TOTAL_MEMORY||33554432;e.buffer?me=e.buffer:me=new ArrayBuffer(De),De=me.byteLength,$e(me),je[te>>2]=Et;function Je(oe){for(;oe.length>0;){var ve=oe.shift();if(typeof ve=="function"){ve();continue}var Pe=ve.func;typeof Pe=="number"?ve.arg===void 0?e.dynCall_v(Pe):e.dynCall_vi(Pe,ve.arg):Pe(ve.arg===void 0?null:ve.arg)}}var nt=[],Ve=[],Lt=[],_t=[];function kt(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)lt(e.preRun.shift());Je(nt)}function St(){Je(Ve)}function Me(){Je(Lt)}function Ge(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Ce(e.postRun.shift());Je(_t)}function lt(oe){nt.unshift(oe)}function Ce(oe){_t.unshift(oe)}var qt=Math.abs,Nt=Math.ceil,An=Math.floor,jt=Math.min,nn=0,hi=null;function ta(oe){nn++,e.monitorRunDependencies&&e.monitorRunDependencies(nn)}function Ur(oe){if(nn--,e.monitorRunDependencies&&e.monitorRunDependencies(nn),nn==0&&hi){var ve=hi;hi=null,ve()}}e.preloadedImages={},e.preloadedAudios={};var on=null,nA="data:application/octet-stream;base64,";function no(oe){return String.prototype.startsWith?oe.startsWith(nA):oe.indexOf(nA)===0}var Fn,iA;on="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var io=24144;function rA(oe){return oe}function kr(oe){var ve=/\b__Z[\w\d_]+/g;return oe.replace(ve,function(Pe){var Xe=Pe;return Pe===Xe?Pe:Xe+" ["+Pe+"]"})}function sA(){var oe=new Error;if(!oe.stack){try{throw new Error(0)}catch(ve){oe=ve}if(!oe.stack)return"(no stack trace available)"}return oe.stack.toString()}function aA(){var oe=sA();return e.extraStackTrace&&(oe+=`
`+e.extraStackTrace()),kr(oe)}function na(oe,ve,Pe,Xe){Xi("Assertion failed: "+se(oe)+", at: "+[ve?se(ve):"unknown filename",Pe,Xe?se(Xe):"unknown function"])}function ia(){return Ne.length}function fs(oe,ve,Pe){Be.set(Be.subarray(ve,ve+Pe),oe)}function ii(oe){return e.___errno_location&&(je[e.___errno_location()>>2]=oe),oe}function kl(oe){Xi("OOM")}function Qi(oe){try{var ve=new ArrayBuffer(oe);return ve.byteLength!=oe?void 0:(new Int8Array(ve).set(Ne),sa(ve),$e(ve),1)}catch{}}function ri(oe){var ve=ia(),Pe=16777216,Xe=2147483648-Pe;if(oe>Xe)return!1;for(var u=16777216,U=Math.max(ve,u);U<oe;)U<=536870912?U=ye(2*U,Pe):U=Math.min(ye((3*U+2147483648)/4,Pe),Xe);var Mt=Qi(U);return!!Mt}var ra=typeof atob=="function"?atob:function(oe){var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Pe="",Xe,u,U,Mt,zt,dn,At,bt=0;oe=oe.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Mt=ve.indexOf(oe.charAt(bt++)),zt=ve.indexOf(oe.charAt(bt++)),dn=ve.indexOf(oe.charAt(bt++)),At=ve.indexOf(oe.charAt(bt++)),Xe=Mt<<2|zt>>4,u=(zt&15)<<4|dn>>2,U=(dn&3)<<6|At,Pe=Pe+String.fromCharCode(Xe),dn!==64&&(Pe=Pe+String.fromCharCode(u)),At!==64&&(Pe=Pe+String.fromCharCode(U));while(bt<oe.length);return Pe};function zl(oe){try{for(var ve=ra(oe),Pe=new Uint8Array(ve.length),Xe=0;Xe<ve.length;++Xe)Pe[Xe]=ve.charCodeAt(Xe);return Pe}catch{throw new Error("Converting base64 string to bytes failed.")}}function AA(oe){if(no(oe))return zl(oe.slice(nA.length))}var hs={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},ds={a:Xi,b:x,c:S,d:na,e:ii,f:ia,g:fs,h:ri,i:kl,j:rA,k:kr,l:Qi,m:sA,n:aA,o:io,p:te},Se=function(oe,ve,Pe){"almost asm";var Xe=new oe.Int8Array(Pe),u=new oe.Int32Array(Pe);new oe.Uint8Array(Pe),new oe.Float32Array(Pe);var U=new oe.Float64Array(Pe),Mt=ve.o|0,zt=ve.p|0,dn=oe.Math.floor,At=oe.Math.abs,bt=oe.Math.sqrt,Yn=oe.Math.pow,wt=oe.Math.cos,at=oe.Math.sin,On=oe.Math.tan,Wi=oe.Math.acos,fn=oe.Math.asin,Un=oe.Math.atan,En=oe.Math.atan2,mn=oe.Math.ceil,rn=oe.Math.imul,kn=oe.Math.min,Ii=oe.Math.max,Dn=oe.Math.clz32,ht=ve.b,V=ve.c,et=ve.d,zn=ve.e,di=ve.f,Qn=ve.g,la=ve.h,lA=ve.i,I=24160;function ps(o){return Xe=new Int8Array(o),u=new Int32Array(o),U=new Float64Array(o),Pe=o,!0}function Si(o){o=o|0;var l=0;return l=I,I=I+o|0,I=I+15&-16,l|0}function Vl(){return I|0}function si(o){o=o|0,I=o}function _s(o,l){o=o|0,I=o}function uA(o,l){o=o|0,l=l|0;var c=0,d=0,p=0;return(o|0)<0?(l=2,l|0):(o|0)>13780509?(l=To(15,l)|0,l|0):(c=((o|0)<0)<<31>>31,p=Gn(o|0,c|0,3,0)|0,d=V()|0,c=vt(o|0,c|0,1,0)|0,c=Gn(p|0,d|0,c|0,V()|0)|0,c=vt(c|0,V()|0,1,0)|0,o=V()|0,u[l>>2]=c,u[l+4>>2]=o,l=0,l|0)}function ua(o,l,c,d){return o=o|0,l=l|0,c=c|0,d=d|0,Tr(o,l,c,d,0)|0}function Tr(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0;if(M=I,I=I+16|0,y=M,!(P(o,l,c,d,p)|0))return d=0,I=M,d|0;do if((c|0)>=0){if((c|0)>13780509){if(b=To(15,y)|0,b|0)break;T=y,y=u[T>>2]|0,T=u[T+4>>2]|0}else b=((c|0)<0)<<31>>31,R=Gn(c|0,b|0,3,0)|0,T=V()|0,b=vt(c|0,b|0,1,0)|0,b=Gn(R|0,T|0,b|0,V()|0)|0,b=vt(b|0,V()|0,1,0)|0,T=V()|0,u[y>>2]=b,u[y+4>>2]=T,y=b;if(_i(d|0,0,y<<3|0)|0,p|0){_i(p|0,0,y<<2|0)|0,b=k(o,l,c,d,p,y,T,0)|0;break}b=pi(y,4)|0,b?(R=k(o,l,c,d,b,y,T,0)|0,st(b),b=R):b=13}else b=2;while(!1);return R=b,I=M,R|0}function P(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0;if(ie=I,I=I+16|0,J=ie,Q=ie+8|0,q=J,u[q>>2]=o,u[q+4>>2]=l,(c|0)<0)return Q=2,I=ie,Q|0;if(b=d,u[b>>2]=o,u[b+4>>2]=l,b=(p|0)!=0,b&&(u[p>>2]=0),Jt(o,l)|0)return Q=9,I=ie,Q|0;u[Q>>2]=0;e:do if((c|0)>=1)if(b)for(D=1,R=0,z=0,q=1,b=o;;){if(!(R|z)){if(b=X(b,l,4,Q,J)|0,b|0)break e;if(l=J,b=u[l>>2]|0,l=u[l+4>>2]|0,Jt(b,l)|0){b=9;break e}}if(b=X(b,l,u[22384+(z<<2)>>2]|0,Q,J)|0,b|0)break e;if(l=J,b=u[l>>2]|0,l=u[l+4>>2]|0,o=d+(D<<3)|0,u[o>>2]=b,u[o+4>>2]=l,u[p+(D<<2)>>2]=q,o=R+1|0,y=(o|0)==(q|0),T=z+1|0,M=(T|0)==6,Jt(b,l)|0){b=9;break e}if(q=q+(M&y&1)|0,(q|0)>(c|0)){b=0;break}else D=D+1|0,R=y?0:o,z=y?M?0:T:z}else for(D=1,R=0,z=0,q=1,b=o;;){if(!(R|z)){if(b=X(b,l,4,Q,J)|0,b|0)break e;if(l=J,b=u[l>>2]|0,l=u[l+4>>2]|0,Jt(b,l)|0){b=9;break e}}if(b=X(b,l,u[22384+(z<<2)>>2]|0,Q,J)|0,b|0)break e;if(l=J,b=u[l>>2]|0,l=u[l+4>>2]|0,o=d+(D<<3)|0,u[o>>2]=b,u[o+4>>2]=l,o=R+1|0,y=(o|0)==(q|0),T=z+1|0,M=(T|0)==6,Jt(b,l)|0){b=9;break e}if(q=q+(M&y&1)|0,(q|0)>(c|0)){b=0;break}else D=D+1|0,R=y?0:o,z=y?M?0:T:z}else b=0;while(!1);return Q=b,I=ie,Q|0}function k(o,l,c,d,p,b,y,T){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0,b=b|0,y=y|0,T=T|0;var M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0;if(ie=I,I=I+16|0,J=ie+8|0,Q=ie,M=Lr(o|0,l|0,b|0,y|0)|0,D=V()|0,z=d+(M<<3)|0,pe=z,ge=u[pe>>2]|0,pe=u[pe+4>>2]|0,R=(ge|0)==(o|0)&(pe|0)==(l|0),!((ge|0)==0&(pe|0)==0|R))do M=vt(M|0,D|0,1,0)|0,M=Rr(M|0,V()|0,b|0,y|0)|0,D=V()|0,z=d+(M<<3)|0,ge=z,pe=u[ge>>2]|0,ge=u[ge+4>>2]|0,R=(pe|0)==(o|0)&(ge|0)==(l|0);while(!((pe|0)==0&(ge|0)==0|R));if(M=p+(M<<2)|0,R&&(u[M>>2]|0)<=(T|0)||(ge=z,u[ge>>2]=o,u[ge+4>>2]=l,u[M>>2]=T,(T|0)>=(c|0)))return ge=0,I=ie,ge|0;switch(R=T+1|0,u[J>>2]=0,M=X(o,l,2,J,Q)|0,M|0){case 9:{q=9;break}case 0:{M=Q,M=k(u[M>>2]|0,u[M+4>>2]|0,c,d,p,b,y,R)|0,M||(q=9);break}}e:do if((q|0)==9){switch(u[J>>2]=0,M=X(o,l,3,J,Q)|0,M|0){case 9:break;case 0:{if(M=Q,M=k(u[M>>2]|0,u[M+4>>2]|0,c,d,p,b,y,R)|0,M|0)break e;break}default:break e}switch(u[J>>2]=0,M=X(o,l,1,J,Q)|0,M|0){case 9:break;case 0:{if(M=Q,M=k(u[M>>2]|0,u[M+4>>2]|0,c,d,p,b,y,R)|0,M|0)break e;break}default:break e}switch(u[J>>2]=0,M=X(o,l,5,J,Q)|0,M|0){case 9:break;case 0:{if(M=Q,M=k(u[M>>2]|0,u[M+4>>2]|0,c,d,p,b,y,R)|0,M|0)break e;break}default:break e}switch(u[J>>2]=0,M=X(o,l,4,J,Q)|0,M|0){case 9:break;case 0:{if(M=Q,M=k(u[M>>2]|0,u[M+4>>2]|0,c,d,p,b,y,R)|0,M|0)break e;break}default:break e}switch(u[J>>2]=0,M=X(o,l,6,J,Q)|0,M|0){case 9:break;case 0:{if(M=Q,M=k(u[M>>2]|0,u[M+4>>2]|0,c,d,p,b,y,R)|0,M|0)break e;break}default:break e}return ge=0,I=ie,ge|0}while(!1);return ge=M,I=ie,ge|0}function X(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0;if(c>>>0>6)return p=1,p|0;if(z=(u[d>>2]|0)%6|0,u[d>>2]=z,(z|0)>0){b=0;do c=Ts(c)|0,b=b+1|0;while((b|0)<(u[d>>2]|0))}if(z=Re(o|0,l|0,45)|0,V()|0,D=z&127,D>>>0>121)return p=5,p|0;M=ai(o,l)|0,b=Re(o|0,l|0,52)|0,V()|0,b=b&15;e:do if(!b)R=8;else{for(;;){if(y=(15-b|0)*3|0,T=Re(o|0,l|0,y|0)|0,V()|0,T=T&7,(T|0)==7){l=5;break}if(Q=(Ci(b)|0)==0,b=b+-1|0,q=Ue(7,0,y|0)|0,l=l&~(V()|0),J=Ue(u[(Q?432:16)+(T*28|0)+(c<<2)>>2]|0,0,y|0)|0,y=V()|0,c=u[(Q?640:224)+(T*28|0)+(c<<2)>>2]|0,o=J|o&~q,l=y|l,!c){c=0;break e}if(!b){R=8;break e}}return l|0}while(!1);(R|0)==8&&(Q=u[848+(D*28|0)+(c<<2)>>2]|0,J=Ue(Q|0,0,45)|0,o=J|o,l=V()|0|l&-1040385,c=u[4272+(D*28|0)+(c<<2)>>2]|0,(Q&127|0)==127&&(Q=Ue(u[848+(D*28|0)+20>>2]|0,0,45)|0,l=V()|0|l&-1040385,c=u[4272+(D*28|0)+20>>2]|0,o=wr(Q|o,l)|0,l=V()|0,u[d>>2]=(u[d>>2]|0)+1)),T=Re(o|0,l|0,45)|0,V()|0,T=T&127;e:do if(Ct(T)|0){t:do if((ai(o,l)|0)==1){if((D|0)!=(T|0))if(jl(T,u[7696+(D*28|0)>>2]|0)|0){o=Eo(o,l)|0,y=1,l=V()|0;break}else et(23313,22416,436,22424);switch(M|0){case 3:{o=wr(o,l)|0,l=V()|0,u[d>>2]=(u[d>>2]|0)+1,y=0;break t}case 5:{o=Eo(o,l)|0,l=V()|0,u[d>>2]=(u[d>>2]|0)+5,y=0;break t}case 0:return Q=9,Q|0;default:return Q=1,Q|0}}else y=0;while(!1);if((c|0)>0){b=0;do o=bo(o,l)|0,l=V()|0,b=b+1|0;while((b|0)!=(c|0))}if((D|0)!=(T|0)){if(!(cA(T)|0)){if((y|0)!=0|(ai(o,l)|0)!=5)break;u[d>>2]=(u[d>>2]|0)+1;break}switch(z&127){case 8:case 118:break e}(ai(o,l)|0)!=3&&(u[d>>2]=(u[d>>2]|0)+1)}}else if((c|0)>0){b=0;do o=wr(o,l)|0,l=V()|0,b=b+1|0;while((b|0)!=(c|0))}while(!1);return u[d>>2]=((u[d>>2]|0)+c|0)%6|0,Q=p,u[Q>>2]=o,u[Q+4>>2]=l,Q=0,Q|0}function fe(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0;for(T=I,I=I+16|0,b=T,y=T+8|0,p=(Jt(o,l)|0)==0,p=p?1:2;;){if(u[y>>2]=0,R=(X(o,l,p,y,b)|0)==0,M=b,R&((u[M>>2]|0)==(c|0)?(u[M+4>>2]|0)==(d|0):0)){o=4;break}if(p=p+1|0,p>>>0>=7){p=7,o=4;break}}return(o|0)==4?(I=T,p|0):0}function Le(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0;if(Q=I,I=I+16|0,q=Q,J=Q+8|0,z=q,u[z>>2]=o,u[z+4>>2]=l,!c)return J=d,u[J>>2]=o,u[J+4>>2]=l,J=0,I=Q,J|0;u[J>>2]=0;e:do if(Jt(o,l)|0)o=9;else{if(b=(c|0)>0,b){p=0,z=o;do{if(o=X(z,l,4,J,q)|0,o|0)break e;if(l=q,z=u[l>>2]|0,l=u[l+4>>2]|0,p=p+1|0,Jt(z,l)|0){o=9;break e}}while((p|0)<(c|0));if(D=d,u[D>>2]=z,u[D+4>>2]=l,D=c+-1|0,b){R=0,o=1;do{if(p=22384+(R<<2)|0,(R|0)==5)for(y=u[p>>2]|0,b=0,p=o;;){if(o=q,o=X(u[o>>2]|0,u[o+4>>2]|0,y,J,q)|0,o|0)break e;if((b|0)!=(D|0))if(M=q,T=u[M>>2]|0,M=u[M+4>>2]|0,o=d+(p<<3)|0,u[o>>2]=T,u[o+4>>2]=M,!(Jt(T,M)|0))o=p+1|0;else{o=9;break e}else o=p;if(b=b+1|0,(b|0)>=(c|0))break;p=o}else for(y=q,M=u[p>>2]|0,T=0,p=o,b=u[y>>2]|0,y=u[y+4>>2]|0;;){if(o=X(b,y,M,J,q)|0,o|0)break e;if(y=q,b=u[y>>2]|0,y=u[y+4>>2]|0,o=d+(p<<3)|0,u[o>>2]=b,u[o+4>>2]=y,o=p+1|0,Jt(b,y)|0){o=9;break e}if(T=T+1|0,(T|0)>=(c|0))break;p=o}R=R+1|0}while(R>>>0<6);o=q,y=z,p=u[o>>2]|0,b=l,o=u[o+4>>2]|0}else y=z,p=z,b=l,o=l}else y=d,u[y>>2]=o,u[y+4>>2]=l,y=o,p=o,b=l,o=l;o=(y|0)==(p|0)&(b|0)==(o|0)?0:9}while(!1);return J=o,I=Q,J|0}function Ye(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0;if(T=I,I=I+48|0,p=T+16|0,b=T+8|0,y=T,c|0)return y=15,I=T,y|0;if(R=o,M=u[R+4>>2]|0,c=b,u[c>>2]=u[R>>2],u[c+4>>2]=M,Ss(b,p),l=Yl(p,l,y)|0,!l){if(c=u[b>>2]|0,b=u[o+8>>2]|0,(b|0)>0){p=u[o+12>>2]|0,l=0;do c=(u[p+(l<<3)>>2]|0)+c|0,l=l+1|0;while((l|0)<(b|0))}l=y,p=u[l>>2]|0,l=u[l+4>>2]|0,b=((c|0)<0)<<31>>31,(l|0)<(b|0)|(l|0)==(b|0)&p>>>0<c>>>0?(l=y,u[l>>2]=c,u[l+4>>2]=b,l=b):c=p,M=vt(c|0,l|0,12,0)|0,R=V()|0,l=y,u[l>>2]=M,u[l+4>>2]=R,l=d,u[l>>2]=M,u[l+4>>2]=R,l=0}return R=l,I=T,R|0}function yt(o,l,c,d,p,b,y){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0,b=b|0,y=y|0;var T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0,$=0,xe=0,Ie=0,Fe=0,ke=0,Bt=0,Ot=0,Dt=0,ut=0,dt=0,qe=0,Yt=0,ot=0,Kt=0,Wn=0,cf=0;if(Yt=I,I=I+64|0,Dt=Yt+48|0,ut=Yt+32|0,dt=Yt+24|0,xe=Yt+8|0,Ie=Yt,M=u[o>>2]|0,(M|0)<=0)return qe=0,I=Yt,qe|0;for(Fe=o+4|0,ke=Dt+8|0,Bt=ut+8|0,Ot=xe+8|0,T=0,le=0;;){R=u[Fe>>2]|0,ue=R+(le<<4)|0,u[Dt>>2]=u[ue>>2],u[Dt+4>>2]=u[ue+4>>2],u[Dt+8>>2]=u[ue+8>>2],u[Dt+12>>2]=u[ue+12>>2],(le|0)==(M+-1|0)?(u[ut>>2]=u[R>>2],u[ut+4>>2]=u[R+4>>2],u[ut+8>>2]=u[R+8>>2],u[ut+12>>2]=u[R+12>>2]):(ue=R+(le+1<<4)|0,u[ut>>2]=u[ue>>2],u[ut+4>>2]=u[ue+4>>2],u[ut+8>>2]=u[ue+8>>2],u[ut+12>>2]=u[ue+12>>2]),M=so(Dt,ut,d,dt)|0;e:do if(M)R=0,T=M;else if(R=dt,M=u[R>>2]|0,R=u[R+4>>2]|0,(R|0)>0|(R|0)==0&M>>>0>0){ge=0,ue=0;t:for(;;){if(cf=+U[Dt>>3],pe=Tn(M|0,R|0,ge|0,ue|0)|0,Wn=+(pe>>>0)+4294967296*+(V()|0),ot=+(M>>>0)+4294967296*+(R|0),Kt=+(ge>>>0)+4294967296*+(ue|0),U[xe>>3]=cf*Wn/ot+ +U[ut>>3]*Kt/ot,U[Ot>>3]=+U[ke>>3]*Wn/ot+ +U[Bt>>3]*Kt/ot,M=Xc(xe,d,Ie)|0,M|0){T=M;break}pe=Ie,ie=u[pe>>2]|0,pe=u[pe+4>>2]|0,q=Lr(ie|0,pe|0,l|0,c|0)|0,D=V()|0,M=y+(q<<3)|0,z=M,R=u[z>>2]|0,z=u[z+4>>2]|0;n:do if((R|0)==0&(z|0)==0)$=M,qe=16;else for(J=0,Q=0;;){if((J|0)>(c|0)|(J|0)==(c|0)&Q>>>0>l>>>0){T=1;break t}if((R|0)==(ie|0)&(z|0)==(pe|0))break n;if(M=vt(q|0,D|0,1,0)|0,q=Rr(M|0,V()|0,l|0,c|0)|0,D=V()|0,Q=vt(Q|0,J|0,1,0)|0,J=V()|0,M=y+(q<<3)|0,z=M,R=u[z>>2]|0,z=u[z+4>>2]|0,(R|0)==0&(z|0)==0){$=M,qe=16;break}}while(!1);if((qe|0)==16&&(qe=0,!((ie|0)==0&(pe|0)==0))&&(Q=$,u[Q>>2]=ie,u[Q+4>>2]=pe,Q=b+(u[p>>2]<<3)|0,u[Q>>2]=ie,u[Q+4>>2]=pe,Q=p,Q=vt(u[Q>>2]|0,u[Q+4>>2]|0,1,0)|0,ie=V()|0,pe=p,u[pe>>2]=Q,u[pe+4>>2]=ie),ge=vt(ge|0,ue|0,1,0)|0,ue=V()|0,R=dt,M=u[R>>2]|0,R=u[R+4>>2]|0,!((R|0)>(ue|0)|(R|0)==(ue|0)&M>>>0>ge>>>0)){R=1;break e}}R=0}else R=1;while(!1);if(le=le+1|0,!R){qe=21;break}if(M=u[o>>2]|0,(le|0)>=(M|0)){T=0,qe=21;break}}return(qe|0)==21?(I=Yt,T|0):0}function yn(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0,$=0,xe=0,Ie=0,Fe=0,ke=0,Bt=0,Ot=0,Dt=0,ut=0,dt=0,qe=0,Yt=0,ot=0,Kt=0,Wn=0;if(Wn=I,I=I+112|0,qe=Wn+80|0,M=Wn+72|0,Yt=Wn,ot=Wn+56|0,c|0)return Kt=15,I=Wn,Kt|0;if(R=o+8|0,Kt=$i((u[R>>2]<<5)+32|0)|0,!Kt)return Kt=13,I=Wn,Kt|0;if(_a(o,Kt),ut=o,dt=u[ut+4>>2]|0,c=M,u[c>>2]=u[ut>>2],u[c+4>>2]=dt,Ss(M,qe),c=Yl(qe,l,Yt)|0,c)ut=0,dt=0;else{if(c=u[M>>2]|0,b=u[R>>2]|0,(b|0)>0){y=u[o+12>>2]|0,p=0;do c=(u[y+(p<<3)>>2]|0)+c|0,p=p+1|0;while((p|0)!=(b|0));p=c}else p=c;c=Yt,b=u[c>>2]|0,c=u[c+4>>2]|0,y=((p|0)<0)<<31>>31,(c|0)<(y|0)|(c|0)==(y|0)&b>>>0<p>>>0?(c=Yt,u[c>>2]=p,u[c+4>>2]=y,c=y):p=b,ut=vt(p|0,c|0,12,0)|0,dt=V()|0,c=Yt,u[c>>2]=ut,u[c+4>>2]=dt,c=0}if(c|0)return st(Kt),Kt=c,I=Wn,Kt|0;if(p=pi(ut,8)|0,!p)return st(Kt),Kt=13,I=Wn,Kt|0;if(T=pi(ut,8)|0,!T)return st(Kt),st(p),Kt=13,I=Wn,Kt|0;Ot=qe,u[Ot>>2]=0,u[Ot+4>>2]=0,Ot=o,Dt=u[Ot+4>>2]|0,c=M,u[c>>2]=u[Ot>>2],u[c+4>>2]=Dt,c=yt(M,ut,dt,l,qe,p,T)|0;e:do if(c)st(p),st(T),st(Kt);else{t:do if((u[R>>2]|0)>0){for(y=o+12|0,b=0;c=yt((u[y>>2]|0)+(b<<3)|0,ut,dt,l,qe,p,T)|0,b=b+1|0,!(c|0);)if((b|0)>=(u[R>>2]|0))break t;st(p),st(T),st(Kt);break e}while(!1);(dt|0)>0|(dt|0)==0&ut>>>0>0&&_i(T|0,0,ut<<3|0)|0,Dt=qe,Ot=u[Dt+4>>2]|0;t:do if((Ot|0)>0|(Ot|0)==0&(u[Dt>>2]|0)>>>0>0){Fe=p,ke=T,Bt=p,Ot=T,Dt=p,c=p,$=p,xe=T,Ie=T,p=T;n:for(;;){for(pe=0,ge=0,ue=0,le=0,b=0,y=0;;){T=Yt,M=T+56|0;do u[T>>2]=0,T=T+4|0;while((T|0)<(M|0));if(l=Fe+(pe<<3)|0,R=u[l>>2]|0,l=u[l+4>>2]|0,P(R,l,1,Yt,0)|0){T=Yt,M=T+56|0;do u[T>>2]=0,T=T+4|0;while((T|0)<(M|0));T=pi(7,4)|0,T|0&&(k(R,l,1,Yt,T,7,0,0)|0,st(T))}for(ie=0;;){Q=Yt+(ie<<3)|0,J=u[Q>>2]|0,Q=u[Q+4>>2]|0;i:do if((J|0)==0&(Q|0)==0)T=b,M=y;else{if(D=Lr(J|0,Q|0,ut|0,dt|0)|0,R=V()|0,T=d+(D<<3)|0,l=T,M=u[l>>2]|0,l=u[l+4>>2]|0,!((M|0)==0&(l|0)==0)){z=0,q=0;do{if((z|0)>(dt|0)|(z|0)==(dt|0)&q>>>0>ut>>>0)break n;if((M|0)==(J|0)&(l|0)==(Q|0)){T=b,M=y;break i}T=vt(D|0,R|0,1,0)|0,D=Rr(T|0,V()|0,ut|0,dt|0)|0,R=V()|0,q=vt(q|0,z|0,1,0)|0,z=V()|0,T=d+(D<<3)|0,l=T,M=u[l>>2]|0,l=u[l+4>>2]|0}while(!((M|0)==0&(l|0)==0))}(J|0)==0&(Q|0)==0?(T=b,M=y):(bA(J,Q,ot)|0,Mo(o,Kt,ot)|0&&(q=vt(b|0,y|0,1,0)|0,y=V()|0,z=T,u[z>>2]=J,u[z+4>>2]=Q,b=ke+(b<<3)|0,u[b>>2]=J,u[b+4>>2]=Q,b=q),T=b,M=y)}while(!1);if(ie=ie+1|0,ie>>>0>=7)break;b=T,y=M}if(pe=vt(pe|0,ge|0,1,0)|0,ge=V()|0,ue=vt(ue|0,le|0,1,0)|0,le=V()|0,y=qe,b=u[y>>2]|0,y=u[y+4>>2]|0,(le|0)<(y|0)|(le|0)==(y|0)&ue>>>0<b>>>0)b=T,y=M;else break}if((y|0)>0|(y|0)==0&b>>>0>0){b=0,y=0;do le=Fe+(b<<3)|0,u[le>>2]=0,u[le+4>>2]=0,b=vt(b|0,y|0,1,0)|0,y=V()|0,le=qe,ue=u[le+4>>2]|0;while((y|0)<(ue|0)|((y|0)==(ue|0)?b>>>0<(u[le>>2]|0)>>>0:0))}if(le=qe,u[le>>2]=T,u[le+4>>2]=M,(M|0)>0|(M|0)==0&T>>>0>0)ie=p,pe=Ie,ge=Dt,ue=xe,le=ke,p=$,Ie=c,xe=Bt,$=ie,c=pe,Dt=Ot,Ot=ge,Bt=ue,ke=Fe,Fe=le;else break t}st(Bt),st(Ot),st(Kt),c=1;break e}else c=T;while(!1);st(Kt),st(p),st(c),c=0}while(!1);return Kt=c,I=Wn,Kt|0}function Ln(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0;if(D=I,I=I+176|0,M=D,(l|0)<1)return ba(c,0,0),R=0,I=D,R|0;for(T=o,T=Re(u[T>>2]|0,u[T+4>>2]|0,52)|0,V()|0,ba(c,(l|0)>6?l:6,T&15),T=0;d=o+(T<<3)|0,d=EA(u[d>>2]|0,u[d+4>>2]|0,M)|0,!(d|0);){if(d=u[M>>2]|0,(d|0)>0){y=0;do b=M+8+(y<<4)|0,y=y+1|0,d=M+8+(((y|0)%(d|0)|0)<<4)|0,p=au(c,d,b)|0,p?va(c,p)|0:of(c,b,d)|0,d=u[M>>2]|0;while((y|0)<(d|0))}if(T=T+1|0,(T|0)>=(l|0)){d=0,R=13;break}}return(R|0)==13?(I=D,d|0):(Ea(c),R=d,I=D,R|0)}function vn(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0;if(b=I,I=I+32|0,d=b,p=b+16|0,o=Ln(o,l,p)|0,o|0)return c=o,I=b,c|0;if(u[c>>2]=0,u[c+4>>2]=0,u[c+8>>2]=0,o=ya(p)|0,o|0)do{l=nf(c)|0;do Zi(l,o)|0,y=o+16|0,u[d>>2]=u[y>>2],u[d+4>>2]=u[y+4>>2],u[d+8>>2]=u[y+8>>2],u[d+12>>2]=u[y+12>>2],va(p,o)|0,o=lf(p,d)|0;while(o|0);o=ya(p)|0}while(o|0);return Ea(p),o=ma(c)|0,o?(Li(c),y=o,I=b,y|0):(y=0,I=b,y|0)}function Ct(o){return o=o|0,o>>>0>121?(o=0,o|0):(o=u[7696+(o*28|0)+16>>2]|0,o|0)}function cA(o){return o=o|0,(o|0)==4|(o|0)==117|0}function bs(o){return o=o|0,u[11120+((u[o>>2]|0)*216|0)+((u[o+4>>2]|0)*72|0)+((u[o+8>>2]|0)*24|0)+(u[o+12>>2]<<3)>>2]|0}function ca(o){return o=o|0,u[11120+((u[o>>2]|0)*216|0)+((u[o+4>>2]|0)*72|0)+((u[o+8>>2]|0)*24|0)+(u[o+12>>2]<<3)+4>>2]|0}function Pc(o,l){o=o|0,l=l|0,o=7696+(o*28|0)|0,u[l>>2]=u[o>>2],u[l+4>>2]=u[o+4>>2],u[l+8>>2]=u[o+8>>2],u[l+12>>2]=u[o+12>>2]}function Hl(o,l){o=o|0,l=l|0;var c=0,d=0;if(l>>>0>20)return l=-1,l|0;do if((u[11120+(l*216|0)>>2]|0)!=(o|0))if((u[11120+(l*216|0)+8>>2]|0)!=(o|0))if((u[11120+(l*216|0)+16>>2]|0)!=(o|0))if((u[11120+(l*216|0)+24>>2]|0)!=(o|0))if((u[11120+(l*216|0)+32>>2]|0)!=(o|0))if((u[11120+(l*216|0)+40>>2]|0)!=(o|0))if((u[11120+(l*216|0)+48>>2]|0)!=(o|0))if((u[11120+(l*216|0)+56>>2]|0)!=(o|0))if((u[11120+(l*216|0)+64>>2]|0)!=(o|0))if((u[11120+(l*216|0)+72>>2]|0)!=(o|0))if((u[11120+(l*216|0)+80>>2]|0)!=(o|0))if((u[11120+(l*216|0)+88>>2]|0)!=(o|0))if((u[11120+(l*216|0)+96>>2]|0)!=(o|0))if((u[11120+(l*216|0)+104>>2]|0)!=(o|0))if((u[11120+(l*216|0)+112>>2]|0)!=(o|0))if((u[11120+(l*216|0)+120>>2]|0)!=(o|0))if((u[11120+(l*216|0)+128>>2]|0)!=(o|0))if((u[11120+(l*216|0)+136>>2]|0)==(o|0))o=2,c=1,d=2;else{if((u[11120+(l*216|0)+144>>2]|0)==(o|0)){o=0,c=2,d=0;break}if((u[11120+(l*216|0)+152>>2]|0)==(o|0)){o=0,c=2,d=1;break}if((u[11120+(l*216|0)+160>>2]|0)==(o|0)){o=0,c=2,d=2;break}if((u[11120+(l*216|0)+168>>2]|0)==(o|0)){o=1,c=2,d=0;break}if((u[11120+(l*216|0)+176>>2]|0)==(o|0)){o=1,c=2,d=1;break}if((u[11120+(l*216|0)+184>>2]|0)==(o|0)){o=1,c=2,d=2;break}if((u[11120+(l*216|0)+192>>2]|0)==(o|0)){o=2,c=2,d=0;break}if((u[11120+(l*216|0)+200>>2]|0)==(o|0)){o=2,c=2,d=1;break}if((u[11120+(l*216|0)+208>>2]|0)==(o|0)){o=2,c=2,d=2;break}else o=-1;return o|0}else o=2,c=1,d=1;else o=2,c=1,d=0;else o=1,c=1,d=2;else o=1,c=1,d=1;else o=1,c=1,d=0;else o=0,c=1,d=2;else o=0,c=1,d=1;else o=0,c=1,d=0;else o=2,c=0,d=2;else o=2,c=0,d=1;else o=2,c=0,d=0;else o=1,c=0,d=2;else o=1,c=0,d=1;else o=1,c=0,d=0;else o=0,c=0,d=2;else o=0,c=0,d=1;else o=0,c=0,d=0;while(!1);return l=u[11120+(l*216|0)+(c*72|0)+(o*24|0)+(d<<3)+4>>2]|0,l|0}function jl(o,l){return o=o|0,l=l|0,(u[7696+(o*28|0)+20>>2]|0)==(l|0)?(l=1,l|0):(l=(u[7696+(o*28|0)+24>>2]|0)==(l|0),l|0)}function Es(o,l){return o=o|0,l=l|0,u[848+(o*28|0)+(l<<2)>>2]|0}function fA(o,l){return o=o|0,l=l|0,(u[848+(o*28|0)>>2]|0)==(l|0)?(l=0,l|0):(u[848+(o*28|0)+4>>2]|0)==(l|0)?(l=1,l|0):(u[848+(o*28|0)+8>>2]|0)==(l|0)?(l=2,l|0):(u[848+(o*28|0)+12>>2]|0)==(l|0)?(l=3,l|0):(u[848+(o*28|0)+16>>2]|0)==(l|0)?(l=4,l|0):(u[848+(o*28|0)+20>>2]|0)==(l|0)?(l=5,l|0):((u[848+(o*28|0)+24>>2]|0)==(l|0)?6:7)|0}function hA(){return 122}function Vr(o){o=o|0;var l=0,c=0,d=0;l=0;do Ue(l|0,0,45)|0,d=V()|0|134225919,c=o+(l<<3)|0,u[c>>2]=-1,u[c+4>>2]=d,l=l+1|0;while((l|0)!=122);return 0}function ro(o){return o=o|0,+U[o+16>>3]<+U[o+24>>3]|0}function dA(o,l){o=o|0,l=l|0;var c=0,d=0,p=0;return c=+U[l>>3],!(c>=+U[o+8>>3])||!(c<=+U[o>>3])?(l=0,l|0):(d=+U[o+16>>3],c=+U[o+24>>3],p=+U[l+8>>3],l=p>=c,o=p<=d&1,d<c?l&&(o=1):l||(o=0),l=(o|0)!=0,l|0)}function Yl(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0;Q=I,I=I+288|0,D=Q+264|0,z=Q+96|0,R=Q,T=R,M=T+96|0;do u[T>>2]=0,T=T+4|0;while((T|0)<(M|0));return l=yo(l,R)|0,l|0?(J=l,I=Q,J|0):(M=R,R=u[M>>2]|0,M=u[M+4>>2]|0,bA(R,M,D)|0,EA(R,M,z)|0,y=+xr(D,z+8|0),U[D>>3]=+U[o>>3],M=D+8|0,U[M>>3]=+U[o+16>>3],U[z>>3]=+U[o+8>>3],R=z+8|0,U[R>>3]=+U[o+24>>3],p=+xr(D,z),pe=+U[M>>3]-+U[R>>3],b=+At(+pe),ie=+U[D>>3]-+U[z>>3],d=+At(+ie),!(pe==0|ie==0)&&(pe=+Di(+b,+d),pe=+mn(+(p*p/+Gi(+(pe/+Gi(+b,+d)),3)/(y*(y*2.59807621135)*.8))),U[Mt>>3]=pe,q=~~pe>>>0,J=+At(pe)>=1?pe>0?~~+kn(+dn(pe/4294967296),4294967295)>>>0:~~+mn((pe-+(~~pe>>>0))/4294967296)>>>0:0,(u[Mt+4>>2]&2146435072|0)!=2146435072)?(z=(q|0)==0&(J|0)==0,l=c,u[l>>2]=z?1:q,u[l+4>>2]=z?0:J,l=0):l=1,J=l,I=Q,J|0)}function so(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0,D=0;R=I,I=I+288|0,y=R+264|0,T=R+96|0,M=R,p=M,b=p+96|0;do u[p>>2]=0,p=p+4|0;while((p|0)<(b|0));return c=yo(c,M)|0,c|0?(d=c,I=R,d|0):(c=M,p=u[c>>2]|0,c=u[c+4>>2]|0,bA(p,c,y)|0,EA(p,c,T)|0,D=+xr(y,T+8|0),D=+mn(+(+xr(o,l)/(D*2))),U[Mt>>3]=D,c=~~D>>>0,p=+At(D)>=1?D>0?~~+kn(+dn(D/4294967296),4294967295)>>>0:~~+mn((D-+(~~D>>>0))/4294967296)>>>0:0,(u[Mt+4>>2]&2146435072|0)==2146435072?(d=1,I=R,d|0):(M=(c|0)==0&(p|0)==0,u[d>>2]=M?1:c,u[d+4>>2]=M?0:p,d=0,I=R,d|0))}function ao(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0,u[o>>2]=l,u[o+4>>2]=c,u[o+8>>2]=d}function Ic(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0;z=l+8|0,u[z>>2]=0,M=+U[o>>3],y=+At(+M),R=+U[o+8>>3],T=+At(+R)/.8660254037844386,y=y+T*.5,c=~~y,o=~~T,y=y-+(c|0),T=T-+(o|0);do if(y<.5)if(y<.3333333333333333)if(u[l>>2]=c,T<(y+1)*.5){u[l+4>>2]=o;break}else{o=o+1|0,u[l+4>>2]=o;break}else if(q=1-y,o=(!(T<q)&1)+o|0,u[l+4>>2]=o,q<=T&T<y*2){c=c+1|0,u[l>>2]=c;break}else{u[l>>2]=c;break}else{if(!(y<.6666666666666666))if(c=c+1|0,u[l>>2]=c,T<y*.5){u[l+4>>2]=o;break}else{o=o+1|0,u[l+4>>2]=o;break}if(T<1-y){if(u[l+4>>2]=o,y*2+-1<T){u[l>>2]=c;break}}else o=o+1|0,u[l+4>>2]=o;c=c+1|0,u[l>>2]=c}while(!1);do if(M<0)if(o&1){D=(o+1|0)/2|0,D=Tn(c|0,((c|0)<0)<<31>>31|0,D|0,((D|0)<0)<<31>>31|0)|0,c=~~(+(c|0)-((+(D>>>0)+4294967296*+(V()|0))*2+1)),u[l>>2]=c;break}else{D=(o|0)/2|0,D=Tn(c|0,((c|0)<0)<<31>>31|0,D|0,((D|0)<0)<<31>>31|0)|0,c=~~(+(c|0)-(+(D>>>0)+4294967296*+(V()|0))*2),u[l>>2]=c;break}while(!1);D=l+4|0,R<0&&(c=c-((o<<1|1|0)/2|0)|0,u[l>>2]=c,o=0-o|0,u[D>>2]=o),d=o-c|0,(c|0)<0?(p=0-c|0,u[D>>2]=d,u[z>>2]=p,u[l>>2]=0,o=d,c=0):p=0,(o|0)<0&&(c=c-o|0,u[l>>2]=c,p=p-o|0,u[z>>2]=p,u[D>>2]=0,o=0),b=c-p|0,d=o-p|0,(p|0)<0&&(u[l>>2]=b,u[D>>2]=d,u[z>>2]=0,o=d,c=b,p=0),d=(o|0)<(c|0)?o:c,d=(p|0)<(d|0)?p:d,!((d|0)<=0)&&(u[l>>2]=c-d,u[D>>2]=o-d,u[z>>2]=p-d)}function Zt(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0;l=u[o>>2]|0,y=o+4|0,c=u[y>>2]|0,(l|0)<0&&(c=c-l|0,u[y>>2]=c,b=o+8|0,u[b>>2]=(u[b>>2]|0)-l,u[o>>2]=0,l=0),(c|0)<0?(l=l-c|0,u[o>>2]=l,b=o+8|0,p=(u[b>>2]|0)-c|0,u[b>>2]=p,u[y>>2]=0,c=0):(p=o+8|0,b=p,p=u[p>>2]|0),(p|0)<0&&(l=l-p|0,u[o>>2]=l,c=c-p|0,u[y>>2]=c,u[b>>2]=0,p=0),d=(c|0)<(l|0)?c:l,d=(p|0)<(d|0)?p:d,!((d|0)<=0)&&(u[o>>2]=l-d,u[y>>2]=c-d,u[b>>2]=p-d)}function Mi(o,l){o=o|0,l=l|0;var c=0,d=0;d=u[o+8>>2]|0,c=+((u[o+4>>2]|0)-d|0),U[l>>3]=+((u[o>>2]|0)-d|0)-c*.5,U[l+8>>3]=c*.8660254037844386}function Nn(o,l,c){o=o|0,l=l|0,c=c|0,u[c>>2]=(u[l>>2]|0)+(u[o>>2]|0),u[c+4>>2]=(u[l+4>>2]|0)+(u[o+4>>2]|0),u[c+8>>2]=(u[l+8>>2]|0)+(u[o+8>>2]|0)}function ys(o,l,c){o=o|0,l=l|0,c=c|0,u[c>>2]=(u[o>>2]|0)-(u[l>>2]|0),u[c+4>>2]=(u[o+4>>2]|0)-(u[l+4>>2]|0),u[c+8>>2]=(u[o+8>>2]|0)-(u[l+8>>2]|0)}function Fc(o,l){o=o|0,l=l|0;var c=0,d=0;c=rn(u[o>>2]|0,l)|0,u[o>>2]=c,c=o+4|0,d=rn(u[c>>2]|0,l)|0,u[c>>2]=d,o=o+8|0,l=rn(u[o>>2]|0,l)|0,u[o>>2]=l}function fa(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;y=u[o>>2]|0,T=(y|0)<0,d=(u[o+4>>2]|0)-(T?y:0)|0,b=(d|0)<0,p=(b?0-d|0:0)+((u[o+8>>2]|0)-(T?y:0))|0,c=(p|0)<0,o=c?0:p,l=(b?0:d)-(c?p:0)|0,p=(T?0:y)-(b?d:0)-(c?p:0)|0,c=(l|0)<(p|0)?l:p,c=(o|0)<(c|0)?o:c,d=(c|0)>0,o=o-(d?c:0)|0,l=l-(d?c:0)|0;e:do switch(p-(d?c:0)|0){case 0:switch(l|0){case 0:return T=o|0?(o|0)==1?1:7:0,T|0;case 1:return T=o|0?(o|0)==1?3:7:2,T|0;default:break e}case 1:switch(l|0){case 0:return T=o|0?(o|0)==1?5:7:4,T|0;case 1:{if(!o)o=6;else break e;return o|0}default:break e}}while(!1);return T=7,T|0}function Ql(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;y=o+8|0,p=u[y>>2]|0,b=(u[o>>2]|0)-p|0,T=o+4|0,p=(u[T>>2]|0)-p|0;do if(b>>>0>715827881|p>>>0>715827881){if(c=(b|0)>0,c){if((2147483647-b|0)<(b|0)||(2147483647-(b<<1)|0)<(b|0))return T=1,T|0}else if((-2147483648-b|0)>(b|0)||(-2147483648-(b<<1)|0)>(b|0))return T=1,T|0;if(l=b*3|0,(p|0)>0){if((2147483647-p|0)<(p|0))return T=1,T|0}else if((-2147483648-p|0)>(p|0))return T=1,T|0;if(d=p<<1,(b|0)>-1){if((l|-2147483648|0)>=(p|0))return T=1,T|0}else if((l^-2147483648|0)<(p|0))return T=1,T|0;if(c){if((2147483647-b|0)<(d|0))l=1;else{c=d;break}return l|0}else{if((-2147483648-b|0)>(d|0))l=1;else{c=d;break}return l|0}}else c=p<<1,l=b*3|0;while(!1);d=zi(+(l-p|0)/7)|0,u[o>>2]=d,p=zi(+(c+b|0)/7)|0,u[T>>2]=p,u[y>>2]=0,c=(p|0)<(d|0),l=c?d:p,c=c?p:d;do if((c|0)<0){if((l|0)>0){if((l|-2147483648|0)<(c|0)&((c|0)!=-2147483648&(2147483647-l|0)>=(c|0)))break;et(23313,22444,355,22455)}if((c|0)==-2147483648|(-2147483648-l|0)>(c|0)&&et(23313,22444,355,22455),(l|0)>-1){if((l|-2147483648|0)<(c|0))break;et(23313,22444,355,22455)}else{if((l^-2147483648|0)>=(c|0))break;et(23313,22444,355,22455)}}while(!1);return l=p-d|0,(d|0)<0?(c=0-d|0,u[T>>2]=l,u[y>>2]=c,u[o>>2]=0,d=0):(l=p,c=0),(l|0)<0&&(d=d-l|0,u[o>>2]=d,c=c-l|0,u[y>>2]=c,u[T>>2]=0,l=0),b=d-c|0,p=l-c|0,(c|0)<0?(u[o>>2]=b,u[T>>2]=p,u[y>>2]=0,l=p,p=b,c=0):p=d,d=(l|0)<(p|0)?l:p,d=(c|0)<(d|0)?c:d,(d|0)<=0?(T=0,T|0):(u[o>>2]=p-d,u[T>>2]=l-d,u[y>>2]=c-d,T=0,T|0)}function gA(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;y=o+8|0,p=u[y>>2]|0,b=(u[o>>2]|0)-p|0,T=o+4|0,p=(u[T>>2]|0)-p|0;do if(b>>>0>715827881|p>>>0>715827881){if(c=(b|0)>0,c){if((2147483647-b|0)<(b|0))return T=1,T|0}else if((-2147483648-b|0)>(b|0))return T=1,T|0;if(l=b<<1,(p|0)>0){if((2147483647-p|0)<(p|0)||(2147483647-(p<<1)|0)<(p|0))return T=1,T|0}else if((-2147483648-p|0)>(p|0)||(-2147483648-(p<<1)|0)>(p|0))return T=1,T|0;if(d=p*3|0,c){if((2147483647-l|0)<(p|0))return T=1,T|0}else if((-2147483648-l|0)>(p|0))return T=1,T|0;if((p|0)>-1){if((d|-2147483648|0)<(b|0)){c=d;break}else l=1;return l|0}else{if((d^-2147483648|0)<(b|0))l=1;else{c=d;break}return l|0}}else c=p*3|0,l=b<<1;while(!1);d=zi(+(l+p|0)/7)|0,u[o>>2]=d,p=zi(+(c-b|0)/7)|0,u[T>>2]=p,u[y>>2]=0,c=(p|0)<(d|0),l=c?d:p,c=c?p:d;do if((c|0)<0){if((l|0)>0){if((l|-2147483648|0)<(c|0)&((c|0)!=-2147483648&(2147483647-l|0)>=(c|0)))break;et(23313,22444,404,22469)}if((c|0)==-2147483648|(-2147483648-l|0)>(c|0)&&et(23313,22444,404,22469),(l|0)>-1){if((l|-2147483648|0)<(c|0))break;et(23313,22444,404,22469)}else{if((l^-2147483648|0)>=(c|0))break;et(23313,22444,404,22469)}}while(!1);return l=p-d|0,(d|0)<0?(c=0-d|0,u[T>>2]=l,u[y>>2]=c,u[o>>2]=0,d=0):(l=p,c=0),(l|0)<0&&(d=d-l|0,u[o>>2]=d,c=c-l|0,u[y>>2]=c,u[T>>2]=0,l=0),b=d-c|0,p=l-c|0,(c|0)<0?(u[o>>2]=b,u[T>>2]=p,u[y>>2]=0,l=p,p=b,c=0):p=d,d=(l|0)<(p|0)?l:p,d=(c|0)<(d|0)?c:d,(d|0)<=0?(T=0,T|0):(u[o>>2]=p-d,u[T>>2]=l-d,u[y>>2]=c-d,T=0,T|0)}function Ao(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;y=o+8|0,c=u[y>>2]|0,l=(u[o>>2]|0)-c|0,T=o+4|0,c=(u[T>>2]|0)-c|0,d=zi(+((l*3|0)-c|0)/7)|0,u[o>>2]=d,l=zi(+((c<<1)+l|0)/7)|0,u[T>>2]=l,u[y>>2]=0,c=l-d|0,(d|0)<0?(b=0-d|0,u[T>>2]=c,u[y>>2]=b,u[o>>2]=0,l=c,d=0,c=b):c=0,(l|0)<0&&(d=d-l|0,u[o>>2]=d,c=c-l|0,u[y>>2]=c,u[T>>2]=0,l=0),b=d-c|0,p=l-c|0,(c|0)<0?(u[o>>2]=b,u[T>>2]=p,u[y>>2]=0,l=p,p=b,c=0):p=d,d=(l|0)<(p|0)?l:p,d=(c|0)<(d|0)?c:d,!((d|0)<=0)&&(u[o>>2]=p-d,u[T>>2]=l-d,u[y>>2]=c-d)}function Xl(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;y=o+8|0,c=u[y>>2]|0,l=(u[o>>2]|0)-c|0,T=o+4|0,c=(u[T>>2]|0)-c|0,d=zi(+((l<<1)+c|0)/7)|0,u[o>>2]=d,l=zi(+((c*3|0)-l|0)/7)|0,u[T>>2]=l,u[y>>2]=0,c=l-d|0,(d|0)<0?(b=0-d|0,u[T>>2]=c,u[y>>2]=b,u[o>>2]=0,l=c,d=0,c=b):c=0,(l|0)<0&&(d=d-l|0,u[o>>2]=d,c=c-l|0,u[y>>2]=c,u[T>>2]=0,l=0),b=d-c|0,p=l-c|0,(c|0)<0?(u[o>>2]=b,u[T>>2]=p,u[y>>2]=0,l=p,p=b,c=0):p=d,d=(l|0)<(p|0)?l:p,d=(c|0)<(d|0)?c:d,!((d|0)<=0)&&(u[o>>2]=p-d,u[T>>2]=l-d,u[y>>2]=c-d)}function oo(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;l=u[o>>2]|0,y=o+4|0,c=u[y>>2]|0,T=o+8|0,d=u[T>>2]|0,p=c+(l*3|0)|0,u[o>>2]=p,c=d+(c*3|0)|0,u[y>>2]=c,l=(d*3|0)+l|0,u[T>>2]=l,d=c-p|0,(p|0)<0?(l=l-p|0,u[y>>2]=d,u[T>>2]=l,u[o>>2]=0,c=d,d=0):d=p,(c|0)<0&&(d=d-c|0,u[o>>2]=d,l=l-c|0,u[T>>2]=l,u[y>>2]=0,c=0),b=d-l|0,p=c-l|0,(l|0)<0?(u[o>>2]=b,u[y>>2]=p,u[T>>2]=0,d=b,l=0):p=c,c=(p|0)<(d|0)?p:d,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(u[o>>2]=d-c,u[y>>2]=p-c,u[T>>2]=l-c)}function vs(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;p=u[o>>2]|0,y=o+4|0,l=u[y>>2]|0,T=o+8|0,c=u[T>>2]|0,d=(l*3|0)+p|0,p=c+(p*3|0)|0,u[o>>2]=p,u[y>>2]=d,l=(c*3|0)+l|0,u[T>>2]=l,c=d-p|0,(p|0)<0?(l=l-p|0,u[y>>2]=c,u[T>>2]=l,u[o>>2]=0,p=0):c=d,(c|0)<0&&(p=p-c|0,u[o>>2]=p,l=l-c|0,u[T>>2]=l,u[y>>2]=0,c=0),b=p-l|0,d=c-l|0,(l|0)<0?(u[o>>2]=b,u[y>>2]=d,u[T>>2]=0,p=b,l=0):d=c,c=(d|0)<(p|0)?d:p,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(u[o>>2]=p-c,u[y>>2]=d-c,u[T>>2]=l-c)}function Uc(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0;(l+-1|0)>>>0>=6||(p=(u[15440+(l*12|0)>>2]|0)+(u[o>>2]|0)|0,u[o>>2]=p,T=o+4|0,d=(u[15440+(l*12|0)+4>>2]|0)+(u[T>>2]|0)|0,u[T>>2]=d,y=o+8|0,l=(u[15440+(l*12|0)+8>>2]|0)+(u[y>>2]|0)|0,u[y>>2]=l,c=d-p|0,(p|0)<0?(l=l-p|0,u[T>>2]=c,u[y>>2]=l,u[o>>2]=0,d=0):(c=d,d=p),(c|0)<0&&(d=d-c|0,u[o>>2]=d,l=l-c|0,u[y>>2]=l,u[T>>2]=0,c=0),b=d-l|0,p=c-l|0,(l|0)<0?(u[o>>2]=b,u[T>>2]=p,u[y>>2]=0,d=b,l=0):p=c,c=(p|0)<(d|0)?p:d,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(u[o>>2]=d-c,u[T>>2]=p-c,u[y>>2]=l-c))}function lo(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;p=u[o>>2]|0,y=o+4|0,l=u[y>>2]|0,T=o+8|0,c=u[T>>2]|0,d=l+p|0,p=c+p|0,u[o>>2]=p,u[y>>2]=d,l=c+l|0,u[T>>2]=l,c=d-p|0,(p|0)<0?(l=l-p|0,u[y>>2]=c,u[T>>2]=l,u[o>>2]=0,d=0):(c=d,d=p),(c|0)<0&&(d=d-c|0,u[o>>2]=d,l=l-c|0,u[T>>2]=l,u[y>>2]=0,c=0),b=d-l|0,p=c-l|0,(l|0)<0?(u[o>>2]=b,u[y>>2]=p,u[T>>2]=0,d=b,l=0):p=c,c=(p|0)<(d|0)?p:d,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(u[o>>2]=d-c,u[y>>2]=p-c,u[T>>2]=l-c)}function uo(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;l=u[o>>2]|0,y=o+4|0,d=u[y>>2]|0,T=o+8|0,c=u[T>>2]|0,p=d+l|0,u[o>>2]=p,d=c+d|0,u[y>>2]=d,l=c+l|0,u[T>>2]=l,c=d-p|0,(p|0)<0?(l=l-p|0,u[y>>2]=c,u[T>>2]=l,u[o>>2]=0,d=0):(c=d,d=p),(c|0)<0&&(d=d-c|0,u[o>>2]=d,l=l-c|0,u[T>>2]=l,u[y>>2]=0,c=0),b=d-l|0,p=c-l|0,(l|0)<0?(u[o>>2]=b,u[y>>2]=p,u[T>>2]=0,d=b,l=0):p=c,c=(p|0)<(d|0)?p:d,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(u[o>>2]=d-c,u[y>>2]=p-c,u[T>>2]=l-c)}function Ts(o){switch(o=o|0,o|0){case 1:{o=5;break}case 5:{o=4;break}case 4:{o=6;break}case 6:{o=2;break}case 2:{o=3;break}case 3:{o=1;break}}return o|0}function Hr(o){switch(o=o|0,o|0){case 1:{o=3;break}case 3:{o=2;break}case 2:{o=6;break}case 6:{o=4;break}case 4:{o=5;break}case 5:{o=1;break}}return o|0}function kc(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;l=u[o>>2]|0,y=o+4|0,c=u[y>>2]|0,T=o+8|0,d=u[T>>2]|0,p=c+(l<<1)|0,u[o>>2]=p,c=d+(c<<1)|0,u[y>>2]=c,l=(d<<1)+l|0,u[T>>2]=l,d=c-p|0,(p|0)<0?(l=l-p|0,u[y>>2]=d,u[T>>2]=l,u[o>>2]=0,c=d,d=0):d=p,(c|0)<0&&(d=d-c|0,u[o>>2]=d,l=l-c|0,u[T>>2]=l,u[y>>2]=0,c=0),b=d-l|0,p=c-l|0,(l|0)<0?(u[o>>2]=b,u[y>>2]=p,u[T>>2]=0,d=b,l=0):p=c,c=(p|0)<(d|0)?p:d,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(u[o>>2]=d-c,u[y>>2]=p-c,u[T>>2]=l-c)}function zc(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;p=u[o>>2]|0,y=o+4|0,l=u[y>>2]|0,T=o+8|0,c=u[T>>2]|0,d=(l<<1)+p|0,p=c+(p<<1)|0,u[o>>2]=p,u[y>>2]=d,l=(c<<1)+l|0,u[T>>2]=l,c=d-p|0,(p|0)<0?(l=l-p|0,u[y>>2]=c,u[T>>2]=l,u[o>>2]=0,p=0):c=d,(c|0)<0&&(p=p-c|0,u[o>>2]=p,l=l-c|0,u[T>>2]=l,u[y>>2]=0,c=0),b=p-l|0,d=c-l|0,(l|0)<0?(u[o>>2]=b,u[y>>2]=d,u[T>>2]=0,p=b,l=0):d=c,c=(d|0)<(p|0)?d:p,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(u[o>>2]=p-c,u[y>>2]=d-c,u[T>>2]=l-c)}function co(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0;return y=(u[o>>2]|0)-(u[l>>2]|0)|0,T=(y|0)<0,d=(u[o+4>>2]|0)-(u[l+4>>2]|0)-(T?y:0)|0,b=(d|0)<0,p=(T?0-y|0:0)+(u[o+8>>2]|0)-(u[l+8>>2]|0)+(b?0-d|0:0)|0,o=(p|0)<0,l=o?0:p,c=(b?0:d)-(o?p:0)|0,p=(T?0:y)-(b?d:0)-(o?p:0)|0,o=(c|0)<(p|0)?c:p,o=(l|0)<(o|0)?l:o,d=(o|0)>0,l=l-(d?o:0)|0,c=c-(d?o:0)|0,o=p-(d?o:0)|0,o=(o|0)>-1?o:0-o|0,c=(c|0)>-1?c:0-c|0,l=(l|0)>-1?l:0-l|0,l=(c|0)>(l|0)?c:l,((o|0)>(l|0)?o:l)|0}function _h(o,l){o=o|0,l=l|0;var c=0;c=u[o+8>>2]|0,u[l>>2]=(u[o>>2]|0)-c,u[l+4>>2]=(u[o+4>>2]|0)-c}function bh(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0;d=u[o>>2]|0,u[l>>2]=d,p=u[o+4>>2]|0,y=l+4|0,u[y>>2]=p,T=l+8|0,u[T>>2]=0,c=(p|0)<(d|0),o=c?d:p,c=c?p:d;do if((c|0)<0){if((o|0)>0){if((o|-2147483648|0)<(c|0)&((c|0)!=-2147483648&(2147483647-o|0)>=(c|0)))break;return o=1,o|0}if((c|0)==-2147483648|(-2147483648-o|0)>(c|0))return l=1,l|0;if((o|0)>-1){if((o|-2147483648|0)<(c|0))break;return o=1,o|0}else{if((o^-2147483648|0)<(c|0))o=1;else break;return o|0}}while(!1);return o=p-d|0,(d|0)<0?(c=0-d|0,u[y>>2]=o,u[T>>2]=c,u[l>>2]=0,d=0):(o=p,c=0),(o|0)<0&&(d=d-o|0,u[l>>2]=d,c=c-o|0,u[T>>2]=c,u[y>>2]=0,o=0),b=d-c|0,p=o-c|0,(c|0)<0?(u[l>>2]=b,u[y>>2]=p,u[T>>2]=0,o=p,p=b,c=0):p=d,d=(o|0)<(p|0)?o:p,d=(c|0)<(d|0)?c:d,(d|0)<=0?(l=0,l|0):(u[l>>2]=p-d,u[y>>2]=o-d,u[T>>2]=c-d,l=0,l|0)}function Gc(o){o=o|0;var l=0,c=0,d=0,p=0;l=o+8|0,p=u[l>>2]|0,c=p-(u[o>>2]|0)|0,u[o>>2]=c,d=o+4|0,o=(u[d>>2]|0)-p|0,u[d>>2]=o,u[l>>2]=0-(o+c)}function Eh(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;c=u[o>>2]|0,l=0-c|0,u[o>>2]=l,y=o+8|0,u[y>>2]=0,T=o+4|0,d=u[T>>2]|0,p=d+c|0,(c|0)>0?(u[T>>2]=p,u[y>>2]=c,u[o>>2]=0,l=0,d=p):c=0,(d|0)<0?(b=l-d|0,u[o>>2]=b,c=c-d|0,u[y>>2]=c,u[T>>2]=0,p=b-c|0,l=0-c|0,(c|0)<0?(u[o>>2]=p,u[T>>2]=l,u[y>>2]=0,d=l,c=0):(d=0,p=b)):p=l,l=(d|0)<(p|0)?d:p,l=(c|0)<(l|0)?c:l,!((l|0)<=0)&&(u[o>>2]=p-l,u[T>>2]=d-l,u[y>>2]=c-l)}function Wl(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0,D=0,z=0;if(z=I,I=I+64|0,D=z,T=z+56|0,!(!0&(l&2013265920|0)==134217728&(!0&(d&2013265920|0)==134217728)))return p=5,I=z,p|0;if((o|0)==(c|0)&(l|0)==(d|0))return u[p>>2]=0,p=0,I=z,p|0;if(y=Re(o|0,l|0,52)|0,V()|0,y=y&15,R=Re(c|0,d|0,52)|0,V()|0,(y|0)!=(R&15|0))return p=12,I=z,p|0;if(b=y+-1|0,y>>>0>1){jr(o,l,b,D)|0,jr(c,d,b,T)|0,R=D,M=u[R>>2]|0,R=u[R+4>>2]|0;e:do if((M|0)==(u[T>>2]|0)&&(R|0)==(u[T+4>>2]|0)){y=(y^15)*3|0,b=Re(o|0,l|0,y|0)|0,V()|0,b=b&7,y=Re(c|0,d|0,y|0)|0,V()|0,y=y&7;do if((b|0)==0|(y|0)==0)u[p>>2]=1,b=0;else if((b|0)==7)b=5;else{if((b|0)==1|(y|0)==1&&Jt(M,R)|0){b=5;break}if((u[15536+(b<<2)>>2]|0)!=(y|0)&&(u[15568+(b<<2)>>2]|0)!=(y|0))break e;u[p>>2]=1,b=0}while(!1);return p=b,I=z,p|0}while(!1)}b=D,y=b+56|0;do u[b>>2]=0,b=b+4|0;while((b|0)<(y|0));return ua(o,l,1,D)|0,l=D,!((u[l>>2]|0)==(c|0)&&(u[l+4>>2]|0)==(d|0))&&(l=D+8|0,!((u[l>>2]|0)==(c|0)&&(u[l+4>>2]|0)==(d|0)))&&(l=D+16|0,!((u[l>>2]|0)==(c|0)&&(u[l+4>>2]|0)==(d|0)))&&(l=D+24|0,!((u[l>>2]|0)==(c|0)&&(u[l+4>>2]|0)==(d|0)))&&(l=D+32|0,!((u[l>>2]|0)==(c|0)&&(u[l+4>>2]|0)==(d|0)))&&(l=D+40|0,!((u[l>>2]|0)==(c|0)&&(u[l+4>>2]|0)==(d|0)))?(b=D+48|0,b=((u[b>>2]|0)==(c|0)?(u[b+4>>2]|0)==(d|0):0)&1):b=1,u[p>>2]=b,p=0,I=z,p|0}function yh(o,l,c,d,p){return o=o|0,l=l|0,c=c|0,d=d|0,p=p|0,c=fe(o,l,c,d)|0,(c|0)==7?(p=11,p|0):(d=Ue(c|0,0,56)|0,l=l&-2130706433|(V()|0)|268435456,u[p>>2]=o|d,u[p+4>>2]=l,p=0,p|0)}function vh(o,l,c){return o=o|0,l=l|0,c=c|0,!0&(l&2013265920|0)==268435456?(u[c>>2]=o,u[c+4>>2]=l&-2130706433|134217728,c=0,c|0):(c=6,c|0)}function Th(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0;return p=I,I=I+16|0,d=p,u[d>>2]=0,!0&(l&2013265920|0)==268435456?(b=Re(o|0,l|0,56)|0,V()|0,d=X(o,l&-2130706433|134217728,b&7,d,c)|0,I=p,d|0):(d=6,I=p,d|0)}function Vc(o,l){o=o|0,l=l|0;var c=0;switch(c=Re(o|0,l|0,56)|0,V()|0,c&7){case 0:case 7:return c=0,c|0}return c=l&-2130706433|134217728,!(!0&(l&2013265920|0)==268435456)||!0&(l&117440512|0)==16777216&(Jt(o,c)|0)!=0?(c=0,c|0):(c=mo(o,c)|0,c|0)}function wh(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0;return p=I,I=I+16|0,d=p,!0&(l&2013265920|0)==268435456?(b=l&-2130706433|134217728,y=c,u[y>>2]=o,u[y+4>>2]=b,u[d>>2]=0,l=Re(o|0,l|0,56)|0,V()|0,d=X(o,b,l&7,d,c+8|0)|0,I=p,d|0):(d=6,I=p,d|0)}function xh(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0;return p=(Jt(o,l)|0)==0,l=l&-2130706433,d=c,u[d>>2]=p?o:0,u[d+4>>2]=p?l|285212672:0,d=c+8|0,u[d>>2]=o,u[d+4>>2]=l|301989888,d=c+16|0,u[d>>2]=o,u[d+4>>2]=l|318767104,d=c+24|0,u[d>>2]=o,u[d+4>>2]=l|335544320,d=c+32|0,u[d>>2]=o,u[d+4>>2]=l|352321536,c=c+40|0,u[c>>2]=o,u[c+4>>2]=l|369098752,0}function fo(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0;return y=I,I=I+16|0,p=y,b=l&-2130706433|134217728,!0&(l&2013265920|0)==268435456?(d=Re(o|0,l|0,56)|0,V()|0,d=Ki(o,b,d&7)|0,(d|0)==-1?(u[c>>2]=0,b=6,I=y,b|0):(ha(o,b,p)|0&&et(23313,22484,282,22499),l=Re(o|0,l|0,52)|0,V()|0,l=l&15,Jt(o,b)|0?ql(p,l,d,2,c):go(p,l,d,2,c),b=0,I=y,b|0)):(b=6,I=y,b|0)}function Sh(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0;d=I,I=I+16|0,p=d,Mh(o,l,c,p),Ic(p,c+4|0),I=d}function Mh(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0;if(T=I,I=I+16|0,M=T,Ch(o,c,M),b=+Wi(+(1-+U[M>>3]*.5)),b<1e-16){u[d>>2]=0,u[d+4>>2]=0,u[d+8>>2]=0,u[d+12>>2]=0,I=T;return}if(M=u[c>>2]|0,p=+U[15920+(M*24|0)>>3],p=+yA(p-+yA(+$c(15600+(M<<4)|0,o))),Ci(l)|0?y=+yA(p+-.3334731722518321):y=p,p=+On(+b)/.381966011250105,(l|0)>0){o=0;do p=p*2.6457513110645907,o=o+1|0;while((o|0)!=(l|0))}b=+wt(+y)*p,U[d>>3]=b,y=+at(+y)*p,U[d+8>>3]=y,I=T}function Ch(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0;if(b=I,I=I+32|0,p=b,Vt(o,p),u[l>>2]=0,U[c>>3]=5,d=+Pt(16400,p),d<+U[c>>3]&&(u[l>>2]=0,U[c>>3]=d),d=+Pt(16424,p),d<+U[c>>3]&&(u[l>>2]=1,U[c>>3]=d),d=+Pt(16448,p),d<+U[c>>3]&&(u[l>>2]=2,U[c>>3]=d),d=+Pt(16472,p),d<+U[c>>3]&&(u[l>>2]=3,U[c>>3]=d),d=+Pt(16496,p),d<+U[c>>3]&&(u[l>>2]=4,U[c>>3]=d),d=+Pt(16520,p),d<+U[c>>3]&&(u[l>>2]=5,U[c>>3]=d),d=+Pt(16544,p),d<+U[c>>3]&&(u[l>>2]=6,U[c>>3]=d),d=+Pt(16568,p),d<+U[c>>3]&&(u[l>>2]=7,U[c>>3]=d),d=+Pt(16592,p),d<+U[c>>3]&&(u[l>>2]=8,U[c>>3]=d),d=+Pt(16616,p),d<+U[c>>3]&&(u[l>>2]=9,U[c>>3]=d),d=+Pt(16640,p),d<+U[c>>3]&&(u[l>>2]=10,U[c>>3]=d),d=+Pt(16664,p),d<+U[c>>3]&&(u[l>>2]=11,U[c>>3]=d),d=+Pt(16688,p),d<+U[c>>3]&&(u[l>>2]=12,U[c>>3]=d),d=+Pt(16712,p),d<+U[c>>3]&&(u[l>>2]=13,U[c>>3]=d),d=+Pt(16736,p),d<+U[c>>3]&&(u[l>>2]=14,U[c>>3]=d),d=+Pt(16760,p),d<+U[c>>3]&&(u[l>>2]=15,U[c>>3]=d),d=+Pt(16784,p),d<+U[c>>3]&&(u[l>>2]=16,U[c>>3]=d),d=+Pt(16808,p),d<+U[c>>3]&&(u[l>>2]=17,U[c>>3]=d),d=+Pt(16832,p),d<+U[c>>3]&&(u[l>>2]=18,U[c>>3]=d),d=+Pt(16856,p),!(d<+U[c>>3])){I=b;return}u[l>>2]=19,U[c>>3]=d,I=b}function mA(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0;if(b=+su(o),b<1e-16){l=15600+(l<<4)|0,u[p>>2]=u[l>>2],u[p+4>>2]=u[l+4>>2],u[p+8>>2]=u[l+8>>2],u[p+12>>2]=u[l+12>>2];return}if(y=+En(+ +U[o+8>>3],+ +U[o>>3]),(c|0)>0){o=0;do b=b/2.6457513110645907,o=o+1|0;while((o|0)!=(c|0))}d?(b=b/3,c=(Ci(c)|0)==0,b=+Un(+((c?b:b/2.6457513110645907)*.381966011250105))):(b=+Un(+(b*.381966011250105)),Ci(c)|0&&(y=+yA(y+.3334731722518321))),ws(15600+(l<<4)|0,+yA(+U[15920+(l*24|0)>>3]-y),b,p)}function Rh(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0;d=I,I=I+16|0,p=d,Mi(o+4|0,p),mA(p,u[o>>2]|0,l,0,c),I=d}function ql(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0,$=0,xe=0,Ie=0,Fe=0,ke=0,Bt=0,Ot=0,Dt=0,ut=0,dt=0,qe=0,Yt=0,ot=0;if(qe=I,I=I+272|0,b=qe+256|0,ue=qe+240|0,Dt=qe,ut=qe+224|0,dt=qe+208|0,le=qe+176|0,$=qe+160|0,xe=qe+192|0,Ie=qe+144|0,Fe=qe+128|0,ke=qe+112|0,Bt=qe+96|0,Ot=qe+80|0,u[b>>2]=l,u[ue>>2]=u[o>>2],u[ue+4>>2]=u[o+4>>2],u[ue+8>>2]=u[o+8>>2],u[ue+12>>2]=u[o+12>>2],ho(ue,b,Dt),u[p>>2]=0,ue=d+c+((d|0)==5&1)|0,(ue|0)<=(c|0)){I=qe;return}M=u[b>>2]|0,R=ut+4|0,D=le+4|0,z=c+5|0,q=16880+(M<<2)|0,J=16960+(M<<2)|0,Q=Fe+8|0,ie=ke+8|0,pe=Bt+8|0,ge=dt+4|0,T=c;e:for(;;){y=Dt+(((T|0)%5|0)<<4)|0,u[dt>>2]=u[y>>2],u[dt+4>>2]=u[y+4>>2],u[dt+8>>2]=u[y+8>>2],u[dt+12>>2]=u[y+12>>2];do;while((hr(dt,M,0,1)|0)==2);if((T|0)>(c|0)&(Ci(l)|0)!=0){if(u[le>>2]=u[dt>>2],u[le+4>>2]=u[dt+4>>2],u[le+8>>2]=u[dt+8>>2],u[le+12>>2]=u[dt+12>>2],Mi(R,$),d=u[le>>2]|0,b=u[17040+(d*80|0)+(u[ut>>2]<<2)>>2]|0,u[le>>2]=u[18640+(d*80|0)+(b*20|0)>>2],y=u[18640+(d*80|0)+(b*20|0)+16>>2]|0,(y|0)>0){o=0;do lo(D),o=o+1|0;while((o|0)<(y|0))}switch(y=18640+(d*80|0)+(b*20|0)+4|0,u[xe>>2]=u[y>>2],u[xe+4>>2]=u[y+4>>2],u[xe+8>>2]=u[y+8>>2],Fc(xe,(u[q>>2]|0)*3|0),Nn(D,xe,D),Zt(D),Mi(D,Ie),Yt=+(u[J>>2]|0),U[Fe>>3]=Yt*3,U[Q>>3]=0,ot=Yt*-1.5,U[ke>>3]=ot,U[ie>>3]=Yt*2.598076211353316,U[Bt>>3]=ot,U[pe>>3]=Yt*-2.598076211353316,u[17040+((u[le>>2]|0)*80|0)+(u[dt>>2]<<2)>>2]|0){case 1:{o=ke,d=Fe;break}case 3:{o=Bt,d=ke;break}case 2:{o=Fe,d=Bt;break}default:{o=12;break e}}Ro($,Ie,d,o,Ot),mA(Ot,u[le>>2]|0,M,1,p+8+(u[p>>2]<<4)|0),u[p>>2]=(u[p>>2]|0)+1}if((T|0)<(z|0)&&(Mi(ge,le),mA(le,u[dt>>2]|0,M,1,p+8+(u[p>>2]<<4)|0),u[p>>2]=(u[p>>2]|0)+1),u[ut>>2]=u[dt>>2],u[ut+4>>2]=u[dt+4>>2],u[ut+8>>2]=u[dt+8>>2],u[ut+12>>2]=u[dt+12>>2],T=T+1|0,(T|0)>=(ue|0)){o=3;break}}if((o|0)==3){I=qe;return}else(o|0)==12&&et(22522,22569,571,22579)}function ho(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0;M=I,I=I+128|0,d=M+64|0,p=M,b=d,y=20240,T=b+60|0;do u[b>>2]=u[y>>2],b=b+4|0,y=y+4|0;while((b|0)<(T|0));b=p,y=20304,T=b+60|0;do u[b>>2]=u[y>>2],b=b+4|0,y=y+4|0;while((b|0)<(T|0));T=(Ci(u[l>>2]|0)|0)==0,d=T?d:p,p=o+4|0,kc(p),zc(p),Ci(u[l>>2]|0)|0&&(vs(p),u[l>>2]=(u[l>>2]|0)+1),u[c>>2]=u[o>>2],l=c+4|0,Nn(p,d,l),Zt(l),u[c+16>>2]=u[o>>2],l=c+20|0,Nn(p,d+12|0,l),Zt(l),u[c+32>>2]=u[o>>2],l=c+36|0,Nn(p,d+24|0,l),Zt(l),u[c+48>>2]=u[o>>2],l=c+52|0,Nn(p,d+36|0,l),Zt(l),u[c+64>>2]=u[o>>2],c=c+68|0,Nn(p,d+48|0,c),Zt(c),I=M}function hr(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0;if(Q=I,I=I+32|0,q=Q+12|0,T=Q,J=o+4|0,z=u[16960+(l<<2)>>2]|0,D=(d|0)!=0,z=D?z*3|0:z,p=u[J>>2]|0,R=o+8|0,y=u[R>>2]|0,D){if(b=o+12|0,d=u[b>>2]|0,p=y+p+d|0,(p|0)==(z|0))return J=1,I=Q,J|0;M=b}else M=o+12|0,d=u[M>>2]|0,p=y+p+d|0;if((p|0)<=(z|0))return J=0,I=Q,J|0;do if((d|0)>0){if(d=u[o>>2]|0,(y|0)>0){b=18640+(d*80|0)+60|0,d=o;break}d=18640+(d*80|0)+40|0,c?(ao(q,z,0,0),ys(J,q,T),uo(T),Nn(T,q,J),b=d,d=o):(b=d,d=o)}else b=18640+((u[o>>2]|0)*80|0)+20|0,d=o;while(!1);if(u[d>>2]=u[b>>2],p=b+16|0,(u[p>>2]|0)>0){d=0;do lo(J),d=d+1|0;while((d|0)<(u[p>>2]|0))}return o=b+4|0,u[q>>2]=u[o>>2],u[q+4>>2]=u[o+4>>2],u[q+8>>2]=u[o+8>>2],l=u[16880+(l<<2)>>2]|0,Fc(q,D?l*3|0:l),Nn(J,q,J),Zt(J),D?d=((u[R>>2]|0)+(u[J>>2]|0)+(u[M>>2]|0)|0)==(z|0)?1:2:d=2,J=d,I=Q,J|0}function Lh(o,l){o=o|0,l=l|0;var c=0;do c=hr(o,l,0,1)|0;while((c|0)==2);return c|0}function go(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0,$=0,xe=0,Ie=0,Fe=0,ke=0,Bt=0,Ot=0,Dt=0;if(Bt=I,I=I+240|0,b=Bt+224|0,xe=Bt+208|0,Ie=Bt,Fe=Bt+192|0,ke=Bt+176|0,pe=Bt+160|0,ge=Bt+144|0,ue=Bt+128|0,le=Bt+112|0,$=Bt+96|0,u[b>>2]=l,u[xe>>2]=u[o>>2],u[xe+4>>2]=u[o+4>>2],u[xe+8>>2]=u[o+8>>2],u[xe+12>>2]=u[o+12>>2],Zl(xe,b,Ie),u[p>>2]=0,ie=d+c+((d|0)==6&1)|0,(ie|0)<=(c|0)){I=Bt;return}M=u[b>>2]|0,R=c+6|0,D=16960+(M<<2)|0,z=ge+8|0,q=ue+8|0,J=le+8|0,Q=Fe+4|0,y=0,T=c,d=-1;e:for(;;){if(b=(T|0)%6|0,o=Ie+(b<<4)|0,u[Fe>>2]=u[o>>2],u[Fe+4>>2]=u[o+4>>2],u[Fe+8>>2]=u[o+8>>2],u[Fe+12>>2]=u[o+12>>2],o=y,y=hr(Fe,M,0,1)|0,(T|0)>(c|0)&(Ci(l)|0)!=0&&(o|0)!=1&&(u[Fe>>2]|0)!=(d|0)){switch(Mi(Ie+(((b+5|0)%6|0)<<4)+4|0,ke),Mi(Ie+(b<<4)+4|0,pe),Ot=+(u[D>>2]|0),U[ge>>3]=Ot*3,U[z>>3]=0,Dt=Ot*-1.5,U[ue>>3]=Dt,U[q>>3]=Ot*2.598076211353316,U[le>>3]=Dt,U[J>>3]=Ot*-2.598076211353316,b=u[xe>>2]|0,u[17040+(b*80|0)+(((d|0)==(b|0)?u[Fe>>2]|0:d)<<2)>>2]|0){case 1:{o=ue,d=ge;break}case 3:{o=le,d=ue;break}case 2:{o=ge,d=le;break}default:{o=8;break e}}Ro(ke,pe,d,o,$),!(Xn(ke,$)|0)&&!(Xn(pe,$)|0)&&(mA($,u[xe>>2]|0,M,1,p+8+(u[p>>2]<<4)|0),u[p>>2]=(u[p>>2]|0)+1)}if((T|0)<(R|0)&&(Mi(Q,ke),mA(ke,u[Fe>>2]|0,M,1,p+8+(u[p>>2]<<4)|0),u[p>>2]=(u[p>>2]|0)+1),T=T+1|0,(T|0)>=(ie|0)){o=3;break}else d=u[Fe>>2]|0}if((o|0)==3){I=Bt;return}else(o|0)==8&&et(22606,22569,736,22651)}function Zl(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0;M=I,I=I+160|0,d=M+80|0,p=M,b=d,y=20368,T=b+72|0;do u[b>>2]=u[y>>2],b=b+4|0,y=y+4|0;while((b|0)<(T|0));b=p,y=20448,T=b+72|0;do u[b>>2]=u[y>>2],b=b+4|0,y=y+4|0;while((b|0)<(T|0));T=(Ci(u[l>>2]|0)|0)==0,d=T?d:p,p=o+4|0,kc(p),zc(p),Ci(u[l>>2]|0)|0&&(vs(p),u[l>>2]=(u[l>>2]|0)+1),u[c>>2]=u[o>>2],l=c+4|0,Nn(p,d,l),Zt(l),u[c+16>>2]=u[o>>2],l=c+20|0,Nn(p,d+12|0,l),Zt(l),u[c+32>>2]=u[o>>2],l=c+36|0,Nn(p,d+24|0,l),Zt(l),u[c+48>>2]=u[o>>2],l=c+52|0,Nn(p,d+36|0,l),Zt(l),u[c+64>>2]=u[o>>2],l=c+68|0,Nn(p,d+48|0,l),Zt(l),u[c+80>>2]=u[o>>2],c=c+84|0,Nn(p,d+60|0,c),Zt(c),I=M}function Hc(o,l){return o=o|0,l=l|0,l=Re(o|0,l|0,52)|0,V()|0,l&15|0}function Kl(o,l){return o=o|0,l=l|0,l=Re(o|0,l|0,45)|0,V()|0,l&127|0}function mo(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0;if(!(!0&(l&-16777216|0)==134217728)||(y=Re(o|0,l|0,45)|0,V()|0,y=y&127,y>>>0>121))return l=0,l|0;c=Re(o|0,l|0,52)|0,V()|0,c=c&15;do if(c|0){for(p=1,d=0;;){if(b=Re(o|0,l|0,(15-p|0)*3|0)|0,V()|0,b=b&7,(b|0)!=0&(d^1))if((b|0)==1&(Ct(y)|0)!=0){T=0,d=13;break}else d=1;if((b|0)==7){T=0,d=13;break}if(p>>>0<c>>>0)p=p+1|0;else{d=9;break}}if((d|0)==9){if((c|0)==15)T=1;else break;return T|0}else if((d|0)==13)return T|0}while(!1);for(;;){if(T=Re(o|0,l|0,(14-c|0)*3|0)|0,V()|0,!((T&7|0)==7&!0)){T=0,d=13;break}if(c>>>0<14)c=c+1|0;else{T=1,d=13;break}}return(d|0)==13?T|0:0}function jr(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0;if(b=Re(o|0,l|0,52)|0,V()|0,b=b&15,c>>>0>15)return d=4,d|0;if((b|0)<(c|0))return d=12,d|0;if((b|0)==(c|0))return u[d>>2]=o,u[d+4>>2]=l,d=0,d|0;if(p=Ue(c|0,0,52)|0,p=p|o,o=V()|0|l&-15728641,(b|0)>(c|0))do l=Ue(7,0,(14-c|0)*3|0)|0,c=c+1|0,p=l|p,o=V()|0|o;while((c|0)<(b|0));return u[d>>2]=p,u[d+4>>2]=o,d=0,d|0}function po(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0;if(b=Re(o|0,l|0,52)|0,V()|0,b=b&15,!((c|0)<16&(b|0)<=(c|0)))return d=4,d|0;p=c-b|0,c=Re(o|0,l|0,45)|0,V()|0;e:do if(!(Ct(c&127)|0))c=Sr(7,0,p,((p|0)<0)<<31>>31)|0,p=V()|0;else{t:do if(b|0){for(c=1;y=Ue(7,0,(15-c|0)*3|0)|0,!!((y&o|0)==0&((V()|0)&l|0)==0);)if(c>>>0<b>>>0)c=c+1|0;else break t;c=Sr(7,0,p,((p|0)<0)<<31>>31)|0,p=V()|0;break e}while(!1);c=Sr(7,0,p,((p|0)<0)<<31>>31)|0,c=Gn(c|0,V()|0,5,0)|0,c=vt(c|0,V()|0,-5,-1)|0,c=Qr(c|0,V()|0,6,0)|0,c=vt(c|0,V()|0,1,0)|0,p=V()|0}while(!1);return y=d,u[y>>2]=c,u[y+4>>2]=p,y=0,y|0}function Jt(o,l){o=o|0,l=l|0;var c=0,d=0,p=0;if(p=Re(o|0,l|0,45)|0,V()|0,!(Ct(p&127)|0))return p=0,p|0;p=Re(o|0,l|0,52)|0,V()|0,p=p&15;e:do if(!p)c=0;else for(d=1;;){if(c=Re(o|0,l|0,(15-d|0)*3|0)|0,V()|0,c=c&7,c|0)break e;if(d>>>0<p>>>0)d=d+1|0;else{c=0;break}}while(!1);return p=(c|0)==0&1,p|0}function Oh(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0;if(y=I,I=I+16|0,b=y,vo(b,o,l,c),l=b,o=u[l>>2]|0,l=u[l+4>>2]|0,(o|0)==0&(l|0)==0)return I=y,0;p=0,c=0;do T=d+(p<<3)|0,u[T>>2]=o,u[T+4>>2]=l,p=vt(p|0,c|0,1,0)|0,c=V()|0,Kc(b),T=b,o=u[T>>2]|0,l=u[T+4>>2]|0;while(!((o|0)==0&(l|0)==0));return I=y,0}function jc(o,l,c,d){return o=o|0,l=l|0,c=c|0,d=d|0,(d|0)<(c|0)?(c=l,d=o,ht(c|0),d|0):(c=Ue(-1,-1,((d-c|0)*3|0)+3|0)|0,d=Ue(~c|0,~(V()|0)|0,(15-d|0)*3|0)|0,c=~(V()|0)&l,d=~d&o,ht(c|0),d|0)}function Yc(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0;return p=Re(o|0,l|0,52)|0,V()|0,p=p&15,(c|0)<16&(p|0)<=(c|0)?((p|0)<(c|0)&&(p=Ue(-1,-1,((c+-1-p|0)*3|0)+3|0)|0,p=Ue(~p|0,~(V()|0)|0,(15-c|0)*3|0)|0,l=~(V()|0)&l,o=~p&o),p=Ue(c|0,0,52)|0,c=l&-15728641|(V()|0),u[d>>2]=o|p,u[d+4>>2]=c,d=0,d|0):(d=4,d|0)}function pA(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0,$=0,xe=0,Ie=0,Fe=0,ke=0;if((c|0)==0&(d|0)==0)return Fe=0,Fe|0;if(p=o,b=u[p>>2]|0,p=u[p+4>>2]|0,!0&(p&15728640|0)==0){if(!((d|0)>0|(d|0)==0&c>>>0>0)||(Fe=l,u[Fe>>2]=b,u[Fe+4>>2]=p,(c|0)==1&(d|0)==0))return Fe=0,Fe|0;p=1;do xe=o+(p<<3)|0,Ie=u[xe+4>>2]|0,Fe=l+(p<<3)|0,u[Fe>>2]=u[xe>>2],u[Fe+4>>2]=Ie,p=p+1|0;while(0<(d|0)|(d|0)==0&p>>>0<c>>>0);return p=0,p|0}if($=c<<3,Ie=$i($)|0,!Ie)return Fe=13,Fe|0;if(wA(Ie|0,o|0,$|0)|0,xe=pi(c,8)|0,!xe)return st(Ie),Fe=13,Fe|0;e:do if(c|0){t:for(;;){p=Ie,ge=u[p>>2]|0,p=u[p+4>>2]|0,ue=Re(ge|0,p|0,52)|0,V()|0,ue=ue&15,le=ue+-1|0,pe=(c|0)>0;n:do if((ue|0)!=0&pe){if(J=((c|0)<0)<<31>>31,Q=Ue(le|0,0,52)|0,ie=V()|0,le>>>0>15){if(!((ge|0)==0&(p|0)==0)){Fe=17;break t}for(b=0;;){if(b=b+1|0,(b|0)>=(c|0))break n;if(d=Ie+(b<<3)|0,ie=u[d>>2]|0,d=u[d+4>>2]|0,!((ie|0)==0&(d|0)==0)){p=d,Fe=17;break t}}}for(b=0,o=ge,d=p;;){if(!((o|0)==0&(d|0)==0)){if(!(!0&(d&117440512|0)==0)){Fe=22;break t}if(T=Re(o|0,d|0,52)|0,V()|0,T=T&15,(T|0)<(le|0)){p=12,Fe=28;break t}if((T|0)!=(le|0)&&(o=o|Q,d=d&-15728641|ie,T>>>0>=ue>>>0)){y=le;do q=Ue(7,0,(14-y|0)*3|0)|0,y=y+1|0,o=q|o,d=V()|0|d;while(y>>>0<T>>>0)}if(y=Lr(o|0,d|0,c|0,J|0)|0,V()|0,R=xe+(y<<3)|0,T=R,M=u[T>>2]|0,T=u[T+4>>2]|0,(M|0)==0&(T|0)==0)y=R;else for(q=0;;){if((q|0)>(c|0)){Fe=32;break t}if((M|0)==(o|0)&(T&-117440513|0)==(d|0)){D=Re(M|0,T|0,56)|0,V()|0,D=D&7,z=D+1|0,ke=Re(M|0,T|0,45)|0,V()|0;i:do if(!(Ct(ke&127)|0))T=7;else{if(M=Re(M|0,T|0,52)|0,V()|0,M=M&15,!M){T=6;break}for(T=1;;){if(ke=Ue(7,0,(15-T|0)*3|0)|0,!((ke&o|0)==0&((V()|0)&d|0)==0)){T=7;break i}if(T>>>0<M>>>0)T=T+1|0;else{T=6;break}}}while(!1);if((D+2|0)>>>0>T>>>0){Fe=42;break t}ke=Ue(z|0,0,56)|0,d=V()|0|d&-117440513,z=R,u[z>>2]=0,u[z+4>>2]=0,o=ke|o}else y=(y+1|0)%(c|0)|0;if(R=xe+(y<<3)|0,T=R,M=u[T>>2]|0,T=u[T+4>>2]|0,(M|0)==0&(T|0)==0){y=R;break}else q=q+1|0}ke=y,u[ke>>2]=o,u[ke+4>>2]=d}if(b=b+1|0,(b|0)>=(c|0))break n;d=Ie+(b<<3)|0,o=u[d>>2]|0,d=u[d+4>>2]|0}}while(!1);if((c+5|0)>>>0<11){Fe=85;break}if(ie=pi((c|0)/6|0,8)|0,!ie){Fe=49;break}n:do if(pe){q=0,z=0;do{if(T=xe+(q<<3)|0,d=T,b=u[d>>2]|0,d=u[d+4>>2]|0,!((b|0)==0&(d|0)==0)){M=Re(b|0,d|0,56)|0,V()|0,M=M&7,o=M+1|0,R=d&-117440513,ke=Re(b|0,d|0,45)|0,V()|0;i:do if(Ct(ke&127)|0){if(D=Re(b|0,d|0,52)|0,V()|0,D=D&15,D|0)for(y=1;;){if(ke=Ue(7,0,(15-y|0)*3|0)|0,!((b&ke|0)==0&(R&(V()|0)|0)==0))break i;if(y>>>0<D>>>0)y=y+1|0;else break}d=Ue(o|0,0,56)|0,b=d|b,d=V()|0|R,o=T,u[o>>2]=b,u[o+4>>2]=d,o=M+2|0}while(!1);(o|0)==7&&(ke=ie+(z<<3)|0,u[ke>>2]=b,u[ke+4>>2]=d&-117440513,z=z+1|0)}q=q+1|0}while((q|0)!=(c|0));if(pe){if(q=((c|0)<0)<<31>>31,J=Ue(le|0,0,52)|0,Q=V()|0,le>>>0>15){if(!((ge|0)==0&(p|0)==0)){p=4,Fe=84;break t}for(p=0;;){if(p=p+1|0,(p|0)>=(c|0)){b=0,p=z;break n}if(ke=Ie+(p<<3)|0,!((u[ke>>2]|0)==0&(u[ke+4>>2]|0)==0)){p=4,Fe=84;break t}}}for(D=0,b=0,R=ge;;){do if(!((R|0)==0&(p|0)==0)){if(T=Re(R|0,p|0,52)|0,V()|0,T=T&15,(T|0)<(le|0)){p=12,Fe=84;break t}do if((T|0)==(le|0))d=R,T=p;else{if(d=R|J,o=p&-15728641|Q,T>>>0<ue>>>0){T=o;break}y=le;do ke=Ue(7,0,(14-y|0)*3|0)|0,y=y+1|0,d=ke|d,o=V()|0|o;while(y>>>0<T>>>0);T=o}while(!1);for(y=Lr(d|0,T|0,c|0,q|0)|0,V()|0,o=0;;){if((o|0)>(c|0)){Fe=77;break t}if(ke=xe+(y<<3)|0,M=u[ke+4>>2]|0,(M&-117440513|0)==(T|0)&&(u[ke>>2]|0)==(d|0)){Fe=79;break}if(y=(y+1|0)%(c|0)|0,ke=xe+(y<<3)|0,(u[ke>>2]|0)==(d|0)&&(u[ke+4>>2]|0)==(T|0))break;o=o+1|0}if((Fe|0)==79&&(Fe=0,!0&(M&117440512|0)==100663296))break;ke=l+(b<<3)|0,u[ke>>2]=R,u[ke+4>>2]=p,b=b+1|0}while(!1);if(p=D+1|0,(p|0)>=(c|0)){p=z;break n}ke=Ie+(p<<3)|0,D=p,R=u[ke>>2]|0,p=u[ke+4>>2]|0}}else b=0,p=z}else b=0,p=0;while(!1);if(_i(xe|0,0,$|0)|0,wA(Ie|0,ie|0,p<<3|0)|0,st(ie),p)l=l+(b<<3)|0,c=p;else break e}if((Fe|0)==17)!0&(p&117440512|0)==0?(p=4,Fe=28):Fe=22;else if((Fe|0)==32)et(23313,22674,362,22684);else{if((Fe|0)==42)return st(Ie),st(xe),ke=10,ke|0;if((Fe|0)==49)return st(Ie),st(xe),ke=13,ke|0;if((Fe|0)==77)et(23313,22674,462,22684);else{if((Fe|0)==84)return st(ie),st(Ie),st(xe),ke=p,ke|0;if((Fe|0)==85){wA(l|0,Ie|0,c<<3|0)|0;break}}}if((Fe|0)==22)return st(Ie),st(xe),ke=5,ke|0;if((Fe|0)==28)return st(Ie),st(xe),ke=p,ke|0}while(!1);return st(Ie),st(xe),ke=0,ke|0}function _A(o,l,c,d,p,b,y){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0,b=b|0,y=y|0;var T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0;if(ie=I,I=I+16|0,Q=ie,!((c|0)>0|(c|0)==0&l>>>0>0))return Q=0,I=ie,Q|0;if((y|0)>=16)return Q=12,I=ie,Q|0;q=0,J=0,z=0,T=0;e:for(;;){if(R=o+(q<<3)|0,M=u[R>>2]|0,R=u[R+4>>2]|0,D=Re(M|0,R|0,52)|0,V()|0,(D&15|0)>(y|0)){T=12,M=11;break}if(vo(Q,M,R,y),D=Q,R=u[D>>2]|0,D=u[D+4>>2]|0,(R|0)==0&(D|0)==0)M=z;else{M=z;do{if(!((T|0)<(b|0)|(T|0)==(b|0)&M>>>0<p>>>0)){M=10;break e}z=d+(M<<3)|0,u[z>>2]=R,u[z+4>>2]=D,M=vt(M|0,T|0,1,0)|0,T=V()|0,Kc(Q),z=Q,R=u[z>>2]|0,D=u[z+4>>2]|0}while(!((R|0)==0&(D|0)==0))}if(q=vt(q|0,J|0,1,0)|0,J=V()|0,(J|0)<(c|0)|(J|0)==(c|0)&q>>>0<l>>>0)z=M;else{T=0,M=11;break}}return(M|0)==10?(Q=14,I=ie,Q|0):(M|0)==11?(I=ie,T|0):0}function Dh(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0;q=I,I=I+16|0,z=q;e:do if((c|0)>0|(c|0)==0&l>>>0>0){for(R=0,y=0,b=0,D=0;;){if(M=o+(R<<3)|0,T=u[M>>2]|0,M=u[M+4>>2]|0,!((T|0)==0&(M|0)==0)&&(M=(po(T,M,d,z)|0)==0,T=z,y=vt(u[T>>2]|0,u[T+4>>2]|0,y|0,b|0)|0,b=V()|0,!M)){b=12;break}if(R=vt(R|0,D|0,1,0)|0,D=V()|0,!((D|0)<(c|0)|(D|0)==(c|0)&R>>>0<l>>>0))break e}return I=q,b|0}else y=0,b=0;while(!1);return u[p>>2]=y,u[p+4>>2]=b,p=0,I=q,p|0}function _o(o,l){return o=o|0,l=l|0,l=Re(o|0,l|0,52)|0,V()|0,l&1|0}function ai(o,l){o=o|0,l=l|0;var c=0,d=0,p=0;if(p=Re(o|0,l|0,52)|0,V()|0,p=p&15,!p)return p=0,p|0;for(d=1;;){if(c=Re(o|0,l|0,(15-d|0)*3|0)|0,V()|0,c=c&7,c|0){d=5;break}if(d>>>0<p>>>0)d=d+1|0;else{c=0,d=5;break}}return(d|0)==5?c|0:0}function bo(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0,M=0;if(M=Re(o|0,l|0,52)|0,V()|0,M=M&15,!M)return T=l,M=o,ht(T|0),M|0;for(T=1,c=0;;){b=(15-T|0)*3|0,d=Ue(7,0,b|0)|0,p=V()|0,y=Re(o|0,l|0,b|0)|0,V()|0,b=Ue(Ts(y&7)|0,0,b|0)|0,y=V()|0,o=b|o&~d,l=y|l&~p;e:do if(!c)if((b&d|0)==0&(y&p|0)==0)c=0;else if(d=Re(o|0,l|0,52)|0,V()|0,d=d&15,!d)c=1;else{c=1;t:for(;;){switch(y=Re(o|0,l|0,(15-c|0)*3|0)|0,V()|0,y&7){case 1:break t;case 0:break;default:{c=1;break e}}if(c>>>0<d>>>0)c=c+1|0;else{c=1;break e}}for(c=1;;)if(y=(15-c|0)*3|0,p=Re(o|0,l|0,y|0)|0,V()|0,b=Ue(7,0,y|0)|0,l=l&~(V()|0),y=Ue(Ts(p&7)|0,0,y|0)|0,o=o&~b|y,l=l|(V()|0),c>>>0<d>>>0)c=c+1|0;else{c=1;break}}while(!1);if(T>>>0<M>>>0)T=T+1|0;else break}return ht(l|0),o|0}function wr(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0;if(d=Re(o|0,l|0,52)|0,V()|0,d=d&15,!d)return c=l,d=o,ht(c|0),d|0;for(c=1;b=(15-c|0)*3|0,y=Re(o|0,l|0,b|0)|0,V()|0,p=Ue(7,0,b|0)|0,l=l&~(V()|0),b=Ue(Ts(y&7)|0,0,b|0)|0,o=b|o&~p,l=V()|0|l,c>>>0<d>>>0;)c=c+1|0;return ht(l|0),o|0}function $l(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0,M=0;if(M=Re(o|0,l|0,52)|0,V()|0,M=M&15,!M)return T=l,M=o,ht(T|0),M|0;for(T=1,c=0;;){b=(15-T|0)*3|0,d=Ue(7,0,b|0)|0,p=V()|0,y=Re(o|0,l|0,b|0)|0,V()|0,b=Ue(Hr(y&7)|0,0,b|0)|0,y=V()|0,o=b|o&~d,l=y|l&~p;e:do if(!c)if((b&d|0)==0&(y&p|0)==0)c=0;else if(d=Re(o|0,l|0,52)|0,V()|0,d=d&15,!d)c=1;else{c=1;t:for(;;){switch(y=Re(o|0,l|0,(15-c|0)*3|0)|0,V()|0,y&7){case 1:break t;case 0:break;default:{c=1;break e}}if(c>>>0<d>>>0)c=c+1|0;else{c=1;break e}}for(c=1;;)if(p=(15-c|0)*3|0,b=Ue(7,0,p|0)|0,y=l&~(V()|0),l=Re(o|0,l|0,p|0)|0,V()|0,l=Ue(Hr(l&7)|0,0,p|0)|0,o=o&~b|l,l=y|(V()|0),c>>>0<d>>>0)c=c+1|0;else{c=1;break}}while(!1);if(T>>>0<M>>>0)T=T+1|0;else break}return ht(l|0),o|0}function Eo(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0;if(d=Re(o|0,l|0,52)|0,V()|0,d=d&15,!d)return c=l,d=o,ht(c|0),d|0;for(c=1;y=(15-c|0)*3|0,b=Ue(7,0,y|0)|0,p=l&~(V()|0),l=Re(o|0,l|0,y|0)|0,V()|0,l=Ue(Hr(l&7)|0,0,y|0)|0,o=l|o&~b,l=V()|0|p,c>>>0<d>>>0;)c=c+1|0;return ht(l|0),o|0}function Qc(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0;if(M=I,I=I+64|0,T=M+40|0,d=M+24|0,p=M+12|0,b=M,Ue(l|0,0,52)|0,c=V()|0|134225919,!l)return(u[o+4>>2]|0)>2||(u[o+8>>2]|0)>2||(u[o+12>>2]|0)>2?(y=0,T=0,ht(y|0),I=M,T|0):(Ue(bs(o)|0,0,45)|0,y=V()|0|c,T=-1,ht(y|0),I=M,T|0);if(u[T>>2]=u[o>>2],u[T+4>>2]=u[o+4>>2],u[T+8>>2]=u[o+8>>2],u[T+12>>2]=u[o+12>>2],y=T+4|0,(l|0)>0)for(o=-1;u[d>>2]=u[y>>2],u[d+4>>2]=u[y+4>>2],u[d+8>>2]=u[y+8>>2],l&1?(Ao(y),u[p>>2]=u[y>>2],u[p+4>>2]=u[y+4>>2],u[p+8>>2]=u[y+8>>2],oo(p)):(Xl(y),u[p>>2]=u[y>>2],u[p+4>>2]=u[y+4>>2],u[p+8>>2]=u[y+8>>2],vs(p)),ys(d,p,b),Zt(b),D=(15-l|0)*3|0,R=Ue(7,0,D|0)|0,c=c&~(V()|0),D=Ue(fa(b)|0,0,D|0)|0,o=D|o&~R,c=V()|0|c,(l|0)>1;)l=l+-1|0;else o=-1;e:do if((u[y>>2]|0)<=2&&(u[T+8>>2]|0)<=2&&(u[T+12>>2]|0)<=2){if(d=bs(T)|0,l=Ue(d|0,0,45)|0,l=l|o,o=V()|0|c&-1040385,b=ca(T)|0,!(Ct(d)|0)){if((b|0)<=0)break;for(p=0;;){if(d=Re(l|0,o|0,52)|0,V()|0,d=d&15,d)for(c=1;D=(15-c|0)*3|0,T=Re(l|0,o|0,D|0)|0,V()|0,R=Ue(7,0,D|0)|0,o=o&~(V()|0),D=Ue(Ts(T&7)|0,0,D|0)|0,l=l&~R|D,o=o|(V()|0),c>>>0<d>>>0;)c=c+1|0;if(p=p+1|0,(p|0)==(b|0))break e}}p=Re(l|0,o|0,52)|0,V()|0,p=p&15;t:do if(p){c=1;n:for(;;){switch(D=Re(l|0,o|0,(15-c|0)*3|0)|0,V()|0,D&7){case 1:break n;case 0:break;default:break t}if(c>>>0<p>>>0)c=c+1|0;else break t}if(jl(d,u[T>>2]|0)|0)for(c=1;T=(15-c|0)*3|0,R=Ue(7,0,T|0)|0,D=o&~(V()|0),o=Re(l|0,o|0,T|0)|0,V()|0,o=Ue(Hr(o&7)|0,0,T|0)|0,l=l&~R|o,o=D|(V()|0),c>>>0<p>>>0;)c=c+1|0;else for(c=1;D=(15-c|0)*3|0,T=Re(l|0,o|0,D|0)|0,V()|0,R=Ue(7,0,D|0)|0,o=o&~(V()|0),D=Ue(Ts(T&7)|0,0,D|0)|0,l=l&~R|D,o=o|(V()|0),c>>>0<p>>>0;)c=c+1|0}while(!1);if((b|0)>0){c=0;do l=bo(l,o)|0,o=V()|0,c=c+1|0;while((c|0)!=(b|0))}}else l=0,o=0;while(!1);return R=o,D=l,ht(R|0),I=M,D|0}function Ci(o){return o=o|0,(o|0)%2|0|0}function Xc(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0;return p=I,I=I+16|0,d=p,l>>>0>15?(d=4,I=p,d|0):(u[o+4>>2]&2146435072|0)==2146435072||(u[o+8+4>>2]&2146435072|0)==2146435072?(d=3,I=p,d|0):(Sh(o,l,d),l=Qc(d,l)|0,d=V()|0,u[c>>2]=l,u[c+4>>2]=d,(l|0)==0&(d|0)==0&&et(23313,22674,786,22697),d=0,I=p,d|0)}function Jl(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0;if(p=c+4|0,b=Re(o|0,l|0,52)|0,V()|0,b=b&15,y=Re(o|0,l|0,45)|0,V()|0,d=(b|0)==0,Ct(y&127)|0){if(d)return y=1,y|0;d=1}else{if(d)return y=0,y|0;!(u[p>>2]|0)&&!(u[c+8>>2]|0)?d=(u[c+12>>2]|0)!=0&1:d=1}for(c=1;c&1?oo(p):vs(p),y=Re(o|0,l|0,(15-c|0)*3|0)|0,V()|0,Uc(p,y&7),c>>>0<b>>>0;)c=c+1|0;return d|0}function ha(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0;if(D=I,I=I+16|0,M=D,R=Re(o|0,l|0,45)|0,V()|0,R=R&127,R>>>0>121)return u[c>>2]=0,u[c+4>>2]=0,u[c+8>>2]=0,u[c+12>>2]=0,R=5,I=D,R|0;e:do if(Ct(R)|0&&(b=Re(o|0,l|0,52)|0,V()|0,b=b&15,(b|0)!=0)){d=1;t:for(;;){switch(T=Re(o|0,l|0,(15-d|0)*3|0)|0,V()|0,T&7){case 5:break t;case 0:break;default:{d=l;break e}}if(d>>>0<b>>>0)d=d+1|0;else{d=l;break e}}for(p=1,d=l;l=(15-p|0)*3|0,y=Ue(7,0,l|0)|0,T=d&~(V()|0),d=Re(o|0,d|0,l|0)|0,V()|0,d=Ue(Hr(d&7)|0,0,l|0)|0,o=o&~y|d,d=T|(V()|0),p>>>0<b>>>0;)p=p+1|0}else d=l;while(!1);if(T=7696+(R*28|0)|0,u[c>>2]=u[T>>2],u[c+4>>2]=u[T+4>>2],u[c+8>>2]=u[T+8>>2],u[c+12>>2]=u[T+12>>2],!(Jl(o,d,c)|0))return R=0,I=D,R|0;if(y=c+4|0,u[M>>2]=u[y>>2],u[M+4>>2]=u[y+4>>2],u[M+8>>2]=u[y+8>>2],b=Re(o|0,d|0,52)|0,V()|0,T=b&15,b&1?(vs(y),b=T+1|0):b=T,!(Ct(R)|0))d=0;else{e:do if(!T)d=0;else for(l=1;;){if(p=Re(o|0,d|0,(15-l|0)*3|0)|0,V()|0,p=p&7,p|0){d=p;break e}if(l>>>0<T>>>0)l=l+1|0;else{d=0;break}}while(!1);d=(d|0)==4&1}if(!(hr(c,b,d,0)|0))(b|0)!=(T|0)&&(u[y>>2]=u[M>>2],u[y+4>>2]=u[M+4>>2],u[y+8>>2]=u[M+8>>2]);else{if(Ct(R)|0)do;while(hr(c,b,0,0)|0);(b|0)!=(T|0)&&Xl(y)}return R=0,I=D,R|0}function bA(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0;return b=I,I=I+16|0,d=b,p=ha(o,l,d)|0,p|0?(I=b,p|0):(p=Re(o|0,l|0,52)|0,V()|0,Rh(d,p&15,c),p=0,I=b,p|0)}function EA(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0;if(y=I,I=I+16|0,b=y,d=ha(o,l,b)|0,d|0)return b=d,I=y,b|0;d=Re(o|0,l|0,45)|0,V()|0,d=(Ct(d&127)|0)==0,p=Re(o|0,l|0,52)|0,V()|0,p=p&15;e:do if(!d){if(p|0)for(d=1;;){if(T=Ue(7,0,(15-d|0)*3|0)|0,!((T&o|0)==0&((V()|0)&l|0)==0))break e;if(d>>>0<p>>>0)d=d+1|0;else break}return ql(b,p,0,5,c),T=0,I=y,T|0}while(!1);return go(b,p,0,6,c),T=0,I=y,T|0}function Ri(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0;if(p=Re(o|0,l|0,45)|0,V()|0,!(Ct(p&127)|0))return p=2,u[c>>2]=p,0;if(p=Re(o|0,l|0,52)|0,V()|0,p=p&15,!p)return p=5,u[c>>2]=p,0;for(d=1;;){if(b=Ue(7,0,(15-d|0)*3|0)|0,!((b&o|0)==0&((V()|0)&l|0)==0)){d=2,o=6;break}if(d>>>0<p>>>0)d=d+1|0;else{d=5,o=6;break}}return(o|0)==6&&(u[c>>2]=d),0}function da(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0;z=I,I=I+128|0,R=z+112|0,b=z+96|0,D=z,p=Re(o|0,l|0,52)|0,V()|0,T=p&15,u[R>>2]=T,y=Re(o|0,l|0,45)|0,V()|0,y=y&127;e:do if(Ct(y)|0){if(T|0)for(d=1;;){if(M=Ue(7,0,(15-d|0)*3|0)|0,!((M&o|0)==0&((V()|0)&l|0)==0)){p=0;break e}if(d>>>0<T>>>0)d=d+1|0;else break}if(p&1)p=1;else return M=Ue(T+1|0,0,52)|0,D=V()|0|l&-15728641,R=Ue(7,0,(14-T|0)*3|0)|0,D=da((M|o)&~R,D&~(V()|0),c)|0,I=z,D|0}else p=0;while(!1);if(d=ha(o,l,b)|0,!d){p?(ho(b,R,D),M=5):(Zl(b,R,D),M=6);e:do if(Ct(y)|0)if(!T)o=5;else for(d=1;;){if(y=Ue(7,0,(15-d|0)*3|0)|0,!((y&o|0)==0&((V()|0)&l|0)==0)){o=2;break e}if(d>>>0<T>>>0)d=d+1|0;else{o=5;break}}else o=2;while(!1);_i(c|0,-1,o<<2|0)|0;e:do if(p)for(b=0;;){if(y=D+(b<<4)|0,Lh(y,u[R>>2]|0)|0,y=u[y>>2]|0,T=u[c>>2]|0,(T|0)==-1|(T|0)==(y|0))d=c;else{p=0;do{if(p=p+1|0,p>>>0>=o>>>0){d=1;break e}d=c+(p<<2)|0,T=u[d>>2]|0}while(!((T|0)==-1|(T|0)==(y|0)))}if(u[d>>2]=y,b=b+1|0,b>>>0>=M>>>0){d=0;break}}else for(b=0;;){if(y=D+(b<<4)|0,hr(y,u[R>>2]|0,0,1)|0,y=u[y>>2]|0,T=u[c>>2]|0,(T|0)==-1|(T|0)==(y|0))d=c;else{p=0;do{if(p=p+1|0,p>>>0>=o>>>0){d=1;break e}d=c+(p<<2)|0,T=u[d>>2]|0}while(!((T|0)==-1|(T|0)==(y|0)))}if(u[d>>2]=y,b=b+1|0,b>>>0>=M>>>0){d=0;break}}while(!1)}return D=d,I=z,D|0}function Wc(){return 12}function yo(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0,M=0;if(o>>>0>15)return T=4,T|0;if(Ue(o|0,0,52)|0,T=V()|0|134225919,!o){c=0,d=0;do Ct(d)|0&&(Ue(d|0,0,45)|0,y=T|(V()|0),o=l+(c<<3)|0,u[o>>2]=-1,u[o+4>>2]=y,c=c+1|0),d=d+1|0;while((d|0)!=122);return c=0,c|0}c=0,y=0;do{if(Ct(y)|0){for(Ue(y|0,0,45)|0,d=1,p=-1,b=T|(V()|0);M=Ue(7,0,(15-d|0)*3|0)|0,p=p&~M,b=b&~(V()|0),(d|0)!=(o|0);)d=d+1|0;M=l+(c<<3)|0,u[M>>2]=p,u[M+4>>2]=b,c=c+1|0}y=y+1|0}while((y|0)!=122);return c=0,c|0}function qc(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0;if(ue=I,I=I+16|0,pe=ue,ge=Re(o|0,l|0,52)|0,V()|0,ge=ge&15,c>>>0>15)return ge=4,I=ue,ge|0;if((ge|0)<(c|0))return ge=12,I=ue,ge|0;if((ge|0)!=(c|0))if(b=Ue(c|0,0,52)|0,b=b|o,T=V()|0|l&-15728641,(ge|0)>(c|0)){M=c;do ie=Ue(7,0,(14-M|0)*3|0)|0,M=M+1|0,b=ie|b,T=V()|0|T;while((M|0)<(ge|0));ie=b}else ie=b;else ie=o,T=l;Q=Re(ie|0,T|0,45)|0,V()|0;e:do if(Ct(Q&127)|0){if(M=Re(ie|0,T|0,52)|0,V()|0,M=M&15,M|0)for(b=1;;){if(Q=Ue(7,0,(15-b|0)*3|0)|0,!((Q&ie|0)==0&((V()|0)&T|0)==0)){R=33;break e}if(b>>>0<M>>>0)b=b+1|0;else break}if(Q=d,u[Q>>2]=0,u[Q+4>>2]=0,(ge|0)>(c|0)){for(Q=l&-15728641,J=ge;;){if(q=J,J=J+-1|0,J>>>0>15|(ge|0)<(J|0)){R=19;break}if((ge|0)!=(J|0))if(b=Ue(J|0,0,52)|0,b=b|o,M=V()|0|Q,(ge|0)<(q|0))z=b;else{R=J;do z=Ue(7,0,(14-R|0)*3|0)|0,R=R+1|0,b=z|b,M=V()|0|M;while((R|0)<(ge|0));z=b}else z=o,M=l;if(D=Re(z|0,M|0,45)|0,V()|0,!(Ct(D&127)|0))b=0;else{D=Re(z|0,M|0,52)|0,V()|0,D=D&15;t:do if(!D)b=0;else for(R=1;;){if(b=Re(z|0,M|0,(15-R|0)*3|0)|0,V()|0,b=b&7,b|0)break t;if(R>>>0<D>>>0)R=R+1|0;else{b=0;break}}while(!1);b=(b|0)==0&1}if(M=Re(o|0,l|0,(15-q|0)*3|0)|0,V()|0,M=M&7,(M|0)==7){p=5,R=42;break}if(b=(b|0)!=0,(M|0)==1&b){p=5,R=42;break}if(z=M+(((M|0)!=0&b)<<31>>31)|0,z|0&&(R=ge-q|0,R=Sr(7,0,R,((R|0)<0)<<31>>31)|0,D=V()|0,b?(b=Gn(R|0,D|0,5,0)|0,b=vt(b|0,V()|0,-5,-1)|0,b=Qr(b|0,V()|0,6,0)|0,b=vt(b|0,V()|0,1,0)|0,M=V()|0):(b=R,M=D),q=z+-1|0,q=Gn(R|0,D|0,q|0,((q|0)<0)<<31>>31|0)|0,q=vt(b|0,M|0,q|0,V()|0)|0,z=V()|0,D=d,D=vt(q|0,z|0,u[D>>2]|0,u[D+4>>2]|0)|0,z=V()|0,q=d,u[q>>2]=D,u[q+4>>2]=z),(J|0)<=(c|0)){R=37;break}}if((R|0)==19)et(23313,22674,1099,22710);else if((R|0)==37){y=d,p=u[y+4>>2]|0,y=u[y>>2]|0;break}else if((R|0)==42)return I=ue,p|0}else p=0,y=0}else R=33;while(!1);e:do if((R|0)==33)if(Q=d,u[Q>>2]=0,u[Q+4>>2]=0,(ge|0)>(c|0)){for(b=ge;;){if(p=Re(o|0,l|0,(15-b|0)*3|0)|0,V()|0,p=p&7,(p|0)==7){p=5;break}if(y=ge-b|0,y=Sr(7,0,y,((y|0)<0)<<31>>31)|0,p=Gn(y|0,V()|0,p|0,0)|0,y=V()|0,Q=d,y=vt(u[Q>>2]|0,u[Q+4>>2]|0,p|0,y|0)|0,p=V()|0,Q=d,u[Q>>2]=y,u[Q+4>>2]=p,b=b+-1|0,(b|0)<=(c|0))break e}return I=ue,p|0}else p=0,y=0;while(!1);return po(ie,T,ge,pe)|0&&et(23313,22674,1063,22725),ge=pe,pe=u[ge+4>>2]|0,((p|0)>-1|(p|0)==-1&y>>>0>4294967295)&((pe|0)>(p|0)|((pe|0)==(p|0)?(u[ge>>2]|0)>>>0>y>>>0:0))?(ge=0,I=ue,ge|0):(et(23313,22674,1139,22710),0)}function Zc(o,l,c,d,p,b){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0,b=b|0;var y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0;if(z=I,I=I+16|0,y=z,p>>>0>15)return b=4,I=z,b|0;if(T=Re(c|0,d|0,52)|0,V()|0,T=T&15,(T|0)>(p|0))return b=12,I=z,b|0;if(po(c,d,p,y)|0&&et(23313,22674,1063,22725),D=y,R=u[D+4>>2]|0,!(((l|0)>-1|(l|0)==-1&o>>>0>4294967295)&((R|0)>(l|0)|((R|0)==(l|0)?(u[D>>2]|0)>>>0>o>>>0:0))))return b=2,I=z,b|0;D=p-T|0,p=Ue(p|0,0,52)|0,M=V()|0|d&-15728641,R=b,u[R>>2]=p|c,u[R+4>>2]=M,R=Re(c|0,d|0,45)|0,V()|0;e:do if(Ct(R&127)|0){if(T|0)for(y=1;;){if(R=Ue(7,0,(15-y|0)*3|0)|0,!((R&c|0)==0&((V()|0)&d|0)==0))break e;if(y>>>0<T>>>0)y=y+1|0;else break}if((D|0)<1)return b=0,I=z,b|0;for(R=T^15,d=-1,M=1,y=1;;){T=D-M|0,T=Sr(7,0,T,((T|0)<0)<<31>>31)|0,c=V()|0;do if(y)if(y=Gn(T|0,c|0,5,0)|0,y=vt(y|0,V()|0,-5,-1)|0,y=Qr(y|0,V()|0,6,0)|0,p=V()|0,(l|0)>(p|0)|(l|0)==(p|0)&o>>>0>y>>>0){l=vt(o|0,l|0,-1,-1)|0,l=Tn(l|0,V()|0,y|0,p|0)|0,y=V()|0,q=b,Q=u[q>>2]|0,q=u[q+4>>2]|0,ie=(R+d|0)*3|0,J=Ue(7,0,ie|0)|0,q=q&~(V()|0),d=Qr(l|0,y|0,T|0,c|0)|0,o=V()|0,p=vt(d|0,o|0,2,0)|0,ie=Ue(p|0,V()|0,ie|0)|0,q=V()|0|q,p=b,u[p>>2]=ie|Q&~J,u[p+4>>2]=q,o=Gn(d|0,o|0,T|0,c|0)|0,o=Tn(l|0,y|0,o|0,V()|0)|0,y=0,l=V()|0;break}else{ie=b,J=u[ie>>2]|0,ie=u[ie+4>>2]|0,Q=Ue(7,0,(R+d|0)*3|0)|0,ie=ie&~(V()|0),y=b,u[y>>2]=J&~Q,u[y+4>>2]=ie,y=1;break}else J=b,p=u[J>>2]|0,J=u[J+4>>2]|0,d=(R+d|0)*3|0,q=Ue(7,0,d|0)|0,J=J&~(V()|0),ie=Qr(o|0,l|0,T|0,c|0)|0,y=V()|0,d=Ue(ie|0,y|0,d|0)|0,J=V()|0|J,Q=b,u[Q>>2]=d|p&~q,u[Q+4>>2]=J,y=Gn(ie|0,y|0,T|0,c|0)|0,o=Tn(o|0,l|0,y|0,V()|0)|0,y=0,l=V()|0;while(!1);if((D|0)>(M|0))d=~M,M=M+1|0;else{l=0;break}}return I=z,l|0}while(!1);if((D|0)<1)return ie=0,I=z,ie|0;for(p=T^15,y=1;;)if(Q=D-y|0,Q=Sr(7,0,Q,((Q|0)<0)<<31>>31)|0,ie=V()|0,M=b,c=u[M>>2]|0,M=u[M+4>>2]|0,T=(p-y|0)*3|0,d=Ue(7,0,T|0)|0,M=M&~(V()|0),q=Qr(o|0,l|0,Q|0,ie|0)|0,J=V()|0,T=Ue(q|0,J|0,T|0)|0,M=V()|0|M,R=b,u[R>>2]=T|c&~d,u[R+4>>2]=M,ie=Gn(q|0,J|0,Q|0,ie|0)|0,o=Tn(o|0,l|0,ie|0,V()|0)|0,l=V()|0,(D|0)<=(y|0)){l=0;break}else y=y+1|0;return I=z,l|0}function vo(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0;p=Re(l|0,c|0,52)|0,V()|0,p=p&15,(l|0)==0&(c|0)==0|((d|0)>15|(p|0)>(d|0))?(d=-1,p=-1,l=0,c=0):(b=jc(l,c,p+1|0,d)|0,c=(V()|0)&-15728641,l=Ue(d|0,0,52)|0,l=b|l,c=c|(V()|0),b=(Jt(l,c)|0)==0,d=b?-1:d),b=o,u[b>>2]=l,u[b+4>>2]=c,u[o+8>>2]=p,u[o+12>>2]=d}function Kc(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0,M=0,R=0;if(c=o,l=u[c>>2]|0,c=u[c+4>>2]|0,!((l|0)==0&(c|0)==0)&&(d=Re(l|0,c|0,52)|0,V()|0,d=d&15,T=Ue(1,0,(d^15)*3|0)|0,l=vt(T|0,V()|0,l|0,c|0)|0,c=V()|0,T=o,u[T>>2]=l,u[T+4>>2]=c,T=o+8|0,y=u[T>>2]|0,!((d|0)<(y|0)))){for(M=o+12|0,b=d;;){if((b|0)==(y|0)){d=5;break}if(R=(b|0)==(u[M>>2]|0),p=(15-b|0)*3|0,d=Re(l|0,c|0,p|0)|0,V()|0,d=d&7,R&((d|0)==1&!0)){d=7;break}if(!((d|0)==7&!0)){d=10;break}if(R=Ue(1,0,p|0)|0,l=vt(l|0,c|0,R|0,V()|0)|0,c=V()|0,R=o,u[R>>2]=l,u[R+4>>2]=c,(b|0)>(y|0))b=b+-1|0;else{d=10;break}}if((d|0)==5){R=o,u[R>>2]=0,u[R+4>>2]=0,u[T>>2]=-1,u[M>>2]=-1;return}else if((d|0)==7){y=Ue(1,0,p|0)|0,y=vt(l|0,c|0,y|0,V()|0)|0,T=V()|0,R=o,u[R>>2]=y,u[R+4>>2]=T,u[M>>2]=b+-1;return}else if((d|0)==10)return}}function yA(o){o=+o;var l=0;return l=o<0?o+6.283185307179586:o,+(o>=6.283185307179586?l+-6.283185307179586:l)}function qi(o,l){return o=o|0,l=l|0,+At(+(+U[o>>3]-+U[l>>3]))<17453292519943298e-27?(l=+At(+(+U[o+8>>3]-+U[l+8>>3]))<17453292519943298e-27,l|0):(l=0,l|0)}function eu(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0;return p=+U[l>>3],d=+U[o>>3],b=+at(+((p-d)*.5)),c=+at(+((+U[l+8>>3]-+U[o+8>>3])*.5)),c=b*b+c*(+wt(+p)*+wt(+d)*c),+(+En(+ +bt(+c),+ +bt(+(1-c)))*2)}function xr(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0;return p=+U[l>>3],d=+U[o>>3],b=+at(+((p-d)*.5)),c=+at(+((+U[l+8>>3]-+U[o+8>>3])*.5)),c=b*b+c*(+wt(+p)*+wt(+d)*c),+(+En(+ +bt(+c),+ +bt(+(1-c)))*2*6371.007180918475)}function tu(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0;return p=+U[l>>3],d=+U[o>>3],b=+at(+((p-d)*.5)),c=+at(+((+U[l+8>>3]-+U[o+8>>3])*.5)),c=b*b+c*(+wt(+p)*+wt(+d)*c),+(+En(+ +bt(+c),+ +bt(+(1-c)))*2*6371.007180918475*1e3)}function $c(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0;return b=+U[l>>3],d=+wt(+b),p=+U[l+8>>3]-+U[o+8>>3],y=d*+at(+p),c=+U[o>>3],+ +En(+y,+(+at(+b)*+wt(+c)-+wt(+p)*(d*+at(+c))))}function ws(o,l,c,d){o=o|0,l=+l,c=+c,d=d|0;var p=0,b=0,y=0,T=0;if(c<1e-16){u[d>>2]=u[o>>2],u[d+4>>2]=u[o+4>>2],u[d+8>>2]=u[o+8>>2],u[d+12>>2]=u[o+12>>2];return}b=l<0?l+6.283185307179586:l,b=l>=6.283185307179586?b+-6.283185307179586:b;do if(b<1e-16)l=+U[o>>3]+c,U[d>>3]=l,p=d;else{if(p=+At(+(b+-3.141592653589793))<1e-16,l=+U[o>>3],p){l=l-c,U[d>>3]=l,p=d;break}if(y=+wt(+c),c=+at(+c),l=y*+at(+l)+ +wt(+b)*(c*+wt(+l)),l=l>1?1:l,l=+fn(+(l<-1?-1:l)),U[d>>3]=l,+At(+(l+-1.5707963267948966))<1e-16){U[d>>3]=1.5707963267948966,U[d+8>>3]=0;return}if(+At(+(l+1.5707963267948966))<1e-16){U[d>>3]=-1.5707963267948966,U[d+8>>3]=0;return}if(T=+wt(+l),b=c*+at(+b)/T,c=+U[o>>3],l=(y-+at(+l)*+at(+c))/+wt(+c)/T,y=b>1?1:b,l=l>1?1:l,l=+U[o+8>>3]+ +En(+(y<-1?-1:y),+(l<-1?-1:l)),l>3.141592653589793)do l=l+-6.283185307179586;while(l>3.141592653589793);if(l<-3.141592653589793)do l=l+6.283185307179586;while(l<-3.141592653589793);U[d+8>>3]=l;return}while(!1);if(+At(+(l+-1.5707963267948966))<1e-16){U[p>>3]=1.5707963267948966,U[d+8>>3]=0;return}if(+At(+(l+1.5707963267948966))<1e-16){U[p>>3]=-1.5707963267948966,U[d+8>>3]=0;return}if(l=+U[o+8>>3],l>3.141592653589793)do l=l+-6.283185307179586;while(l>3.141592653589793);if(l<-3.141592653589793)do l=l+6.283185307179586;while(l<-3.141592653589793);U[d+8>>3]=l}function ga(o,l){return o=o|0,l=l|0,o>>>0>15?(l=4,l|0):(U[l>>3]=+U[20528+(o<<3)>>3],l=0,l|0)}function nu(o,l){return o=o|0,l=l|0,o>>>0>15?(l=4,l|0):(U[l>>3]=+U[20656+(o<<3)>>3],l=0,l|0)}function Jc(o,l){return o=o|0,l=l|0,o>>>0>15?(l=4,l|0):(U[l>>3]=+U[20784+(o<<3)>>3],l=0,l|0)}function xs(o,l){return o=o|0,l=l|0,o>>>0>15?(l=4,l|0):(U[l>>3]=+U[20912+(o<<3)>>3],l=0,l|0)}function To(o,l){o=o|0,l=l|0;var c=0;return o>>>0>15?(l=4,l|0):(c=Sr(7,0,o,((o|0)<0)<<31>>31)|0,c=Gn(c|0,V()|0,120,0)|0,o=V()|0,u[l>>2]=c|2,u[l+4>>2]=o,l=0,l|0)}function iu(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0;return q=+U[l>>3],D=+U[o>>3],M=+at(+((q-D)*.5)),b=+U[l+8>>3],R=+U[o+8>>3],y=+at(+((b-R)*.5)),T=+wt(+D),z=+wt(+q),y=M*M+y*(z*T*y),y=+En(+ +bt(+y),+ +bt(+(1-y)))*2,M=+U[c>>3],q=+at(+((M-q)*.5)),d=+U[c+8>>3],b=+at(+((d-b)*.5)),p=+wt(+M),b=q*q+b*(z*p*b),b=+En(+ +bt(+b),+ +bt(+(1-b)))*2,M=+at(+((D-M)*.5)),d=+at(+((R-d)*.5)),d=M*M+d*(T*p*d),d=+En(+ +bt(+d),+ +bt(+(1-d)))*2,p=(y+b+d)*.5,+(+Un(+ +bt(+(+On(+(p*.5))*+On(+((p-y)*.5))*+On(+((p-b)*.5))*+On(+((p-d)*.5)))))*4)}function wo(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0;if(T=I,I=I+192|0,b=T+168|0,y=T,p=bA(o,l,b)|0,p|0)return c=p,I=T,c|0;if(EA(o,l,y)|0&&et(23313,22742,386,22751),l=u[y>>2]|0,(l|0)>0){if(d=+iu(y+8|0,y+8+(((l|0)!=1&1)<<4)|0,b)+0,(l|0)!=1){o=1;do p=o,o=o+1|0,d=d+ +iu(y+8+(p<<4)|0,y+8+(((o|0)%(l|0)|0)<<4)|0,b);while((o|0)<(l|0))}}else d=0;return U[c>>3]=d,c=0,I=T,c|0}function Nh(o,l,c){return o=o|0,l=l|0,c=c|0,o=wo(o,l,c)|0,o|0||(U[c>>3]=+U[c>>3]*6371.007180918475*6371.007180918475),o|0}function Bh(o,l,c){return o=o|0,l=l|0,c=c|0,o=wo(o,l,c)|0,o|0||(U[c>>3]=+U[c>>3]*6371.007180918475*6371.007180918475*1e3*1e3),o|0}function Ph(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0;if(T=I,I=I+176|0,y=T,o=fo(o,l,y)|0,o|0)return y=o,I=T,y|0;if(U[c>>3]=0,o=u[y>>2]|0,(o|0)<=1)return y=0,I=T,y|0;l=o+-1|0,o=0,d=+U[y+8>>3],p=+U[y+16>>3],b=0;do o=o+1|0,R=d,d=+U[y+8+(o<<4)>>3],D=+at(+((d-R)*.5)),M=p,p=+U[y+8+(o<<4)+8>>3],M=+at(+((p-M)*.5)),M=D*D+M*(+wt(+d)*+wt(+R)*M),b=b+ +En(+ +bt(+M),+ +bt(+(1-M)))*2;while((o|0)<(l|0));return U[c>>3]=b,y=0,I=T,y|0}function ef(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0;if(T=I,I=I+176|0,y=T,o=fo(o,l,y)|0,o|0)return y=o,b=+U[c>>3],b=b*6371.007180918475,U[c>>3]=b,I=T,y|0;if(U[c>>3]=0,o=u[y>>2]|0,(o|0)<=1)return y=0,b=0,b=b*6371.007180918475,U[c>>3]=b,I=T,y|0;l=o+-1|0,o=0,d=+U[y+8>>3],p=+U[y+16>>3],b=0;do o=o+1|0,R=d,d=+U[y+8+(o<<4)>>3],D=+at(+((d-R)*.5)),M=p,p=+U[y+8+(o<<4)+8>>3],M=+at(+((p-M)*.5)),M=D*D+M*(+wt(+R)*+wt(+d)*M),b=b+ +En(+ +bt(+M),+ +bt(+(1-M)))*2;while((o|0)!=(l|0));return U[c>>3]=b,y=0,D=b,D=D*6371.007180918475,U[c>>3]=D,I=T,y|0}function tf(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0;if(T=I,I=I+176|0,y=T,o=fo(o,l,y)|0,o|0)return y=o,b=+U[c>>3],b=b*6371.007180918475,b=b*1e3,U[c>>3]=b,I=T,y|0;if(U[c>>3]=0,o=u[y>>2]|0,(o|0)<=1)return y=0,b=0,b=b*6371.007180918475,b=b*1e3,U[c>>3]=b,I=T,y|0;l=o+-1|0,o=0,d=+U[y+8>>3],p=+U[y+16>>3],b=0;do o=o+1|0,R=d,d=+U[y+8+(o<<4)>>3],D=+at(+((d-R)*.5)),M=p,p=+U[y+8+(o<<4)+8>>3],M=+at(+((p-M)*.5)),M=D*D+M*(+wt(+R)*+wt(+d)*M),b=b+ +En(+ +bt(+M),+ +bt(+(1-M)))*2;while((o|0)!=(l|0));return U[c>>3]=b,y=0,D=b,D=D*6371.007180918475,D=D*1e3,U[c>>3]=D,I=T,y|0}function nf(o){o=o|0;var l=0,c=0,d=0;return l=pi(1,12)|0,l||et(22832,22787,49,22845),c=o+4|0,d=u[c>>2]|0,d|0?(d=d+8|0,u[d>>2]=l,u[c>>2]=l,l|0):(u[o>>2]|0&&et(22862,22787,61,22885),d=o,u[d>>2]=l,u[c>>2]=l,l|0)}function Zi(o,l){o=o|0,l=l|0;var c=0,d=0;return d=$i(24)|0,d||et(22899,22787,78,22913),u[d>>2]=u[l>>2],u[d+4>>2]=u[l+4>>2],u[d+8>>2]=u[l+8>>2],u[d+12>>2]=u[l+12>>2],u[d+16>>2]=0,l=o+4|0,c=u[l>>2]|0,c|0?(u[c+16>>2]=d,u[l>>2]=d,d|0):(u[o>>2]|0&&et(22928,22787,82,22913),u[o>>2]=d,u[l>>2]=d,d|0)}function Li(o){o=o|0;var l=0,c=0,d=0,p=0;if(o)for(d=1;;){if(l=u[o>>2]|0,l|0)do{if(c=u[l>>2]|0,c|0)do p=c,c=u[c+16>>2]|0,st(p);while(c|0);p=l,l=u[l+8>>2]|0,st(p)}while(l|0);if(l=o,o=u[o+8>>2]|0,d||st(l),o)d=0;else break}}function ma(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0,$=0,xe=0,Ie=0,Fe=0,ke=0,Bt=0,Ot=0,Dt=0,ut=0,dt=0,qe=0,Yt=0,ot=0;if(p=o+8|0,u[p>>2]|0)return ot=1,ot|0;if(d=u[o>>2]|0,!d)return ot=0,ot|0;l=d,c=0;do c=c+1|0,l=u[l+8>>2]|0;while(l|0);if(c>>>0<2)return ot=0,ot|0;qe=$i(c<<2)|0,qe||et(22948,22787,317,22967),dt=$i(c<<5)|0,dt||et(22989,22787,321,22967),u[o>>2]=0,Ie=o+4|0,u[Ie>>2]=0,u[p>>2]=0,c=0,ut=0,xe=0,z=0;e:for(;;){if(D=u[d>>2]|0,D){b=0,y=D;do{if(M=+U[y+8>>3],l=y,y=u[y+16>>2]|0,R=(y|0)==0,p=R?D:y,T=+U[p+8>>3],+At(+(M-T))>3.141592653589793){ot=14;break}b=b+(T-M)*(+U[l>>3]+ +U[p>>3])}while(!R);if((ot|0)==14){ot=0,b=0,l=D;do $=+U[l+8>>3],Dt=l+16|0,Ot=u[Dt>>2]|0,Ot=Ot|0?Ot:D,le=+U[Ot+8>>3],b=b+(+U[l>>3]+ +U[Ot>>3])*((le<0?le+6.283185307179586:le)-($<0?$+6.283185307179586:$)),l=u[(l|0?Dt:d)>>2]|0;while(l|0)}b>0?(u[qe+(ut<<2)>>2]=d,ut=ut+1|0,p=xe,l=z):ot=19}else ot=19;if((ot|0)==19){ot=0;do if(c){if(l=c+8|0,u[l>>2]|0){ot=21;break e}if(c=pi(1,12)|0,!c){ot=23;break e}u[l>>2]=c,p=c+4|0,y=c,l=z}else if(z){p=Ie,y=z+8|0,l=d,c=o;break}else if(u[o>>2]|0){ot=27;break e}else{p=Ie,y=o,l=d,c=o;break}while(!1);if(u[y>>2]=d,u[p>>2]=d,y=dt+(xe<<5)|0,R=u[d>>2]|0,R){for(D=dt+(xe<<5)+8|0,U[D>>3]=17976931348623157e292,z=dt+(xe<<5)+24|0,U[z>>3]=17976931348623157e292,U[y>>3]=-17976931348623157e292,q=dt+(xe<<5)+16|0,U[q>>3]=-17976931348623157e292,ge=17976931348623157e292,ue=-17976931348623157e292,p=0,J=R,M=17976931348623157e292,ie=17976931348623157e292,pe=-17976931348623157e292,T=-17976931348623157e292;b=+U[J>>3],$=+U[J+8>>3],J=u[J+16>>2]|0,Q=(J|0)==0,le=+U[(Q?R:J)+8>>3],b<M&&(U[D>>3]=b,M=b),$<ie&&(U[z>>3]=$,ie=$),b>pe?U[y>>3]=b:b=pe,$>T&&(U[q>>3]=$,T=$),ge=$>0&$<ge?$:ge,ue=$<0&$>ue?$:ue,p=p|+At(+($-le))>3.141592653589793,!Q;)pe=b;p&&(U[q>>3]=ue,U[z>>3]=ge)}else u[y>>2]=0,u[y+4>>2]=0,u[y+8>>2]=0,u[y+12>>2]=0,u[y+16>>2]=0,u[y+20>>2]=0,u[y+24>>2]=0,u[y+28>>2]=0;p=xe+1|0}if(Dt=d+8|0,d=u[Dt>>2]|0,u[Dt>>2]=0,d)xe=p,z=l;else{ot=45;break}}if((ot|0)==21)et(22765,22787,35,22799);else if((ot|0)==23)et(22819,22787,37,22799);else if((ot|0)==27)et(22862,22787,61,22885);else if((ot|0)==45){e:do if((ut|0)>0){for(Dt=(p|0)==0,Bt=p<<2,Ot=(o|0)==0,ke=0,l=0;;){if(Fe=u[qe+(ke<<2)>>2]|0,Dt)ot=73;else{if(xe=$i(Bt)|0,!xe){ot=50;break}if(Ie=$i(Bt)|0,!Ie){ot=52;break}t:do if(Ot)c=0;else{for(p=0,c=0,y=o;d=dt+(p<<5)|0,xo(u[y>>2]|0,d,u[Fe>>2]|0)|0?(u[xe+(c<<2)>>2]=y,u[Ie+(c<<2)>>2]=d,Q=c+1|0):Q=c,y=u[y+8>>2]|0,y;)p=p+1|0,c=Q;if((Q|0)>0)if(d=u[xe>>2]|0,(Q|0)==1)c=d;else for(q=0,J=-1,c=d,z=d;;){for(R=u[z>>2]|0,d=0,y=0;p=u[u[xe+(y<<2)>>2]>>2]|0,(p|0)==(R|0)?D=d:D=d+((xo(p,u[Ie+(y<<2)>>2]|0,u[R>>2]|0)|0)&1)|0,y=y+1|0,(y|0)!=(Q|0);)d=D;if(p=(D|0)>(J|0),c=p?z:c,d=q+1|0,(d|0)==(Q|0))break t;q=d,J=p?D:J,z=u[xe+(d<<2)>>2]|0}else c=0}while(!1);if(st(xe),st(Ie),c){if(p=c+4|0,d=u[p>>2]|0,d)c=d+8|0;else if(u[c>>2]|0){ot=70;break}u[c>>2]=Fe,u[p>>2]=Fe}else ot=73}if((ot|0)==73){if(ot=0,l=u[Fe>>2]|0,l|0)do Ie=l,l=u[l+16>>2]|0,st(Ie);while(l|0);st(Fe),l=1}if(ke=ke+1|0,(ke|0)>=(ut|0)){Yt=l;break e}}(ot|0)==50?et(23004,22787,249,23023):(ot|0)==52?et(23042,22787,252,23023):(ot|0)==70&&et(22862,22787,61,22885)}else Yt=0;while(!1);return st(qe),st(dt),ot=Yt,ot|0}return 0}function xo(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0;if(!(dA(l,c)|0)||(l=ro(l)|0,d=+U[c>>3],p=+U[c+8>>3],p=l&p<0?p+6.283185307179586:p,o=u[o>>2]|0,!o))return o=0,o|0;if(l){l=0,R=p,c=o;e:for(;;){for(;y=+U[c>>3],p=+U[c+8>>3],c=c+16|0,D=u[c>>2]|0,D=D|0?D:o,b=+U[D>>3],T=+U[D+8>>3],y>b?(M=y,y=T):(M=b,b=y,y=p,p=T),d=d==b|d==M?d+2220446049250313e-31:d,!!(d<b|d>M);)if(c=u[c>>2]|0,!c){c=22;break e}if(T=y<0?y+6.283185307179586:y,y=p<0?p+6.283185307179586:p,R=T==R|y==R?R+-2220446049250313e-31:R,M=T+(y-T)*((d-b)/(M-b)),(M<0?M+6.283185307179586:M)>R&&(l=l^1),c=u[c>>2]|0,!c){c=22;break}}if((c|0)==22)return l|0}else{l=0,R=p,c=o;e:for(;;){for(;y=+U[c>>3],p=+U[c+8>>3],c=c+16|0,D=u[c>>2]|0,D=D|0?D:o,b=+U[D>>3],T=+U[D+8>>3],y>b?(M=y,y=T):(M=b,b=y,y=p,p=T),d=d==b|d==M?d+2220446049250313e-31:d,!!(d<b|d>M);)if(c=u[c>>2]|0,!c){c=22;break e}if(R=y==R|p==R?R+-2220446049250313e-31:R,y+(p-y)*((d-b)/(M-b))>R&&(l=l^1),c=u[c>>2]|0,!c){c=22;break}}if((c|0)==22)return l|0}return 0}function Fi(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0;if(ue=I,I=I+32|0,ge=ue+16|0,pe=ue,b=Re(o|0,l|0,52)|0,V()|0,b=b&15,J=Re(c|0,d|0,52)|0,V()|0,(b|0)!=(J&15|0))return ge=12,I=ue,ge|0;if(R=Re(o|0,l|0,45)|0,V()|0,R=R&127,D=Re(c|0,d|0,45)|0,V()|0,D=D&127,R>>>0>121|D>>>0>121)return ge=5,I=ue,ge|0;if(J=(R|0)!=(D|0),J){if(T=fA(R,D)|0,(T|0)==7)return ge=1,I=ue,ge|0;M=fA(D,R)|0,(M|0)==7?et(23066,23090,161,23100):(Q=T,y=M)}else Q=0,y=0;z=Ct(R)|0,q=Ct(D)|0,u[ge>>2]=0,u[ge+4>>2]=0,u[ge+8>>2]=0,u[ge+12>>2]=0;do if(Q){if(D=u[4272+(R*28|0)+(Q<<2)>>2]|0,T=(D|0)>0,q)if(T){R=0,M=c,T=d;do M=$l(M,T)|0,T=V()|0,y=Hr(y)|0,(y|0)==1&&(y=Hr(1)|0),R=R+1|0;while((R|0)!=(D|0));D=y,R=M,M=T}else D=y,R=c,M=d;else if(T){R=0,M=c,T=d;do M=Eo(M,T)|0,T=V()|0,y=Hr(y)|0,R=R+1|0;while((R|0)!=(D|0));D=y,R=M,M=T}else D=y,R=c,M=d;if(Jl(R,M,ge)|0,J||et(23115,23090,191,23100),T=(z|0)!=0,y=(q|0)!=0,T&y&&et(23142,23090,192,23100),T){if(y=ai(o,l)|0,(y|0)==7){b=5;break}if(Xe[21872+(y*7|0)+Q>>0]|0){b=1;break}M=u[21040+(y*28|0)+(Q<<2)>>2]|0,R=M}else if(y){if(y=ai(R,M)|0,(y|0)==7){b=5;break}if(Xe[21872+(y*7|0)+D>>0]|0){b=1;break}R=0,M=u[21040+(D*28|0)+(y<<2)>>2]|0}else R=0,M=0;if((R|M|0)<0)b=5;else{if((M|0)>0){T=ge+4|0,y=0;do uo(T),y=y+1|0;while((y|0)!=(M|0))}if(u[pe>>2]=0,u[pe+4>>2]=0,u[pe+8>>2]=0,Uc(pe,Q),b|0)for(;Ci(b)|0?oo(pe):vs(pe),(b|0)>1;)b=b+-1|0;if((R|0)>0){b=0;do uo(pe),b=b+1|0;while((b|0)!=(R|0))}ie=ge+4|0,Nn(ie,pe,ie),Zt(ie),ie=51}}else if(Jl(c,d,ge)|0,(z|0)!=0&(q|0)!=0)if((D|0)!=(R|0)&&et(23173,23090,261,23100),y=ai(o,l)|0,b=ai(c,d)|0,(y|0)==7|(b|0)==7)b=5;else if(Xe[21872+(y*7|0)+b>>0]|0)b=1;else if(y=u[21040+(y*28|0)+(b<<2)>>2]|0,(y|0)>0){T=ge+4|0,b=0;do uo(T),b=b+1|0;while((b|0)!=(y|0));ie=51}else ie=51;else ie=51;while(!1);return(ie|0)==51&&(b=ge+4|0,u[p>>2]=u[b>>2],u[p+4>>2]=u[b+4>>2],u[p+8>>2]=u[b+8>>2],b=0),ge=b,I=ue,ge|0}function vA(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0;if(ie=I,I=I+48|0,R=ie+36|0,y=ie+24|0,T=ie+12|0,M=ie,p=Re(o|0,l|0,52)|0,V()|0,p=p&15,q=Re(o|0,l|0,45)|0,V()|0,q=q&127,q>>>0>121)return d=5,I=ie,d|0;if(D=Ct(q)|0,Ue(p|0,0,52)|0,pe=V()|0|134225919,b=d,u[b>>2]=-1,u[b+4>>2]=pe,!p)return p=fa(c)|0,(p|0)==7||(p=Es(q,p)|0,(p|0)==127)?(pe=1,I=ie,pe|0):(J=Ue(p|0,0,45)|0,Q=V()|0,q=d,Q=u[q+4>>2]&-1040385|Q,pe=d,u[pe>>2]=u[q>>2]|J,u[pe+4>>2]=Q,pe=0,I=ie,pe|0);for(u[R>>2]=u[c>>2],u[R+4>>2]=u[c+4>>2],u[R+8>>2]=u[c+8>>2],c=p;;){if(b=c,c=c+-1|0,u[y>>2]=u[R>>2],u[y+4>>2]=u[R+4>>2],u[y+8>>2]=u[R+8>>2],Ci(b)|0){if(p=Ql(R)|0,p|0){c=13;break}u[T>>2]=u[R>>2],u[T+4>>2]=u[R+4>>2],u[T+8>>2]=u[R+8>>2],oo(T)}else{if(p=gA(R)|0,p|0){c=13;break}u[T>>2]=u[R>>2],u[T+4>>2]=u[R+4>>2],u[T+8>>2]=u[R+8>>2],vs(T)}if(ys(y,T,M),Zt(M),p=d,ue=u[p>>2]|0,p=u[p+4>>2]|0,le=(15-b|0)*3|0,ge=Ue(7,0,le|0)|0,p=p&~(V()|0),le=Ue(fa(M)|0,0,le|0)|0,p=V()|0|p,pe=d,u[pe>>2]=le|ue&~ge,u[pe+4>>2]=p,(b|0)<=1){c=14;break}}e:do if((c|0)!=13&&(c|0)==14)if((u[R>>2]|0)<=1&&(u[R+4>>2]|0)<=1&&(u[R+8>>2]|0)<=1){c=fa(R)|0,p=Es(q,c)|0,(p|0)==127?M=0:M=Ct(p)|0;t:do if(c){if(D){if(p=ai(o,l)|0,(p|0)==7){p=5;break e}if(b=u[21248+(p*28|0)+(c<<2)>>2]|0,(b|0)>0){p=c,c=0;do p=Ts(p)|0,c=c+1|0;while((c|0)!=(b|0))}else p=c;if((p|0)==1){p=9;break e}c=Es(q,p)|0,(c|0)==127&&et(23200,23090,411,23230),Ct(c)|0?et(23245,23090,412,23230):(Q=c,J=b,z=p)}else Q=p,J=0,z=c;if(T=u[4272+(q*28|0)+(z<<2)>>2]|0,(T|0)<=-1&&et(23276,23090,419,23230),!M){if((J|0)<0){p=5;break e}if(J|0){b=d,p=0,c=u[b>>2]|0,b=u[b+4>>2]|0;do c=wr(c,b)|0,b=V()|0,le=d,u[le>>2]=c,u[le+4>>2]=b,p=p+1|0;while((p|0)<(J|0))}if((T|0)<=0){p=Q,c=58;break}for(b=d,p=0,c=u[b>>2]|0,b=u[b+4>>2]|0;;)if(c=wr(c,b)|0,b=V()|0,le=d,u[le>>2]=c,u[le+4>>2]=b,p=p+1|0,(p|0)==(T|0)){p=Q,c=58;break t}}if(y=fA(Q,q)|0,(y|0)==7&&et(23066,23090,428,23230),p=d,c=u[p>>2]|0,p=u[p+4>>2]|0,(T|0)>0){b=0;do c=wr(c,p)|0,p=V()|0,le=d,u[le>>2]=c,u[le+4>>2]=p,b=b+1|0;while((b|0)!=(T|0))}if(p=ai(c,p)|0,(p|0)==7&&et(23313,23090,440,23230),c=cA(Q)|0,c=u[(c?21664:21456)+(y*28|0)+(p<<2)>>2]|0,(c|0)<0&&et(23313,23090,454,23230),!c)p=Q,c=58;else{y=d,p=0,b=u[y>>2]|0,y=u[y+4>>2]|0;do b=bo(b,y)|0,y=V()|0,le=d,u[le>>2]=b,u[le+4>>2]=y,p=p+1|0;while((p|0)<(c|0));p=Q,c=58}}else if((D|0)!=0&(M|0)!=0){if(c=ai(o,l)|0,b=d,b=ai(u[b>>2]|0,u[b+4>>2]|0)|0,(c|0)==7|(b|0)==7){p=5;break e}if(b=u[21248+(c*28|0)+(b<<2)>>2]|0,(b|0)<0){p=5;break e}if(!b)c=59;else{T=d,c=0,y=u[T>>2]|0,T=u[T+4>>2]|0;do y=wr(y,T)|0,T=V()|0,le=d,u[le>>2]=y,u[le+4>>2]=T,c=c+1|0;while((c|0)<(b|0));c=58}}else c=58;while(!1);if((c|0)==58&&M&&(c=59),(c|0)==59&&(le=d,(ai(u[le>>2]|0,u[le+4>>2]|0)|0)==1)){p=9;break}le=d,ge=u[le>>2]|0,le=u[le+4>>2]&-1040385,ue=Ue(p|0,0,45)|0,le=le|(V()|0),p=d,u[p>>2]=ge|ue,u[p+4>>2]=le,p=0}else p=1;while(!1);return le=p,I=ie,le|0}function ru(o,l,c,d,p,b){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0,b=b|0;var y=0,T=0;return T=I,I=I+16|0,y=T,p?o=15:(o=Fi(o,l,c,d,y)|0,o||(_h(y,b),o=0)),I=T,o|0}function Yr(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0;return y=I,I=I+16|0,b=y,d?c=15:(c=bh(c,b)|0,c||(c=vA(o,l,b,p)|0)),I=y,c|0}function rf(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0;return M=I,I=I+32|0,y=M+12|0,T=M,b=Fi(o,l,o,l,y)|0,b|0?(T=b,I=M,T|0):(o=Fi(o,l,c,d,T)|0,o|0?(T=o,I=M,T|0):(y=co(y,T)|0,T=p,u[T>>2]=y,u[T+4>>2]=((y|0)<0)<<31>>31,T=0,I=M,T|0))}function So(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0;return M=I,I=I+32|0,y=M+12|0,T=M,b=Fi(o,l,o,l,y)|0,!b&&(b=Fi(o,l,c,d,T)|0,!b)?(d=co(y,T)|0,d=vt(d|0,((d|0)<0)<<31>>31|0,1,0)|0,y=V()|0,T=p,u[T>>2]=d,u[T+4>>2]=y,T=0,I=M,T|0):(T=b,I=M,T|0)}function pa(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0,$=0,xe=0,Ie=0,Fe=0,ke=0;if(Fe=I,I=I+48|0,y=Fe+24|0,T=Fe+12|0,Ie=Fe,b=Fi(o,l,o,l,y)|0,!b&&(b=Fi(o,l,c,d,T)|0,!b)){$=co(y,T)|0,xe=(($|0)<0)<<31>>31,u[y>>2]=0,u[y+4>>2]=0,u[y+8>>2]=0,u[T>>2]=0,u[T+4>>2]=0,u[T+8>>2]=0,Fi(o,l,o,l,y)|0&&et(23313,23090,691,23299),Fi(o,l,c,d,T)|0&&et(23313,23090,696,23299),Gc(y),Gc(T),$?(z=u[y>>2]|0,Q=+($|0),ge=y+4|0,q=u[ge>>2]|0,ue=y+8|0,J=u[ue>>2]|0,le=y,d=z,b=q,c=J,ie=+((u[T>>2]|0)-z|0)/Q,pe=+((u[T+4>>2]|0)-q|0)/Q,Q=+((u[T+8>>2]|0)-J|0)/Q):(b=y+4|0,c=y+8|0,ge=b,ue=c,le=y,d=u[y>>2]|0,b=u[b>>2]|0,c=u[c>>2]|0,ie=0,pe=0,Q=0),u[Ie>>2]=d,J=Ie+4|0,u[J>>2]=b,q=Ie+8|0,u[q>>2]=c;e:do if(($|0)<0)b=0;else for(D=0,z=0,b=d;;){R=+(z>>>0)+4294967296*+(D|0),ke=ie*R+ +(b|0),M=pe*R+ +(u[ge>>2]|0),R=Q*R+ +(u[ue>>2]|0),c=~~+Ji(+ke),y=~~+Ji(+M),b=~~+Ji(+R),ke=+At(+(+(c|0)-ke)),M=+At(+(+(y|0)-M)),R=+At(+(+(b|0)-R));do if(ke>M&ke>R)c=0-(y+b)|0,d=y;else if(T=0-c|0,M>R){d=T-b|0;break}else{d=y,b=T-y|0;break}while(!1);if(u[Ie>>2]=c,u[J>>2]=d,u[q>>2]=b,Eh(Ie),b=vA(o,l,Ie,p+(z<<3)|0)|0,b|0)break e;if(!((D|0)<(xe|0)|(D|0)==(xe|0)&z>>>0<$>>>0)){b=0;break e}b=vt(z|0,D|0,1,0)|0,T=V()|0,D=T,z=b,b=u[le>>2]|0}while(!1);return Ie=b,I=Fe,Ie|0}return Ie=b,I=Fe,Ie|0}function Sr(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0;if((c|0)==0&(d|0)==0)return p=0,b=1,ht(p|0),b|0;b=o,p=l,o=1,l=0;do y=(c&1|0)==0&!0,o=Gn((y?1:b)|0,(y?0:p)|0,o|0,l|0)|0,l=V()|0,c=Au(c|0,d|0,1)|0,d=V()|0,b=Gn(b|0,p|0,b|0,p|0)|0,p=V()|0;while(!((c|0)==0&(d|0)==0));return ht(l|0),o|0}function Oi(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0;if(!(dA(l,c)|0)||(l=ro(l)|0,d=+U[c>>3],p=+U[c+8>>3],p=l&p<0?p+6.283185307179586:p,q=u[o>>2]|0,(q|0)<=0))return q=0,q|0;if(z=u[o+4>>2]|0,l){l=0,D=p,c=-1,o=0;e:for(;;){for(R=o;y=+U[z+(R<<4)>>3],p=+U[z+(R<<4)+8>>3],o=(c+2|0)%(q|0)|0,b=+U[z+(o<<4)>>3],T=+U[z+(o<<4)+8>>3],y>b?(M=y,y=T):(M=b,b=y,y=p,p=T),d=d==b|d==M?d+2220446049250313e-31:d,!!(d<b|d>M);)if(c=R+1|0,(c|0)>=(q|0)){c=22;break e}else o=R,R=c,c=o;if(T=y<0?y+6.283185307179586:y,y=p<0?p+6.283185307179586:p,D=T==D|y==D?D+-2220446049250313e-31:D,M=T+(y-T)*((d-b)/(M-b)),(M<0?M+6.283185307179586:M)>D&&(l=l^1),o=R+1|0,(o|0)>=(q|0)){c=22;break}else c=R}if((c|0)==22)return l|0}else{l=0,D=p,c=-1,o=0;e:for(;;){for(R=o;y=+U[z+(R<<4)>>3],p=+U[z+(R<<4)+8>>3],o=(c+2|0)%(q|0)|0,b=+U[z+(o<<4)>>3],T=+U[z+(o<<4)+8>>3],y>b?(M=y,y=T):(M=b,b=y,y=p,p=T),d=d==b|d==M?d+2220446049250313e-31:d,!!(d<b|d>M);)if(c=R+1|0,(c|0)>=(q|0)){c=22;break e}else o=R,R=c,c=o;if(D=y==D|p==D?D+-2220446049250313e-31:D,y+(p-y)*((d-b)/(M-b))>D&&(l=l^1),o=R+1|0,(o|0)>=(q|0)){c=22;break}else c=R}if((c|0)==22)return l|0}return 0}function Ss(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0;if(Q=u[o>>2]|0,!Q){u[l>>2]=0,u[l+4>>2]=0,u[l+8>>2]=0,u[l+12>>2]=0,u[l+16>>2]=0,u[l+20>>2]=0,u[l+24>>2]=0,u[l+28>>2]=0;return}if(ie=l+8|0,U[ie>>3]=17976931348623157e292,pe=l+24|0,U[pe>>3]=17976931348623157e292,U[l>>3]=-17976931348623157e292,ge=l+16|0,U[ge>>3]=-17976931348623157e292,!((Q|0)<=0)){for(q=u[o+4>>2]|0,R=17976931348623157e292,D=-17976931348623157e292,z=0,o=-1,b=17976931348623157e292,y=17976931348623157e292,M=-17976931348623157e292,d=-17976931348623157e292,J=0;c=+U[q+(J<<4)>>3],T=+U[q+(J<<4)+8>>3],o=o+2|0,p=+U[q+(((o|0)==(Q|0)?0:o)<<4)+8>>3],c<b&&(U[ie>>3]=c,b=c),T<y&&(U[pe>>3]=T,y=T),c>M?U[l>>3]=c:c=M,T>d&&(U[ge>>3]=T,d=T),R=T>0&T<R?T:R,D=T<0&T>D?T:D,z=z|+At(+(T-p))>3.141592653589793,o=J+1|0,(o|0)!=(Q|0);)ue=J,M=c,J=o,o=ue;z&&(U[ge>>3]=D,U[pe>>3]=R)}}function _a(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0,$=0,xe=0,Ie=0,Fe=0;if(Q=u[o>>2]|0,Q){if(ie=l+8|0,U[ie>>3]=17976931348623157e292,pe=l+24|0,U[pe>>3]=17976931348623157e292,U[l>>3]=-17976931348623157e292,ge=l+16|0,U[ge>>3]=-17976931348623157e292,(Q|0)>0){for(p=u[o+4>>2]|0,q=17976931348623157e292,J=-17976931348623157e292,d=0,c=-1,M=17976931348623157e292,R=17976931348623157e292,z=-17976931348623157e292,y=-17976931348623157e292,ue=0;b=+U[p+(ue<<4)>>3],D=+U[p+(ue<<4)+8>>3],Ie=c+2|0,T=+U[p+(((Ie|0)==(Q|0)?0:Ie)<<4)+8>>3],b<M&&(U[ie>>3]=b,M=b),D<R&&(U[pe>>3]=D,R=D),b>z?U[l>>3]=b:b=z,D>y&&(U[ge>>3]=D,y=D),q=D>0&D<q?D:q,J=D<0&D>J?D:J,d=d|+At(+(D-T))>3.141592653589793,c=ue+1|0,(c|0)!=(Q|0);)Ie=ue,z=b,ue=c,c=Ie;d&&(U[ge>>3]=J,U[pe>>3]=q)}}else u[l>>2]=0,u[l+4>>2]=0,u[l+8>>2]=0,u[l+12>>2]=0,u[l+16>>2]=0,u[l+20>>2]=0,u[l+24>>2]=0,u[l+28>>2]=0;if(Ie=o+8|0,c=u[Ie>>2]|0,!((c|0)<=0)){xe=o+12|0,$=0;do if(p=u[xe>>2]|0,d=$,$=$+1|0,pe=l+($<<5)|0,ge=u[p+(d<<3)>>2]|0,ge){if(ue=l+($<<5)+8|0,U[ue>>3]=17976931348623157e292,o=l+($<<5)+24|0,U[o>>3]=17976931348623157e292,U[pe>>3]=-17976931348623157e292,le=l+($<<5)+16|0,U[le>>3]=-17976931348623157e292,(ge|0)>0){for(Q=u[p+(d<<3)+4>>2]|0,q=17976931348623157e292,J=-17976931348623157e292,p=0,d=-1,ie=0,M=17976931348623157e292,R=17976931348623157e292,D=-17976931348623157e292,y=-17976931348623157e292;b=+U[Q+(ie<<4)>>3],z=+U[Q+(ie<<4)+8>>3],d=d+2|0,T=+U[Q+(((d|0)==(ge|0)?0:d)<<4)+8>>3],b<M&&(U[ue>>3]=b,M=b),z<R&&(U[o>>3]=z,R=z),b>D?U[pe>>3]=b:b=D,z>y&&(U[le>>3]=z,y=z),q=z>0&z<q?z:q,J=z<0&z>J?z:J,p=p|+At(+(z-T))>3.141592653589793,d=ie+1|0,(d|0)!=(ge|0);)Fe=ie,ie=d,D=b,d=Fe;p&&(U[le>>3]=J,U[o>>3]=q)}}else u[pe>>2]=0,u[pe+4>>2]=0,u[pe+8>>2]=0,u[pe+12>>2]=0,u[pe+16>>2]=0,u[pe+20>>2]=0,u[pe+24>>2]=0,u[pe+28>>2]=0,c=u[Ie>>2]|0;while(($|0)<(c|0))}}function Mo(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0;if(!(Oi(o,l,c)|0))return p=0,p|0;if(p=o+8|0,(u[p>>2]|0)<=0)return p=1,p|0;for(d=o+12|0,o=0;;){if(b=o,o=o+1|0,Oi((u[d>>2]|0)+(b<<3)|0,l+(o<<5)|0,c)|0){o=0,d=6;break}if((o|0)>=(u[p>>2]|0)){o=1,d=6;break}}return(d|0)==6?o|0:0}function Co(){return 8}function Ui(){return 16}function ki(){return 168}function Ms(){return 8}function Mr(){return 16}function Cr(){return 12}function Cs(){return 8}function sf(o){return o=o|0,+(+((u[o>>2]|0)>>>0)+4294967296*+(u[o+4>>2]|0))}function su(o){o=o|0;var l=0,c=0;return c=+U[o>>3],l=+U[o+8>>3],+ +bt(+(c*c+l*l))}function Ro(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0;R=+U[o>>3],M=+U[l>>3]-R,T=+U[o+8>>3],y=+U[l+8>>3]-T,z=+U[c>>3],b=+U[d>>3]-z,q=+U[c+8>>3],D=+U[d+8>>3]-q,b=(b*(T-q)-(R-z)*D)/(M*D-y*b),U[p>>3]=R+M*b,U[p+8>>3]=T+y*b}function Xn(o,l){return o=o|0,l=l|0,+At(+(+U[o>>3]-+U[l>>3]))<11920928955078125e-23?(l=+At(+(+U[o+8>>3]-+U[l+8>>3]))<11920928955078125e-23,l|0):(l=0,l|0)}function Pt(o,l){o=o|0,l=l|0;var c=0,d=0,p=0;return p=+U[o>>3]-+U[l>>3],d=+U[o+8>>3]-+U[l+8>>3],c=+U[o+16>>3]-+U[l+16>>3],+(p*p+d*d+c*c)}function Vt(o,l){o=o|0,l=l|0;var c=0,d=0,p=0;c=+U[o>>3],d=+wt(+c),c=+at(+c),U[l+16>>3]=c,c=+U[o+8>>3],p=d*+wt(+c),U[l>>3]=p,c=d*+at(+c),U[l+8>>3]=c}function Ki(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0;if(b=I,I=I+16|0,p=b,d=Jt(o,l)|0,(c+-1|0)>>>0>5||(d=(d|0)!=0,(c|0)==1&d))return p=-1,I=b,p|0;do if(gi(o,l,p)|0)d=-1;else if(d){d=((u[21936+(c<<2)>>2]|0)+5-(u[p>>2]|0)|0)%5|0;break}else{d=((u[21968+(c<<2)>>2]|0)+6-(u[p>>2]|0)|0)%6|0;break}while(!1);return p=d,I=b,p|0}function gi(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0,R=0;if(R=I,I=I+32|0,y=R+16|0,T=R,d=ha(o,l,y)|0,d|0)return c=d,I=R,c|0;b=Kl(o,l)|0,M=ai(o,l)|0,Pc(b,T),d=Hl(b,u[y>>2]|0)|0;e:do if(Ct(b)|0){do switch(b|0){case 4:{o=0;break}case 14:{o=1;break}case 24:{o=2;break}case 38:{o=3;break}case 49:{o=4;break}case 58:{o=5;break}case 63:{o=6;break}case 72:{o=7;break}case 83:{o=8;break}case 97:{o=9;break}case 107:{o=10;break}case 117:{o=11;break}default:{d=1;break e}}while(!1);if(p=u[22e3+(o*24|0)+8>>2]|0,l=u[22e3+(o*24|0)+16>>2]|0,o=u[y>>2]|0,(o|0)!=(u[T>>2]|0)&&(T=cA(b)|0,o=u[y>>2]|0,T|(o|0)==(l|0)&&(d=(d+1|0)%6|0)),(M|0)==3&(o|0)==(l|0)){d=(d+5|0)%6|0,p=22;break}(M|0)==5&(o|0)==(p|0)&&(d=(d+1|0)%6|0),p=22}else p=22;while(!1);return(p|0)==22&&(u[c>>2]=d,d=0),c=d,I=R,c|0}function mi(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0;if(le=I,I=I+32|0,ue=le+24|0,pe=le+20|0,Q=le+8|0,J=le+16|0,q=le,M=(Jt(o,l)|0)==0,M=M?6:5,D=Re(o|0,l|0,52)|0,V()|0,D=D&15,M>>>0<=c>>>0)return d=2,I=le,d|0;z=(D|0)==0,!z&&(ie=Ue(7,0,(D^15)*3|0)|0,(ie&o|0)==0&((V()|0)&l|0)==0)?p=c:b=4;e:do if((b|0)==4){if(p=(Jt(o,l)|0)!=0,((p?4:5)|0)<(c|0)||gi(o,l,ue)|0||(b=(u[ue>>2]|0)+c|0,p?p=22288+(((b|0)%5|0)<<2)|0:p=22320+(((b|0)%6|0)<<2)|0,ie=u[p>>2]|0,(ie|0)==7))return d=1,I=le,d|0;u[pe>>2]=0,p=X(o,l,ie,pe,Q)|0;do if(!p){if(T=Q,R=u[T>>2]|0,T=u[T+4>>2]|0,y=T>>>0<l>>>0|(T|0)==(l|0)&R>>>0<o>>>0,b=y?R:o,y=y?T:l,!z&&(z=Ue(7,0,(D^15)*3|0)|0,(R&z|0)==0&(T&(V()|0)|0)==0))p=c;else{if(T=(c+-1+M|0)%(M|0)|0,p=Jt(o,l)|0,(T|0)<0&&et(23313,23315,245,23324),M=(p|0)!=0,((M?4:5)|0)<(T|0)&&et(23313,23315,245,23324),gi(o,l,ue)|0&&et(23313,23315,245,23324),p=(u[ue>>2]|0)+T|0,M?p=22288+(((p|0)%5|0)<<2)|0:p=22320+(((p|0)%6|0)<<2)|0,T=u[p>>2]|0,(T|0)==7&&et(23313,23315,245,23324),u[J>>2]=0,p=X(o,l,T,J,q)|0,p|0)break;R=q,M=u[R>>2]|0,R=u[R+4>>2]|0;do if(R>>>0<y>>>0|(R|0)==(y|0)&M>>>0<b>>>0){if(Jt(M,R)|0?b=fe(M,R,o,l)|0:b=u[22384+((((u[J>>2]|0)+(u[22352+(T<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,p=Jt(M,R)|0,(b+-1|0)>>>0>5){p=-1,b=M,y=R;break}if(p=(p|0)!=0,(b|0)==1&p){p=-1,b=M,y=R;break}do if(gi(M,R,ue)|0)p=-1;else if(p){p=((u[21936+(b<<2)>>2]|0)+5-(u[ue>>2]|0)|0)%5|0;break}else{p=((u[21968+(b<<2)>>2]|0)+6-(u[ue>>2]|0)|0)%6|0;break}while(!1);b=M,y=R}else p=c;while(!1);T=Q,R=u[T>>2]|0,T=u[T+4>>2]|0}if((b|0)==(R|0)&(y|0)==(T|0)){if(M=(Jt(R,T)|0)!=0,M?o=fe(R,T,o,l)|0:o=u[22384+((((u[pe>>2]|0)+(u[22352+(ie<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,p=Jt(R,T)|0,(o+-1|0)>>>0<=5&&(ge=(p|0)!=0,!((o|0)==1&ge)))do if(gi(R,T,ue)|0)p=-1;else if(ge){p=((u[21936+(o<<2)>>2]|0)+5-(u[ue>>2]|0)|0)%5|0;break}else{p=((u[21968+(o<<2)>>2]|0)+6-(u[ue>>2]|0)|0)%6|0;break}while(!1);else p=-1;p=p+1|0,p=(p|0)==6|M&(p|0)==5?0:p}l=y,o=b;break e}while(!1);return d=p,I=le,d|0}while(!1);return ge=Ue(p|0,0,56)|0,ue=V()|0|l&-2130706433|536870912,u[d>>2]=ge|o,u[d+4>>2]=ue,d=0,I=le,d|0}function Rs(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0;return b=(Jt(o,l)|0)==0,d=mi(o,l,0,c)|0,p=(d|0)==0,b?!p||(d=mi(o,l,1,c+8|0)|0,d|0)||(d=mi(o,l,2,c+16|0)|0,d|0)||(d=mi(o,l,3,c+24|0)|0,d|0)||(d=mi(o,l,4,c+32|0)|0,d)?(b=d,b|0):mi(o,l,5,c+40|0)|0:!p||(d=mi(o,l,1,c+8|0)|0,d|0)||(d=mi(o,l,2,c+16|0)|0,d|0)||(d=mi(o,l,3,c+24|0)|0,d|0)||(d=mi(o,l,4,c+32|0)|0,d|0)?(b=d,b|0):(b=c+40|0,u[b>>2]=0,u[b+4>>2]=0,b=0,b|0)}function af(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0,T=0,M=0;return M=I,I=I+192|0,p=M,b=M+168|0,y=Re(o|0,l|0,56)|0,V()|0,y=y&7,T=l&-2130706433|134217728,d=ha(o,T,b)|0,d|0?(T=d,I=M,T|0):(l=Re(o|0,l|0,52)|0,V()|0,l=l&15,Jt(o,T)|0?ql(b,l,y,1,p):go(b,l,y,1,p),T=p+8|0,u[c>>2]=u[T>>2],u[c+4>>2]=u[T+4>>2],u[c+8>>2]=u[T+8>>2],u[c+12>>2]=u[T+12>>2],T=0,I=M,T|0)}function Af(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0;return p=I,I=I+16|0,c=p,!(!0&(l&2013265920|0)==536870912)||(d=l&-2130706433|134217728,!(mo(o,d)|0))?(d=0,I=p,d|0):(b=Re(o|0,l|0,56)|0,V()|0,b=(mi(o,d,b&7,c)|0)==0,d=c,d=b&((u[d>>2]|0)==(o|0)?(u[d+4>>2]|0)==(l|0):0)&1,I=p,d|0)}function ba(o,l,c){o=o|0,l=l|0,c=c|0;var d=0;(l|0)>0?(d=pi(l,4)|0,u[o>>2]=d,d||et(23337,23360,40,23374)):u[o>>2]=0,u[o+4>>2]=l,u[o+8>>2]=0,u[o+12>>2]=c}function Ea(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0;p=o+4|0,b=o+12|0,y=o+8|0;e:for(;;){for(c=u[p>>2]|0,l=0;;){if((l|0)>=(c|0))break e;if(d=u[o>>2]|0,T=u[d+(l<<2)>>2]|0,!T)l=l+1|0;else break}l=d+(~~(+At(+(+Yn(10,+ +(15-(u[b>>2]|0)|0))*(+U[T>>3]+ +U[T+8>>3])))%+(c|0))>>>0<<2)|0,c=u[l>>2]|0;t:do if(c|0){if(d=T+32|0,(c|0)==(T|0))u[l>>2]=u[d>>2];else{if(c=c+32|0,l=u[c>>2]|0,!l)break;for(;(l|0)!=(T|0);)if(c=l+32|0,l=u[c>>2]|0,!l)break t;u[c>>2]=u[d>>2]}st(T),u[y>>2]=(u[y>>2]|0)+-1}while(!1)}st(u[o>>2]|0)}function ya(o){o=o|0;var l=0,c=0,d=0;for(d=u[o+4>>2]|0,c=0;;){if((c|0)>=(d|0)){l=0,c=4;break}if(l=u[(u[o>>2]|0)+(c<<2)>>2]|0,!l)c=c+1|0;else{c=4;break}}return(c|0)==4?l|0:0}function va(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0;if(c=~~(+At(+(+Yn(10,+ +(15-(u[o+12>>2]|0)|0))*(+U[l>>3]+ +U[l+8>>3])))%+(u[o+4>>2]|0))>>>0,c=(u[o>>2]|0)+(c<<2)|0,d=u[c>>2]|0,!d)return b=1,b|0;b=l+32|0;do if((d|0)!=(l|0)){if(c=u[d+32>>2]|0,!c)return b=1,b|0;for(p=c;;){if((p|0)==(l|0)){p=8;break}if(c=u[p+32>>2]|0,c)d=p,p=c;else{c=1,p=10;break}}if((p|0)==8){u[d+32>>2]=u[b>>2];break}else if((p|0)==10)return c|0}else u[c>>2]=u[b>>2];while(!1);return st(l),b=o+8|0,u[b>>2]=(u[b>>2]|0)+-1,b=0,b|0}function of(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0;b=$i(40)|0,b||et(23390,23360,98,23403),u[b>>2]=u[l>>2],u[b+4>>2]=u[l+4>>2],u[b+8>>2]=u[l+8>>2],u[b+12>>2]=u[l+12>>2],p=b+16|0,u[p>>2]=u[c>>2],u[p+4>>2]=u[c+4>>2],u[p+8>>2]=u[c+8>>2],u[p+12>>2]=u[c+12>>2],u[b+32>>2]=0,p=~~(+At(+(+Yn(10,+ +(15-(u[o+12>>2]|0)|0))*(+U[l>>3]+ +U[l+8>>3])))%+(u[o+4>>2]|0))>>>0,p=(u[o>>2]|0)+(p<<2)|0,d=u[p>>2]|0;do if(!d)u[p>>2]=b;else{for(;!(qi(d,l)|0&&qi(d+16|0,c)|0);)if(p=u[d+32>>2]|0,d=p|0?p:d,!(u[d+32>>2]|0)){y=10;break}if((y|0)==10){u[d+32>>2]=b;break}return st(b),y=d,y|0}while(!1);return y=o+8|0,u[y>>2]=(u[y>>2]|0)+1,y=b,y|0}function au(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0;if(p=~~(+At(+(+Yn(10,+ +(15-(u[o+12>>2]|0)|0))*(+U[l>>3]+ +U[l+8>>3])))%+(u[o+4>>2]|0))>>>0,p=u[(u[o>>2]|0)+(p<<2)>>2]|0,!p)return c=0,c|0;if(!c){for(o=p;;){if(qi(o,l)|0){d=10;break}if(o=u[o+32>>2]|0,!o){o=0,d=10;break}}if((d|0)==10)return o|0}for(o=p;;){if(qi(o,l)|0&&qi(o+16|0,c)|0){d=10;break}if(o=u[o+32>>2]|0,!o){o=0,d=10;break}}return(d|0)==10?o|0:0}function lf(o,l){o=o|0,l=l|0;var c=0;if(c=~~(+At(+(+Yn(10,+ +(15-(u[o+12>>2]|0)|0))*(+U[l>>3]+ +U[l+8>>3])))%+(u[o+4>>2]|0))>>>0,o=u[(u[o>>2]|0)+(c<<2)>>2]|0,!o)return c=0,c|0;for(;;){if(qi(o,l)|0){l=5;break}if(o=u[o+32>>2]|0,!o){o=0,l=5;break}}return(l|0)==5?o|0:0}function Lo(){return 23424}function uf(o){return o=+o,+ +dr(+o)}function zi(o){return o=+o,~~+uf(o)|0}function $i(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0,ie=0,pe=0,ge=0,ue=0,le=0,$=0,xe=0;xe=I,I=I+16|0,q=xe;do if(o>>>0<245){if(R=o>>>0<11?16:o+11&-8,o=R>>>3,z=u[5857]|0,c=z>>>o,c&3|0)return l=(c&1^1)+o|0,o=23468+(l<<1<<2)|0,c=o+8|0,d=u[c>>2]|0,p=d+8|0,b=u[p>>2]|0,(b|0)==(o|0)?u[5857]=z&~(1<<l):(u[b+12>>2]=o,u[c>>2]=b),$=l<<3,u[d+4>>2]=$|3,$=d+$+4|0,u[$>>2]=u[$>>2]|1,$=p,I=xe,$|0;if(D=u[5859]|0,R>>>0>D>>>0){if(c|0)return l=2<<o,l=c<<o&(l|0-l),l=(l&0-l)+-1|0,T=l>>>12&16,l=l>>>T,c=l>>>5&8,l=l>>>c,b=l>>>2&4,l=l>>>b,o=l>>>1&2,l=l>>>o,d=l>>>1&1,d=(c|T|b|o|d)+(l>>>d)|0,l=23468+(d<<1<<2)|0,o=l+8|0,b=u[o>>2]|0,T=b+8|0,c=u[T>>2]|0,(c|0)==(l|0)?(o=z&~(1<<d),u[5857]=o):(u[c+12>>2]=l,u[o>>2]=c,o=z),$=d<<3,y=$-R|0,u[b+4>>2]=R|3,p=b+R|0,u[p+4>>2]=y|1,u[b+$>>2]=y,D|0&&(d=u[5862]|0,l=D>>>3,c=23468+(l<<1<<2)|0,l=1<<l,o&l?(o=c+8|0,l=u[o>>2]|0):(u[5857]=o|l,l=c,o=c+8|0),u[o>>2]=d,u[l+12>>2]=d,u[d+8>>2]=l,u[d+12>>2]=c),u[5859]=y,u[5862]=p,$=T,I=xe,$|0;if(b=u[5858]|0,b){for(c=(b&0-b)+-1|0,p=c>>>12&16,c=c>>>p,d=c>>>5&8,c=c>>>d,y=c>>>2&4,c=c>>>y,T=c>>>1&2,c=c>>>T,M=c>>>1&1,M=u[23732+((d|p|y|T|M)+(c>>>M)<<2)>>2]|0,c=M,T=M,M=(u[M+4>>2]&-8)-R|0;o=u[c+16>>2]|0,!(!o&&(o=u[c+20>>2]|0,!o));)y=(u[o+4>>2]&-8)-R|0,p=y>>>0<M>>>0,c=o,T=p?o:T,M=p?y:M;if(y=T+R|0,y>>>0>T>>>0){p=u[T+24>>2]|0,l=u[T+12>>2]|0;do if((l|0)==(T|0)){if(o=T+20|0,l=u[o>>2]|0,!l&&(o=T+16|0,l=u[o>>2]|0,!l)){c=0;break}for(;;)if(d=l+20|0,c=u[d>>2]|0,c)l=c,o=d;else if(d=l+16|0,c=u[d>>2]|0,c)l=c,o=d;else break;u[o>>2]=0,c=l}else c=u[T+8>>2]|0,u[c+12>>2]=l,u[l+8>>2]=c,c=l;while(!1);do if(p|0){if(l=u[T+28>>2]|0,o=23732+(l<<2)|0,(T|0)==(u[o>>2]|0)){if(u[o>>2]=c,!c){u[5858]=b&~(1<<l);break}}else if($=p+16|0,u[((u[$>>2]|0)==(T|0)?$:p+20|0)>>2]=c,!c)break;u[c+24>>2]=p,l=u[T+16>>2]|0,l|0&&(u[c+16>>2]=l,u[l+24>>2]=c),l=u[T+20>>2]|0,l|0&&(u[c+20>>2]=l,u[l+24>>2]=c)}while(!1);return M>>>0<16?($=M+R|0,u[T+4>>2]=$|3,$=T+$+4|0,u[$>>2]=u[$>>2]|1):(u[T+4>>2]=R|3,u[y+4>>2]=M|1,u[y+M>>2]=M,D|0&&(d=u[5862]|0,l=D>>>3,c=23468+(l<<1<<2)|0,l=1<<l,l&z?(o=c+8|0,l=u[o>>2]|0):(u[5857]=l|z,l=c,o=c+8|0),u[o>>2]=d,u[l+12>>2]=d,u[d+8>>2]=l,u[d+12>>2]=c),u[5859]=M,u[5862]=y),$=T+8|0,I=xe,$|0}else z=R}else z=R}else z=R}else if(o>>>0<=4294967231)if(o=o+11|0,R=o&-8,d=u[5858]|0,d){p=0-R|0,o=o>>>8,o?R>>>0>16777215?M=31:(z=(o+1048320|0)>>>16&8,ie=o<<z,T=(ie+520192|0)>>>16&4,ie=ie<<T,M=(ie+245760|0)>>>16&2,M=14-(T|z|M)+(ie<<M>>>15)|0,M=R>>>(M+7|0)&1|M<<1):M=0,c=u[23732+(M<<2)>>2]|0;e:do if(!c)c=0,o=0,ie=61;else for(o=0,T=R<<((M|0)==31?0:25-(M>>>1)|0),b=0;;){if(y=(u[c+4>>2]&-8)-R|0,y>>>0<p>>>0)if(y)o=c,p=y;else{o=c,p=0,ie=65;break e}if(ie=u[c+20>>2]|0,c=u[c+16+(T>>>31<<2)>>2]|0,b=(ie|0)==0|(ie|0)==(c|0)?b:ie,c)T=T<<1;else{c=b,ie=61;break}}while(!1);if((ie|0)==61){if((c|0)==0&(o|0)==0){if(o=2<<M,o=(o|0-o)&d,!o){z=R;break}z=(o&0-o)+-1|0,y=z>>>12&16,z=z>>>y,b=z>>>5&8,z=z>>>b,T=z>>>2&4,z=z>>>T,M=z>>>1&2,z=z>>>M,c=z>>>1&1,o=0,c=u[23732+((b|y|T|M|c)+(z>>>c)<<2)>>2]|0}c?ie=65:(T=o,y=p)}if((ie|0)==65)for(b=c;;)if(z=(u[b+4>>2]&-8)-R|0,c=z>>>0<p>>>0,p=c?z:p,o=c?b:o,c=u[b+16>>2]|0,c||(c=u[b+20>>2]|0),c)b=c;else{T=o,y=p;break}if(T|0&&y>>>0<((u[5859]|0)-R|0)>>>0&&(D=T+R|0,D>>>0>T>>>0)){b=u[T+24>>2]|0,l=u[T+12>>2]|0;do if((l|0)==(T|0)){if(o=T+20|0,l=u[o>>2]|0,!l&&(o=T+16|0,l=u[o>>2]|0,!l)){l=0;break}for(;;)if(p=l+20|0,c=u[p>>2]|0,c)l=c,o=p;else if(p=l+16|0,c=u[p>>2]|0,c)l=c,o=p;else break;u[o>>2]=0}else $=u[T+8>>2]|0,u[$+12>>2]=l,u[l+8>>2]=$;while(!1);do if(b){if(o=u[T+28>>2]|0,c=23732+(o<<2)|0,(T|0)==(u[c>>2]|0)){if(u[c>>2]=l,!l){d=d&~(1<<o),u[5858]=d;break}}else if($=b+16|0,u[((u[$>>2]|0)==(T|0)?$:b+20|0)>>2]=l,!l)break;u[l+24>>2]=b,o=u[T+16>>2]|0,o|0&&(u[l+16>>2]=o,u[o+24>>2]=l),o=u[T+20>>2]|0,o&&(u[l+20>>2]=o,u[o+24>>2]=l)}while(!1);e:do if(y>>>0<16)$=y+R|0,u[T+4>>2]=$|3,$=T+$+4|0,u[$>>2]=u[$>>2]|1;else{if(u[T+4>>2]=R|3,u[D+4>>2]=y|1,u[D+y>>2]=y,l=y>>>3,y>>>0<256){c=23468+(l<<1<<2)|0,o=u[5857]|0,l=1<<l,o&l?(o=c+8|0,l=u[o>>2]|0):(u[5857]=o|l,l=c,o=c+8|0),u[o>>2]=D,u[l+12>>2]=D,u[D+8>>2]=l,u[D+12>>2]=c;break}if(l=y>>>8,l?y>>>0>16777215?c=31:(le=(l+1048320|0)>>>16&8,$=l<<le,ue=($+520192|0)>>>16&4,$=$<<ue,c=($+245760|0)>>>16&2,c=14-(ue|le|c)+($<<c>>>15)|0,c=y>>>(c+7|0)&1|c<<1):c=0,l=23732+(c<<2)|0,u[D+28>>2]=c,o=D+16|0,u[o+4>>2]=0,u[o>>2]=0,o=1<<c,!(d&o)){u[5858]=d|o,u[l>>2]=D,u[D+24>>2]=l,u[D+12>>2]=D,u[D+8>>2]=D;break}l=u[l>>2]|0;t:do if((u[l+4>>2]&-8|0)!=(y|0)){for(d=y<<((c|0)==31?0:25-(c>>>1)|0);c=l+16+(d>>>31<<2)|0,o=u[c>>2]|0,!!o;)if((u[o+4>>2]&-8|0)==(y|0)){l=o;break t}else d=d<<1,l=o;u[c>>2]=D,u[D+24>>2]=l,u[D+12>>2]=D,u[D+8>>2]=D;break e}while(!1);le=l+8|0,$=u[le>>2]|0,u[$+12>>2]=D,u[le>>2]=D,u[D+8>>2]=$,u[D+12>>2]=l,u[D+24>>2]=0}while(!1);return $=T+8|0,I=xe,$|0}else z=R}else z=R;else z=-1;while(!1);if(c=u[5859]|0,c>>>0>=z>>>0)return l=c-z|0,o=u[5862]|0,l>>>0>15?($=o+z|0,u[5862]=$,u[5859]=l,u[$+4>>2]=l|1,u[o+c>>2]=l,u[o+4>>2]=z|3):(u[5859]=0,u[5862]=0,u[o+4>>2]=c|3,$=o+c+4|0,u[$>>2]=u[$>>2]|1),$=o+8|0,I=xe,$|0;if(y=u[5860]|0,y>>>0>z>>>0)return ue=y-z|0,u[5860]=ue,$=u[5863]|0,le=$+z|0,u[5863]=le,u[le+4>>2]=ue|1,u[$+4>>2]=z|3,$=$+8|0,I=xe,$|0;if(u[5975]|0?o=u[5977]|0:(u[5977]=4096,u[5976]=4096,u[5978]=-1,u[5979]=-1,u[5980]=0,u[5968]=0,u[5975]=q&-16^1431655768,o=4096),T=z+48|0,M=z+47|0,b=o+M|0,p=0-o|0,R=b&p,R>>>0<=z>>>0||(o=u[5967]|0,o|0&&(D=u[5965]|0,q=D+R|0,q>>>0<=D>>>0|q>>>0>o>>>0)))return $=0,I=xe,$|0;e:do if(u[5968]&4)l=0,ie=143;else{c=u[5863]|0;t:do if(c){for(d=23876;q=u[d>>2]|0,!(q>>>0<=c>>>0&&(q+(u[d+4>>2]|0)|0)>>>0>c>>>0);)if(o=u[d+8>>2]|0,o)d=o;else{ie=128;break t}if(l=b-y&p,l>>>0<2147483647)if(o=en(l|0)|0,(o|0)==((u[d>>2]|0)+(u[d+4>>2]|0)|0)){if((o|0)!=-1){y=l,b=o,ie=145;break e}}else d=o,ie=136;else l=0}else ie=128;while(!1);do if((ie|0)==128)if(c=en(0)|0,(c|0)!=-1&&(l=c,J=u[5976]|0,Q=J+-1|0,l=(Q&l|0?(Q+l&0-J)-l|0:0)+R|0,J=u[5965]|0,Q=l+J|0,l>>>0>z>>>0&l>>>0<2147483647)){if(q=u[5967]|0,q|0&&Q>>>0<=J>>>0|Q>>>0>q>>>0){l=0;break}if(o=en(l|0)|0,(o|0)==(c|0)){y=l,b=c,ie=145;break e}else d=o,ie=136}else l=0;while(!1);do if((ie|0)==136){if(c=0-l|0,!(T>>>0>l>>>0&(l>>>0<2147483647&(d|0)!=-1)))if((d|0)==-1){l=0;break}else{y=l,b=d,ie=145;break e}if(o=u[5977]|0,o=M-l+o&0-o,o>>>0>=2147483647){y=l,b=d,ie=145;break e}if((en(o|0)|0)==-1){en(c|0)|0,l=0;break}else{y=o+l|0,b=d,ie=145;break e}}while(!1);u[5968]=u[5968]|4,ie=143}while(!1);if((ie|0)==143&&R>>>0<2147483647&&(ue=en(R|0)|0,Q=en(0)|0,pe=Q-ue|0,ge=pe>>>0>(z+40|0)>>>0,!((ue|0)==-1|ge^1|ue>>>0<Q>>>0&((ue|0)!=-1&(Q|0)!=-1)^1))&&(y=ge?pe:l,b=ue,ie=145),(ie|0)==145){l=(u[5965]|0)+y|0,u[5965]=l,l>>>0>(u[5966]|0)>>>0&&(u[5966]=l),M=u[5863]|0;e:do if(M){for(l=23876;;){if(o=u[l>>2]|0,c=u[l+4>>2]|0,(b|0)==(o+c|0)){ie=154;break}if(d=u[l+8>>2]|0,d)l=d;else break}if((ie|0)==154&&(le=l+4|0,(u[l+12>>2]&8|0)==0)&&b>>>0>M>>>0&o>>>0<=M>>>0){u[le>>2]=c+y,$=(u[5860]|0)+y|0,ue=M+8|0,ue=ue&7|0?0-ue&7:0,le=M+ue|0,ue=$-ue|0,u[5863]=le,u[5860]=ue,u[le+4>>2]=ue|1,u[M+$+4>>2]=40,u[5864]=u[5979];break}for(b>>>0<(u[5861]|0)>>>0&&(u[5861]=b),c=b+y|0,l=23876;;){if((u[l>>2]|0)==(c|0)){ie=162;break}if(o=u[l+8>>2]|0,o)l=o;else break}if((ie|0)==162&&!(u[l+12>>2]&8|0)){u[l>>2]=b,D=l+4|0,u[D>>2]=(u[D>>2]|0)+y,D=b+8|0,D=b+(D&7|0?0-D&7:0)|0,l=c+8|0,l=c+(l&7|0?0-l&7:0)|0,R=D+z|0,T=l-D-z|0,u[D+4>>2]=z|3;t:do if((M|0)==(l|0))$=(u[5860]|0)+T|0,u[5860]=$,u[5863]=R,u[R+4>>2]=$|1;else{if((u[5862]|0)==(l|0)){$=(u[5859]|0)+T|0,u[5859]=$,u[5862]=R,u[R+4>>2]=$|1,u[R+$>>2]=$;break}if(o=u[l+4>>2]|0,(o&3|0)==1){y=o&-8,d=o>>>3;n:do if(o>>>0<256)if(o=u[l+8>>2]|0,c=u[l+12>>2]|0,(c|0)==(o|0)){u[5857]=u[5857]&~(1<<d);break}else{u[o+12>>2]=c,u[c+8>>2]=o;break}else{b=u[l+24>>2]|0,o=u[l+12>>2]|0;do if((o|0)==(l|0)){if(c=l+16|0,d=c+4|0,o=u[d>>2]|0,o)c=d;else if(o=u[c>>2]|0,!o){o=0;break}for(;;)if(p=o+20|0,d=u[p>>2]|0,d)o=d,c=p;else if(p=o+16|0,d=u[p>>2]|0,d)o=d,c=p;else break;u[c>>2]=0}else $=u[l+8>>2]|0,u[$+12>>2]=o,u[o+8>>2]=$;while(!1);if(!b)break;c=u[l+28>>2]|0,d=23732+(c<<2)|0;do if((u[d>>2]|0)!=(l|0)){if($=b+16|0,u[((u[$>>2]|0)==(l|0)?$:b+20|0)>>2]=o,!o)break n}else{if(u[d>>2]=o,o|0)break;u[5858]=u[5858]&~(1<<c);break n}while(!1);if(u[o+24>>2]=b,c=l+16|0,d=u[c>>2]|0,d|0&&(u[o+16>>2]=d,u[d+24>>2]=o),c=u[c+4>>2]|0,!c)break;u[o+20>>2]=c,u[c+24>>2]=o}while(!1);l=l+y|0,p=y+T|0}else p=T;if(l=l+4|0,u[l>>2]=u[l>>2]&-2,u[R+4>>2]=p|1,u[R+p>>2]=p,l=p>>>3,p>>>0<256){c=23468+(l<<1<<2)|0,o=u[5857]|0,l=1<<l,o&l?(o=c+8|0,l=u[o>>2]|0):(u[5857]=o|l,l=c,o=c+8|0),u[o>>2]=R,u[l+12>>2]=R,u[R+8>>2]=l,u[R+12>>2]=c;break}l=p>>>8;do if(!l)d=0;else{if(p>>>0>16777215){d=31;break}le=(l+1048320|0)>>>16&8,$=l<<le,ue=($+520192|0)>>>16&4,$=$<<ue,d=($+245760|0)>>>16&2,d=14-(ue|le|d)+($<<d>>>15)|0,d=p>>>(d+7|0)&1|d<<1}while(!1);if(l=23732+(d<<2)|0,u[R+28>>2]=d,o=R+16|0,u[o+4>>2]=0,u[o>>2]=0,o=u[5858]|0,c=1<<d,!(o&c)){u[5858]=o|c,u[l>>2]=R,u[R+24>>2]=l,u[R+12>>2]=R,u[R+8>>2]=R;break}l=u[l>>2]|0;n:do if((u[l+4>>2]&-8|0)!=(p|0)){for(d=p<<((d|0)==31?0:25-(d>>>1)|0);c=l+16+(d>>>31<<2)|0,o=u[c>>2]|0,!!o;)if((u[o+4>>2]&-8|0)==(p|0)){l=o;break n}else d=d<<1,l=o;u[c>>2]=R,u[R+24>>2]=l,u[R+12>>2]=R,u[R+8>>2]=R;break t}while(!1);le=l+8|0,$=u[le>>2]|0,u[$+12>>2]=R,u[le>>2]=R,u[R+8>>2]=$,u[R+12>>2]=l,u[R+24>>2]=0}while(!1);return $=D+8|0,I=xe,$|0}for(l=23876;o=u[l>>2]|0,!(o>>>0<=M>>>0&&($=o+(u[l+4>>2]|0)|0,$>>>0>M>>>0));)l=u[l+8>>2]|0;p=$+-47|0,o=p+8|0,o=p+(o&7|0?0-o&7:0)|0,p=M+16|0,o=o>>>0<p>>>0?M:o,l=o+8|0,c=y+-40|0,ue=b+8|0,ue=ue&7|0?0-ue&7:0,le=b+ue|0,ue=c-ue|0,u[5863]=le,u[5860]=ue,u[le+4>>2]=ue|1,u[b+c+4>>2]=40,u[5864]=u[5979],c=o+4|0,u[c>>2]=27,u[l>>2]=u[5969],u[l+4>>2]=u[5970],u[l+8>>2]=u[5971],u[l+12>>2]=u[5972],u[5969]=b,u[5970]=y,u[5972]=0,u[5971]=l,l=o+24|0;do le=l,l=l+4|0,u[l>>2]=7;while((le+8|0)>>>0<$>>>0);if((o|0)!=(M|0)){if(b=o-M|0,u[c>>2]=u[c>>2]&-2,u[M+4>>2]=b|1,u[o>>2]=b,l=b>>>3,b>>>0<256){c=23468+(l<<1<<2)|0,o=u[5857]|0,l=1<<l,o&l?(o=c+8|0,l=u[o>>2]|0):(u[5857]=o|l,l=c,o=c+8|0),u[o>>2]=M,u[l+12>>2]=M,u[M+8>>2]=l,u[M+12>>2]=c;break}if(l=b>>>8,l?b>>>0>16777215?d=31:(le=(l+1048320|0)>>>16&8,$=l<<le,ue=($+520192|0)>>>16&4,$=$<<ue,d=($+245760|0)>>>16&2,d=14-(ue|le|d)+($<<d>>>15)|0,d=b>>>(d+7|0)&1|d<<1):d=0,c=23732+(d<<2)|0,u[M+28>>2]=d,u[M+20>>2]=0,u[p>>2]=0,l=u[5858]|0,o=1<<d,!(l&o)){u[5858]=l|o,u[c>>2]=M,u[M+24>>2]=c,u[M+12>>2]=M,u[M+8>>2]=M;break}l=u[c>>2]|0;t:do if((u[l+4>>2]&-8|0)!=(b|0)){for(d=b<<((d|0)==31?0:25-(d>>>1)|0);c=l+16+(d>>>31<<2)|0,o=u[c>>2]|0,!!o;)if((u[o+4>>2]&-8|0)==(b|0)){l=o;break t}else d=d<<1,l=o;u[c>>2]=M,u[M+24>>2]=l,u[M+12>>2]=M,u[M+8>>2]=M;break e}while(!1);le=l+8|0,$=u[le>>2]|0,u[$+12>>2]=M,u[le>>2]=M,u[M+8>>2]=$,u[M+12>>2]=l,u[M+24>>2]=0}}else $=u[5861]|0,($|0)==0|b>>>0<$>>>0&&(u[5861]=b),u[5969]=b,u[5970]=y,u[5972]=0,u[5866]=u[5975],u[5865]=-1,u[5870]=23468,u[5869]=23468,u[5872]=23476,u[5871]=23476,u[5874]=23484,u[5873]=23484,u[5876]=23492,u[5875]=23492,u[5878]=23500,u[5877]=23500,u[5880]=23508,u[5879]=23508,u[5882]=23516,u[5881]=23516,u[5884]=23524,u[5883]=23524,u[5886]=23532,u[5885]=23532,u[5888]=23540,u[5887]=23540,u[5890]=23548,u[5889]=23548,u[5892]=23556,u[5891]=23556,u[5894]=23564,u[5893]=23564,u[5896]=23572,u[5895]=23572,u[5898]=23580,u[5897]=23580,u[5900]=23588,u[5899]=23588,u[5902]=23596,u[5901]=23596,u[5904]=23604,u[5903]=23604,u[5906]=23612,u[5905]=23612,u[5908]=23620,u[5907]=23620,u[5910]=23628,u[5909]=23628,u[5912]=23636,u[5911]=23636,u[5914]=23644,u[5913]=23644,u[5916]=23652,u[5915]=23652,u[5918]=23660,u[5917]=23660,u[5920]=23668,u[5919]=23668,u[5922]=23676,u[5921]=23676,u[5924]=23684,u[5923]=23684,u[5926]=23692,u[5925]=23692,u[5928]=23700,u[5927]=23700,u[5930]=23708,u[5929]=23708,u[5932]=23716,u[5931]=23716,$=y+-40|0,ue=b+8|0,ue=ue&7|0?0-ue&7:0,le=b+ue|0,ue=$-ue|0,u[5863]=le,u[5860]=ue,u[le+4>>2]=ue|1,u[b+$+4>>2]=40,u[5864]=u[5979];while(!1);if(l=u[5860]|0,l>>>0>z>>>0)return ue=l-z|0,u[5860]=ue,$=u[5863]|0,le=$+z|0,u[5863]=le,u[le+4>>2]=ue|1,u[$+4>>2]=z|3,$=$+8|0,I=xe,$|0}return $=Lo()|0,u[$>>2]=12,$=0,I=xe,$|0}function st(o){o=o|0;var l=0,c=0,d=0,p=0,b=0,y=0,T=0,M=0;if(o){c=o+-8|0,p=u[5861]|0,o=u[o+-4>>2]|0,l=o&-8,M=c+l|0;do if(o&1)T=c,y=c;else{if(d=u[c>>2]|0,!(o&3)||(y=c+(0-d)|0,b=d+l|0,y>>>0<p>>>0))return;if((u[5862]|0)==(y|0)){if(o=M+4|0,l=u[o>>2]|0,(l&3|0)!=3){T=y,l=b;break}u[5859]=b,u[o>>2]=l&-2,u[y+4>>2]=b|1,u[y+b>>2]=b;return}if(c=d>>>3,d>>>0<256)if(o=u[y+8>>2]|0,l=u[y+12>>2]|0,(l|0)==(o|0)){u[5857]=u[5857]&~(1<<c),T=y,l=b;break}else{u[o+12>>2]=l,u[l+8>>2]=o,T=y,l=b;break}p=u[y+24>>2]|0,o=u[y+12>>2]|0;do if((o|0)==(y|0)){if(l=y+16|0,c=l+4|0,o=u[c>>2]|0,o)l=c;else if(o=u[l>>2]|0,!o){o=0;break}for(;;)if(d=o+20|0,c=u[d>>2]|0,c)o=c,l=d;else if(d=o+16|0,c=u[d>>2]|0,c)o=c,l=d;else break;u[l>>2]=0}else T=u[y+8>>2]|0,u[T+12>>2]=o,u[o+8>>2]=T;while(!1);if(p){if(l=u[y+28>>2]|0,c=23732+(l<<2)|0,(u[c>>2]|0)==(y|0)){if(u[c>>2]=o,!o){u[5858]=u[5858]&~(1<<l),T=y,l=b;break}}else if(T=p+16|0,u[((u[T>>2]|0)==(y|0)?T:p+20|0)>>2]=o,!o){T=y,l=b;break}u[o+24>>2]=p,l=y+16|0,c=u[l>>2]|0,c|0&&(u[o+16>>2]=c,u[c+24>>2]=o),l=u[l+4>>2]|0,l?(u[o+20>>2]=l,u[l+24>>2]=o,T=y,l=b):(T=y,l=b)}else T=y,l=b}while(!1);if(!(y>>>0>=M>>>0)&&(o=M+4|0,d=u[o>>2]|0,!!(d&1))){if(d&2)u[o>>2]=d&-2,u[T+4>>2]=l|1,u[y+l>>2]=l,p=l;else{if((u[5863]|0)==(M|0)){if(M=(u[5860]|0)+l|0,u[5860]=M,u[5863]=T,u[T+4>>2]=M|1,(T|0)!=(u[5862]|0))return;u[5862]=0,u[5859]=0;return}if((u[5862]|0)==(M|0)){M=(u[5859]|0)+l|0,u[5859]=M,u[5862]=y,u[T+4>>2]=M|1,u[y+M>>2]=M;return}p=(d&-8)+l|0,c=d>>>3;do if(d>>>0<256)if(l=u[M+8>>2]|0,o=u[M+12>>2]|0,(o|0)==(l|0)){u[5857]=u[5857]&~(1<<c);break}else{u[l+12>>2]=o,u[o+8>>2]=l;break}else{b=u[M+24>>2]|0,o=u[M+12>>2]|0;do if((o|0)==(M|0)){if(l=M+16|0,c=l+4|0,o=u[c>>2]|0,o)l=c;else if(o=u[l>>2]|0,!o){c=0;break}for(;;)if(d=o+20|0,c=u[d>>2]|0,c)o=c,l=d;else if(d=o+16|0,c=u[d>>2]|0,c)o=c,l=d;else break;u[l>>2]=0,c=o}else c=u[M+8>>2]|0,u[c+12>>2]=o,u[o+8>>2]=c,c=o;while(!1);if(b|0){if(o=u[M+28>>2]|0,l=23732+(o<<2)|0,(u[l>>2]|0)==(M|0)){if(u[l>>2]=c,!c){u[5858]=u[5858]&~(1<<o);break}}else if(d=b+16|0,u[((u[d>>2]|0)==(M|0)?d:b+20|0)>>2]=c,!c)break;u[c+24>>2]=b,o=M+16|0,l=u[o>>2]|0,l|0&&(u[c+16>>2]=l,u[l+24>>2]=c),o=u[o+4>>2]|0,o|0&&(u[c+20>>2]=o,u[o+24>>2]=c)}}while(!1);if(u[T+4>>2]=p|1,u[y+p>>2]=p,(T|0)==(u[5862]|0)){u[5859]=p;return}}if(o=p>>>3,p>>>0<256){c=23468+(o<<1<<2)|0,l=u[5857]|0,o=1<<o,l&o?(l=c+8|0,o=u[l>>2]|0):(u[5857]=l|o,o=c,l=c+8|0),u[l>>2]=T,u[o+12>>2]=T,u[T+8>>2]=o,u[T+12>>2]=c;return}o=p>>>8,o?p>>>0>16777215?d=31:(y=(o+1048320|0)>>>16&8,M=o<<y,b=(M+520192|0)>>>16&4,M=M<<b,d=(M+245760|0)>>>16&2,d=14-(b|y|d)+(M<<d>>>15)|0,d=p>>>(d+7|0)&1|d<<1):d=0,o=23732+(d<<2)|0,u[T+28>>2]=d,u[T+20>>2]=0,u[T+16>>2]=0,l=u[5858]|0,c=1<<d;e:do if(!(l&c))u[5858]=l|c,u[o>>2]=T,u[T+24>>2]=o,u[T+12>>2]=T,u[T+8>>2]=T;else{o=u[o>>2]|0;t:do if((u[o+4>>2]&-8|0)!=(p|0)){for(d=p<<((d|0)==31?0:25-(d>>>1)|0);c=o+16+(d>>>31<<2)|0,l=u[c>>2]|0,!!l;)if((u[l+4>>2]&-8|0)==(p|0)){o=l;break t}else d=d<<1,o=l;u[c>>2]=T,u[T+24>>2]=o,u[T+12>>2]=T,u[T+8>>2]=T;break e}while(!1);y=o+8|0,M=u[y>>2]|0,u[M+12>>2]=T,u[y>>2]=T,u[T+8>>2]=M,u[T+12>>2]=o,u[T+24>>2]=0}while(!1);if(M=(u[5865]|0)+-1|0,u[5865]=M,!(M|0)){for(o=23884;o=u[o>>2]|0,o;)o=o+8|0;u[5865]=-1}}}}function pi(o,l){o=o|0,l=l|0;var c=0;return o?(c=rn(l,o)|0,(l|o)>>>0>65535&&(c=((c>>>0)/(o>>>0)|0|0)==(l|0)?c:-1)):c=0,o=$i(c)|0,!o||!(u[o+-4>>2]&3)||_i(o|0,0,c|0)|0,o|0}function vt(o,l,c,d){return o=o|0,l=l|0,c=c|0,d=d|0,c=o+c>>>0,ht(l+d+(c>>>0<o>>>0|0)>>>0|0),c|0|0}function Tn(o,l,c,d){return o=o|0,l=l|0,c=c|0,d=d|0,d=l-d-(c>>>0>o>>>0|0)>>>0,ht(d|0),o-c>>>0|0|0}function TA(o){return o=o|0,(o?31-(Dn(o^o-1)|0)|0:32)|0}function Oo(o,l,c,d,p){o=o|0,l=l|0,c=c|0,d=d|0,p=p|0;var b=0,y=0,T=0,M=0,R=0,D=0,z=0,q=0,J=0,Q=0;if(D=o,M=l,R=M,y=c,q=d,T=q,!R)return b=(p|0)!=0,T?b?(u[p>>2]=o|0,u[p+4>>2]=l&0,q=0,p=0,ht(q|0),p|0):(q=0,p=0,ht(q|0),p|0):(b&&(u[p>>2]=(D>>>0)%(y>>>0),u[p+4>>2]=0),q=0,p=(D>>>0)/(y>>>0)>>>0,ht(q|0),p|0);b=(T|0)==0;do if(y){if(!b){if(b=(Dn(T|0)|0)-(Dn(R|0)|0)|0,b>>>0<=31){z=b+1|0,T=31-b|0,l=b-31>>31,y=z,o=D>>>(z>>>0)&l|R<<T,l=R>>>(z>>>0)&l,b=0,T=D<<T;break}return p?(u[p>>2]=o|0,u[p+4>>2]=M|l&0,q=0,p=0,ht(q|0),p|0):(q=0,p=0,ht(q|0),p|0)}if(b=y-1|0,b&y|0){T=(Dn(y|0)|0)+33-(Dn(R|0)|0)|0,Q=64-T|0,z=32-T|0,M=z>>31,J=T-32|0,l=J>>31,y=T,o=z-1>>31&R>>>(J>>>0)|(R<<z|D>>>(T>>>0))&l,l=l&R>>>(T>>>0),b=D<<Q&M,T=(R<<Q|D>>>(J>>>0))&M|D<<z&T-33>>31;break}return p|0&&(u[p>>2]=b&D,u[p+4>>2]=0),(y|0)==1?(J=M|l&0,Q=o|0|0,ht(J|0),Q|0):(Q=TA(y|0)|0,J=R>>>(Q>>>0)|0,Q=R<<32-Q|D>>>(Q>>>0)|0,ht(J|0),Q|0)}else{if(b)return p|0&&(u[p>>2]=(R>>>0)%(y>>>0),u[p+4>>2]=0),J=0,Q=(R>>>0)/(y>>>0)>>>0,ht(J|0),Q|0;if(!D)return p|0&&(u[p>>2]=0,u[p+4>>2]=(R>>>0)%(T>>>0)),J=0,Q=(R>>>0)/(T>>>0)>>>0,ht(J|0),Q|0;if(b=T-1|0,!(b&T))return p|0&&(u[p>>2]=o|0,u[p+4>>2]=b&R|l&0),J=0,Q=R>>>((TA(T|0)|0)>>>0),ht(J|0),Q|0;if(b=(Dn(T|0)|0)-(Dn(R|0)|0)|0,b>>>0<=30){l=b+1|0,T=31-b|0,y=l,o=R<<T|D>>>(l>>>0),l=R>>>(l>>>0),b=0,T=D<<T;break}return p?(u[p>>2]=o|0,u[p+4>>2]=M|l&0,J=0,Q=0,ht(J|0),Q|0):(J=0,Q=0,ht(J|0),Q|0)}while(!1);if(!y)R=T,M=0,T=0;else{z=c|0|0,D=q|d&0,R=vt(z|0,D|0,-1,-1)|0,c=V()|0,M=T,T=0;do d=M,M=b>>>31|M<<1,b=T|b<<1,d=o<<1|d>>>31|0,q=o>>>31|l<<1|0,Tn(R|0,c|0,d|0,q|0)|0,Q=V()|0,J=Q>>31|((Q|0)<0?-1:0)<<1,T=J&1,o=Tn(d|0,q|0,J&z|0,(((Q|0)<0?-1:0)>>31|((Q|0)<0?-1:0)<<1)&D|0)|0,l=V()|0,y=y-1|0;while(y|0);R=M,M=0}return y=0,p|0&&(u[p>>2]=o,u[p+4>>2]=l),J=(b|0)>>>31|(R|y)<<1|(y<<1|b>>>31)&0|M,Q=(b<<1|0)&-2|T,ht(J|0),Q|0}function Qr(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0;return R=l>>31|((l|0)<0?-1:0)<<1,M=((l|0)<0?-1:0)>>31|((l|0)<0?-1:0)<<1,b=d>>31|((d|0)<0?-1:0)<<1,p=((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1,T=Tn(R^o|0,M^l|0,R|0,M|0)|0,y=V()|0,o=b^R,l=p^M,Tn((Oo(T,y,Tn(b^c|0,p^d|0,b|0,p|0)|0,V()|0,0)|0)^o|0,(V()|0)^l|0,o|0,l|0)|0}function Ls(o,l){o=o|0,l=l|0;var c=0,d=0,p=0,b=0;return b=o&65535,p=l&65535,c=rn(p,b)|0,d=o>>>16,o=(c>>>16)+(rn(p,d)|0)|0,p=l>>>16,l=rn(p,b)|0,ht((o>>>16)+(rn(p,d)|0)+(((o&65535)+l|0)>>>16)|0),o+l<<16|c&65535|0|0}function Gn(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0;return p=o,b=c,c=Ls(p,b)|0,o=V()|0,ht((rn(l,b)|0)+(rn(d,p)|0)+o|o&0|0),c|0|0|0}function Rr(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0,y=0,T=0,M=0,R=0;return p=I,I=I+16|0,T=p|0,y=l>>31|((l|0)<0?-1:0)<<1,b=((l|0)<0?-1:0)>>31|((l|0)<0?-1:0)<<1,R=d>>31|((d|0)<0?-1:0)<<1,M=((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1,o=Tn(y^o|0,b^l|0,y|0,b|0)|0,l=V()|0,Oo(o,l,Tn(R^c|0,M^d|0,R|0,M|0)|0,V()|0,T)|0,d=Tn(u[T>>2]^y|0,u[T+4>>2]^b|0,y|0,b|0)|0,c=V()|0,I=p,ht(c|0),d|0}function Lr(o,l,c,d){o=o|0,l=l|0,c=c|0,d=d|0;var p=0,b=0;return b=I,I=I+16|0,p=b|0,Oo(o,l,c,d,p)|0,I=b,ht(u[p+4>>2]|0),u[p>>2]|0|0}function Au(o,l,c){return o=o|0,l=l|0,c=c|0,(c|0)<32?(ht(l>>c|0),o>>>c|(l&(1<<c)-1)<<32-c):(ht(((l|0)<0?-1:0)|0),l>>c-32|0)}function Re(o,l,c){return o=o|0,l=l|0,c=c|0,(c|0)<32?(ht(l>>>c|0),o>>>c|(l&(1<<c)-1)<<32-c):(ht(0),l>>>c-32|0)}function Ue(o,l,c){return o=o|0,l=l|0,c=c|0,(c|0)<32?(ht(l<<c|(o&(1<<c)-1<<32-c)>>>32-c|0),o<<c):(ht(o<<c-32|0),0)}function Di(o,l){return o=+o,l=+l,o!=o?+l:l!=l?+o:+Ii(+o,+l)}function Gi(o,l){return o=+o,l=+l,o!=o?+l:l!=l?+o:+kn(+o,+l)}function Ji(o){return o=+o,o>=0?+dn(o+.5):+mn(o-.5)}function wA(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0;if((c|0)>=8192)return Qn(o|0,l|0,c|0)|0,o|0;if(b=o|0,p=o+c|0,(o&3)==(l&3)){for(;o&3;){if(!c)return b|0;Xe[o>>0]=Xe[l>>0]|0,o=o+1|0,l=l+1|0,c=c-1|0}for(c=p&-4|0,d=c-64|0;(o|0)<=(d|0);)u[o>>2]=u[l>>2],u[o+4>>2]=u[l+4>>2],u[o+8>>2]=u[l+8>>2],u[o+12>>2]=u[l+12>>2],u[o+16>>2]=u[l+16>>2],u[o+20>>2]=u[l+20>>2],u[o+24>>2]=u[l+24>>2],u[o+28>>2]=u[l+28>>2],u[o+32>>2]=u[l+32>>2],u[o+36>>2]=u[l+36>>2],u[o+40>>2]=u[l+40>>2],u[o+44>>2]=u[l+44>>2],u[o+48>>2]=u[l+48>>2],u[o+52>>2]=u[l+52>>2],u[o+56>>2]=u[l+56>>2],u[o+60>>2]=u[l+60>>2],o=o+64|0,l=l+64|0;for(;(o|0)<(c|0);)u[o>>2]=u[l>>2],o=o+4|0,l=l+4|0}else for(c=p-4|0;(o|0)<(c|0);)Xe[o>>0]=Xe[l>>0]|0,Xe[o+1>>0]=Xe[l+1>>0]|0,Xe[o+2>>0]=Xe[l+2>>0]|0,Xe[o+3>>0]=Xe[l+3>>0]|0,o=o+4|0,l=l+4|0;for(;(o|0)<(p|0);)Xe[o>>0]=Xe[l>>0]|0,o=o+1|0,l=l+1|0;return b|0}function _i(o,l,c){o=o|0,l=l|0,c=c|0;var d=0,p=0,b=0,y=0;if(b=o+c|0,l=l&255,(c|0)>=67){for(;o&3;)Xe[o>>0]=l,o=o+1|0;for(d=b&-4|0,y=l|l<<8|l<<16|l<<24,p=d-64|0;(o|0)<=(p|0);)u[o>>2]=y,u[o+4>>2]=y,u[o+8>>2]=y,u[o+12>>2]=y,u[o+16>>2]=y,u[o+20>>2]=y,u[o+24>>2]=y,u[o+28>>2]=y,u[o+32>>2]=y,u[o+36>>2]=y,u[o+40>>2]=y,u[o+44>>2]=y,u[o+48>>2]=y,u[o+52>>2]=y,u[o+56>>2]=y,u[o+60>>2]=y,o=o+64|0;for(;(o|0)<(d|0);)u[o>>2]=y,o=o+4|0}for(;(o|0)<(b|0);)Xe[o>>0]=l,o=o+1|0;return b-c|0}function dr(o){return o=+o,o>=0?+dn(o+.5):+mn(o-.5)}function en(o){o=o|0;var l=0,c=0,d=0;return d=di()|0,c=u[zt>>2]|0,l=c+o|0,(o|0)>0&(l|0)<(c|0)|(l|0)<0?(lA(l|0)|0,zn(12),-1):(l|0)>(d|0)&&!(la(l|0)|0)?(zn(12),-1):(u[zt>>2]=l,c|0)}return{___divdi3:Qr,___muldi3:Gn,___remdi3:Rr,___uremdi3:Lr,_areNeighborCells:Wl,_bitshift64Ashr:Au,_bitshift64Lshr:Re,_bitshift64Shl:Ue,_calloc:pi,_cellAreaKm2:Nh,_cellAreaM2:Bh,_cellAreaRads2:wo,_cellToBoundary:EA,_cellToCenterChild:Yc,_cellToChildPos:qc,_cellToChildren:Oh,_cellToChildrenSize:po,_cellToLatLng:bA,_cellToLocalIj:ru,_cellToParent:jr,_cellToVertex:mi,_cellToVertexes:Rs,_cellsToDirectedEdge:yh,_cellsToLinkedMultiPolygon:vn,_childPosToCell:Zc,_compactCells:pA,_destroyLinkedMultiPolygon:Li,_directedEdgeToBoundary:fo,_directedEdgeToCells:wh,_edgeLengthKm:ef,_edgeLengthM:tf,_edgeLengthRads:Ph,_emscripten_replace_memory:ps,_free:st,_getBaseCellNumber:Kl,_getDirectedEdgeDestination:Th,_getDirectedEdgeOrigin:vh,_getHexagonAreaAvgKm2:ga,_getHexagonAreaAvgM2:nu,_getHexagonEdgeLengthAvgKm:Jc,_getHexagonEdgeLengthAvgM:xs,_getIcosahedronFaces:da,_getNumCells:To,_getPentagons:yo,_getRes0Cells:Vr,_getResolution:Hc,_greatCircleDistanceKm:xr,_greatCircleDistanceM:tu,_greatCircleDistanceRads:eu,_gridDisk:ua,_gridDiskDistances:Tr,_gridDistance:rf,_gridPathCells:pa,_gridPathCellsSize:So,_gridRingUnsafe:Le,_i64Add:vt,_i64Subtract:Tn,_isPentagon:Jt,_isResClassIII:_o,_isValidCell:mo,_isValidDirectedEdge:Vc,_isValidVertex:Af,_latLngToCell:Xc,_llvm_maxnum_f64:Di,_llvm_minnum_f64:Gi,_llvm_round_f64:Ji,_localIjToCell:Yr,_malloc:$i,_maxFaceCount:Ri,_maxGridDiskSize:uA,_maxPolygonToCellsSize:Ye,_memcpy:wA,_memset:_i,_originToDirectedEdges:xh,_pentagonCount:Wc,_polygonToCells:yn,_readInt64AsDoubleFromPointer:sf,_res0CellCount:hA,_round:dr,_sbrk:en,_sizeOfCellBoundary:ki,_sizeOfCoordIJ:Cs,_sizeOfGeoLoop:Ms,_sizeOfGeoPolygon:Mr,_sizeOfH3Index:Co,_sizeOfLatLng:Ui,_sizeOfLinkedGeoPolygon:Cr,_uncompactCells:_A,_uncompactCellsSize:Dh,_vertexToLatLng:af,establishStackSpace:_s,stackAlloc:Si,stackRestore:si,stackSave:Vl}}(hs,ds,me);e.___divdi3=Se.___divdi3,e.___muldi3=Se.___muldi3,e.___remdi3=Se.___remdi3,e.___uremdi3=Se.___uremdi3,e._areNeighborCells=Se._areNeighborCells,e._bitshift64Ashr=Se._bitshift64Ashr,e._bitshift64Lshr=Se._bitshift64Lshr,e._bitshift64Shl=Se._bitshift64Shl,e._calloc=Se._calloc,e._cellAreaKm2=Se._cellAreaKm2,e._cellAreaM2=Se._cellAreaM2,e._cellAreaRads2=Se._cellAreaRads2,e._cellToBoundary=Se._cellToBoundary,e._cellToCenterChild=Se._cellToCenterChild,e._cellToChildPos=Se._cellToChildPos,e._cellToChildren=Se._cellToChildren,e._cellToChildrenSize=Se._cellToChildrenSize,e._cellToLatLng=Se._cellToLatLng,e._cellToLocalIj=Se._cellToLocalIj,e._cellToParent=Se._cellToParent,e._cellToVertex=Se._cellToVertex,e._cellToVertexes=Se._cellToVertexes,e._cellsToDirectedEdge=Se._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=Se._cellsToLinkedMultiPolygon,e._childPosToCell=Se._childPosToCell,e._compactCells=Se._compactCells,e._destroyLinkedMultiPolygon=Se._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=Se._directedEdgeToBoundary,e._directedEdgeToCells=Se._directedEdgeToCells,e._edgeLengthKm=Se._edgeLengthKm,e._edgeLengthM=Se._edgeLengthM,e._edgeLengthRads=Se._edgeLengthRads;var sa=e._emscripten_replace_memory=Se._emscripten_replace_memory;e._free=Se._free,e._getBaseCellNumber=Se._getBaseCellNumber,e._getDirectedEdgeDestination=Se._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=Se._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=Se._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=Se._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=Se._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=Se._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=Se._getIcosahedronFaces,e._getNumCells=Se._getNumCells,e._getPentagons=Se._getPentagons,e._getRes0Cells=Se._getRes0Cells,e._getResolution=Se._getResolution,e._greatCircleDistanceKm=Se._greatCircleDistanceKm,e._greatCircleDistanceM=Se._greatCircleDistanceM,e._greatCircleDistanceRads=Se._greatCircleDistanceRads,e._gridDisk=Se._gridDisk,e._gridDiskDistances=Se._gridDiskDistances,e._gridDistance=Se._gridDistance,e._gridPathCells=Se._gridPathCells,e._gridPathCellsSize=Se._gridPathCellsSize,e._gridRingUnsafe=Se._gridRingUnsafe,e._i64Add=Se._i64Add,e._i64Subtract=Se._i64Subtract,e._isPentagon=Se._isPentagon,e._isResClassIII=Se._isResClassIII,e._isValidCell=Se._isValidCell,e._isValidDirectedEdge=Se._isValidDirectedEdge,e._isValidVertex=Se._isValidVertex,e._latLngToCell=Se._latLngToCell,e._llvm_maxnum_f64=Se._llvm_maxnum_f64,e._llvm_minnum_f64=Se._llvm_minnum_f64,e._llvm_round_f64=Se._llvm_round_f64,e._localIjToCell=Se._localIjToCell,e._malloc=Se._malloc,e._maxFaceCount=Se._maxFaceCount,e._maxGridDiskSize=Se._maxGridDiskSize,e._maxPolygonToCellsSize=Se._maxPolygonToCellsSize,e._memcpy=Se._memcpy,e._memset=Se._memset,e._originToDirectedEdges=Se._originToDirectedEdges,e._pentagonCount=Se._pentagonCount,e._polygonToCells=Se._polygonToCells,e._readInt64AsDoubleFromPointer=Se._readInt64AsDoubleFromPointer,e._res0CellCount=Se._res0CellCount,e._round=Se._round,e._sbrk=Se._sbrk,e._sizeOfCellBoundary=Se._sizeOfCellBoundary,e._sizeOfCoordIJ=Se._sizeOfCoordIJ,e._sizeOfGeoLoop=Se._sizeOfGeoLoop,e._sizeOfGeoPolygon=Se._sizeOfGeoPolygon,e._sizeOfH3Index=Se._sizeOfH3Index,e._sizeOfLatLng=Se._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=Se._sizeOfLinkedGeoPolygon,e._uncompactCells=Se._uncompactCells,e._uncompactCellsSize=Se._uncompactCellsSize,e._vertexToLatLng=Se._vertexToLatLng,e.establishStackSpace=Se.establishStackSpace;var zr=e.stackAlloc=Se.stackAlloc,Gl=e.stackRestore=Se.stackRestore,oA=e.stackSave=Se.stackSave;if(e.asm=Se,e.cwrap=K,e.setValue=L,e.getValue=B,on){no(on)||(on=A(on));{ta();var aa=function(oe){oe.byteLength&&(oe=new Uint8Array(oe)),Be.set(oe,C),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Ur()},Aa=function(){h(on,aa,function(){throw"could not load memory initializer "+on})},Gr=AA(on);if(Gr)aa(Gr.buffer);else if(e.memoryInitializerRequest){var gs=function(){var oe=e.memoryInitializerRequest,ve=oe.response;if(oe.status!==200&&oe.status!==0){var Pe=AA(e.memoryInitializerRequestURL);if(Pe)ve=Pe.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+oe.status+", retrying "+on),Aa();return}}aa(ve)};e.memoryInitializerRequest.response?setTimeout(gs,0):e.memoryInitializerRequest.addEventListener("load",gs)}else Aa()}}var ms;hi=function oe(){ms||oa(),ms||(hi=oe)};function oa(oe){if(nn>0||(kt(),nn>0))return;function ve(){ms||(ms=!0,!G&&(St(),Me(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Ge()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),ve()},1)):ve()}e.run=oa;function Xi(oe){throw e.onAbort&&e.onAbort(oe),oe+="",m(oe),_(oe),G=!0,"abort("+oe+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=Xi,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return oa(),n}(typeof Yi=="object"?Yi:{}),xt="number",ft=xt,Wu=xt,mt=xt,pt=xt,vi=xt,Ke=xt,AF=[["sizeOfH3Index",xt],["sizeOfLatLng",xt],["sizeOfCellBoundary",xt],["sizeOfGeoLoop",xt],["sizeOfGeoPolygon",xt],["sizeOfLinkedGeoPolygon",xt],["sizeOfCoordIJ",xt],["readInt64AsDoubleFromPointer",xt],["isValidCell",Wu,[mt,pt]],["latLngToCell",ft,[xt,xt,vi,Ke]],["cellToLatLng",ft,[mt,pt,Ke]],["cellToBoundary",ft,[mt,pt,Ke]],["maxGridDiskSize",ft,[xt,Ke]],["gridDisk",ft,[mt,pt,xt,Ke]],["gridDiskDistances",ft,[mt,pt,xt,Ke,Ke]],["gridRingUnsafe",ft,[mt,pt,xt,Ke]],["maxPolygonToCellsSize",ft,[Ke,vi,xt,Ke]],["polygonToCells",ft,[Ke,vi,xt,Ke]],["cellsToLinkedMultiPolygon",ft,[Ke,xt,Ke]],["destroyLinkedMultiPolygon",null,[Ke]],["compactCells",ft,[Ke,Ke,xt,xt]],["uncompactCells",ft,[Ke,xt,xt,Ke,xt,vi]],["uncompactCellsSize",ft,[Ke,xt,xt,vi,Ke]],["isPentagon",Wu,[mt,pt]],["isResClassIII",Wu,[mt,pt]],["getBaseCellNumber",xt,[mt,pt]],["getResolution",xt,[mt,pt]],["maxFaceCount",ft,[mt,pt,Ke]],["getIcosahedronFaces",ft,[mt,pt,Ke]],["cellToParent",ft,[mt,pt,vi,Ke]],["cellToChildren",ft,[mt,pt,vi,Ke]],["cellToCenterChild",ft,[mt,pt,vi,Ke]],["cellToChildrenSize",ft,[mt,pt,vi,Ke]],["cellToChildPos",ft,[mt,pt,vi,Ke]],["childPosToCell",ft,[xt,xt,mt,pt,vi,Ke]],["areNeighborCells",ft,[mt,pt,mt,pt,Ke]],["cellsToDirectedEdge",ft,[mt,pt,mt,pt,Ke]],["getDirectedEdgeOrigin",ft,[mt,pt,Ke]],["getDirectedEdgeDestination",ft,[mt,pt,Ke]],["isValidDirectedEdge",Wu,[mt,pt]],["directedEdgeToCells",ft,[mt,pt,Ke]],["originToDirectedEdges",ft,[mt,pt,Ke]],["directedEdgeToBoundary",ft,[mt,pt,Ke]],["gridDistance",ft,[mt,pt,mt,pt,Ke]],["gridPathCells",ft,[mt,pt,mt,pt,Ke]],["gridPathCellsSize",ft,[mt,pt,mt,pt,Ke]],["cellToLocalIj",ft,[mt,pt,mt,pt,xt,Ke]],["localIjToCell",ft,[mt,pt,Ke,xt,Ke]],["getHexagonAreaAvgM2",ft,[vi,Ke]],["getHexagonAreaAvgKm2",ft,[vi,Ke]],["getHexagonEdgeLengthAvgM",ft,[vi,Ke]],["getHexagonEdgeLengthAvgKm",ft,[vi,Ke]],["greatCircleDistanceM",xt,[Ke,Ke]],["greatCircleDistanceKm",xt,[Ke,Ke]],["greatCircleDistanceRads",xt,[Ke,Ke]],["cellAreaM2",ft,[mt,pt,Ke]],["cellAreaKm2",ft,[mt,pt,Ke]],["cellAreaRads2",ft,[mt,pt,Ke]],["edgeLengthM",ft,[mt,pt,Ke]],["edgeLengthKm",ft,[mt,pt,Ke]],["edgeLengthRads",ft,[mt,pt,Ke]],["getNumCells",ft,[vi,Ke]],["getRes0Cells",ft,[Ke]],["res0CellCount",xt],["getPentagons",ft,[xt,Ke]],["pentagonCount",xt],["cellToVertex",ft,[mt,pt,xt,Ke]],["cellToVertexes",ft,[mt,pt,Ke]],["vertexToLatLng",ft,[mt,pt,Ke]],["isValidVertex",Wu,[mt,pt]]],oF=0,lF=1,uF=2,cF=3,fF=4,hF=5,dF=6,gF=7,mF=8,pF=9,_F=10,bF=11,EF=12,yF=13,vF=14,TF=15,fi={};fi[oF]="Success";fi[lF]="The operation failed but a more specific error is not available";fi[uF]="Argument was outside of acceptable range";fi[cF]="Latitude or longitude arguments were outside of acceptable range";fi[fF]="Resolution argument was outside of acceptable range";fi[hF]="Cell argument was not valid";fi[dF]="Directed edge argument was not valid";fi[gF]="Undirected edge argument was not valid";fi[mF]="Vertex argument was not valid";fi[pF]="Pentagon distortion was encountered";fi[_F]="Duplicate input";fi[bF]="Cell arguments were not neighbors";fi[EF]="Cell arguments had incompatible resolutions";fi[yF]="Memory allocation failed";fi[vF]="Bounds of provided memory were insufficient";fi[TF]="Mode or flags argument was not valid";var wF=1e3,xF=1001,ww=1002,ph={};ph[wF]="Unknown unit";ph[xF]="Array length out of bounds";ph[ww]="Got unexpected null value for H3 index";var SF="Unknown error";function xw(n,e,t){var i=t&&"value"in t,s=new Error((n[e]||SF)+" (code: "+e+(i?", value: "+t.value:"")+")");return s.code=e,s}function MF(n,e){var t=arguments.length===2?{value:e}:{};return xw(fi,n,t)}function CF(n,e){var t=arguments.length===2?{value:e}:{};return xw(ph,n,t)}function Sw(n){if(n!==0)throw MF(n)}var cs={};AF.forEach(function(e){cs[e[0]]=Yi.cwrap.apply(Yi,e)});var Al=16,RF=4,Mw=8,$m=cs.sizeOfH3Index(),Cw=cs.sizeOfLatLng();cs.sizeOfCellBoundary();cs.sizeOfGeoPolygon();cs.sizeOfGeoLoop();cs.sizeOfLinkedGeoPolygon();cs.sizeOfCoordIJ();function LF(n){if(!n)throw CF(ww);return n}var OF=/[^0-9a-fA-F]/;function DF(n){if(Array.isArray(n)&&n.length===2&&Number.isInteger(n[0])&&Number.isInteger(n[1]))return n;if(typeof n!="string"||OF.test(n))return[0,0];var e=parseInt(n.substring(0,n.length-8),Al),t=parseInt(n.substring(n.length-8),Al);return[t,e]}function Xy(n){if(n>=0)return n.toString(Al);n=n&2147483647;var e=Rw(8,n.toString(Al)),t=(parseInt(e[0],Al)+8).toString(Al);return e=t+e.substring(1),e}function NF(n,e){return Xy(e)+Rw(8,Xy(n))}function Rw(n,e){for(var t=n-e.length,i="",s=0;s<t;s++)i+="0";return i=i+e,i}function BF(n,e){e===void 0&&(e=0);var t=Yi.getValue(n+$m*e,"i32"),i=Yi.getValue(n+$m*e+RF,"i32");return i?NF(t,i):null}function Wy(n){return UF(Yi.getValue(n,"double"))}function PF(n){return[Wy(n),Wy(n+Mw)]}function IF(n,e,t){var i=Yi._malloc(Cw);Yi.HEAPF64.set([n,e].map(FF),i/Mw);var s=Yi._malloc($m);try{return Sw(cs.latLngToCell(i,t,s)),LF(BF(s))}finally{Yi._free(s),Yi._free(i)}}function qy(n){var e=Yi._malloc(Cw),t=DF(n),i=t[0],s=t[1];try{return Sw(cs.cellToLatLng(i,s,e)),PF(e)}finally{Yi._free(e)}}function FF(n){return n*Math.PI/180}function UF(n){return n*180/Math.PI}function kF(n,e=1,t=20){let i=n.map(h=>({id:h.id,zoom:t,lat:+h.lat,lon:+h.lon}));const s=[];let A=null;for(let h=t-1;h>=e;h--){const m=h-4,_=i.reduce((x,S)=>{const C=IF(+S.lat,+S.lon,m);return x[C]||(x[C]=[]),x[C].push(S),x},{}),E=Object.keys(_);if(E.length<n.length&&(A===null&&(A=h+1),i=E.map(x=>{if(_[x].length===1){const S=_[x][0];return{id:`{[${S.id}:${h}]}`,zoom:h,lat:S.lat,lon:S.lon,children:[S.id]}}return{id:`{[${x}:${h}]}`,zoom:h,lat:qy(x)[0],lon:qy(x)[1],children:_[x].map(S=>S.id)}}),s.unshift({zoom:h,nodes:i})),E.length<=1)break}return s.push({zoom:A??t,nodes:n}),s}const zF="/demo/2/assets/stations-m-eNuLjO.csv",GF="/demo/2/assets/flow-C6SsNz2M.csv";let l0;async function VF(n="HCA"){return l0||(l0=await Promise.all([Qy(zF,(e,t)=>({id:e.id,name:e.name,lat:Number(e.lat),lon:Number(e.lon)})),Qy(GF,e=>({origin:e.origin,dest:e.dest,count:Number(e.count)}))]).then(([e,t])=>({locations:e,flows:t}))),{...l0,...n==="H3"?{clusterLevels:kF(l0.locations)}:null}}/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.18.2
 * @author George Michael Brower
 * @license MIT
 */class As{constructor(e,t,i,s,A="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(s),this.$name=document.createElement("div"),this.$name.classList.add("name"),As.nextNameID=As.nextNameID||0,this.$name.id=`lil-gui-name-${++As.nextNameID}`,this.$widget=document.createElement(A),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",h=>h.stopPropagation()),this.domElement.addEventListener("keyup",h=>h.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled?this:(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e),this)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class HF extends As{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Jm(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),t?"#"+t:!1}const jF={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:Jm,toHexString:Jm},yc={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},YF={isPrimitive:!1,match:n=>Array.isArray(n),fromHexString(n,e,t=1){const i=yc.fromHexString(n);e[0]=(i>>16&255)/255*t,e[1]=(i>>8&255)/255*t,e[2]=(i&255)/255*t},toHexString([n,e,t],i=1){i=255/i;const s=n*i<<16^e*i<<8^t*i<<0;return yc.toHexString(s)}},QF={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const i=yc.fromHexString(n);e.r=(i>>16&255)/255*t,e.g=(i>>8&255)/255*t,e.b=(i&255)/255*t},toHexString({r:n,g:e,b:t},i=1){i=255/i;const s=n*i<<16^e*i<<8^t*i<<0;return yc.toHexString(s)}},XF=[jF,yc,YF,QF];function WF(n){return XF.find(e=>e.match(n))}class qF extends As{constructor(e,t,i,s){super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=WF(this.initialValue),this._rgbScale=s,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const A=Jm(this.$text.value);A&&this._setValueFromHexString(A)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class cm extends As{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",s=>{s.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class ZF extends As{constructor(e,t,i,s,A,h){super(e,t,i,"number"),this._initInput(),this.min(s),this.max(A);const m=h!==void 0;this.step(m?h:this._getImplicitStep(),m),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=t*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=()=>{let Y=parseFloat(this.$input.value);isNaN(Y)||(this._stepExplicit&&(Y=this._snap(Y)),this.setValue(this._clamp(Y)))},i=Y=>{const K=parseFloat(this.$input.value);isNaN(K)||(this._snapClampSetValue(K+Y),this.$input.value=this.getValue())},s=Y=>{Y.key==="Enter"&&this.$input.blur(),Y.code==="ArrowUp"&&(Y.preventDefault(),i(this._step*this._arrowKeyMultiplier(Y))),Y.code==="ArrowDown"&&(Y.preventDefault(),i(this._step*this._arrowKeyMultiplier(Y)*-1))},A=Y=>{this._inputFocused&&(Y.preventDefault(),i(this._step*this._normalizeMouseWheel(Y)))};let h=!1,m,_,E,x,S;const C=5,L=Y=>{m=Y.clientX,_=E=Y.clientY,h=!0,x=this.getValue(),S=0,window.addEventListener("mousemove",B),window.addEventListener("mouseup",G)},B=Y=>{if(h){const K=Y.clientX-m,ee=Y.clientY-_;Math.abs(ee)>C?(Y.preventDefault(),this.$input.blur(),h=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(K)>C&&G()}if(!h){const K=Y.clientY-E;S-=K*this._step*this._arrowKeyMultiplier(Y),x+S>this._max?S=this._max-x:x+S<this._min&&(S=this._min-x),this._snapClampSetValue(x+S)}E=Y.clientY},G=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",G)},j=()=>{this._inputFocused=!0},H=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",t),this.$input.addEventListener("keydown",s),this.$input.addEventListener("wheel",A,{passive:!1}),this.$input.addEventListener("mousedown",L),this.$input.addEventListener("focus",j),this.$input.addEventListener("blur",H)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=(H,Y,K,ee,Z)=>(H-Y)/(K-Y)*(Z-ee)+ee,t=H=>{const Y=this.$slider.getBoundingClientRect();let K=e(H,Y.left,Y.right,this._min,this._max);this._snapClampSetValue(K)},i=H=>{this._setDraggingStyle(!0),t(H.clientX),window.addEventListener("mousemove",s),window.addEventListener("mouseup",A)},s=H=>{t(H.clientX)},A=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",A)};let h=!1,m,_;const E=H=>{H.preventDefault(),this._setDraggingStyle(!0),t(H.touches[0].clientX),h=!1},x=H=>{H.touches.length>1||(this._hasScrollBar?(m=H.touches[0].clientX,_=H.touches[0].clientY,h=!0):E(H),window.addEventListener("touchmove",S,{passive:!1}),window.addEventListener("touchend",C))},S=H=>{if(h){const Y=H.touches[0].clientX-m,K=H.touches[0].clientY-_;Math.abs(Y)>Math.abs(K)?E(H):(window.removeEventListener("touchmove",S),window.removeEventListener("touchend",C))}else H.preventDefault(),t(H.touches[0].clientX)},C=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",C)},L=this._callOnFinishChange.bind(this),B=400;let G;const j=H=>{if(Math.abs(H.deltaX)<Math.abs(H.deltaY)&&this._hasScrollBar)return;H.preventDefault();const K=this._normalizeMouseWheel(H)*this._step;this._snapClampSetValue(this.getValue()+K),this.$input.value=this.getValue(),clearTimeout(G),G=setTimeout(L,B)};this.$slider.addEventListener("mousedown",i),this.$slider.addEventListener("touchstart",x,{passive:!1}),this.$slider.addEventListener("wheel",j,{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class KF extends As{constructor(e,t,i,s){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(s)?s:Object.values(s),this._names=Array.isArray(s)?s:Object.keys(s),this._names.forEach(A=>{const h=document.createElement("option");h.innerHTML=A,this.$select.appendChild(h)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=t===-1?e:this._names[t],this}}class $F extends As{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",s=>{s.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const JF=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  background-color: var(--background-color);
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean .widget {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background-color: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background-color: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background-color: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui input {
  -webkit-tap-highlight-color: transparent;
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input::-webkit-outer-spin-button,
.lil-gui input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.lil-gui input[type=number] {
  -moz-appearance: textfield;
}
.lil-gui input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  height: var(--checkbox-size);
  width: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: 1px solid var(--widget-color);
  text-align: center;
  line-height: calc(var(--widget-height) - 4px);
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
    border-color: var(--hover-color);
  }
  .lil-gui button:focus {
    border-color: var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function eU(n){const e=document.createElement("style");e.innerHTML=n;const t=document.querySelector("head link[rel=stylesheet], head style");t?document.head.insertBefore(e,t):document.head.appendChild(e)}let Zy=!1;class Wp{constructor({parent:e,autoPlace:t=e===void 0,container:i,width:s,title:A="Controls",closeFolders:h=!1,injectStyles:m=!0,touchStyles:_=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",E=>{(E.code==="Enter"||E.code==="Space")&&(E.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(A),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),_&&this.domElement.classList.add("allow-touch-styles"),!Zy&&m&&(eU(JF),Zy=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),s&&this.domElement.style.setProperty("--width",s+"px"),this._closeFolders=h}add(e,t,i,s,A){if(Object(i)===i)return new KF(this,e,t,i);const h=e[t];switch(typeof h){case"number":return new ZF(this,e,t,i,s,A);case"boolean":return new HF(this,e,t);case"string":return new $F(this,e,t);case"function":return new cm(this,e,t)}console.error(`gui.add failed
	property:`,t,`
	object:`,e,`
	value:`,h)}addColor(e,t,i=1){return new qF(this,e,t,i)}addFolder(e){const t=new Wp({parent:this,title:e});return this.root._closeFolders&&t.close(),t}load(e,t=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof cm||i._name in e.controllers&&i.load(e.controllers[i._name])}),t&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof cm)){if(i._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);t.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);t.folders[i._title]=i.save()}),t}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const i=A=>{A.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const s=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=s+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(i=>i.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),this._onOpenClose!==void 0&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}function tU(n,e){const[t,i]=ze.useState(n),s=ze.useRef();return ze.useEffect(()=>{const A=new Wp;e(A);const h=A.controllersRecursive();for(const m in n)if(n[m]){if(h.find(E=>E._name===m))continue;const _=[n,m];A.add.apply(A,_)}return A.onChange(m=>{i(_=>({..._,[m.property]:m.value}))}),s.current=A,()=>{A.destroy()}},[n,e]),t}const Jn={darkMode:!0,colorScheme:"Teal",highlightColor:"#ff9b29",opacity:1,fadeEnabled:Hn.defaultProps.fadeEnabled,fadeOpacityEnabled:Hn.defaultProps.fadeOpacityEnabled,fadeAmount:Hn.defaultProps.fadeAmount,clusteringEnabled:Hn.defaultProps.clusteringEnabled,clusteringAuto:Hn.defaultProps.clusteringAuto,clusteringLevel:5,clusteringMethod:"HCA",animationEnabled:Hn.defaultProps.animationEnabled,adaptiveScalesEnabled:Hn.defaultProps.adaptiveScalesEnabled,locationsEnabled:Hn.defaultProps.locationsEnabled,locationTotalsEnabled:Hn.defaultProps.locationTotalsEnabled,locationLabelsEnabled:Hn.defaultProps.locationLabelsEnabled,maxTopFlowsDisplayNum:Hn.defaultProps.maxTopFlowsDisplayNum},nU=n=>{n.add(Jn,"darkMode"),n.add(Jn,"colorScheme",Object.keys(iw)),n.addColor(Jn,"highlightColor"),n.add(Jn,"animationEnabled"),n.add(Jn,"adaptiveScalesEnabled"),n.add(Jn,"locationsEnabled"),n.add(Jn,"locationTotalsEnabled"),n.add(Jn,"locationLabelsEnabled"),n.add(Jn,"maxTopFlowsDisplayNum").min(0).max(1e4).step(10).enable(Hn.defaultProps.maxTopFlowsDisplayNum),n.add(Jn,"opacity",0,1);const e=n.addFolder("Fade"),t=e.add(Jn,"fadeEnabled"),i=e.add(Jn,"fadeOpacityEnabled").enable(Hn.defaultProps.fadeEnabled),s=e.add(Jn,"fadeAmount").min(0).max(100).enable(Hn.defaultProps.fadeEnabled);t.onChange(x=>{s.enable(x),i.enable(x)});const A=n.addFolder("Clustering"),h=A.add(Jn,"clusteringEnabled"),m=A.add(Jn,"clusteringMethod",["HCA","H3"]).enable(Hn.defaultProps.clusteringEnabled),_=A.add(Jn,"clusteringAuto"),E=A.add(Jn,"clusteringLevel").min(0).max(20).step(1).enable(!Hn.defaultProps.clusteringAuto);h.onChange(x=>{_.enable(x),m.enable(x),E.enable(x&&!h.object.clusteringAuto)}),_.enable(Hn.defaultProps.clusteringEnabled).onChange(x=>{E.enable(!x)})},iU="pk.eyJ1IjoicHpxMTIzNDU2IiwiYSI6ImNtNXF2Y2oyeDAzcGQyanNjZGsxeWVrZWkifQ.FZgqOwMoXIC9JikDEXu-QQ",Lw="mapbox://styles/mapbox/streets-v11",rU=Lw;function sU(){const n=tU(Jn,nU),[e,t]=ze.useState(),[i,s]=ze.useState(),[A,h]=ze.useState();ze.useEffect(()=>{(async()=>s(await VF(n.clusteringMethod)))()},[n.clusteringMethod]),ze.useEffect(()=>{if(!e&&(i!=null&&i.locations)){const[E,x]=[globalThis.innerWidth,globalThis.innerHeight],S=yw(i.locations,C=>[C.lon,C.lat],[E,x]);t({...S,latitude:S.latitude-.02,zoom:S.zoom+1,width:E,height:x})}},[i]);const m=({viewState:E})=>{t(E),h(void 0)},_=[];return i&&_.push(new Hn({id:"my-flowmap-layer",data:i,opacity:n.opacity,pickable:!0,darkMode:n.darkMode,colorScheme:n.colorScheme,fadeAmount:n.fadeAmount,fadeEnabled:n.fadeEnabled,fadeOpacityEnabled:n.fadeOpacityEnabled,locationsEnabled:n.locationsEnabled,locationTotalsEnabled:n.locationTotalsEnabled,locationLabelsEnabled:n.locationLabelsEnabled,animationEnabled:n.animationEnabled,clusteringEnabled:n.clusteringEnabled,clusteringAuto:n.clusteringAuto,clusteringLevel:n.clusteringLevel,adaptiveScalesEnabled:n.adaptiveScalesEnabled,highlightColor:n.highlightColor,maxTopFlowsDisplayNum:n.maxTopFlowsDisplayNum,getLocationId:E=>E.id,getLocationLat:E=>E.lat,getLocationLon:E=>E.lon,getFlowOriginId:E=>E.origin,getLocationName:E=>E.name,getFlowDestId:E=>E.dest,getFlowMagnitude:E=>E.count,onHover:E=>h(aU(E)),onClick:E=>{var x;return console.log("clicked",(x=E.object)==null?void 0:x.type,E.object,E)}})),e?Ti.jsxs("div",{className:`flowmap-container ${n.darkMode?"dark":"light"}`,style:{position:"relative"},children:[Ti.jsx(U3,{width:"100%",height:"100%",initialViewState:e,onViewStateChange:m,controller:!0,layers:_,style:{mixBlendMode:n.darkMode?"screen":"darken"},children:Ti.jsx(KI,{mapboxAccessToken:iU,mapStyle:n.darkMode?rU:Lw})}),A&&Ti.jsx("div",{className:"tooltip",style:A.position,children:A.content})]}):null}function aU(n){if(!n)return;const{x:e,y:t,object:i}=n,s={left:e,top:t};switch(i==null?void 0:i.type){case Ol.LOCATION:return{position:s,content:Ti.jsxs(Ti.Fragment,{children:[Ti.jsx("div",{children:i.name}),Ti.jsxs("div",{children:["Incoming trips: ",i.totals.incomingCount]}),Ti.jsxs("div",{children:["Outgoing trips: ",i.totals.outgoingCount]}),Ti.jsxs("div",{children:["Internal or round trips: ",i.totals.internalCount]})]})};case Ol.FLOW:return{position:s,content:Ti.jsxs(Ti.Fragment,{children:[Ti.jsxs("div",{children:[i.origin.id,"  ",i.dest.id]}),Ti.jsx("div",{children:i.count})]})}}}Z4.createRoot(document.getElementById("root")).render(Ti.jsx(H4.StrictMode,{children:Ti.jsx(sU,{})}));export{ep as g};
